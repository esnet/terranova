var J7=Object.defineProperty;var X7=(e,t,n)=>t in e?J7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Q7=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Po=(e,t,n)=>(X7(e,typeof t!="symbol"?t+"":t,n),n);import"/static/d3.min.js";import{OIDC_AUTHORITY as eI,OIDC_CLIENT_ID as tI,OIDC_REDIRECT_URI as nI,OIDC_LOGOUT_REDIRECT_URI as rI,AUTH_BACKEND as uo,AUTH_SESSION_STORAGE as y5,API_URL as Dt,READ_SCOPE as Pf,CACHE_DURATION_IN_SECONDS as HS,PUBLISH_SCOPE as nw,ADMIN_SCOPE as w5,TOOLTIP_TTL as Zw,READ_WRITE_SCOPE as Lv,LAYER_LIMIT as iI,GOOGLE_SHEETS_CREDENTIAL_SOURCE as Yk}from"../static/settings.js";var w$=Q7((PC,IC)=>{function b5(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in e)){const f=Object.getOwnPropertyDescriptor(o,s);f&&Object.defineProperty(e,s,f.get?f:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(s){if(s.ep)return;s.ep=!0;const f=n(s);fetch(s.href,f)}})();var Xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),n}var x5={exports:{}},qw={},S5={exports:{}},wn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0=Symbol.for("react.element"),aI=Symbol.for("react.portal"),sI=Symbol.for("react.fragment"),lI=Symbol.for("react.strict_mode"),uI=Symbol.for("react.profiler"),cI=Symbol.for("react.provider"),fI=Symbol.for("react.context"),dI=Symbol.for("react.forward_ref"),hI=Symbol.for("react.suspense"),pI=Symbol.for("react.memo"),mI=Symbol.for("react.lazy"),Kk=Symbol.iterator;function gI(e){return e===null||typeof e!="object"?null:(e=Kk&&e[Kk]||e["@@iterator"],typeof e=="function"?e:null)}var E5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T5=Object.assign,C5={};function Lp(e,t,n){this.props=e,this.context=t,this.refs=C5,this.updater=n||E5}Lp.prototype.isReactComponent={};Lp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Lp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function k5(){}k5.prototype=Lp.prototype;function uT(e,t,n){this.props=e,this.context=t,this.refs=C5,this.updater=n||E5}var cT=uT.prototype=new k5;cT.constructor=uT;T5(cT,Lp.prototype);cT.isPureReactComponent=!0;var Jk=Array.isArray,A5=Object.prototype.hasOwnProperty,fT={current:null},M5={key:!0,ref:!0,__self:!0,__source:!0};function N5(e,t,n){var o,s={},f=null,g=null;if(t!=null)for(o in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(f=""+t.key),t)A5.call(t,o)&&!M5.hasOwnProperty(o)&&(s[o]=t[o]);var w=arguments.length-2;if(w===1)s.children=n;else if(1<w){for(var y=Array(w),E=0;E<w;E++)y[E]=arguments[E+2];s.children=y}if(e&&e.defaultProps)for(o in w=e.defaultProps,w)s[o]===void 0&&(s[o]=w[o]);return{$$typeof:d0,type:e,key:f,ref:g,props:s,_owner:fT.current}}function vI(e,t){return{$$typeof:d0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dT(e){return typeof e=="object"&&e!==null&&e.$$typeof===d0}function _I(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xk=/\/+/g;function tS(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_I(""+e.key):t.toString(36)}function Dy(e,t,n,o,s){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case d0:case aI:g=!0}}if(g)return g=e,s=s(g),e=o===""?"."+tS(g,0):o,Jk(s)?(n="",e!=null&&(n=e.replace(Xk,"$&/")+"/"),Dy(s,t,n,"",function(E){return E})):s!=null&&(dT(s)&&(s=vI(s,n+(!s.key||g&&g.key===s.key?"":(""+s.key).replace(Xk,"$&/")+"/")+e)),t.push(s)),1;if(g=0,o=o===""?".":o+":",Jk(e))for(var w=0;w<e.length;w++){f=e[w];var y=o+tS(f,w);g+=Dy(f,t,n,y,s)}else if(y=gI(e),typeof y=="function")for(e=y.call(e),w=0;!(f=e.next()).done;)f=f.value,y=o+tS(f,w++),g+=Dy(f,t,n,y,s);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function fy(e,t,n){if(e==null)return e;var o=[],s=0;return Dy(e,o,"","",function(f){return t.call(n,f,s++)}),o}function yI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var po={current:null},zy={transition:null},wI={ReactCurrentDispatcher:po,ReactCurrentBatchConfig:zy,ReactCurrentOwner:fT};wn.Children={map:fy,forEach:function(e,t,n){fy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fy(e,function(){t++}),t},toArray:function(e){return fy(e,function(t){return t})||[]},only:function(e){if(!dT(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};wn.Component=Lp;wn.Fragment=sI;wn.Profiler=uI;wn.PureComponent=uT;wn.StrictMode=lI;wn.Suspense=hI;wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wI;wn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=T5({},e.props),s=e.key,f=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,g=fT.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var w=e.type.defaultProps;for(y in t)A5.call(t,y)&&!M5.hasOwnProperty(y)&&(o[y]=t[y]===void 0&&w!==void 0?w[y]:t[y])}var y=arguments.length-2;if(y===1)o.children=n;else if(1<y){w=Array(y);for(var E=0;E<y;E++)w[E]=arguments[E+2];o.children=w}return{$$typeof:d0,type:e.type,key:s,ref:f,props:o,_owner:g}};wn.createContext=function(e){return e={$$typeof:fI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cI,_context:e},e.Consumer=e};wn.createElement=N5;wn.createFactory=function(e){var t=N5.bind(null,e);return t.type=e,t};wn.createRef=function(){return{current:null}};wn.forwardRef=function(e){return{$$typeof:dI,render:e}};wn.isValidElement=dT;wn.lazy=function(e){return{$$typeof:mI,_payload:{_status:-1,_result:e},_init:yI}};wn.memo=function(e,t){return{$$typeof:pI,type:e,compare:t===void 0?null:t}};wn.startTransition=function(e){var t=zy.transition;zy.transition={};try{e()}finally{zy.transition=t}};wn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};wn.useCallback=function(e,t){return po.current.useCallback(e,t)};wn.useContext=function(e){return po.current.useContext(e)};wn.useDebugValue=function(){};wn.useDeferredValue=function(e){return po.current.useDeferredValue(e)};wn.useEffect=function(e,t){return po.current.useEffect(e,t)};wn.useId=function(){return po.current.useId()};wn.useImperativeHandle=function(e,t,n){return po.current.useImperativeHandle(e,t,n)};wn.useInsertionEffect=function(e,t){return po.current.useInsertionEffect(e,t)};wn.useLayoutEffect=function(e,t){return po.current.useLayoutEffect(e,t)};wn.useMemo=function(e,t){return po.current.useMemo(e,t)};wn.useReducer=function(e,t,n){return po.current.useReducer(e,t,n)};wn.useRef=function(e){return po.current.useRef(e)};wn.useState=function(e){return po.current.useState(e)};wn.useSyncExternalStore=function(e,t,n){return po.current.useSyncExternalStore(e,t,n)};wn.useTransition=function(){return po.current.useTransition()};wn.version="18.2.0";S5.exports=wn;var J=S5.exports;const so=Kf(J),bI=b5({__proto__:null,default:so},[J]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI=J,SI=Symbol.for("react.element"),EI=Symbol.for("react.fragment"),TI=Object.prototype.hasOwnProperty,CI=xI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kI={key:!0,ref:!0,__self:!0,__source:!0};function L5(e,t,n){var o,s={},f=null,g=null;n!==void 0&&(f=""+n),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(g=t.ref);for(o in t)TI.call(t,o)&&!kI.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)s[o]===void 0&&(s[o]=t[o]);return{$$typeof:SI,type:e,key:f,ref:g,props:s,_owner:CI.current}}qw.Fragment=EI;qw.jsx=L5;qw.jsxs=L5;x5.exports=qw;var hT=x5.exports;const Wn=hT.Fragment,S=hT.jsx,te=hT.jsxs;var WS={},P5={exports:{}},oa={},I5={exports:{}},O5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Le,Ye){var Ze=Le.length;Le.push(Ye);e:for(;0<Ze;){var ut=Ze-1>>>1,Qe=Le[ut];if(0<s(Qe,Ye))Le[ut]=Ye,Le[Ze]=Qe,Ze=ut;else break e}}function n(Le){return Le.length===0?null:Le[0]}function o(Le){if(Le.length===0)return null;var Ye=Le[0],Ze=Le.pop();if(Ze!==Ye){Le[0]=Ze;e:for(var ut=0,Qe=Le.length,bn=Qe>>>1;ut<bn;){var At=2*(ut+1)-1,hn=Le[At],vt=At+1,xt=Le[vt];if(0>s(hn,Ze))vt<Qe&&0>s(xt,hn)?(Le[ut]=xt,Le[vt]=Ze,ut=vt):(Le[ut]=hn,Le[At]=Ze,ut=At);else if(vt<Qe&&0>s(xt,Ze))Le[ut]=xt,Le[vt]=Ze,ut=vt;else break e}}return Ye}function s(Le,Ye){var Ze=Le.sortIndex-Ye.sortIndex;return Ze!==0?Ze:Le.id-Ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,w=g.now();e.unstable_now=function(){return g.now()-w}}var y=[],E=[],M=1,N=null,R=3,F=!1,$=!1,V=!1,X=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(Le){for(var Ye=n(E);Ye!==null;){if(Ye.callback===null)o(E);else if(Ye.startTime<=Le)o(E),Ye.sortIndex=Ye.expirationTime,t(y,Ye);else break;Ye=n(E)}}function H(Le){if(V=!1,z(Le),!$)if(n(y)!==null)$=!0,ot(se);else{var Ye=n(E);Ye!==null&&Je(H,Ye.startTime-Le)}}function se(Le,Ye){$=!1,V&&(V=!1,Z(ge),ge=-1),F=!0;var Ze=R;try{for(z(Ye),N=n(y);N!==null&&(!(N.expirationTime>Ye)||Le&&!Ue());){var ut=N.callback;if(typeof ut=="function"){N.callback=null,R=N.priorityLevel;var Qe=ut(N.expirationTime<=Ye);Ye=e.unstable_now(),typeof Qe=="function"?N.callback=Qe:N===n(y)&&o(y),z(Ye)}else o(y);N=n(y)}if(N!==null)var bn=!0;else{var At=n(E);At!==null&&Je(H,At.startTime-Ye),bn=!1}return bn}finally{N=null,R=Ze,F=!1}}var he=!1,pe=null,ge=-1,ke=5,be=-1;function Ue(){return!(e.unstable_now()-be<ke)}function it(){if(pe!==null){var Le=e.unstable_now();be=Le;var Ye=!0;try{Ye=pe(!0,Le)}finally{Ye?Xe():(he=!1,pe=null)}}else he=!1}var Xe;if(typeof D=="function")Xe=function(){D(it)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Fe=Te.port2;Te.port1.onmessage=it,Xe=function(){Fe.postMessage(null)}}else Xe=function(){X(it,0)};function ot(Le){pe=Le,he||(he=!0,Xe())}function Je(Le,Ye){ge=X(function(){Le(e.unstable_now())},Ye)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Le){Le.callback=null},e.unstable_continueExecution=function(){$||F||($=!0,ot(se))},e.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<Le?Math.floor(1e3/Le):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return n(y)},e.unstable_next=function(Le){switch(R){case 1:case 2:case 3:var Ye=3;break;default:Ye=R}var Ze=R;R=Ye;try{return Le()}finally{R=Ze}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Le,Ye){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var Ze=R;R=Le;try{return Ye()}finally{R=Ze}},e.unstable_scheduleCallback=function(Le,Ye,Ze){var ut=e.unstable_now();switch(typeof Ze=="object"&&Ze!==null?(Ze=Ze.delay,Ze=typeof Ze=="number"&&0<Ze?ut+Ze:ut):Ze=ut,Le){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Ze+Qe,Le={id:M++,callback:Ye,priorityLevel:Le,startTime:Ze,expirationTime:Qe,sortIndex:-1},Ze>ut?(Le.sortIndex=Ze,t(E,Le),n(y)===null&&Le===n(E)&&(V?(Z(ge),ge=-1):V=!0,Je(H,Ze-ut))):(Le.sortIndex=Qe,t(y,Le),$||F||($=!0,ot(se))),Le},e.unstable_shouldYield=Ue,e.unstable_wrapCallback=function(Le){var Ye=R;return function(){var Ze=R;R=Ye;try{return Le.apply(this,arguments)}finally{R=Ze}}}})(O5);I5.exports=O5;var AI=I5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R5=J,ra=AI;function qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D5=new Set,Gv={};function Jf(e,t){vp(e,t),vp(e+"Capture",t)}function vp(e,t){for(Gv[e]=t,e=0;e<t.length;e++)D5.add(t[e])}var Rl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),VS=Object.prototype.hasOwnProperty,MI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qk={},e4={};function NI(e){return VS.call(e4,e)?!0:VS.call(Qk,e)?!1:MI.test(e)?e4[e]=!0:(Qk[e]=!0,!1)}function LI(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function PI(e,t,n,o){if(t===null||typeof t>"u"||LI(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mo(e,t,n,o,s,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var Bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bi[e]=new mo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bi[t]=new mo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bi[e]=new mo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bi[e]=new mo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bi[e]=new mo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bi[e]=new mo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bi[e]=new mo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bi[e]=new mo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bi[e]=new mo(e,5,!1,e.toLowerCase(),null,!1,!1)});var pT=/[\-:]([a-z])/g;function mT(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(pT,mT);Bi[t]=new mo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(pT,mT);Bi[t]=new mo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(pT,mT);Bi[t]=new mo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bi[e]=new mo(e,1,!1,e.toLowerCase(),null,!1,!1)});Bi.xlinkHref=new mo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bi[e]=new mo(e,1,!1,e.toLowerCase(),null,!0,!0)});function gT(e,t,n,o){var s=Bi.hasOwnProperty(t)?Bi[t]:null;(s!==null?s.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(PI(t,n,s,o)&&(n=null),o||s===null?NI(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,o=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var Bl=R5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dy=Symbol.for("react.element"),Zh=Symbol.for("react.portal"),qh=Symbol.for("react.fragment"),vT=Symbol.for("react.strict_mode"),ZS=Symbol.for("react.profiler"),z5=Symbol.for("react.provider"),U5=Symbol.for("react.context"),_T=Symbol.for("react.forward_ref"),qS=Symbol.for("react.suspense"),GS=Symbol.for("react.suspense_list"),yT=Symbol.for("react.memo"),$u=Symbol.for("react.lazy"),F5=Symbol.for("react.offscreen"),t4=Symbol.iterator;function ov(e){return e===null||typeof e!="object"?null:(e=t4&&e[t4]||e["@@iterator"],typeof e=="function"?e:null)}var wr=Object.assign,nS;function Tv(e){if(nS===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nS=t&&t[1]||""}return`
`+nS+e}var rS=!1;function iS(e,t){if(!e||rS)return"";rS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var o=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){o=E}e.call(t.prototype)}else{try{throw Error()}catch(E){o=E}e()}}catch(E){if(E&&o&&typeof E.stack=="string"){for(var s=E.stack.split(`
`),f=o.stack.split(`
`),g=s.length-1,w=f.length-1;1<=g&&0<=w&&s[g]!==f[w];)w--;for(;1<=g&&0<=w;g--,w--)if(s[g]!==f[w]){if(g!==1||w!==1)do if(g--,w--,0>w||s[g]!==f[w]){var y=`
`+s[g].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=g&&0<=w);break}}}finally{rS=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Tv(e):""}function II(e){switch(e.tag){case 5:return Tv(e.type);case 16:return Tv("Lazy");case 13:return Tv("Suspense");case 19:return Tv("SuspenseList");case 0:case 2:case 15:return e=iS(e.type,!1),e;case 11:return e=iS(e.type.render,!1),e;case 1:return e=iS(e.type,!0),e;default:return""}}function YS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qh:return"Fragment";case Zh:return"Portal";case ZS:return"Profiler";case vT:return"StrictMode";case qS:return"Suspense";case GS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case U5:return(e.displayName||"Context")+".Consumer";case z5:return(e._context.displayName||"Context")+".Provider";case _T:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yT:return t=e.displayName||null,t!==null?t:YS(e.type)||"Memo";case $u:t=e._payload,e=e._init;try{return YS(e(t))}catch{}}return null}function OI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return YS(t);case 8:return t===vT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ic(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function B5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function RI(e){var t=B5(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(g){o=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hy(e){e._valueTracker||(e._valueTracker=RI(e))}function $5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=B5(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function rw(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function KS(e,t){var n=t.checked;return wr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function n4(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=ic(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function j5(e,t){t=t.checked,t!=null&&gT(e,"checked",t,!1)}function JS(e,t){j5(e,t);var n=ic(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?XS(e,t.type,n):t.hasOwnProperty("defaultValue")&&XS(e,t.type,ic(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function r4(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function XS(e,t,n){(t!=="number"||rw(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Cv=Array.isArray;function sp(e,t,n,o){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&o&&(e[n].defaultSelected=!0)}else{for(n=""+ic(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,o&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function QS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qe(91));return wr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function i4(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(qe(92));if(Cv(n)){if(1<n.length)throw Error(qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ic(n)}}function H5(e,t){var n=ic(t.value),o=ic(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function o4(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function W5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?W5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var py,V5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(py=py||document.createElement("div"),py.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=py.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yv(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DI=["Webkit","ms","Moz","O"];Object.keys(Pv).forEach(function(e){DI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pv[t]=Pv[e]})});function Z5(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pv.hasOwnProperty(e)&&Pv[e]?(""+t).trim():t+"px"}function q5(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,s=Z5(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,s):e[n]=s}}var zI=wr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tE(e,t){if(t){if(zI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qe(62))}}function nE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rE=null;function wT(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var iE=null,lp=null,up=null;function a4(e){if(e=m0(e)){if(typeof iE!="function")throw Error(qe(280));var t=e.stateNode;t&&(t=Xw(t),iE(e.stateNode,e.type,t))}}function G5(e){lp?up?up.push(e):up=[e]:lp=e}function Y5(){if(lp){var e=lp,t=up;if(up=lp=null,a4(e),t)for(e=0;e<t.length;e++)a4(t[e])}}function K5(e,t){return e(t)}function J5(){}var oS=!1;function X5(e,t,n){if(oS)return e(t,n);oS=!0;try{return K5(e,t,n)}finally{oS=!1,(lp!==null||up!==null)&&(J5(),Y5())}}function Kv(e,t){var n=e.stateNode;if(n===null)return null;var o=Xw(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(qe(231,t,typeof n));return n}var oE=!1;if(Rl)try{var av={};Object.defineProperty(av,"passive",{get:function(){oE=!0}}),window.addEventListener("test",av,av),window.removeEventListener("test",av,av)}catch{oE=!1}function UI(e,t,n,o,s,f,g,w,y){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(M){this.onError(M)}}var Iv=!1,iw=null,ow=!1,aE=null,FI={onError:function(e){Iv=!0,iw=e}};function BI(e,t,n,o,s,f,g,w,y){Iv=!1,iw=null,UI.apply(FI,arguments)}function $I(e,t,n,o,s,f,g,w,y){if(BI.apply(this,arguments),Iv){if(Iv){var E=iw;Iv=!1,iw=null}else throw Error(qe(198));ow||(ow=!0,aE=E)}}function Xf(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Q5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function s4(e){if(Xf(e)!==e)throw Error(qe(188))}function jI(e){var t=e.alternate;if(!t){if(t=Xf(e),t===null)throw Error(qe(188));return t!==e?null:e}for(var n=e,o=t;;){var s=n.return;if(s===null)break;var f=s.alternate;if(f===null){if(o=s.return,o!==null){n=o;continue}break}if(s.child===f.child){for(f=s.child;f;){if(f===n)return s4(s),e;if(f===o)return s4(s),t;f=f.sibling}throw Error(qe(188))}if(n.return!==o.return)n=s,o=f;else{for(var g=!1,w=s.child;w;){if(w===n){g=!0,n=s,o=f;break}if(w===o){g=!0,o=s,n=f;break}w=w.sibling}if(!g){for(w=f.child;w;){if(w===n){g=!0,n=f,o=s;break}if(w===o){g=!0,o=f,n=s;break}w=w.sibling}if(!g)throw Error(qe(189))}}if(n.alternate!==o)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?e:t}function eM(e){return e=jI(e),e!==null?tM(e):null}function tM(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tM(e);if(t!==null)return t;e=e.sibling}return null}var nM=ra.unstable_scheduleCallback,l4=ra.unstable_cancelCallback,HI=ra.unstable_shouldYield,WI=ra.unstable_requestPaint,zr=ra.unstable_now,VI=ra.unstable_getCurrentPriorityLevel,bT=ra.unstable_ImmediatePriority,rM=ra.unstable_UserBlockingPriority,aw=ra.unstable_NormalPriority,ZI=ra.unstable_LowPriority,iM=ra.unstable_IdlePriority,Gw=null,zs=null;function qI(e){if(zs&&typeof zs.onCommitFiberRoot=="function")try{zs.onCommitFiberRoot(Gw,e,void 0,(e.current.flags&128)===128)}catch{}}var as=Math.clz32?Math.clz32:KI,GI=Math.log,YI=Math.LN2;function KI(e){return e>>>=0,e===0?32:31-(GI(e)/YI|0)|0}var my=64,gy=4194304;function kv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sw(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,s=e.suspendedLanes,f=e.pingedLanes,g=n&268435455;if(g!==0){var w=g&~s;w!==0?o=kv(w):(f&=g,f!==0&&(o=kv(f)))}else g=n&~s,g!==0?o=kv(g):f!==0&&(o=kv(f));if(o===0)return 0;if(t!==0&&t!==o&&!(t&s)&&(s=o&-o,f=t&-t,s>=f||s===16&&(f&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-as(t),s=1<<n,o|=e[n],t&=~s;return o}function JI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XI(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,s=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-as(f),w=1<<g,y=s[g];y===-1?(!(w&n)||w&o)&&(s[g]=JI(w,t)):y<=t&&(e.expiredLanes|=w),f&=~w}}function sE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oM(){var e=my;return my<<=1,!(my&4194240)&&(my=64),e}function aS(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function h0(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-as(t),e[t]=n}function QI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-as(n),f=1<<s;t[s]=0,o[s]=-1,e[s]=-1,n&=~f}}function xT(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-as(n),s=1<<o;s&t|e[o]&t&&(e[o]|=t),n&=~s}}var jn=0;function aM(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sM,ST,lM,uM,cM,lE=!1,vy=[],Yu=null,Ku=null,Ju=null,Jv=new Map,Xv=new Map,Wu=[],eO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u4(e,t){switch(e){case"focusin":case"focusout":Yu=null;break;case"dragenter":case"dragleave":Ku=null;break;case"mouseover":case"mouseout":Ju=null;break;case"pointerover":case"pointerout":Jv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xv.delete(t.pointerId)}}function sv(e,t,n,o,s,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:f,targetContainers:[s]},t!==null&&(t=m0(t),t!==null&&ST(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function tO(e,t,n,o,s){switch(t){case"focusin":return Yu=sv(Yu,e,t,n,o,s),!0;case"dragenter":return Ku=sv(Ku,e,t,n,o,s),!0;case"mouseover":return Ju=sv(Ju,e,t,n,o,s),!0;case"pointerover":var f=s.pointerId;return Jv.set(f,sv(Jv.get(f)||null,e,t,n,o,s)),!0;case"gotpointercapture":return f=s.pointerId,Xv.set(f,sv(Xv.get(f)||null,e,t,n,o,s)),!0}return!1}function fM(e){var t=If(e.target);if(t!==null){var n=Xf(t);if(n!==null){if(t=n.tag,t===13){if(t=Q5(n),t!==null){e.blockedOn=t,cM(e.priority,function(){lM(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=uE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);rE=o,n.target.dispatchEvent(o),rE=null}else return t=m0(n),t!==null&&ST(t),e.blockedOn=n,!1;t.shift()}return!0}function c4(e,t,n){Uy(e)&&n.delete(t)}function nO(){lE=!1,Yu!==null&&Uy(Yu)&&(Yu=null),Ku!==null&&Uy(Ku)&&(Ku=null),Ju!==null&&Uy(Ju)&&(Ju=null),Jv.forEach(c4),Xv.forEach(c4)}function lv(e,t){e.blockedOn===t&&(e.blockedOn=null,lE||(lE=!0,ra.unstable_scheduleCallback(ra.unstable_NormalPriority,nO)))}function Qv(e){function t(s){return lv(s,e)}if(0<vy.length){lv(vy[0],e);for(var n=1;n<vy.length;n++){var o=vy[n];o.blockedOn===e&&(o.blockedOn=null)}}for(Yu!==null&&lv(Yu,e),Ku!==null&&lv(Ku,e),Ju!==null&&lv(Ju,e),Jv.forEach(t),Xv.forEach(t),n=0;n<Wu.length;n++)o=Wu[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<Wu.length&&(n=Wu[0],n.blockedOn===null);)fM(n),n.blockedOn===null&&Wu.shift()}var cp=Bl.ReactCurrentBatchConfig,lw=!0;function rO(e,t,n,o){var s=jn,f=cp.transition;cp.transition=null;try{jn=1,ET(e,t,n,o)}finally{jn=s,cp.transition=f}}function iO(e,t,n,o){var s=jn,f=cp.transition;cp.transition=null;try{jn=4,ET(e,t,n,o)}finally{jn=s,cp.transition=f}}function ET(e,t,n,o){if(lw){var s=uE(e,t,n,o);if(s===null)gS(e,t,o,uw,n),u4(e,o);else if(tO(s,e,t,n,o))o.stopPropagation();else if(u4(e,o),t&4&&-1<eO.indexOf(e)){for(;s!==null;){var f=m0(s);if(f!==null&&sM(f),f=uE(e,t,n,o),f===null&&gS(e,t,o,uw,n),f===s)break;s=f}s!==null&&o.stopPropagation()}else gS(e,t,o,null,n)}}var uw=null;function uE(e,t,n,o){if(uw=null,e=wT(o),e=If(e),e!==null)if(t=Xf(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Q5(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return uw=e,null}function dM(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VI()){case bT:return 1;case rM:return 4;case aw:case ZI:return 16;case iM:return 536870912;default:return 16}default:return 16}}var qu=null,TT=null,Fy=null;function hM(){if(Fy)return Fy;var e,t=TT,n=t.length,o,s="value"in qu?qu.value:qu.textContent,f=s.length;for(e=0;e<n&&t[e]===s[e];e++);var g=n-e;for(o=1;o<=g&&t[n-o]===s[f-o];o++);return Fy=s.slice(e,1<o?1-o:void 0)}function By(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _y(){return!0}function f4(){return!1}function aa(e){function t(n,o,s,f,g){this._reactName=n,this._targetInst=s,this.type=o,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(n=e[w],this[w]=n?n(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?_y:f4,this.isPropagationStopped=f4,this}return wr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_y)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_y)},persist:function(){},isPersistent:_y}),t}var Pp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CT=aa(Pp),p0=wr({},Pp,{view:0,detail:0}),oO=aa(p0),sS,lS,uv,Yw=wr({},p0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kT,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==uv&&(uv&&e.type==="mousemove"?(sS=e.screenX-uv.screenX,lS=e.screenY-uv.screenY):lS=sS=0,uv=e),sS)},movementY:function(e){return"movementY"in e?e.movementY:lS}}),d4=aa(Yw),aO=wr({},Yw,{dataTransfer:0}),sO=aa(aO),lO=wr({},p0,{relatedTarget:0}),uS=aa(lO),uO=wr({},Pp,{animationName:0,elapsedTime:0,pseudoElement:0}),cO=aa(uO),fO=wr({},Pp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dO=aa(fO),hO=wr({},Pp,{data:0}),h4=aa(hO),pO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gO[e])?!!t[e]:!1}function kT(){return vO}var _O=wr({},p0,{key:function(e){if(e.key){var t=pO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=By(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kT,charCode:function(e){return e.type==="keypress"?By(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?By(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yO=aa(_O),wO=wr({},Yw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p4=aa(wO),bO=wr({},p0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kT}),xO=aa(bO),SO=wr({},Pp,{propertyName:0,elapsedTime:0,pseudoElement:0}),EO=aa(SO),TO=wr({},Yw,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CO=aa(TO),kO=[9,13,27,32],AT=Rl&&"CompositionEvent"in window,Ov=null;Rl&&"documentMode"in document&&(Ov=document.documentMode);var AO=Rl&&"TextEvent"in window&&!Ov,pM=Rl&&(!AT||Ov&&8<Ov&&11>=Ov),m4=String.fromCharCode(32),g4=!1;function mM(e,t){switch(e){case"keyup":return kO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gh=!1;function MO(e,t){switch(e){case"compositionend":return gM(t);case"keypress":return t.which!==32?null:(g4=!0,m4);case"textInput":return e=t.data,e===m4&&g4?null:e;default:return null}}function NO(e,t){if(Gh)return e==="compositionend"||!AT&&mM(e,t)?(e=hM(),Fy=TT=qu=null,Gh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pM&&t.locale!=="ko"?null:t.data;default:return null}}var LO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!LO[e.type]:t==="textarea"}function vM(e,t,n,o){G5(o),t=cw(t,"onChange"),0<t.length&&(n=new CT("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Rv=null,e0=null;function PO(e){AM(e,0)}function Kw(e){var t=Jh(e);if($5(t))return e}function IO(e,t){if(e==="change")return t}var _M=!1;if(Rl){var cS;if(Rl){var fS="oninput"in document;if(!fS){var _4=document.createElement("div");_4.setAttribute("oninput","return;"),fS=typeof _4.oninput=="function"}cS=fS}else cS=!1;_M=cS&&(!document.documentMode||9<document.documentMode)}function y4(){Rv&&(Rv.detachEvent("onpropertychange",yM),e0=Rv=null)}function yM(e){if(e.propertyName==="value"&&Kw(e0)){var t=[];vM(t,e0,e,wT(e)),X5(PO,t)}}function OO(e,t,n){e==="focusin"?(y4(),Rv=t,e0=n,Rv.attachEvent("onpropertychange",yM)):e==="focusout"&&y4()}function RO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kw(e0)}function DO(e,t){if(e==="click")return Kw(t)}function zO(e,t){if(e==="input"||e==="change")return Kw(t)}function UO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var us=typeof Object.is=="function"?Object.is:UO;function t0(e,t){if(us(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var s=n[o];if(!VS.call(t,s)||!us(e[s],t[s]))return!1}return!0}function w4(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function b4(e,t){var n=w4(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=w4(n)}}function wM(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wM(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bM(){for(var e=window,t=rw();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=rw(e.document)}return t}function MT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function FO(e){var t=bM(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wM(n.ownerDocument.documentElement,n)){if(o!==null&&MT(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,f=Math.min(o.start,s);o=o.end===void 0?f:Math.min(o.end,s),!e.extend&&f>o&&(s=o,o=f,f=s),s=b4(n,f);var g=b4(n,o);s&&g&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),f>o?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BO=Rl&&"documentMode"in document&&11>=document.documentMode,Yh=null,cE=null,Dv=null,fE=!1;function x4(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fE||Yh==null||Yh!==rw(o)||(o=Yh,"selectionStart"in o&&MT(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Dv&&t0(Dv,o)||(Dv=o,o=cw(cE,"onSelect"),0<o.length&&(t=new CT("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Yh)))}function yy(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kh={animationend:yy("Animation","AnimationEnd"),animationiteration:yy("Animation","AnimationIteration"),animationstart:yy("Animation","AnimationStart"),transitionend:yy("Transition","TransitionEnd")},dS={},xM={};Rl&&(xM=document.createElement("div").style,"AnimationEvent"in window||(delete Kh.animationend.animation,delete Kh.animationiteration.animation,delete Kh.animationstart.animation),"TransitionEvent"in window||delete Kh.transitionend.transition);function Jw(e){if(dS[e])return dS[e];if(!Kh[e])return e;var t=Kh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xM)return dS[e]=t[n];return e}var SM=Jw("animationend"),EM=Jw("animationiteration"),TM=Jw("animationstart"),CM=Jw("transitionend"),kM=new Map,S4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sc(e,t){kM.set(e,t),Jf(t,[e])}for(var hS=0;hS<S4.length;hS++){var pS=S4[hS],$O=pS.toLowerCase(),jO=pS[0].toUpperCase()+pS.slice(1);sc($O,"on"+jO)}sc(SM,"onAnimationEnd");sc(EM,"onAnimationIteration");sc(TM,"onAnimationStart");sc("dblclick","onDoubleClick");sc("focusin","onFocus");sc("focusout","onBlur");sc(CM,"onTransitionEnd");vp("onMouseEnter",["mouseout","mouseover"]);vp("onMouseLeave",["mouseout","mouseover"]);vp("onPointerEnter",["pointerout","pointerover"]);vp("onPointerLeave",["pointerout","pointerover"]);Jf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Av="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Av));function E4(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,$I(o,t,void 0,e),e.currentTarget=null}function AM(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],s=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var g=o.length-1;0<=g;g--){var w=o[g],y=w.instance,E=w.currentTarget;if(w=w.listener,y!==f&&s.isPropagationStopped())break e;E4(s,w,E),f=y}else for(g=0;g<o.length;g++){if(w=o[g],y=w.instance,E=w.currentTarget,w=w.listener,y!==f&&s.isPropagationStopped())break e;E4(s,w,E),f=y}}}if(ow)throw e=aE,ow=!1,aE=null,e}function ar(e,t){var n=t[gE];n===void 0&&(n=t[gE]=new Set);var o=e+"__bubble";n.has(o)||(MM(t,e,2,!1),n.add(o))}function mS(e,t,n){var o=0;t&&(o|=4),MM(n,e,o,t)}var wy="_reactListening"+Math.random().toString(36).slice(2);function n0(e){if(!e[wy]){e[wy]=!0,D5.forEach(function(n){n!=="selectionchange"&&(HO.has(n)||mS(n,!1,e),mS(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wy]||(t[wy]=!0,mS("selectionchange",!1,t))}}function MM(e,t,n,o){switch(dM(t)){case 1:var s=rO;break;case 4:s=iO;break;default:s=ET}n=s.bind(null,t,n,e),s=void 0,!oE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),o?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function gS(e,t,n,o,s){var f=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var w=o.stateNode.containerInfo;if(w===s||w.nodeType===8&&w.parentNode===s)break;if(g===4)for(g=o.return;g!==null;){var y=g.tag;if((y===3||y===4)&&(y=g.stateNode.containerInfo,y===s||y.nodeType===8&&y.parentNode===s))return;g=g.return}for(;w!==null;){if(g=If(w),g===null)return;if(y=g.tag,y===5||y===6){o=f=g;continue e}w=w.parentNode}}o=o.return}X5(function(){var E=f,M=wT(n),N=[];e:{var R=kM.get(e);if(R!==void 0){var F=CT,$=e;switch(e){case"keypress":if(By(n)===0)break e;case"keydown":case"keyup":F=yO;break;case"focusin":$="focus",F=uS;break;case"focusout":$="blur",F=uS;break;case"beforeblur":case"afterblur":F=uS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=d4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=sO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=xO;break;case SM:case EM:case TM:F=cO;break;case CM:F=EO;break;case"scroll":F=oO;break;case"wheel":F=CO;break;case"copy":case"cut":case"paste":F=dO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=p4}var V=(t&4)!==0,X=!V&&e==="scroll",Z=V?R!==null?R+"Capture":null:R;V=[];for(var D=E,z;D!==null;){z=D;var H=z.stateNode;if(z.tag===5&&H!==null&&(z=H,Z!==null&&(H=Kv(D,Z),H!=null&&V.push(r0(D,H,z)))),X)break;D=D.return}0<V.length&&(R=new F(R,$,null,n,M),N.push({event:R,listeners:V}))}}if(!(t&7)){e:{if(R=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",R&&n!==rE&&($=n.relatedTarget||n.fromElement)&&(If($)||$[Dl]))break e;if((F||R)&&(R=M.window===M?M:(R=M.ownerDocument)?R.defaultView||R.parentWindow:window,F?($=n.relatedTarget||n.toElement,F=E,$=$?If($):null,$!==null&&(X=Xf($),$!==X||$.tag!==5&&$.tag!==6)&&($=null)):(F=null,$=E),F!==$)){if(V=d4,H="onMouseLeave",Z="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(V=p4,H="onPointerLeave",Z="onPointerEnter",D="pointer"),X=F==null?R:Jh(F),z=$==null?R:Jh($),R=new V(H,D+"leave",F,n,M),R.target=X,R.relatedTarget=z,H=null,If(M)===E&&(V=new V(Z,D+"enter",$,n,M),V.target=z,V.relatedTarget=X,H=V),X=H,F&&$)t:{for(V=F,Z=$,D=0,z=V;z;z=Vh(z))D++;for(z=0,H=Z;H;H=Vh(H))z++;for(;0<D-z;)V=Vh(V),D--;for(;0<z-D;)Z=Vh(Z),z--;for(;D--;){if(V===Z||Z!==null&&V===Z.alternate)break t;V=Vh(V),Z=Vh(Z)}V=null}else V=null;F!==null&&T4(N,R,F,V,!1),$!==null&&X!==null&&T4(N,X,$,V,!0)}}e:{if(R=E?Jh(E):window,F=R.nodeName&&R.nodeName.toLowerCase(),F==="select"||F==="input"&&R.type==="file")var se=IO;else if(v4(R))if(_M)se=zO;else{se=RO;var he=OO}else(F=R.nodeName)&&F.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(se=DO);if(se&&(se=se(e,E))){vM(N,se,n,M);break e}he&&he(e,R,E),e==="focusout"&&(he=R._wrapperState)&&he.controlled&&R.type==="number"&&XS(R,"number",R.value)}switch(he=E?Jh(E):window,e){case"focusin":(v4(he)||he.contentEditable==="true")&&(Yh=he,cE=E,Dv=null);break;case"focusout":Dv=cE=Yh=null;break;case"mousedown":fE=!0;break;case"contextmenu":case"mouseup":case"dragend":fE=!1,x4(N,n,M);break;case"selectionchange":if(BO)break;case"keydown":case"keyup":x4(N,n,M)}var pe;if(AT)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Gh?mM(e,n)&&(ge="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ge="onCompositionStart");ge&&(pM&&n.locale!=="ko"&&(Gh||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Gh&&(pe=hM()):(qu=M,TT="value"in qu?qu.value:qu.textContent,Gh=!0)),he=cw(E,ge),0<he.length&&(ge=new h4(ge,e,null,n,M),N.push({event:ge,listeners:he}),pe?ge.data=pe:(pe=gM(n),pe!==null&&(ge.data=pe)))),(pe=AO?MO(e,n):NO(e,n))&&(E=cw(E,"onBeforeInput"),0<E.length&&(M=new h4("onBeforeInput","beforeinput",null,n,M),N.push({event:M,listeners:E}),M.data=pe))}AM(N,t)})}function r0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function cw(e,t){for(var n=t+"Capture",o=[];e!==null;){var s=e,f=s.stateNode;s.tag===5&&f!==null&&(s=f,f=Kv(e,n),f!=null&&o.unshift(r0(e,f,s)),f=Kv(e,t),f!=null&&o.push(r0(e,f,s))),e=e.return}return o}function Vh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function T4(e,t,n,o,s){for(var f=t._reactName,g=[];n!==null&&n!==o;){var w=n,y=w.alternate,E=w.stateNode;if(y!==null&&y===o)break;w.tag===5&&E!==null&&(w=E,s?(y=Kv(n,f),y!=null&&g.unshift(r0(n,y,w))):s||(y=Kv(n,f),y!=null&&g.push(r0(n,y,w)))),n=n.return}g.length!==0&&e.push({event:t,listeners:g})}var WO=/\r\n?/g,VO=/\u0000|\uFFFD/g;function C4(e){return(typeof e=="string"?e:""+e).replace(WO,`
`).replace(VO,"")}function by(e,t,n){if(t=C4(t),C4(e)!==t&&n)throw Error(qe(425))}function fw(){}var dE=null,hE=null;function pE(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mE=typeof setTimeout=="function"?setTimeout:void 0,ZO=typeof clearTimeout=="function"?clearTimeout:void 0,k4=typeof Promise=="function"?Promise:void 0,qO=typeof queueMicrotask=="function"?queueMicrotask:typeof k4<"u"?function(e){return k4.resolve(null).then(e).catch(GO)}:mE;function GO(e){setTimeout(function(){throw e})}function vS(e,t){var n=t,o=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(o===0){e.removeChild(s),Qv(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=s}while(n);Qv(t)}function Xu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function A4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ip=Math.random().toString(36).slice(2),Os="__reactFiber$"+Ip,i0="__reactProps$"+Ip,Dl="__reactContainer$"+Ip,gE="__reactEvents$"+Ip,YO="__reactListeners$"+Ip,KO="__reactHandles$"+Ip;function If(e){var t=e[Os];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Dl]||n[Os]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=A4(e);e!==null;){if(n=e[Os])return n;e=A4(e)}return t}e=n,n=e.parentNode}return null}function m0(e){return e=e[Os]||e[Dl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qe(33))}function Xw(e){return e[i0]||null}var vE=[],Xh=-1;function lc(e){return{current:e}}function lr(e){0>Xh||(e.current=vE[Xh],vE[Xh]=null,Xh--)}function Xn(e,t){Xh++,vE[Xh]=e.current,e.current=t}var oc={},Ki=lc(oc),Ro=lc(!1),$f=oc;function _p(e,t){var n=e.type.contextTypes;if(!n)return oc;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var s={},f;for(f in n)s[f]=t[f];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Do(e){return e=e.childContextTypes,e!=null}function dw(){lr(Ro),lr(Ki)}function M4(e,t,n){if(Ki.current!==oc)throw Error(qe(168));Xn(Ki,t),Xn(Ro,n)}function NM(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var s in o)if(!(s in t))throw Error(qe(108,OI(e)||"Unknown",s));return wr({},n,o)}function hw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oc,$f=Ki.current,Xn(Ki,e),Xn(Ro,Ro.current),!0}function N4(e,t,n){var o=e.stateNode;if(!o)throw Error(qe(169));n?(e=NM(e,t,$f),o.__reactInternalMemoizedMergedChildContext=e,lr(Ro),lr(Ki),Xn(Ki,e)):lr(Ro),Xn(Ro,n)}var Al=null,Qw=!1,_S=!1;function LM(e){Al===null?Al=[e]:Al.push(e)}function JO(e){Qw=!0,LM(e)}function uc(){if(!_S&&Al!==null){_S=!0;var e=0,t=jn;try{var n=Al;for(jn=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}Al=null,Qw=!1}catch(s){throw Al!==null&&(Al=Al.slice(e+1)),nM(bT,uc),s}finally{jn=t,_S=!1}}return null}var Qh=[],ep=0,pw=null,mw=0,xa=[],Sa=0,jf=null,Pl=1,Il="";function kf(e,t){Qh[ep++]=mw,Qh[ep++]=pw,pw=e,mw=t}function PM(e,t,n){xa[Sa++]=Pl,xa[Sa++]=Il,xa[Sa++]=jf,jf=e;var o=Pl;e=Il;var s=32-as(o)-1;o&=~(1<<s),n+=1;var f=32-as(t)+s;if(30<f){var g=s-s%5;f=(o&(1<<g)-1).toString(32),o>>=g,s-=g,Pl=1<<32-as(t)+s|n<<s|o,Il=f+e}else Pl=1<<f|n<<s|o,Il=e}function NT(e){e.return!==null&&(kf(e,1),PM(e,1,0))}function LT(e){for(;e===pw;)pw=Qh[--ep],Qh[ep]=null,mw=Qh[--ep],Qh[ep]=null;for(;e===jf;)jf=xa[--Sa],xa[Sa]=null,Il=xa[--Sa],xa[Sa]=null,Pl=xa[--Sa],xa[Sa]=null}var na=null,Qo=null,pr=!1,is=null;function IM(e,t){var n=Ea(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function L4(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,na=e,Qo=Xu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,na=e,Qo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jf!==null?{id:Pl,overflow:Il}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ea(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,na=e,Qo=null,!0):!1;default:return!1}}function _E(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yE(e){if(pr){var t=Qo;if(t){var n=t;if(!L4(e,t)){if(_E(e))throw Error(qe(418));t=Xu(n.nextSibling);var o=na;t&&L4(e,t)?IM(o,n):(e.flags=e.flags&-4097|2,pr=!1,na=e)}}else{if(_E(e))throw Error(qe(418));e.flags=e.flags&-4097|2,pr=!1,na=e}}}function P4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;na=e}function xy(e){if(e!==na)return!1;if(!pr)return P4(e),pr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pE(e.type,e.memoizedProps)),t&&(t=Qo)){if(_E(e))throw OM(),Error(qe(418));for(;t;)IM(e,t),t=Xu(t.nextSibling)}if(P4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qo=Xu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qo=null}}else Qo=na?Xu(e.stateNode.nextSibling):null;return!0}function OM(){for(var e=Qo;e;)e=Xu(e.nextSibling)}function yp(){Qo=na=null,pr=!1}function PT(e){is===null?is=[e]:is.push(e)}var XO=Bl.ReactCurrentBatchConfig;function ts(e,t){if(e&&e.defaultProps){t=wr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var gw=lc(null),vw=null,tp=null,IT=null;function OT(){IT=tp=vw=null}function RT(e){var t=gw.current;lr(gw),e._currentValue=t}function wE(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function fp(e,t){vw=e,IT=tp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Oo=!0),e.firstContext=null)}function Aa(e){var t=e._currentValue;if(IT!==e)if(e={context:e,memoizedValue:t,next:null},tp===null){if(vw===null)throw Error(qe(308));tp=e,vw.dependencies={lanes:0,firstContext:e}}else tp=tp.next=e;return t}var Of=null;function DT(e){Of===null?Of=[e]:Of.push(e)}function RM(e,t,n,o){var s=t.interleaved;return s===null?(n.next=n,DT(t)):(n.next=s.next,s.next=n),t.interleaved=n,zl(e,o)}function zl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ju=!1;function zT(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ol(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qu(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Cn&2){var s=o.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),o.pending=t,zl(e,n)}return s=o.interleaved,s===null?(t.next=t,DT(o)):(t.next=s.next,s.next=t),o.interleaved=t,zl(e,n)}function $y(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,xT(e,n)}}function I4(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var s=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var g={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};f===null?s=f=g:f=f.next=g,n=n.next}while(n!==null);f===null?s=f=t:f=f.next=t}else s=f=t;n={baseState:o.baseState,firstBaseUpdate:s,lastBaseUpdate:f,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _w(e,t,n,o){var s=e.updateQueue;ju=!1;var f=s.firstBaseUpdate,g=s.lastBaseUpdate,w=s.shared.pending;if(w!==null){s.shared.pending=null;var y=w,E=y.next;y.next=null,g===null?f=E:g.next=E,g=y;var M=e.alternate;M!==null&&(M=M.updateQueue,w=M.lastBaseUpdate,w!==g&&(w===null?M.firstBaseUpdate=E:w.next=E,M.lastBaseUpdate=y))}if(f!==null){var N=s.baseState;g=0,M=E=y=null,w=f;do{var R=w.lane,F=w.eventTime;if((o&R)===R){M!==null&&(M=M.next={eventTime:F,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var $=e,V=w;switch(R=t,F=n,V.tag){case 1:if($=V.payload,typeof $=="function"){N=$.call(F,N,R);break e}N=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=V.payload,R=typeof $=="function"?$.call(F,N,R):$,R==null)break e;N=wr({},N,R);break e;case 2:ju=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,R=s.effects,R===null?s.effects=[w]:R.push(w))}else F={eventTime:F,lane:R,tag:w.tag,payload:w.payload,callback:w.callback,next:null},M===null?(E=M=F,y=N):M=M.next=F,g|=R;if(w=w.next,w===null){if(w=s.shared.pending,w===null)break;R=w,w=R.next,R.next=null,s.lastBaseUpdate=R,s.shared.pending=null}}while(1);if(M===null&&(y=N),s.baseState=y,s.firstBaseUpdate=E,s.lastBaseUpdate=M,t=s.shared.interleaved,t!==null){s=t;do g|=s.lane,s=s.next;while(s!==t)}else f===null&&(s.shared.lanes=0);Wf|=g,e.lanes=g,e.memoizedState=N}}function O4(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],s=o.callback;if(s!==null){if(o.callback=null,o=n,typeof s!="function")throw Error(qe(191,s));s.call(o)}}}var zM=new R5.Component().refs;function bE(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:wr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var e2={isMounted:function(e){return(e=e._reactInternals)?Xf(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=co(),s=tc(e),f=Ol(o,s);f.payload=t,n!=null&&(f.callback=n),t=Qu(e,f,s),t!==null&&(ss(t,e,s,o),$y(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=co(),s=tc(e),f=Ol(o,s);f.tag=1,f.payload=t,n!=null&&(f.callback=n),t=Qu(e,f,s),t!==null&&(ss(t,e,s,o),$y(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=co(),o=tc(e),s=Ol(n,o);s.tag=2,t!=null&&(s.callback=t),t=Qu(e,s,o),t!==null&&(ss(t,e,o,n),$y(t,e,o))}};function R4(e,t,n,o,s,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,g):t.prototype&&t.prototype.isPureReactComponent?!t0(n,o)||!t0(s,f):!0}function UM(e,t,n){var o=!1,s=oc,f=t.contextType;return typeof f=="object"&&f!==null?f=Aa(f):(s=Do(t)?$f:Ki.current,o=t.contextTypes,f=(o=o!=null)?_p(e,s):oc),t=new t(n,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=e2,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=f),t}function D4(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&e2.enqueueReplaceState(t,t.state,null)}function xE(e,t,n,o){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs=zM,zT(e);var f=t.contextType;typeof f=="object"&&f!==null?s.context=Aa(f):(f=Do(t)?$f:Ki.current,s.context=_p(e,f)),s.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(bE(e,t,f,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&e2.enqueueReplaceState(s,s.state,null),_w(e,n,s,o),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function cv(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var o=n.stateNode}if(!o)throw Error(qe(147,e));var s=o,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var w=s.refs;w===zM&&(w=s.refs={}),g===null?delete w[f]:w[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,e))}return e}function Sy(e,t){throw e=Object.prototype.toString.call(t),Error(qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function z4(e){var t=e._init;return t(e._payload)}function FM(e){function t(Z,D){if(e){var z=Z.deletions;z===null?(Z.deletions=[D],Z.flags|=16):z.push(D)}}function n(Z,D){if(!e)return null;for(;D!==null;)t(Z,D),D=D.sibling;return null}function o(Z,D){for(Z=new Map;D!==null;)D.key!==null?Z.set(D.key,D):Z.set(D.index,D),D=D.sibling;return Z}function s(Z,D){return Z=nc(Z,D),Z.index=0,Z.sibling=null,Z}function f(Z,D,z){return Z.index=z,e?(z=Z.alternate,z!==null?(z=z.index,z<D?(Z.flags|=2,D):z):(Z.flags|=2,D)):(Z.flags|=1048576,D)}function g(Z){return e&&Z.alternate===null&&(Z.flags|=2),Z}function w(Z,D,z,H){return D===null||D.tag!==6?(D=TS(z,Z.mode,H),D.return=Z,D):(D=s(D,z),D.return=Z,D)}function y(Z,D,z,H){var se=z.type;return se===qh?M(Z,D,z.props.children,H,z.key):D!==null&&(D.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===$u&&z4(se)===D.type)?(H=s(D,z.props),H.ref=cv(Z,D,z),H.return=Z,H):(H=qy(z.type,z.key,z.props,null,Z.mode,H),H.ref=cv(Z,D,z),H.return=Z,H)}function E(Z,D,z,H){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=CS(z,Z.mode,H),D.return=Z,D):(D=s(D,z.children||[]),D.return=Z,D)}function M(Z,D,z,H,se){return D===null||D.tag!==7?(D=Ff(z,Z.mode,H,se),D.return=Z,D):(D=s(D,z),D.return=Z,D)}function N(Z,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=TS(""+D,Z.mode,z),D.return=Z,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case dy:return z=qy(D.type,D.key,D.props,null,Z.mode,z),z.ref=cv(Z,null,D),z.return=Z,z;case Zh:return D=CS(D,Z.mode,z),D.return=Z,D;case $u:var H=D._init;return N(Z,H(D._payload),z)}if(Cv(D)||ov(D))return D=Ff(D,Z.mode,z,null),D.return=Z,D;Sy(Z,D)}return null}function R(Z,D,z,H){var se=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return se!==null?null:w(Z,D,""+z,H);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case dy:return z.key===se?y(Z,D,z,H):null;case Zh:return z.key===se?E(Z,D,z,H):null;case $u:return se=z._init,R(Z,D,se(z._payload),H)}if(Cv(z)||ov(z))return se!==null?null:M(Z,D,z,H,null);Sy(Z,z)}return null}function F(Z,D,z,H,se){if(typeof H=="string"&&H!==""||typeof H=="number")return Z=Z.get(z)||null,w(D,Z,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case dy:return Z=Z.get(H.key===null?z:H.key)||null,y(D,Z,H,se);case Zh:return Z=Z.get(H.key===null?z:H.key)||null,E(D,Z,H,se);case $u:var he=H._init;return F(Z,D,z,he(H._payload),se)}if(Cv(H)||ov(H))return Z=Z.get(z)||null,M(D,Z,H,se,null);Sy(D,H)}return null}function $(Z,D,z,H){for(var se=null,he=null,pe=D,ge=D=0,ke=null;pe!==null&&ge<z.length;ge++){pe.index>ge?(ke=pe,pe=null):ke=pe.sibling;var be=R(Z,pe,z[ge],H);if(be===null){pe===null&&(pe=ke);break}e&&pe&&be.alternate===null&&t(Z,pe),D=f(be,D,ge),he===null?se=be:he.sibling=be,he=be,pe=ke}if(ge===z.length)return n(Z,pe),pr&&kf(Z,ge),se;if(pe===null){for(;ge<z.length;ge++)pe=N(Z,z[ge],H),pe!==null&&(D=f(pe,D,ge),he===null?se=pe:he.sibling=pe,he=pe);return pr&&kf(Z,ge),se}for(pe=o(Z,pe);ge<z.length;ge++)ke=F(pe,Z,ge,z[ge],H),ke!==null&&(e&&ke.alternate!==null&&pe.delete(ke.key===null?ge:ke.key),D=f(ke,D,ge),he===null?se=ke:he.sibling=ke,he=ke);return e&&pe.forEach(function(Ue){return t(Z,Ue)}),pr&&kf(Z,ge),se}function V(Z,D,z,H){var se=ov(z);if(typeof se!="function")throw Error(qe(150));if(z=se.call(z),z==null)throw Error(qe(151));for(var he=se=null,pe=D,ge=D=0,ke=null,be=z.next();pe!==null&&!be.done;ge++,be=z.next()){pe.index>ge?(ke=pe,pe=null):ke=pe.sibling;var Ue=R(Z,pe,be.value,H);if(Ue===null){pe===null&&(pe=ke);break}e&&pe&&Ue.alternate===null&&t(Z,pe),D=f(Ue,D,ge),he===null?se=Ue:he.sibling=Ue,he=Ue,pe=ke}if(be.done)return n(Z,pe),pr&&kf(Z,ge),se;if(pe===null){for(;!be.done;ge++,be=z.next())be=N(Z,be.value,H),be!==null&&(D=f(be,D,ge),he===null?se=be:he.sibling=be,he=be);return pr&&kf(Z,ge),se}for(pe=o(Z,pe);!be.done;ge++,be=z.next())be=F(pe,Z,ge,be.value,H),be!==null&&(e&&be.alternate!==null&&pe.delete(be.key===null?ge:be.key),D=f(be,D,ge),he===null?se=be:he.sibling=be,he=be);return e&&pe.forEach(function(it){return t(Z,it)}),pr&&kf(Z,ge),se}function X(Z,D,z,H){if(typeof z=="object"&&z!==null&&z.type===qh&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case dy:e:{for(var se=z.key,he=D;he!==null;){if(he.key===se){if(se=z.type,se===qh){if(he.tag===7){n(Z,he.sibling),D=s(he,z.props.children),D.return=Z,Z=D;break e}}else if(he.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===$u&&z4(se)===he.type){n(Z,he.sibling),D=s(he,z.props),D.ref=cv(Z,he,z),D.return=Z,Z=D;break e}n(Z,he);break}else t(Z,he);he=he.sibling}z.type===qh?(D=Ff(z.props.children,Z.mode,H,z.key),D.return=Z,Z=D):(H=qy(z.type,z.key,z.props,null,Z.mode,H),H.ref=cv(Z,D,z),H.return=Z,Z=H)}return g(Z);case Zh:e:{for(he=z.key;D!==null;){if(D.key===he)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){n(Z,D.sibling),D=s(D,z.children||[]),D.return=Z,Z=D;break e}else{n(Z,D);break}else t(Z,D);D=D.sibling}D=CS(z,Z.mode,H),D.return=Z,Z=D}return g(Z);case $u:return he=z._init,X(Z,D,he(z._payload),H)}if(Cv(z))return $(Z,D,z,H);if(ov(z))return V(Z,D,z,H);Sy(Z,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(n(Z,D.sibling),D=s(D,z),D.return=Z,Z=D):(n(Z,D),D=TS(z,Z.mode,H),D.return=Z,Z=D),g(Z)):n(Z,D)}return X}var wp=FM(!0),BM=FM(!1),g0={},Us=lc(g0),o0=lc(g0),a0=lc(g0);function Rf(e){if(e===g0)throw Error(qe(174));return e}function UT(e,t){switch(Xn(a0,t),Xn(o0,e),Xn(Us,g0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=eE(t,e)}lr(Us),Xn(Us,t)}function bp(){lr(Us),lr(o0),lr(a0)}function $M(e){Rf(a0.current);var t=Rf(Us.current),n=eE(t,e.type);t!==n&&(Xn(o0,e),Xn(Us,n))}function FT(e){o0.current===e&&(lr(Us),lr(o0))}var _r=lc(0);function yw(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yS=[];function BT(){for(var e=0;e<yS.length;e++)yS[e]._workInProgressVersionPrimary=null;yS.length=0}var jy=Bl.ReactCurrentDispatcher,wS=Bl.ReactCurrentBatchConfig,Hf=0,yr=null,si=null,vi=null,ww=!1,zv=!1,s0=0,QO=0;function Zi(){throw Error(qe(321))}function $T(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!us(e[n],t[n]))return!1;return!0}function jT(e,t,n,o,s,f){if(Hf=f,yr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jy.current=e===null||e.memoizedState===null?rR:iR,e=n(o,s),zv){f=0;do{if(zv=!1,s0=0,25<=f)throw Error(qe(301));f+=1,vi=si=null,t.updateQueue=null,jy.current=oR,e=n(o,s)}while(zv)}if(jy.current=bw,t=si!==null&&si.next!==null,Hf=0,vi=si=yr=null,ww=!1,t)throw Error(qe(300));return e}function HT(){var e=s0!==0;return s0=0,e}function Ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?yr.memoizedState=vi=e:vi=vi.next=e,vi}function Ma(){if(si===null){var e=yr.alternate;e=e!==null?e.memoizedState:null}else e=si.next;var t=vi===null?yr.memoizedState:vi.next;if(t!==null)vi=t,si=e;else{if(e===null)throw Error(qe(310));si=e,e={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},vi===null?yr.memoizedState=vi=e:vi=vi.next=e}return vi}function l0(e,t){return typeof t=="function"?t(e):t}function bS(e){var t=Ma(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var o=si,s=o.baseQueue,f=n.pending;if(f!==null){if(s!==null){var g=s.next;s.next=f.next,f.next=g}o.baseQueue=s=f,n.pending=null}if(s!==null){f=s.next,o=o.baseState;var w=g=null,y=null,E=f;do{var M=E.lane;if((Hf&M)===M)y!==null&&(y=y.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),o=E.hasEagerState?E.eagerState:e(o,E.action);else{var N={lane:M,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};y===null?(w=y=N,g=o):y=y.next=N,yr.lanes|=M,Wf|=M}E=E.next}while(E!==null&&E!==f);y===null?g=o:y.next=w,us(o,t.memoizedState)||(Oo=!0),t.memoizedState=o,t.baseState=g,t.baseQueue=y,n.lastRenderedState=o}if(e=n.interleaved,e!==null){s=e;do f=s.lane,yr.lanes|=f,Wf|=f,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xS(e){var t=Ma(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var o=n.dispatch,s=n.pending,f=t.memoizedState;if(s!==null){n.pending=null;var g=s=s.next;do f=e(f,g.action),g=g.next;while(g!==s);us(f,t.memoizedState)||(Oo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,o]}function jM(){}function HM(e,t){var n=yr,o=Ma(),s=t(),f=!us(o.memoizedState,s);if(f&&(o.memoizedState=s,Oo=!0),o=o.queue,WT(ZM.bind(null,n,o,e),[e]),o.getSnapshot!==t||f||vi!==null&&vi.memoizedState.tag&1){if(n.flags|=2048,u0(9,VM.bind(null,n,o,s,t),void 0,null),_i===null)throw Error(qe(349));Hf&30||WM(n,t,s)}return s}function WM(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=yr.updateQueue,t===null?(t={lastEffect:null,stores:null},yr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function VM(e,t,n,o){t.value=n,t.getSnapshot=o,qM(t)&&GM(e)}function ZM(e,t,n){return n(function(){qM(t)&&GM(e)})}function qM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!us(e,n)}catch{return!0}}function GM(e){var t=zl(e,1);t!==null&&ss(t,e,1,-1)}function U4(e){var t=Ls();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l0,lastRenderedState:e},t.queue=e,e=e.dispatch=nR.bind(null,yr,e),[t.memoizedState,e]}function u0(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=yr.updateQueue,t===null?(t={lastEffect:null,stores:null},yr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function YM(){return Ma().memoizedState}function Hy(e,t,n,o){var s=Ls();yr.flags|=e,s.memoizedState=u0(1|t,n,void 0,o===void 0?null:o)}function t2(e,t,n,o){var s=Ma();o=o===void 0?null:o;var f=void 0;if(si!==null){var g=si.memoizedState;if(f=g.destroy,o!==null&&$T(o,g.deps)){s.memoizedState=u0(t,n,f,o);return}}yr.flags|=e,s.memoizedState=u0(1|t,n,f,o)}function F4(e,t){return Hy(8390656,8,e,t)}function WT(e,t){return t2(2048,8,e,t)}function KM(e,t){return t2(4,2,e,t)}function JM(e,t){return t2(4,4,e,t)}function XM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function QM(e,t,n){return n=n!=null?n.concat([e]):null,t2(4,4,XM.bind(null,t,e),n)}function VT(){}function eN(e,t){var n=Ma();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&$T(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function tN(e,t){var n=Ma();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&$T(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function nN(e,t,n){return Hf&21?(us(n,t)||(n=oM(),yr.lanes|=n,Wf|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Oo=!0),e.memoizedState=n)}function eR(e,t){var n=jn;jn=n!==0&&4>n?n:4,e(!0);var o=wS.transition;wS.transition={};try{e(!1),t()}finally{jn=n,wS.transition=o}}function rN(){return Ma().memoizedState}function tR(e,t,n){var o=tc(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},iN(e))oN(t,n);else if(n=RM(e,t,n,o),n!==null){var s=co();ss(n,e,o,s),aN(n,t,o)}}function nR(e,t,n){var o=tc(e),s={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(iN(e))oN(t,s);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,w=f(g,n);if(s.hasEagerState=!0,s.eagerState=w,us(w,g)){var y=t.interleaved;y===null?(s.next=s,DT(t)):(s.next=y.next,y.next=s),t.interleaved=s;return}}catch{}finally{}n=RM(e,t,s,o),n!==null&&(s=co(),ss(n,e,o,s),aN(n,t,o))}}function iN(e){var t=e.alternate;return e===yr||t!==null&&t===yr}function oN(e,t){zv=ww=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function aN(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,xT(e,n)}}var bw={readContext:Aa,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useInsertionEffect:Zi,useLayoutEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useMutableSource:Zi,useSyncExternalStore:Zi,useId:Zi,unstable_isNewReconciler:!1},rR={readContext:Aa,useCallback:function(e,t){return Ls().memoizedState=[e,t===void 0?null:t],e},useContext:Aa,useEffect:F4,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hy(4194308,4,XM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hy(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hy(4,2,e,t)},useMemo:function(e,t){var n=Ls();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Ls();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=tR.bind(null,yr,e),[o.memoizedState,e]},useRef:function(e){var t=Ls();return e={current:e},t.memoizedState=e},useState:U4,useDebugValue:VT,useDeferredValue:function(e){return Ls().memoizedState=e},useTransition:function(){var e=U4(!1),t=e[0];return e=eR.bind(null,e[1]),Ls().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=yr,s=Ls();if(pr){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=t(),_i===null)throw Error(qe(349));Hf&30||WM(o,t,n)}s.memoizedState=n;var f={value:n,getSnapshot:t};return s.queue=f,F4(ZM.bind(null,o,f,e),[e]),o.flags|=2048,u0(9,VM.bind(null,o,f,n,t),void 0,null),n},useId:function(){var e=Ls(),t=_i.identifierPrefix;if(pr){var n=Il,o=Pl;n=(o&~(1<<32-as(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=s0++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=QO++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iR={readContext:Aa,useCallback:eN,useContext:Aa,useEffect:WT,useImperativeHandle:QM,useInsertionEffect:KM,useLayoutEffect:JM,useMemo:tN,useReducer:bS,useRef:YM,useState:function(){return bS(l0)},useDebugValue:VT,useDeferredValue:function(e){var t=Ma();return nN(t,si.memoizedState,e)},useTransition:function(){var e=bS(l0)[0],t=Ma().memoizedState;return[e,t]},useMutableSource:jM,useSyncExternalStore:HM,useId:rN,unstable_isNewReconciler:!1},oR={readContext:Aa,useCallback:eN,useContext:Aa,useEffect:WT,useImperativeHandle:QM,useInsertionEffect:KM,useLayoutEffect:JM,useMemo:tN,useReducer:xS,useRef:YM,useState:function(){return xS(l0)},useDebugValue:VT,useDeferredValue:function(e){var t=Ma();return si===null?t.memoizedState=e:nN(t,si.memoizedState,e)},useTransition:function(){var e=xS(l0)[0],t=Ma().memoizedState;return[e,t]},useMutableSource:jM,useSyncExternalStore:HM,useId:rN,unstable_isNewReconciler:!1};function xp(e,t){try{var n="",o=t;do n+=II(o),o=o.return;while(o);var s=n}catch(f){s=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:s,digest:null}}function SS(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function SE(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var aR=typeof WeakMap=="function"?WeakMap:Map;function sN(e,t,n){n=Ol(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Sw||(Sw=!0,IE=o),SE(e,t)},n}function lN(e,t,n){n=Ol(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var s=t.value;n.payload=function(){return o(s)},n.callback=function(){SE(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(n.callback=function(){SE(e,t),typeof o!="function"&&(ec===null?ec=new Set([this]):ec.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),n}function B4(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new aR;var s=new Set;o.set(t,s)}else s=o.get(t),s===void 0&&(s=new Set,o.set(t,s));s.has(n)||(s.add(n),e=wR.bind(null,e,t,n),t.then(e,e))}function $4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function j4(e,t,n,o,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ol(-1,1),t.tag=2,Qu(n,t,1))),n.lanes|=1),e)}var sR=Bl.ReactCurrentOwner,Oo=!1;function ao(e,t,n,o){t.child=e===null?BM(t,null,n,o):wp(t,e.child,n,o)}function H4(e,t,n,o,s){n=n.render;var f=t.ref;return fp(t,s),o=jT(e,t,n,o,f,s),n=HT(),e!==null&&!Oo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ul(e,t,s)):(pr&&n&&NT(t),t.flags|=1,ao(e,t,o,s),t.child)}function W4(e,t,n,o,s){if(e===null){var f=n.type;return typeof f=="function"&&!QT(f)&&f.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=f,uN(e,t,f,o,s)):(e=qy(n.type,null,o,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&s)){var g=f.memoizedProps;if(n=n.compare,n=n!==null?n:t0,n(g,o)&&e.ref===t.ref)return Ul(e,t,s)}return t.flags|=1,e=nc(f,o),e.ref=t.ref,e.return=t,t.child=e}function uN(e,t,n,o,s){if(e!==null){var f=e.memoizedProps;if(t0(f,o)&&e.ref===t.ref)if(Oo=!1,t.pendingProps=o=f,(e.lanes&s)!==0)e.flags&131072&&(Oo=!0);else return t.lanes=e.lanes,Ul(e,t,s)}return EE(e,t,n,o,s)}function cN(e,t,n){var o=t.pendingProps,s=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xn(rp,Ko),Ko|=n;else{if(!(n&1073741824))return e=f!==null?f.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xn(rp,Ko),Ko|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=f!==null?f.baseLanes:n,Xn(rp,Ko),Ko|=o}else f!==null?(o=f.baseLanes|n,t.memoizedState=null):o=n,Xn(rp,Ko),Ko|=o;return ao(e,t,s,n),t.child}function fN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function EE(e,t,n,o,s){var f=Do(n)?$f:Ki.current;return f=_p(t,f),fp(t,s),n=jT(e,t,n,o,f,s),o=HT(),e!==null&&!Oo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ul(e,t,s)):(pr&&o&&NT(t),t.flags|=1,ao(e,t,n,s),t.child)}function V4(e,t,n,o,s){if(Do(n)){var f=!0;hw(t)}else f=!1;if(fp(t,s),t.stateNode===null)Wy(e,t),UM(t,n,o),xE(t,n,o,s),o=!0;else if(e===null){var g=t.stateNode,w=t.memoizedProps;g.props=w;var y=g.context,E=n.contextType;typeof E=="object"&&E!==null?E=Aa(E):(E=Do(n)?$f:Ki.current,E=_p(t,E));var M=n.getDerivedStateFromProps,N=typeof M=="function"||typeof g.getSnapshotBeforeUpdate=="function";N||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==o||y!==E)&&D4(t,g,o,E),ju=!1;var R=t.memoizedState;g.state=R,_w(t,o,g,s),y=t.memoizedState,w!==o||R!==y||Ro.current||ju?(typeof M=="function"&&(bE(t,n,M,o),y=t.memoizedState),(w=ju||R4(t,n,w,o,R,y,E))?(N||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=y),g.props=o,g.state=y,g.context=E,o=w):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{g=t.stateNode,DM(e,t),w=t.memoizedProps,E=t.type===t.elementType?w:ts(t.type,w),g.props=E,N=t.pendingProps,R=g.context,y=n.contextType,typeof y=="object"&&y!==null?y=Aa(y):(y=Do(n)?$f:Ki.current,y=_p(t,y));var F=n.getDerivedStateFromProps;(M=typeof F=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==N||R!==y)&&D4(t,g,o,y),ju=!1,R=t.memoizedState,g.state=R,_w(t,o,g,s);var $=t.memoizedState;w!==N||R!==$||Ro.current||ju?(typeof F=="function"&&(bE(t,n,F,o),$=t.memoizedState),(E=ju||R4(t,n,E,o,R,$,y)||!1)?(M||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,$,y),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,$,y)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=$),g.props=o,g.state=$,g.context=y,o=E):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),o=!1)}return TE(e,t,n,o,f,s)}function TE(e,t,n,o,s,f){fN(e,t);var g=(t.flags&128)!==0;if(!o&&!g)return s&&N4(t,n,!1),Ul(e,t,f);o=t.stateNode,sR.current=t;var w=g&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&g?(t.child=wp(t,e.child,null,f),t.child=wp(t,null,w,f)):ao(e,t,w,f),t.memoizedState=o.state,s&&N4(t,n,!0),t.child}function dN(e){var t=e.stateNode;t.pendingContext?M4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&M4(e,t.context,!1),UT(e,t.containerInfo)}function Z4(e,t,n,o,s){return yp(),PT(s),t.flags|=256,ao(e,t,n,o),t.child}var CE={dehydrated:null,treeContext:null,retryLane:0};function kE(e){return{baseLanes:e,cachePool:null,transitions:null}}function hN(e,t,n){var o=t.pendingProps,s=_r.current,f=!1,g=(t.flags&128)!==0,w;if((w=g)||(w=e!==null&&e.memoizedState===null?!1:(s&2)!==0),w?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Xn(_r,s&1),e===null)return yE(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=o.children,e=o.fallback,f?(o=t.mode,f=t.child,g={mode:"hidden",children:g},!(o&1)&&f!==null?(f.childLanes=0,f.pendingProps=g):f=i2(g,o,0,null),e=Ff(e,o,n,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=kE(n),t.memoizedState=CE,e):ZT(t,g));if(s=e.memoizedState,s!==null&&(w=s.dehydrated,w!==null))return lR(e,t,g,o,w,s,n);if(f){f=o.fallback,g=t.mode,s=e.child,w=s.sibling;var y={mode:"hidden",children:o.children};return!(g&1)&&t.child!==s?(o=t.child,o.childLanes=0,o.pendingProps=y,t.deletions=null):(o=nc(s,y),o.subtreeFlags=s.subtreeFlags&14680064),w!==null?f=nc(w,f):(f=Ff(f,g,n,null),f.flags|=2),f.return=t,o.return=t,o.sibling=f,t.child=o,o=f,f=t.child,g=e.child.memoizedState,g=g===null?kE(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~n,t.memoizedState=CE,o}return f=e.child,e=f.sibling,o=nc(f,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function ZT(e,t){return t=i2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ey(e,t,n,o){return o!==null&&PT(o),wp(t,e.child,null,n),e=ZT(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lR(e,t,n,o,s,f,g){if(n)return t.flags&256?(t.flags&=-257,o=SS(Error(qe(422))),Ey(e,t,g,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=o.fallback,s=t.mode,o=i2({mode:"visible",children:o.children},s,0,null),f=Ff(f,s,g,null),f.flags|=2,o.return=t,f.return=t,o.sibling=f,t.child=o,t.mode&1&&wp(t,e.child,null,g),t.child.memoizedState=kE(g),t.memoizedState=CE,f);if(!(t.mode&1))return Ey(e,t,g,null);if(s.data==="$!"){if(o=s.nextSibling&&s.nextSibling.dataset,o)var w=o.dgst;return o=w,f=Error(qe(419)),o=SS(f,o,void 0),Ey(e,t,g,o)}if(w=(g&e.childLanes)!==0,Oo||w){if(o=_i,o!==null){switch(g&-g){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(o.suspendedLanes|g)?0:s,s!==0&&s!==f.retryLane&&(f.retryLane=s,zl(e,s),ss(o,e,s,-1))}return XT(),o=SS(Error(qe(421))),Ey(e,t,g,o)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=bR.bind(null,e),s._reactRetry=t,null):(e=f.treeContext,Qo=Xu(s.nextSibling),na=t,pr=!0,is=null,e!==null&&(xa[Sa++]=Pl,xa[Sa++]=Il,xa[Sa++]=jf,Pl=e.id,Il=e.overflow,jf=t),t=ZT(t,o.children),t.flags|=4096,t)}function q4(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),wE(e.return,t,n)}function ES(e,t,n,o,s){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:s}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=n,f.tailMode=s)}function pN(e,t,n){var o=t.pendingProps,s=o.revealOrder,f=o.tail;if(ao(e,t,o.children,n),o=_r.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&q4(e,n,t);else if(e.tag===19)q4(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Xn(_r,o),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&yw(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ES(t,!1,s,n,f);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&yw(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ES(t,!0,n,null,f);break;case"together":ES(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ul(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wf|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(qe(153));if(t.child!==null){for(e=t.child,n=nc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function uR(e,t,n){switch(t.tag){case 3:dN(t),yp();break;case 5:$M(t);break;case 1:Do(t.type)&&hw(t);break;case 4:UT(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,s=t.memoizedProps.value;Xn(gw,o._currentValue),o._currentValue=s;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Xn(_r,_r.current&1),t.flags|=128,null):n&t.child.childLanes?hN(e,t,n):(Xn(_r,_r.current&1),e=Ul(e,t,n),e!==null?e.sibling:null);Xn(_r,_r.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return pN(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Xn(_r,_r.current),o)break;return null;case 22:case 23:return t.lanes=0,cN(e,t,n)}return Ul(e,t,n)}var mN,AE,gN,vN;mN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};AE=function(){};gN=function(e,t,n,o){var s=e.memoizedProps;if(s!==o){e=t.stateNode,Rf(Us.current);var f=null;switch(n){case"input":s=KS(e,s),o=KS(e,o),f=[];break;case"select":s=wr({},s,{value:void 0}),o=wr({},o,{value:void 0}),f=[];break;case"textarea":s=QS(e,s),o=QS(e,o),f=[];break;default:typeof s.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=fw)}tE(n,o);var g;n=null;for(E in s)if(!o.hasOwnProperty(E)&&s.hasOwnProperty(E)&&s[E]!=null)if(E==="style"){var w=s[E];for(g in w)w.hasOwnProperty(g)&&(n||(n={}),n[g]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Gv.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in o){var y=o[E];if(w=s!=null?s[E]:void 0,o.hasOwnProperty(E)&&y!==w&&(y!=null||w!=null))if(E==="style")if(w){for(g in w)!w.hasOwnProperty(g)||y&&y.hasOwnProperty(g)||(n||(n={}),n[g]="");for(g in y)y.hasOwnProperty(g)&&w[g]!==y[g]&&(n||(n={}),n[g]=y[g])}else n||(f||(f=[]),f.push(E,n)),n=y;else E==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,w=w?w.__html:void 0,y!=null&&w!==y&&(f=f||[]).push(E,y)):E==="children"?typeof y!="string"&&typeof y!="number"||(f=f||[]).push(E,""+y):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Gv.hasOwnProperty(E)?(y!=null&&E==="onScroll"&&ar("scroll",e),f||w===y||(f=[])):(f=f||[]).push(E,y))}n&&(f=f||[]).push("style",n);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};vN=function(e,t,n,o){n!==o&&(t.flags|=4)};function fv(e,t){if(!pr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function qi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,o|=s.subtreeFlags&14680064,o|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,o|=s.subtreeFlags,o|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function cR(e,t,n){var o=t.pendingProps;switch(LT(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(t),null;case 1:return Do(t.type)&&dw(),qi(t),null;case 3:return o=t.stateNode,bp(),lr(Ro),lr(Ki),BT(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(xy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,is!==null&&(DE(is),is=null))),AE(e,t),qi(t),null;case 5:FT(t);var s=Rf(a0.current);if(n=t.type,e!==null&&t.stateNode!=null)gN(e,t,n,o,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(qe(166));return qi(t),null}if(e=Rf(Us.current),xy(t)){o=t.stateNode,n=t.type;var f=t.memoizedProps;switch(o[Os]=t,o[i0]=f,e=(t.mode&1)!==0,n){case"dialog":ar("cancel",o),ar("close",o);break;case"iframe":case"object":case"embed":ar("load",o);break;case"video":case"audio":for(s=0;s<Av.length;s++)ar(Av[s],o);break;case"source":ar("error",o);break;case"img":case"image":case"link":ar("error",o),ar("load",o);break;case"details":ar("toggle",o);break;case"input":n4(o,f),ar("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!f.multiple},ar("invalid",o);break;case"textarea":i4(o,f),ar("invalid",o)}tE(n,f),s=null;for(var g in f)if(f.hasOwnProperty(g)){var w=f[g];g==="children"?typeof w=="string"?o.textContent!==w&&(f.suppressHydrationWarning!==!0&&by(o.textContent,w,e),s=["children",w]):typeof w=="number"&&o.textContent!==""+w&&(f.suppressHydrationWarning!==!0&&by(o.textContent,w,e),s=["children",""+w]):Gv.hasOwnProperty(g)&&w!=null&&g==="onScroll"&&ar("scroll",o)}switch(n){case"input":hy(o),r4(o,f,!0);break;case"textarea":hy(o),o4(o);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(o.onclick=fw)}o=s,t.updateQueue=o,o!==null&&(t.flags|=4)}else{g=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=W5(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=g.createElement(n,{is:o.is}):(e=g.createElement(n),n==="select"&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,n),e[Os]=t,e[i0]=o,mN(e,t,!1,!1),t.stateNode=e;e:{switch(g=nE(n,o),n){case"dialog":ar("cancel",e),ar("close",e),s=o;break;case"iframe":case"object":case"embed":ar("load",e),s=o;break;case"video":case"audio":for(s=0;s<Av.length;s++)ar(Av[s],e);s=o;break;case"source":ar("error",e),s=o;break;case"img":case"image":case"link":ar("error",e),ar("load",e),s=o;break;case"details":ar("toggle",e),s=o;break;case"input":n4(e,o),s=KS(e,o),ar("invalid",e);break;case"option":s=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},s=wr({},o,{value:void 0}),ar("invalid",e);break;case"textarea":i4(e,o),s=QS(e,o),ar("invalid",e);break;default:s=o}tE(n,s),w=s;for(f in w)if(w.hasOwnProperty(f)){var y=w[f];f==="style"?q5(e,y):f==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&V5(e,y)):f==="children"?typeof y=="string"?(n!=="textarea"||y!=="")&&Yv(e,y):typeof y=="number"&&Yv(e,""+y):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Gv.hasOwnProperty(f)?y!=null&&f==="onScroll"&&ar("scroll",e):y!=null&&gT(e,f,y,g))}switch(n){case"input":hy(e),r4(e,o,!1);break;case"textarea":hy(e),o4(e);break;case"option":o.value!=null&&e.setAttribute("value",""+ic(o.value));break;case"select":e.multiple=!!o.multiple,f=o.value,f!=null?sp(e,!!o.multiple,f,!1):o.defaultValue!=null&&sp(e,!!o.multiple,o.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=fw)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qi(t),null;case 6:if(e&&t.stateNode!=null)vN(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(qe(166));if(n=Rf(a0.current),Rf(Us.current),xy(t)){if(o=t.stateNode,n=t.memoizedProps,o[Os]=t,(f=o.nodeValue!==n)&&(e=na,e!==null))switch(e.tag){case 3:by(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&by(o.nodeValue,n,(e.mode&1)!==0)}f&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Os]=t,t.stateNode=o}return qi(t),null;case 13:if(lr(_r),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pr&&Qo!==null&&t.mode&1&&!(t.flags&128))OM(),yp(),t.flags|=98560,f=!1;else if(f=xy(t),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(qe(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(qe(317));f[Os]=t}else yp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qi(t),f=!1}else is!==null&&(DE(is),is=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||_r.current&1?li===0&&(li=3):XT())),t.updateQueue!==null&&(t.flags|=4),qi(t),null);case 4:return bp(),AE(e,t),e===null&&n0(t.stateNode.containerInfo),qi(t),null;case 10:return RT(t.type._context),qi(t),null;case 17:return Do(t.type)&&dw(),qi(t),null;case 19:if(lr(_r),f=t.memoizedState,f===null)return qi(t),null;if(o=(t.flags&128)!==0,g=f.rendering,g===null)if(o)fv(f,!1);else{if(li!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=yw(e),g!==null){for(t.flags|=128,fv(f,!1),o=g.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)f=n,e=o,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Xn(_r,_r.current&1|2),t.child}e=e.sibling}f.tail!==null&&zr()>Sp&&(t.flags|=128,o=!0,fv(f,!1),t.lanes=4194304)}else{if(!o)if(e=yw(g),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fv(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!pr)return qi(t),null}else 2*zr()-f.renderingStartTime>Sp&&n!==1073741824&&(t.flags|=128,o=!0,fv(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(n=f.last,n!==null?n.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=zr(),t.sibling=null,n=_r.current,Xn(_r,o?n&1|2:n&1),t):(qi(t),null);case 22:case 23:return JT(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Ko&1073741824&&(qi(t),t.subtreeFlags&6&&(t.flags|=8192)):qi(t),null;case 24:return null;case 25:return null}throw Error(qe(156,t.tag))}function fR(e,t){switch(LT(t),t.tag){case 1:return Do(t.type)&&dw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bp(),lr(Ro),lr(Ki),BT(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return FT(t),null;case 13:if(lr(_r),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qe(340));yp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return lr(_r),null;case 4:return bp(),null;case 10:return RT(t.type._context),null;case 22:case 23:return JT(),null;case 24:return null;default:return null}}var Ty=!1,Gi=!1,dR=typeof WeakSet=="function"?WeakSet:Set,ht=null;function np(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Sr(e,t,o)}else n.current=null}function ME(e,t,n){try{n()}catch(o){Sr(e,t,o)}}var G4=!1;function hR(e,t){if(dE=lw,e=bM(),MT(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var s=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var g=0,w=-1,y=-1,E=0,M=0,N=e,R=null;t:for(;;){for(var F;N!==n||s!==0&&N.nodeType!==3||(w=g+s),N!==f||o!==0&&N.nodeType!==3||(y=g+o),N.nodeType===3&&(g+=N.nodeValue.length),(F=N.firstChild)!==null;)R=N,N=F;for(;;){if(N===e)break t;if(R===n&&++E===s&&(w=g),R===f&&++M===o&&(y=g),(F=N.nextSibling)!==null)break;N=R,R=N.parentNode}N=F}n=w===-1||y===-1?null:{start:w,end:y}}else n=null}n=n||{start:0,end:0}}else n=null;for(hE={focusedElem:e,selectionRange:n},lw=!1,ht=t;ht!==null;)if(t=ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ht=e;else for(;ht!==null;){t=ht;try{var $=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if($!==null){var V=$.memoizedProps,X=$.memoizedState,Z=t.stateNode,D=Z.getSnapshotBeforeUpdate(t.elementType===t.type?V:ts(t.type,V),X);Z.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=t.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(H){Sr(t,t.return,H)}if(e=t.sibling,e!==null){e.return=t.return,ht=e;break}ht=t.return}return $=G4,G4=!1,$}function Uv(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&e)===e){var f=s.destroy;s.destroy=void 0,f!==void 0&&ME(t,n,f)}s=s.next}while(s!==o)}}function n2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function NE(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _N(e){var t=e.alternate;t!==null&&(e.alternate=null,_N(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Os],delete t[i0],delete t[gE],delete t[YO],delete t[KO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yN(e){return e.tag===5||e.tag===3||e.tag===4}function Y4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function LE(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fw));else if(o!==4&&(e=e.child,e!==null))for(LE(e,t,n),e=e.sibling;e!==null;)LE(e,t,n),e=e.sibling}function PE(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(PE(e,t,n),e=e.sibling;e!==null;)PE(e,t,n),e=e.sibling}var zi=null,ns=!1;function Fu(e,t,n){for(n=n.child;n!==null;)wN(e,t,n),n=n.sibling}function wN(e,t,n){if(zs&&typeof zs.onCommitFiberUnmount=="function")try{zs.onCommitFiberUnmount(Gw,n)}catch{}switch(n.tag){case 5:Gi||np(n,t);case 6:var o=zi,s=ns;zi=null,Fu(e,t,n),zi=o,ns=s,zi!==null&&(ns?(e=zi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):zi.removeChild(n.stateNode));break;case 18:zi!==null&&(ns?(e=zi,n=n.stateNode,e.nodeType===8?vS(e.parentNode,n):e.nodeType===1&&vS(e,n),Qv(e)):vS(zi,n.stateNode));break;case 4:o=zi,s=ns,zi=n.stateNode.containerInfo,ns=!0,Fu(e,t,n),zi=o,ns=s;break;case 0:case 11:case 14:case 15:if(!Gi&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){s=o=o.next;do{var f=s,g=f.destroy;f=f.tag,g!==void 0&&(f&2||f&4)&&ME(n,t,g),s=s.next}while(s!==o)}Fu(e,t,n);break;case 1:if(!Gi&&(np(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(w){Sr(n,t,w)}Fu(e,t,n);break;case 21:Fu(e,t,n);break;case 22:n.mode&1?(Gi=(o=Gi)||n.memoizedState!==null,Fu(e,t,n),Gi=o):Fu(e,t,n);break;default:Fu(e,t,n)}}function K4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dR),t.forEach(function(o){var s=xR.bind(null,e,o);n.has(o)||(n.add(o),o.then(s,s))})}}function Qa(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var s=n[o];try{var f=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 5:zi=w.stateNode,ns=!1;break e;case 3:zi=w.stateNode.containerInfo,ns=!0;break e;case 4:zi=w.stateNode.containerInfo,ns=!0;break e}w=w.return}if(zi===null)throw Error(qe(160));wN(f,g,s),zi=null,ns=!1;var y=s.alternate;y!==null&&(y.return=null),s.return=null}catch(E){Sr(s,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bN(t,e),t=t.sibling}function bN(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qa(t,e),Ns(e),o&4){try{Uv(3,e,e.return),n2(3,e)}catch(V){Sr(e,e.return,V)}try{Uv(5,e,e.return)}catch(V){Sr(e,e.return,V)}}break;case 1:Qa(t,e),Ns(e),o&512&&n!==null&&np(n,n.return);break;case 5:if(Qa(t,e),Ns(e),o&512&&n!==null&&np(n,n.return),e.flags&32){var s=e.stateNode;try{Yv(s,"")}catch(V){Sr(e,e.return,V)}}if(o&4&&(s=e.stateNode,s!=null)){var f=e.memoizedProps,g=n!==null?n.memoizedProps:f,w=e.type,y=e.updateQueue;if(e.updateQueue=null,y!==null)try{w==="input"&&f.type==="radio"&&f.name!=null&&j5(s,f),nE(w,g);var E=nE(w,f);for(g=0;g<y.length;g+=2){var M=y[g],N=y[g+1];M==="style"?q5(s,N):M==="dangerouslySetInnerHTML"?V5(s,N):M==="children"?Yv(s,N):gT(s,M,N,E)}switch(w){case"input":JS(s,f);break;case"textarea":H5(s,f);break;case"select":var R=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!f.multiple;var F=f.value;F!=null?sp(s,!!f.multiple,F,!1):R!==!!f.multiple&&(f.defaultValue!=null?sp(s,!!f.multiple,f.defaultValue,!0):sp(s,!!f.multiple,f.multiple?[]:"",!1))}s[i0]=f}catch(V){Sr(e,e.return,V)}}break;case 6:if(Qa(t,e),Ns(e),o&4){if(e.stateNode===null)throw Error(qe(162));s=e.stateNode,f=e.memoizedProps;try{s.nodeValue=f}catch(V){Sr(e,e.return,V)}}break;case 3:if(Qa(t,e),Ns(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Qv(t.containerInfo)}catch(V){Sr(e,e.return,V)}break;case 4:Qa(t,e),Ns(e);break;case 13:Qa(t,e),Ns(e),s=e.child,s.flags&8192&&(f=s.memoizedState!==null,s.stateNode.isHidden=f,!f||s.alternate!==null&&s.alternate.memoizedState!==null||(YT=zr())),o&4&&K4(e);break;case 22:if(M=n!==null&&n.memoizedState!==null,e.mode&1?(Gi=(E=Gi)||M,Qa(t,e),Gi=E):Qa(t,e),Ns(e),o&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!M&&e.mode&1)for(ht=e,M=e.child;M!==null;){for(N=ht=M;ht!==null;){switch(R=ht,F=R.child,R.tag){case 0:case 11:case 14:case 15:Uv(4,R,R.return);break;case 1:np(R,R.return);var $=R.stateNode;if(typeof $.componentWillUnmount=="function"){o=R,n=R.return;try{t=o,$.props=t.memoizedProps,$.state=t.memoizedState,$.componentWillUnmount()}catch(V){Sr(o,n,V)}}break;case 5:np(R,R.return);break;case 22:if(R.memoizedState!==null){X4(N);continue}}F!==null?(F.return=R,ht=F):X4(N)}M=M.sibling}e:for(M=null,N=e;;){if(N.tag===5){if(M===null){M=N;try{s=N.stateNode,E?(f=s.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(w=N.stateNode,y=N.memoizedProps.style,g=y!=null&&y.hasOwnProperty("display")?y.display:null,w.style.display=Z5("display",g))}catch(V){Sr(e,e.return,V)}}}else if(N.tag===6){if(M===null)try{N.stateNode.nodeValue=E?"":N.memoizedProps}catch(V){Sr(e,e.return,V)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===e)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===e)break e;for(;N.sibling===null;){if(N.return===null||N.return===e)break e;M===N&&(M=null),N=N.return}M===N&&(M=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:Qa(t,e),Ns(e),o&4&&K4(e);break;case 21:break;default:Qa(t,e),Ns(e)}}function Ns(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(yN(n)){var o=n;break e}n=n.return}throw Error(qe(160))}switch(o.tag){case 5:var s=o.stateNode;o.flags&32&&(Yv(s,""),o.flags&=-33);var f=Y4(e);PE(e,f,s);break;case 3:case 4:var g=o.stateNode.containerInfo,w=Y4(e);LE(e,w,g);break;default:throw Error(qe(161))}}catch(y){Sr(e,e.return,y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pR(e,t,n){ht=e,xN(e)}function xN(e,t,n){for(var o=(e.mode&1)!==0;ht!==null;){var s=ht,f=s.child;if(s.tag===22&&o){var g=s.memoizedState!==null||Ty;if(!g){var w=s.alternate,y=w!==null&&w.memoizedState!==null||Gi;w=Ty;var E=Gi;if(Ty=g,(Gi=y)&&!E)for(ht=s;ht!==null;)g=ht,y=g.child,g.tag===22&&g.memoizedState!==null?Q4(s):y!==null?(y.return=g,ht=y):Q4(s);for(;f!==null;)ht=f,xN(f),f=f.sibling;ht=s,Ty=w,Gi=E}J4(e)}else s.subtreeFlags&8772&&f!==null?(f.return=s,ht=f):J4(e)}}function J4(e){for(;ht!==null;){var t=ht;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gi||n2(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Gi)if(n===null)o.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ts(t.type,n.memoizedProps);o.componentDidUpdate(s,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&O4(t,f,o);break;case 3:var g=t.updateQueue;if(g!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}O4(t,g,n)}break;case 5:var w=t.stateNode;if(n===null&&t.flags&4){n=w;var y=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&n.focus();break;case"img":y.src&&(n.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var M=E.memoizedState;if(M!==null){var N=M.dehydrated;N!==null&&Qv(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Gi||t.flags&512&&NE(t)}catch(R){Sr(t,t.return,R)}}if(t===e){ht=null;break}if(n=t.sibling,n!==null){n.return=t.return,ht=n;break}ht=t.return}}function X4(e){for(;ht!==null;){var t=ht;if(t===e){ht=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ht=n;break}ht=t.return}}function Q4(e){for(;ht!==null;){var t=ht;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{n2(4,t)}catch(y){Sr(t,n,y)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var s=t.return;try{o.componentDidMount()}catch(y){Sr(t,s,y)}}var f=t.return;try{NE(t)}catch(y){Sr(t,f,y)}break;case 5:var g=t.return;try{NE(t)}catch(y){Sr(t,g,y)}}}catch(y){Sr(t,t.return,y)}if(t===e){ht=null;break}var w=t.sibling;if(w!==null){w.return=t.return,ht=w;break}ht=t.return}}var mR=Math.ceil,xw=Bl.ReactCurrentDispatcher,qT=Bl.ReactCurrentOwner,Ta=Bl.ReactCurrentBatchConfig,Cn=0,_i=null,qr=null,Fi=0,Ko=0,rp=lc(0),li=0,c0=null,Wf=0,r2=0,GT=0,Fv=null,Io=null,YT=0,Sp=1/0,kl=null,Sw=!1,IE=null,ec=null,Cy=!1,Gu=null,Ew=0,Bv=0,OE=null,Vy=-1,Zy=0;function co(){return Cn&6?zr():Vy!==-1?Vy:Vy=zr()}function tc(e){return e.mode&1?Cn&2&&Fi!==0?Fi&-Fi:XO.transition!==null?(Zy===0&&(Zy=oM()),Zy):(e=jn,e!==0||(e=window.event,e=e===void 0?16:dM(e.type)),e):1}function ss(e,t,n,o){if(50<Bv)throw Bv=0,OE=null,Error(qe(185));h0(e,n,o),(!(Cn&2)||e!==_i)&&(e===_i&&(!(Cn&2)&&(r2|=n),li===4&&Vu(e,Fi)),zo(e,o),n===1&&Cn===0&&!(t.mode&1)&&(Sp=zr()+500,Qw&&uc()))}function zo(e,t){var n=e.callbackNode;XI(e,t);var o=sw(e,e===_i?Fi:0);if(o===0)n!==null&&l4(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&l4(n),t===1)e.tag===0?JO(eA.bind(null,e)):LM(eA.bind(null,e)),qO(function(){!(Cn&6)&&uc()}),n=null;else{switch(aM(o)){case 1:n=bT;break;case 4:n=rM;break;case 16:n=aw;break;case 536870912:n=iM;break;default:n=aw}n=NN(n,SN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function SN(e,t){if(Vy=-1,Zy=0,Cn&6)throw Error(qe(327));var n=e.callbackNode;if(dp()&&e.callbackNode!==n)return null;var o=sw(e,e===_i?Fi:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Tw(e,o);else{t=o;var s=Cn;Cn|=2;var f=TN();(_i!==e||Fi!==t)&&(kl=null,Sp=zr()+500,Uf(e,t));do try{_R();break}catch(w){EN(e,w)}while(1);OT(),xw.current=f,Cn=s,qr!==null?t=0:(_i=null,Fi=0,t=li)}if(t!==0){if(t===2&&(s=sE(e),s!==0&&(o=s,t=RE(e,s))),t===1)throw n=c0,Uf(e,0),Vu(e,o),zo(e,zr()),n;if(t===6)Vu(e,o);else{if(s=e.current.alternate,!(o&30)&&!gR(s)&&(t=Tw(e,o),t===2&&(f=sE(e),f!==0&&(o=f,t=RE(e,f))),t===1))throw n=c0,Uf(e,0),Vu(e,o),zo(e,zr()),n;switch(e.finishedWork=s,e.finishedLanes=o,t){case 0:case 1:throw Error(qe(345));case 2:Af(e,Io,kl);break;case 3:if(Vu(e,o),(o&130023424)===o&&(t=YT+500-zr(),10<t)){if(sw(e,0)!==0)break;if(s=e.suspendedLanes,(s&o)!==o){co(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=mE(Af.bind(null,e,Io,kl),t);break}Af(e,Io,kl);break;case 4:if(Vu(e,o),(o&4194240)===o)break;for(t=e.eventTimes,s=-1;0<o;){var g=31-as(o);f=1<<g,g=t[g],g>s&&(s=g),o&=~f}if(o=s,o=zr()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*mR(o/1960))-o,10<o){e.timeoutHandle=mE(Af.bind(null,e,Io,kl),o);break}Af(e,Io,kl);break;case 5:Af(e,Io,kl);break;default:throw Error(qe(329))}}}return zo(e,zr()),e.callbackNode===n?SN.bind(null,e):null}function RE(e,t){var n=Fv;return e.current.memoizedState.isDehydrated&&(Uf(e,t).flags|=256),e=Tw(e,t),e!==2&&(t=Io,Io=n,t!==null&&DE(t)),e}function DE(e){Io===null?Io=e:Io.push.apply(Io,e)}function gR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var s=n[o],f=s.getSnapshot;s=s.value;try{if(!us(f(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vu(e,t){for(t&=~GT,t&=~r2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-as(t),o=1<<n;e[n]=-1,t&=~o}}function eA(e){if(Cn&6)throw Error(qe(327));dp();var t=sw(e,0);if(!(t&1))return zo(e,zr()),null;var n=Tw(e,t);if(e.tag!==0&&n===2){var o=sE(e);o!==0&&(t=o,n=RE(e,o))}if(n===1)throw n=c0,Uf(e,0),Vu(e,t),zo(e,zr()),n;if(n===6)throw Error(qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Af(e,Io,kl),zo(e,zr()),null}function KT(e,t){var n=Cn;Cn|=1;try{return e(t)}finally{Cn=n,Cn===0&&(Sp=zr()+500,Qw&&uc())}}function Vf(e){Gu!==null&&Gu.tag===0&&!(Cn&6)&&dp();var t=Cn;Cn|=1;var n=Ta.transition,o=jn;try{if(Ta.transition=null,jn=1,e)return e()}finally{jn=o,Ta.transition=n,Cn=t,!(Cn&6)&&uc()}}function JT(){Ko=rp.current,lr(rp)}function Uf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ZO(n)),qr!==null)for(n=qr.return;n!==null;){var o=n;switch(LT(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&dw();break;case 3:bp(),lr(Ro),lr(Ki),BT();break;case 5:FT(o);break;case 4:bp();break;case 13:lr(_r);break;case 19:lr(_r);break;case 10:RT(o.type._context);break;case 22:case 23:JT()}n=n.return}if(_i=e,qr=e=nc(e.current,null),Fi=Ko=t,li=0,c0=null,GT=r2=Wf=0,Io=Fv=null,Of!==null){for(t=0;t<Of.length;t++)if(n=Of[t],o=n.interleaved,o!==null){n.interleaved=null;var s=o.next,f=n.pending;if(f!==null){var g=f.next;f.next=s,o.next=g}n.pending=o}Of=null}return e}function EN(e,t){do{var n=qr;try{if(OT(),jy.current=bw,ww){for(var o=yr.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}ww=!1}if(Hf=0,vi=si=yr=null,zv=!1,s0=0,qT.current=null,n===null||n.return===null){li=1,c0=t,qr=null;break}e:{var f=e,g=n.return,w=n,y=t;if(t=Fi,w.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var E=y,M=w,N=M.tag;if(!(M.mode&1)&&(N===0||N===11||N===15)){var R=M.alternate;R?(M.updateQueue=R.updateQueue,M.memoizedState=R.memoizedState,M.lanes=R.lanes):(M.updateQueue=null,M.memoizedState=null)}var F=$4(g);if(F!==null){F.flags&=-257,j4(F,g,w,f,t),F.mode&1&&B4(f,E,t),t=F,y=E;var $=t.updateQueue;if($===null){var V=new Set;V.add(y),t.updateQueue=V}else $.add(y);break e}else{if(!(t&1)){B4(f,E,t),XT();break e}y=Error(qe(426))}}else if(pr&&w.mode&1){var X=$4(g);if(X!==null){!(X.flags&65536)&&(X.flags|=256),j4(X,g,w,f,t),PT(xp(y,w));break e}}f=y=xp(y,w),li!==4&&(li=2),Fv===null?Fv=[f]:Fv.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var Z=sN(f,y,t);I4(f,Z);break e;case 1:w=y;var D=f.type,z=f.stateNode;if(!(f.flags&128)&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ec===null||!ec.has(z)))){f.flags|=65536,t&=-t,f.lanes|=t;var H=lN(f,w,t);I4(f,H);break e}}f=f.return}while(f!==null)}kN(n)}catch(se){t=se,qr===n&&n!==null&&(qr=n=n.return);continue}break}while(1)}function TN(){var e=xw.current;return xw.current=bw,e===null?bw:e}function XT(){(li===0||li===3||li===2)&&(li=4),_i===null||!(Wf&268435455)&&!(r2&268435455)||Vu(_i,Fi)}function Tw(e,t){var n=Cn;Cn|=2;var o=TN();(_i!==e||Fi!==t)&&(kl=null,Uf(e,t));do try{vR();break}catch(s){EN(e,s)}while(1);if(OT(),Cn=n,xw.current=o,qr!==null)throw Error(qe(261));return _i=null,Fi=0,li}function vR(){for(;qr!==null;)CN(qr)}function _R(){for(;qr!==null&&!HI();)CN(qr)}function CN(e){var t=MN(e.alternate,e,Ko);e.memoizedProps=e.pendingProps,t===null?kN(e):qr=t,qT.current=null}function kN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fR(n,t),n!==null){n.flags&=32767,qr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{li=6,qr=null;return}}else if(n=cR(n,t,Ko),n!==null){qr=n;return}if(t=t.sibling,t!==null){qr=t;return}qr=t=e}while(t!==null);li===0&&(li=5)}function Af(e,t,n){var o=jn,s=Ta.transition;try{Ta.transition=null,jn=1,yR(e,t,n,o)}finally{Ta.transition=s,jn=o}return null}function yR(e,t,n,o){do dp();while(Gu!==null);if(Cn&6)throw Error(qe(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qe(177));e.callbackNode=null,e.callbackPriority=0;var f=n.lanes|n.childLanes;if(QI(e,f),e===_i&&(qr=_i=null,Fi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cy||(Cy=!0,NN(aw,function(){return dp(),null})),f=(n.flags&15990)!==0,n.subtreeFlags&15990||f){f=Ta.transition,Ta.transition=null;var g=jn;jn=1;var w=Cn;Cn|=4,qT.current=null,hR(e,n),bN(n,e),FO(hE),lw=!!dE,hE=dE=null,e.current=n,pR(n),WI(),Cn=w,jn=g,Ta.transition=f}else e.current=n;if(Cy&&(Cy=!1,Gu=e,Ew=s),f=e.pendingLanes,f===0&&(ec=null),qI(n.stateNode),zo(e,zr()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],o(s.value,{componentStack:s.stack,digest:s.digest});if(Sw)throw Sw=!1,e=IE,IE=null,e;return Ew&1&&e.tag!==0&&dp(),f=e.pendingLanes,f&1?e===OE?Bv++:(Bv=0,OE=e):Bv=0,uc(),null}function dp(){if(Gu!==null){var e=aM(Ew),t=Ta.transition,n=jn;try{if(Ta.transition=null,jn=16>e?16:e,Gu===null)var o=!1;else{if(e=Gu,Gu=null,Ew=0,Cn&6)throw Error(qe(331));var s=Cn;for(Cn|=4,ht=e.current;ht!==null;){var f=ht,g=f.child;if(ht.flags&16){var w=f.deletions;if(w!==null){for(var y=0;y<w.length;y++){var E=w[y];for(ht=E;ht!==null;){var M=ht;switch(M.tag){case 0:case 11:case 15:Uv(8,M,f)}var N=M.child;if(N!==null)N.return=M,ht=N;else for(;ht!==null;){M=ht;var R=M.sibling,F=M.return;if(_N(M),M===E){ht=null;break}if(R!==null){R.return=F,ht=R;break}ht=F}}}var $=f.alternate;if($!==null){var V=$.child;if(V!==null){$.child=null;do{var X=V.sibling;V.sibling=null,V=X}while(V!==null)}}ht=f}}if(f.subtreeFlags&2064&&g!==null)g.return=f,ht=g;else e:for(;ht!==null;){if(f=ht,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Uv(9,f,f.return)}var Z=f.sibling;if(Z!==null){Z.return=f.return,ht=Z;break e}ht=f.return}}var D=e.current;for(ht=D;ht!==null;){g=ht;var z=g.child;if(g.subtreeFlags&2064&&z!==null)z.return=g,ht=z;else e:for(g=D;ht!==null;){if(w=ht,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:n2(9,w)}}catch(se){Sr(w,w.return,se)}if(w===g){ht=null;break e}var H=w.sibling;if(H!==null){H.return=w.return,ht=H;break e}ht=w.return}}if(Cn=s,uc(),zs&&typeof zs.onPostCommitFiberRoot=="function")try{zs.onPostCommitFiberRoot(Gw,e)}catch{}o=!0}return o}finally{jn=n,Ta.transition=t}}return!1}function tA(e,t,n){t=xp(n,t),t=sN(e,t,1),e=Qu(e,t,1),t=co(),e!==null&&(h0(e,1,t),zo(e,t))}function Sr(e,t,n){if(e.tag===3)tA(e,e,n);else for(;t!==null;){if(t.tag===3){tA(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ec===null||!ec.has(o))){e=xp(n,e),e=lN(t,e,1),t=Qu(t,e,1),e=co(),t!==null&&(h0(t,1,e),zo(t,e));break}}t=t.return}}function wR(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=co(),e.pingedLanes|=e.suspendedLanes&n,_i===e&&(Fi&n)===n&&(li===4||li===3&&(Fi&130023424)===Fi&&500>zr()-YT?Uf(e,0):GT|=n),zo(e,t)}function AN(e,t){t===0&&(e.mode&1?(t=gy,gy<<=1,!(gy&130023424)&&(gy=4194304)):t=1);var n=co();e=zl(e,t),e!==null&&(h0(e,t,n),zo(e,n))}function bR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),AN(e,n)}function xR(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(qe(314))}o!==null&&o.delete(t),AN(e,n)}var MN;MN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ro.current)Oo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Oo=!1,uR(e,t,n);Oo=!!(e.flags&131072)}else Oo=!1,pr&&t.flags&1048576&&PM(t,mw,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Wy(e,t),e=t.pendingProps;var s=_p(t,Ki.current);fp(t,n),s=jT(null,t,o,e,s,n);var f=HT();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Do(o)?(f=!0,hw(t)):f=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zT(t),s.updater=e2,t.stateNode=s,s._reactInternals=t,xE(t,o,e,n),t=TE(null,t,o,!0,f,n)):(t.tag=0,pr&&f&&NT(t),ao(null,t,s,n),t=t.child),t;case 16:o=t.elementType;e:{switch(Wy(e,t),e=t.pendingProps,s=o._init,o=s(o._payload),t.type=o,s=t.tag=ER(o),e=ts(o,e),s){case 0:t=EE(null,t,o,e,n);break e;case 1:t=V4(null,t,o,e,n);break e;case 11:t=H4(null,t,o,e,n);break e;case 14:t=W4(null,t,o,ts(o.type,e),n);break e}throw Error(qe(306,o,""))}return t;case 0:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:ts(o,s),EE(e,t,o,s,n);case 1:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:ts(o,s),V4(e,t,o,s,n);case 3:e:{if(dN(t),e===null)throw Error(qe(387));o=t.pendingProps,f=t.memoizedState,s=f.element,DM(e,t),_w(t,o,null,n);var g=t.memoizedState;if(o=g.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){s=xp(Error(qe(423)),t),t=Z4(e,t,o,n,s);break e}else if(o!==s){s=xp(Error(qe(424)),t),t=Z4(e,t,o,n,s);break e}else for(Qo=Xu(t.stateNode.containerInfo.firstChild),na=t,pr=!0,is=null,n=BM(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yp(),o===s){t=Ul(e,t,n);break e}ao(e,t,o,n)}t=t.child}return t;case 5:return $M(t),e===null&&yE(t),o=t.type,s=t.pendingProps,f=e!==null?e.memoizedProps:null,g=s.children,pE(o,s)?g=null:f!==null&&pE(o,f)&&(t.flags|=32),fN(e,t),ao(e,t,g,n),t.child;case 6:return e===null&&yE(t),null;case 13:return hN(e,t,n);case 4:return UT(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=wp(t,null,o,n):ao(e,t,o,n),t.child;case 11:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:ts(o,s),H4(e,t,o,s,n);case 7:return ao(e,t,t.pendingProps,n),t.child;case 8:return ao(e,t,t.pendingProps.children,n),t.child;case 12:return ao(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,s=t.pendingProps,f=t.memoizedProps,g=s.value,Xn(gw,o._currentValue),o._currentValue=g,f!==null)if(us(f.value,g)){if(f.children===s.children&&!Ro.current){t=Ul(e,t,n);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var w=f.dependencies;if(w!==null){g=f.child;for(var y=w.firstContext;y!==null;){if(y.context===o){if(f.tag===1){y=Ol(-1,n&-n),y.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var M=E.pending;M===null?y.next=y:(y.next=M.next,M.next=y),E.pending=y}}f.lanes|=n,y=f.alternate,y!==null&&(y.lanes|=n),wE(f.return,n,t),w.lanes|=n;break}y=y.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(qe(341));g.lanes|=n,w=g.alternate,w!==null&&(w.lanes|=n),wE(g,n,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}ao(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,o=t.pendingProps.children,fp(t,n),s=Aa(s),o=o(s),t.flags|=1,ao(e,t,o,n),t.child;case 14:return o=t.type,s=ts(o,t.pendingProps),s=ts(o.type,s),W4(e,t,o,s,n);case 15:return uN(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:ts(o,s),Wy(e,t),t.tag=1,Do(o)?(e=!0,hw(t)):e=!1,fp(t,n),UM(t,o,s),xE(t,o,s,n),TE(null,t,o,!0,e,n);case 19:return pN(e,t,n);case 22:return cN(e,t,n)}throw Error(qe(156,t.tag))};function NN(e,t){return nM(e,t)}function SR(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(e,t,n,o){return new SR(e,t,n,o)}function QT(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ER(e){if(typeof e=="function")return QT(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_T)return 11;if(e===yT)return 14}return 2}function nc(e,t){var n=e.alternate;return n===null?(n=Ea(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qy(e,t,n,o,s,f){var g=2;if(o=e,typeof e=="function")QT(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case qh:return Ff(n.children,s,f,t);case vT:g=8,s|=8;break;case ZS:return e=Ea(12,n,t,s|2),e.elementType=ZS,e.lanes=f,e;case qS:return e=Ea(13,n,t,s),e.elementType=qS,e.lanes=f,e;case GS:return e=Ea(19,n,t,s),e.elementType=GS,e.lanes=f,e;case F5:return i2(n,s,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z5:g=10;break e;case U5:g=9;break e;case _T:g=11;break e;case yT:g=14;break e;case $u:g=16,o=null;break e}throw Error(qe(130,e==null?e:typeof e,""))}return t=Ea(g,n,t,s),t.elementType=e,t.type=o,t.lanes=f,t}function Ff(e,t,n,o){return e=Ea(7,e,o,t),e.lanes=n,e}function i2(e,t,n,o){return e=Ea(22,e,o,t),e.elementType=F5,e.lanes=n,e.stateNode={isHidden:!1},e}function TS(e,t,n){return e=Ea(6,e,null,t),e.lanes=n,e}function CS(e,t,n){return t=Ea(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function TR(e,t,n,o,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aS(0),this.expirationTimes=aS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aS(0),this.identifierPrefix=o,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function eC(e,t,n,o,s,f,g,w,y){return e=new TR(e,t,n,w,y),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Ea(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zT(f),e}function CR(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zh,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function LN(e){if(!e)return oc;e=e._reactInternals;e:{if(Xf(e)!==e||e.tag!==1)throw Error(qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Do(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qe(171))}if(e.tag===1){var n=e.type;if(Do(n))return NM(e,n,t)}return t}function PN(e,t,n,o,s,f,g,w,y){return e=eC(n,o,!0,e,s,f,g,w,y),e.context=LN(null),n=e.current,o=co(),s=tc(n),f=Ol(o,s),f.callback=t??null,Qu(n,f,s),e.current.lanes=s,h0(e,s,o),zo(e,o),e}function o2(e,t,n,o){var s=t.current,f=co(),g=tc(s);return n=LN(n),t.context===null?t.context=n:t.pendingContext=n,t=Ol(f,g),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Qu(s,t,g),e!==null&&(ss(e,s,g,f),$y(e,s,g)),g}function Cw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function tC(e,t){nA(e,t),(e=e.alternate)&&nA(e,t)}function kR(){return null}var IN=typeof reportError=="function"?reportError:function(e){console.error(e)};function nC(e){this._internalRoot=e}a2.prototype.render=nC.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qe(409));o2(e,t,null,null)};a2.prototype.unmount=nC.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vf(function(){o2(null,e,null,null)}),t[Dl]=null}};function a2(e){this._internalRoot=e}a2.prototype.unstable_scheduleHydration=function(e){if(e){var t=uM();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wu.length&&t!==0&&t<Wu[n].priority;n++);Wu.splice(n,0,e),n===0&&fM(e)}};function rC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function s2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rA(){}function AR(e,t,n,o,s){if(s){if(typeof o=="function"){var f=o;o=function(){var E=Cw(g);f.call(E)}}var g=PN(t,o,e,0,null,!1,!1,"",rA);return e._reactRootContainer=g,e[Dl]=g.current,n0(e.nodeType===8?e.parentNode:e),Vf(),g}for(;s=e.lastChild;)e.removeChild(s);if(typeof o=="function"){var w=o;o=function(){var E=Cw(y);w.call(E)}}var y=eC(e,0,!1,null,null,!1,!1,"",rA);return e._reactRootContainer=y,e[Dl]=y.current,n0(e.nodeType===8?e.parentNode:e),Vf(function(){o2(t,y,n,o)}),y}function l2(e,t,n,o,s){var f=n._reactRootContainer;if(f){var g=f;if(typeof s=="function"){var w=s;s=function(){var y=Cw(g);w.call(y)}}o2(t,g,e,s)}else g=AR(n,t,e,s,o);return Cw(g)}sM=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kv(t.pendingLanes);n!==0&&(xT(t,n|1),zo(t,zr()),!(Cn&6)&&(Sp=zr()+500,uc()))}break;case 13:Vf(function(){var o=zl(e,1);if(o!==null){var s=co();ss(o,e,1,s)}}),tC(e,1)}};ST=function(e){if(e.tag===13){var t=zl(e,134217728);if(t!==null){var n=co();ss(t,e,134217728,n)}tC(e,134217728)}};lM=function(e){if(e.tag===13){var t=tc(e),n=zl(e,t);if(n!==null){var o=co();ss(n,e,t,o)}tC(e,t)}};uM=function(){return jn};cM=function(e,t){var n=jn;try{return jn=e,t()}finally{jn=n}};iE=function(e,t,n){switch(t){case"input":if(JS(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var s=Xw(o);if(!s)throw Error(qe(90));$5(o),JS(o,s)}}}break;case"textarea":H5(e,n);break;case"select":t=n.value,t!=null&&sp(e,!!n.multiple,t,!1)}};K5=KT;J5=Vf;var MR={usingClientEntryPoint:!1,Events:[m0,Jh,Xw,G5,Y5,KT]},dv={findFiberByHostInstance:If,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},NR={bundleType:dv.bundleType,version:dv.version,rendererPackageName:dv.rendererPackageName,rendererConfig:dv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eM(e),e===null?null:e.stateNode},findFiberByHostInstance:dv.findFiberByHostInstance||kR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ky=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ky.isDisabled&&ky.supportsFiber)try{Gw=ky.inject(NR),zs=ky}catch{}}oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MR;oa.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rC(t))throw Error(qe(200));return CR(e,t,null,n)};oa.createRoot=function(e,t){if(!rC(e))throw Error(qe(299));var n=!1,o="",s=IN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=eC(e,1,!1,null,null,n,!1,o,s),e[Dl]=t.current,n0(e.nodeType===8?e.parentNode:e),new nC(t)};oa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qe(188)):(e=Object.keys(e).join(","),Error(qe(268,e)));return e=eM(t),e=e===null?null:e.stateNode,e};oa.flushSync=function(e){return Vf(e)};oa.hydrate=function(e,t,n){if(!s2(t))throw Error(qe(200));return l2(null,e,t,!0,n)};oa.hydrateRoot=function(e,t,n){if(!rC(e))throw Error(qe(405));var o=n!=null&&n.hydratedSources||null,s=!1,f="",g=IN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),t=PN(t,null,e,1,n??null,s,!1,f,g),e[Dl]=t.current,n0(e),o)for(e=0;e<o.length;e++)n=o[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new a2(t)};oa.render=function(e,t,n){if(!s2(t))throw Error(qe(200));return l2(null,e,t,!1,n)};oa.unmountComponentAtNode=function(e){if(!s2(e))throw Error(qe(40));return e._reactRootContainer?(Vf(function(){l2(null,null,e,!1,function(){e._reactRootContainer=null,e[Dl]=null})}),!0):!1};oa.unstable_batchedUpdates=KT;oa.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!s2(n))throw Error(qe(200));if(e==null||e._reactInternals===void 0)throw Error(qe(38));return l2(e,t,n,!1,o)};oa.version="18.2.0-next-9e3b772b8-20220608";function ON(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ON)}catch(e){console.error(e)}}ON(),P5.exports=oa;var RN=P5.exports;const LR=Kf(RN);var iA=RN;WS.createRoot=iA.createRoot,WS.hydrateRoot=iA.hydrateRoot;/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Er(){return Er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Er.apply(this,arguments)}var Rr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rr||(Rr={}));const oA="popstate";function PR(e){e===void 0&&(e={});function t(o,s){let{pathname:f,search:g,hash:w}=o.location;return f0("",{pathname:f,search:g,hash:w},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(o,s){return typeof s=="string"?s:v0(s)}return OR(t,n,null,e)}function yn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function IR(){return Math.random().toString(36).substr(2,8)}function aA(e,t){return{usr:e.state,key:e.key,idx:t}}function f0(e,t,n,o){return n===void 0&&(n=null),Er({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$l(t):t,{state:n,key:t&&t.key||o||IR()})}function v0(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function $l(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function OR(e,t,n,o){o===void 0&&(o={});let{window:s=document.defaultView,v5Compat:f=!1}=o,g=s.history,w=Rr.Pop,y=null,E=M();E==null&&(E=0,g.replaceState(Er({},g.state,{idx:E}),""));function M(){return(g.state||{idx:null}).idx}function N(){w=Rr.Pop;let X=M(),Z=X==null?null:X-E;E=X,y&&y({action:w,location:V.location,delta:Z})}function R(X,Z){w=Rr.Push;let D=f0(V.location,X,Z);n&&n(D,X),E=M()+1;let z=aA(D,E),H=V.createHref(D);try{g.pushState(z,"",H)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;s.location.assign(H)}f&&y&&y({action:w,location:V.location,delta:1})}function F(X,Z){w=Rr.Replace;let D=f0(V.location,X,Z);n&&n(D,X),E=M();let z=aA(D,E),H=V.createHref(D);g.replaceState(z,"",H),f&&y&&y({action:w,location:V.location,delta:0})}function $(X){let Z=s.location.origin!=="null"?s.location.origin:s.location.href,D=typeof X=="string"?X:v0(X);return yn(Z,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,Z)}let V={get action(){return w},get location(){return e(s,g)},listen(X){if(y)throw new Error("A history only accepts one active listener");return s.addEventListener(oA,N),y=X,()=>{s.removeEventListener(oA,N),y=null}},createHref(X){return t(s,X)},createURL:$,encodeLocation(X){let Z=$(X);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:R,replace:F,go(X){return g.go(X)}};return V}var Dr;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dr||(Dr={}));const RR=new Set(["lazy","caseSensitive","path","id","index","children"]);function DR(e){return e.index===!0}function zE(e,t,n,o){return n===void 0&&(n=[]),o===void 0&&(o={}),e.map((s,f)=>{let g=[...n,f],w=typeof s.id=="string"?s.id:g.join("-");if(yn(s.index!==!0||!s.children,"Cannot specify children on an index route"),yn(!o[w],'Found a route id collision on id "'+w+`".  Route id's must be globally unique within Data Router usages`),DR(s)){let y=Er({},s,t(s),{id:w});return o[w]=y,y}else{let y=Er({},s,t(s),{id:w,children:void 0});return o[w]=y,s.children&&(y.children=zE(s.children,t,g,o)),y}})}function ip(e,t,n){n===void 0&&(n="/");let o=typeof t=="string"?$l(t):t,s=_0(o.pathname||"/",n);if(s==null)return null;let f=DN(e);UR(f);let g=null;for(let w=0;g==null&&w<f.length;++w)g=qR(f[w],KR(s));return g}function zR(e,t){let{route:n,pathname:o,params:s}=e;return{id:n.id,pathname:o,params:s,data:t[n.id],handle:n.handle}}function DN(e,t,n,o){t===void 0&&(t=[]),n===void 0&&(n=[]),o===void 0&&(o="");let s=(f,g,w)=>{let y={relativePath:w===void 0?f.path||"":w,caseSensitive:f.caseSensitive===!0,childrenIndex:g,route:f};y.relativePath.startsWith("/")&&(yn(y.relativePath.startsWith(o),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(o.length));let E=rc([o,y.relativePath]),M=n.concat(y);f.children&&f.children.length>0&&(yn(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),DN(f.children,t,M,E)),!(f.path==null&&!f.index)&&t.push({path:E,score:VR(E,f.index),routesMeta:M})};return e.forEach((f,g)=>{var w;if(f.path===""||!((w=f.path)!=null&&w.includes("?")))s(f,g);else for(let y of zN(f.path))s(f,g,y)}),t}function zN(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,s=n.endsWith("?"),f=n.replace(/\?$/,"");if(o.length===0)return s?[f,""]:[f];let g=zN(o.join("/")),w=[];return w.push(...g.map(y=>y===""?f:[f,y].join("/"))),s&&w.push(...g),w.map(y=>e.startsWith("/")&&y===""?"/":y)}function UR(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ZR(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const FR=/^:\w+$/,BR=3,$R=2,jR=1,HR=10,WR=-2,sA=e=>e==="*";function VR(e,t){let n=e.split("/"),o=n.length;return n.some(sA)&&(o+=WR),t&&(o+=$R),n.filter(s=>!sA(s)).reduce((s,f)=>s+(FR.test(f)?BR:f===""?jR:HR),o)}function ZR(e,t){return e.length===t.length&&e.slice(0,-1).every((o,s)=>o===t[s])?e[e.length-1]-t[t.length-1]:0}function qR(e,t){let{routesMeta:n}=e,o={},s="/",f=[];for(let g=0;g<n.length;++g){let w=n[g],y=g===n.length-1,E=s==="/"?t:t.slice(s.length)||"/",M=GR({path:w.relativePath,caseSensitive:w.caseSensitive,end:y},E);if(!M)return null;Object.assign(o,M.params);let N=w.route;f.push({params:o,pathname:rc([s,M.pathname]),pathnameBase:e9(rc([s,M.pathnameBase])),route:N}),M.pathnameBase!=="/"&&(s=rc([s,M.pathnameBase]))}return f}function GR(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=YR(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let f=s[0],g=f.replace(/(.)\/+$/,"$1"),w=s.slice(1);return{params:o.reduce((E,M,N)=>{let{paramName:R,isOptional:F}=M;if(R==="*"){let V=w[N]||"";g=f.slice(0,f.length-V.length).replace(/(.)\/+$/,"$1")}const $=w[N];return F&&!$?E[R]=void 0:E[R]=JR($||"",R),E},{}),pathname:f,pathnameBase:g,pattern:e}}function YR(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Zf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(g,w,y)=>(o.push({paramName:w,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),o]}function KR(e){try{return decodeURI(e)}catch(t){return Zf(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function JR(e,t){try{return decodeURIComponent(e)}catch(n){return Zf(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function _0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}function XR(e,t){t===void 0&&(t="/");let{pathname:n,search:o="",hash:s=""}=typeof e=="string"?$l(e):e;return{pathname:n?n.startsWith("/")?n:QR(n,t):t,search:t9(o),hash:n9(s)}}function QR(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function kS(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iC(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function UN(e,t,n,o){o===void 0&&(o=!1);let s;typeof e=="string"?s=$l(e):(s=Er({},e),yn(!s.pathname||!s.pathname.includes("?"),kS("?","pathname","search",s)),yn(!s.pathname||!s.pathname.includes("#"),kS("#","pathname","hash",s)),yn(!s.search||!s.search.includes("#"),kS("#","search","hash",s)));let f=e===""||s.pathname==="",g=f?"/":s.pathname,w;if(o||g==null)w=n;else{let N=t.length-1;if(g.startsWith("..")){let R=g.split("/");for(;R[0]==="..";)R.shift(),N-=1;s.pathname=R.join("/")}w=N>=0?t[N]:"/"}let y=XR(s,w),E=g&&g!=="/"&&g.endsWith("/"),M=(f||g===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(E||M)&&(y.pathname+="/"),y}const rc=e=>e.join("/").replace(/\/\/+/g,"/"),e9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),t9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,n9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class oC{constructor(t,n,o,s){s===void 0&&(s=!1),this.status=t,this.statusText=n||"",this.internal=s,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function aC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const FN=["post","put","patch","delete"],r9=new Set(FN),i9=["get",...FN],o9=new Set(i9),a9=new Set([301,302,303,307,308]),s9=new Set([307,308]),AS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},l9={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},hv={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},BN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,u9=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),$N="remix-router-transitions";function c9(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",o=!n;yn(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let we=e.detectErrorBoundary;s=xe=>({hasErrorBoundary:we(xe)})}else s=u9;let f={},g=zE(e.routes,s,void 0,f),w,y=e.basename||"/",E=Er({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_prependBasename:!1},e.future),M=null,N=new Set,R=null,F=null,$=null,V=e.hydrationData!=null,X=ip(g,e.history.location,y),Z=null;if(X==null){let we=ba(404,{pathname:e.history.location.pathname}),{matches:xe,route:Ne}=mA(g);X=xe,Z={[Ne.id]:we}}let D=!X.some(we=>we.route.lazy)&&(!X.some(we=>we.route.loader)||e.hydrationData!=null),z,H={historyAction:e.history.action,location:e.history.location,matches:X,initialized:D,navigation:AS,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||Z,fetchers:new Map,blockers:new Map},se=Rr.Pop,he=!1,pe,ge=!1,ke=new Map,be=null,Ue=!1,it=!1,Xe=[],Te=[],Fe=new Map,ot=0,Je=-1,Le=new Map,Ye=new Set,Ze=new Map,ut=new Map,Qe=new Set,bn=new Map,At=new Map,hn=!1;function vt(){if(M=e.history.listen(we=>{let{action:xe,location:Ne,delta:et}=we;if(hn){hn=!1;return}Zf(At.size===0||et!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let yt=Fr({currentLocation:H.location,nextLocation:Ne,historyAction:xe});if(yt&&et!=null){hn=!0,e.history.go(et*-1),fi(yt,{state:"blocked",location:Ne,proceed(){fi(yt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ne}),e.history.go(et)},reset(){let St=new Map(H.blockers);St.set(yt,hv),ct({blockers:St})}});return}return Be(xe,Ne)}),n){b9(t,ke);let we=()=>x9(t,ke);t.addEventListener("pagehide",we),be=()=>t.removeEventListener("pagehide",we)}return H.initialized||Be(Rr.Pop,H.location),z}function xt(){M&&M(),be&&be(),N.clear(),pe&&pe.abort(),H.fetchers.forEach((we,xe)=>Ke(xe)),H.blockers.forEach((we,xe)=>ci(xe))}function rt(we){return N.add(we),()=>N.delete(we)}function ct(we,xe){H=Er({},H,we);let Ne=[],et=[];E.v7_fetcherPersist&&H.fetchers.forEach((yt,St)=>{yt.state==="idle"&&(Qe.has(St)?et.push(St):Ne.push(St))}),N.forEach(yt=>yt(H,{deletedFetchers:et,unstable_viewTransitionOpts:xe})),E.v7_fetcherPersist&&(Ne.forEach(yt=>H.fetchers.delete(yt)),et.forEach(yt=>Ke(yt)))}function Ve(we,xe){var Ne,et;let yt=H.actionData!=null&&H.navigation.formMethod!=null&&rs(H.navigation.formMethod)&&H.navigation.state==="loading"&&((Ne=we.state)==null?void 0:Ne._isRedirect)!==!0,St;xe.actionData?Object.keys(xe.actionData).length>0?St=xe.actionData:St=null:yt?St=H.actionData:St=null;let zt=xe.loaderData?pA(H.loaderData,xe.loaderData,xe.matches||[],xe.errors):H.loaderData,bt=H.blockers;bt.size>0&&(bt=new Map(bt),bt.forEach((Ln,Vt)=>bt.set(Vt,hv)));let gt=he===!0||H.navigation.formMethod!=null&&rs(H.navigation.formMethod)&&((et=we.state)==null?void 0:et._isRedirect)!==!0;w&&(g=w,w=void 0),Ue||se===Rr.Pop||(se===Rr.Push?e.history.push(we,we.state):se===Rr.Replace&&e.history.replace(we,we.state));let Xt;if(se===Rr.Pop){let Ln=ke.get(H.location.pathname);Ln&&Ln.has(we.pathname)?Xt={currentLocation:H.location,nextLocation:we}:ke.has(we.pathname)&&(Xt={currentLocation:we,nextLocation:H.location})}else if(ge){let Ln=ke.get(H.location.pathname);Ln?Ln.add(we.pathname):(Ln=new Set([we.pathname]),ke.set(H.location.pathname,Ln)),Xt={currentLocation:H.location,nextLocation:we}}ct(Er({},xe,{actionData:St,loaderData:zt,historyAction:se,location:we,initialized:!0,navigation:AS,revalidation:"idle",restoreScrollPosition:vo(we,xe.matches||H.matches),preventScrollReset:gt,blockers:bt}),Xt),se=Rr.Pop,he=!1,ge=!1,Ue=!1,it=!1,Xe=[],Te=[]}async function Ct(we,xe){if(typeof we=="number"){e.history.go(we);return}let Ne=UE(H.location,H.matches,y,E.v7_prependBasename,we,xe==null?void 0:xe.fromRouteId,xe==null?void 0:xe.relative),{path:et,submission:yt,error:St}=lA(E.v7_normalizeFormMethod,!1,Ne,xe),zt=H.location,bt=f0(H.location,et,xe&&xe.state);bt=Er({},bt,e.history.encodeLocation(bt));let gt=xe&&xe.replace!=null?xe.replace:void 0,Xt=Rr.Push;gt===!0?Xt=Rr.Replace:gt===!1||yt!=null&&rs(yt.formMethod)&&yt.formAction===H.location.pathname+H.location.search&&(Xt=Rr.Replace);let Ln=xe&&"preventScrollReset"in xe?xe.preventScrollReset===!0:void 0,Vt=Fr({currentLocation:zt,nextLocation:bt,historyAction:Xt});if(Vt){fi(Vt,{state:"blocked",location:bt,proceed(){fi(Vt,{state:"proceeding",proceed:void 0,reset:void 0,location:bt}),Ct(we,xe)},reset(){let jt=new Map(H.blockers);jt.set(Vt,hv),ct({blockers:jt})}});return}return await Be(Xt,bt,{submission:yt,pendingError:St,preventScrollReset:Ln,replace:xe&&xe.replace,enableViewTransition:xe&&xe.unstable_viewTransition})}function Jt(){if(Vn(),ct({revalidation:"loading"}),H.navigation.state!=="submitting"){if(H.navigation.state==="idle"){Be(H.historyAction,H.location,{startUninterruptedRevalidation:!0});return}Be(se||H.historyAction,H.navigation.location,{overrideNavigation:H.navigation})}}async function Be(we,xe,Ne){pe&&pe.abort(),pe=null,se=we,Ue=(Ne&&Ne.startUninterruptedRevalidation)===!0,La(H.location,H.matches),he=(Ne&&Ne.preventScrollReset)===!0,ge=(Ne&&Ne.enableViewTransition)===!0;let et=w||g,yt=Ne&&Ne.overrideNavigation,St=ip(et,xe,y);if(!St){let jt=ba(404,{pathname:xe.pathname}),{matches:Pn,route:Xr}=mA(et);Jr(),Ve(xe,{matches:Pn,loaderData:{},errors:{[Xr.id]:jt}});return}if(H.initialized&&!it&&m9(H.location,xe)&&!(Ne&&Ne.submission&&rs(Ne.submission.formMethod))){Ve(xe,{matches:St});return}pe=new AbortController;let zt=mv(e.history,xe,pe.signal,Ne&&Ne.submission),bt,gt;if(Ne&&Ne.pendingError)gt={[$v(St).route.id]:Ne.pendingError};else if(Ne&&Ne.submission&&rs(Ne.submission.formMethod)){let jt=await at(zt,xe,Ne.submission,St,{replace:Ne.replace});if(jt.shortCircuited)return;bt=jt.pendingActionData,gt=jt.pendingActionError,yt=MS(xe,Ne.submission),zt=new Request(zt.url,{signal:zt.signal})}let{shortCircuited:Xt,loaderData:Ln,errors:Vt}=await ft(zt,xe,St,yt,Ne&&Ne.submission,Ne&&Ne.fetcherSubmission,Ne&&Ne.replace,bt,gt);Xt||(pe=null,Ve(xe,Er({matches:St},bt?{actionData:bt}:{},{loaderData:Ln,errors:Vt})))}async function at(we,xe,Ne,et,yt){yt===void 0&&(yt={}),Vn();let St=y9(xe,Ne);ct({navigation:St});let zt,bt=BE(et,xe);if(!bt.route.action&&!bt.route.lazy)zt={type:Dr.error,error:ba(405,{method:we.method,pathname:xe.pathname,routeId:bt.route.id})};else if(zt=await pv("action",we,bt,et,f,s,y),we.signal.aborted)return{shortCircuited:!0};if(hp(zt)){let gt;return yt&&yt.replace!=null?gt=yt.replace:gt=zt.location===H.location.pathname+H.location.search,await Mn(H,zt,{submission:Ne,replace:gt}),{shortCircuited:!0}}if(jv(zt)){let gt=$v(et,bt.route.id);return(yt&&yt.replace)!==!0&&(se=Rr.Push),{pendingActionData:{},pendingActionError:{[gt.route.id]:zt.error}}}if(Df(zt))throw ba(400,{type:"defer-action"});return{pendingActionData:{[bt.route.id]:zt.data}}}async function ft(we,xe,Ne,et,yt,St,zt,bt,gt){let Xt=et||MS(xe,yt),Ln=yt||St||_A(Xt),Vt=w||g,[jt,Pn]=uA(e.history,H,Ne,Ln,xe,it,Xe,Te,Ze,Ye,Vt,y,bt,gt);if(Jr(Me=>!(Ne&&Ne.some(ce=>ce.route.id===Me))||jt&&jt.some(ce=>ce.route.id===Me)),Je=++ot,jt.length===0&&Pn.length===0){let Me=Yr();return Ve(xe,Er({matches:Ne,loaderData:{},errors:gt||null},bt?{actionData:bt}:{},Me?{fetchers:new Map(H.fetchers)}:{})),{shortCircuited:!0}}if(!Ue){Pn.forEach(ce=>{let Pe=H.fetchers.get(ce.key),$e=gv(void 0,Pe?Pe.data:void 0);H.fetchers.set(ce.key,$e)});let Me=bt||H.actionData;ct(Er({navigation:Xt},Me?Object.keys(Me).length===0?{actionData:null}:{actionData:Me}:{},Pn.length>0?{fetchers:new Map(H.fetchers)}:{}))}Pn.forEach(Me=>{Fe.has(Me.key)&&Zn(Me.key),Me.controller&&Fe.set(Me.key,Me.controller)});let Xr=()=>Pn.forEach(Me=>Zn(Me.key));pe&&pe.signal.addEventListener("abort",Xr);let{results:yi,loaderResults:_o,fetcherResults:oe}=await Bn(H.matches,Ne,jt,Pn,we);if(we.signal.aborted)return{shortCircuited:!0};pe&&pe.signal.removeEventListener("abort",Xr),Pn.forEach(Me=>Fe.delete(Me.key));let Ie=gA(yi);if(Ie){if(Ie.idx>=jt.length){let Me=Pn[Ie.idx-jt.length].key;Ye.add(Me)}return await Mn(H,Ie.result,{replace:zt}),{shortCircuited:!0}}let{loaderData:Ge,errors:kt}=hA(H,Ne,jt,_o,gt,Pn,oe,bn);bn.forEach((Me,ce)=>{Me.subscribe(Pe=>{(Pe||Me.done)&&bn.delete(ce)})});let Gt=Yr(),sn=Kr(Je),Zt=Gt||sn||Pn.length>0;return Er({loaderData:Ge,errors:kt},Zt?{fetchers:new Map(H.fetchers)}:{})}function An(we){return E.v7_fetcherPersist&&(ut.set(we,(ut.get(we)||0)+1),Qe.has(we)&&Qe.delete(we)),H.fetchers.get(we)||l9}function _n(we,xe,Ne,et){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Fe.has(we)&&Zn(we);let yt=w||g,St=UE(H.location,H.matches,y,E.v7_prependBasename,Ne,xe,et==null?void 0:et.relative),zt=ip(yt,St,y);if(!zt){Qn(we,xe,ba(404,{pathname:St}));return}let{path:bt,submission:gt,error:Xt}=lA(E.v7_normalizeFormMethod,!0,St,et);if(Xt){Qn(we,xe,Xt);return}let Ln=BE(zt,bt);if(he=(et&&et.preventScrollReset)===!0,gt&&rs(gt.formMethod)){ur(we,xe,bt,Ln,zt,gt);return}Ze.set(we,{routeId:xe,path:bt}),gr(we,xe,bt,Ln,zt,gt)}async function ur(we,xe,Ne,et,yt,St){if(Vn(),Ze.delete(we),!et.route.action&&!et.route.lazy){let $e=ba(405,{method:St.formMethod,pathname:Ne,routeId:xe});Qn(we,xe,$e);return}let zt=H.fetchers.get(we),bt=w9(St,zt);H.fetchers.set(we,bt),ct({fetchers:new Map(H.fetchers)});let gt=new AbortController,Xt=mv(e.history,Ne,gt.signal,St);Fe.set(we,gt);let Ln=ot,Vt=await pv("action",Xt,et,yt,f,s,y);if(Xt.signal.aborted){Fe.get(we)===gt&&Fe.delete(we);return}if(Qe.has(we)){H.fetchers.set(we,Bu(void 0)),ct({fetchers:new Map(H.fetchers)});return}if(hp(Vt))if(Fe.delete(we),Je>Ln){let $e=Bu(void 0);H.fetchers.set(we,$e),ct({fetchers:new Map(H.fetchers)});return}else{Ye.add(we);let $e=gv(St);return H.fetchers.set(we,$e),ct({fetchers:new Map(H.fetchers)}),Mn(H,Vt,{fetcherSubmission:St})}if(jv(Vt)){Qn(we,xe,Vt.error);return}if(Df(Vt))throw ba(400,{type:"defer-action"});let jt=H.navigation.location||H.location,Pn=mv(e.history,jt,gt.signal),Xr=w||g,yi=H.navigation.state!=="idle"?ip(Xr,H.navigation.location,y):H.matches;yn(yi,"Didn't find any matches after fetcher action");let _o=++ot;Le.set(we,_o);let oe=gv(St,Vt.data);H.fetchers.set(we,oe);let[Ie,Ge]=uA(e.history,H,yi,St,jt,it,Xe,Te,Ze,Ye,Xr,y,{[et.route.id]:Vt.data},void 0);Ge.filter($e=>$e.key!==we).forEach($e=>{let $t=$e.key,xn=H.fetchers.get($t),Jn=gv(void 0,xn?xn.data:void 0);H.fetchers.set($t,Jn),Fe.has($t)&&Zn($t),$e.controller&&Fe.set($t,$e.controller)}),ct({fetchers:new Map(H.fetchers)});let kt=()=>Ge.forEach($e=>Zn($e.key));gt.signal.addEventListener("abort",kt);let{results:Gt,loaderResults:sn,fetcherResults:Zt}=await Bn(H.matches,yi,Ie,Ge,Pn);if(gt.signal.aborted)return;gt.signal.removeEventListener("abort",kt),Le.delete(we),Fe.delete(we),Ge.forEach($e=>Fe.delete($e.key));let Me=gA(Gt);if(Me){if(Me.idx>=Ie.length){let $e=Ge[Me.idx-Ie.length].key;Ye.add($e)}return Mn(H,Me.result)}let{loaderData:ce,errors:Pe}=hA(H,H.matches,Ie,sn,void 0,Ge,Zt,bn);if(H.fetchers.has(we)){let $e=Bu(Vt.data);H.fetchers.set(we,$e)}Kr(_o),H.navigation.state==="loading"&&_o>Je?(yn(se,"Expected pending action"),pe&&pe.abort(),Ve(H.navigation.location,{matches:yi,loaderData:ce,errors:Pe,fetchers:new Map(H.fetchers)})):(ct({errors:Pe,loaderData:pA(H.loaderData,ce,yi,Pe),fetchers:new Map(H.fetchers)}),it=!1)}async function gr(we,xe,Ne,et,yt,St){let zt=H.fetchers.get(we),bt=gv(St,zt?zt.data:void 0);H.fetchers.set(we,bt),ct({fetchers:new Map(H.fetchers)});let gt=new AbortController,Xt=mv(e.history,Ne,gt.signal);Fe.set(we,gt);let Ln=ot,Vt=await pv("loader",Xt,et,yt,f,s,y);if(Df(Vt)&&(Vt=await WN(Vt,Xt.signal,!0)||Vt),Fe.get(we)===gt&&Fe.delete(we),Xt.signal.aborted)return;if(Qe.has(we)){H.fetchers.set(we,Bu(void 0)),ct({fetchers:new Map(H.fetchers)});return}if(hp(Vt))if(Je>Ln){let Pn=Bu(void 0);H.fetchers.set(we,Pn),ct({fetchers:new Map(H.fetchers)});return}else{Ye.add(we),await Mn(H,Vt);return}if(jv(Vt)){Qn(we,xe,Vt.error);return}yn(!Df(Vt),"Unhandled fetcher deferred data");let jt=Bu(Vt.data);H.fetchers.set(we,jt),ct({fetchers:new Map(H.fetchers)})}async function Mn(we,xe,Ne){let{submission:et,fetcherSubmission:yt,replace:St}=Ne===void 0?{}:Ne;xe.revalidate&&(it=!0);let zt=f0(we.location,xe.location,{_isRedirect:!0});if(yn(zt,"Expected a location on the redirect navigation"),n){let jt=!1;if(xe.reloadDocument)jt=!0;else if(BN.test(xe.location)){const Pn=e.history.createURL(xe.location);jt=Pn.origin!==t.location.origin||_0(Pn.pathname,y)==null}if(jt){St?t.location.replace(xe.location):t.location.assign(xe.location);return}}pe=null;let bt=St===!0?Rr.Replace:Rr.Push,{formMethod:gt,formAction:Xt,formEncType:Ln}=we.navigation;!et&&!yt&&gt&&Xt&&Ln&&(et=_A(we.navigation));let Vt=et||yt;if(s9.has(xe.status)&&Vt&&rs(Vt.formMethod))await Be(bt,zt,{submission:Er({},Vt,{formAction:xe.location}),preventScrollReset:he});else{let jt=MS(zt,et);await Be(bt,zt,{overrideNavigation:jt,fetcherSubmission:yt,preventScrollReset:he})}}async function Bn(we,xe,Ne,et,yt){let St=await Promise.all([...Ne.map(gt=>pv("loader",yt,gt,xe,f,s,y)),...et.map(gt=>gt.matches&&gt.match&&gt.controller?pv("loader",mv(e.history,gt.path,gt.controller.signal),gt.match,gt.matches,f,s,y):{type:Dr.error,error:ba(404,{pathname:gt.path})})]),zt=St.slice(0,Ne.length),bt=St.slice(Ne.length);return await Promise.all([vA(we,Ne,zt,zt.map(()=>yt.signal),!1,H.loaderData),vA(we,et.map(gt=>gt.match),bt,et.map(gt=>gt.controller?gt.controller.signal:null),!0)]),{results:St,loaderResults:zt,fetcherResults:bt}}function Vn(){it=!0,Xe.push(...Jr()),Ze.forEach((we,xe)=>{Fe.has(xe)&&(Te.push(xe),Zn(xe))})}function Qn(we,xe,Ne){let et=$v(H.matches,xe);Ke(we),ct({errors:{[et.route.id]:Ne},fetchers:new Map(H.fetchers)})}function Ke(we){let xe=H.fetchers.get(we);Fe.has(we)&&!(xe&&xe.state==="loading"&&Le.has(we))&&Zn(we),Ze.delete(we),Le.delete(we),Ye.delete(we),Qe.delete(we),H.fetchers.delete(we)}function Nn(we){if(E.v7_fetcherPersist){let xe=(ut.get(we)||0)-1;xe<=0?(ut.delete(we),Qe.add(we)):ut.set(we,xe)}else Ke(we);ct({fetchers:new Map(H.fetchers)})}function Zn(we){let xe=Fe.get(we);yn(xe,"Expected fetch controller: "+we),xe.abort(),Fe.delete(we)}function er(we){for(let xe of we){let Ne=An(xe),et=Bu(Ne.data);H.fetchers.set(xe,et)}}function Yr(){let we=[],xe=!1;for(let Ne of Ye){let et=H.fetchers.get(Ne);yn(et,"Expected fetcher: "+Ne),et.state==="loading"&&(Ye.delete(Ne),we.push(Ne),xe=!0)}return er(we),xe}function Kr(we){let xe=[];for(let[Ne,et]of Le)if(et<we){let yt=H.fetchers.get(Ne);yn(yt,"Expected fetcher: "+Ne),yt.state==="loading"&&(Zn(Ne),Le.delete(Ne),xe.push(Ne))}return er(xe),xe.length>0}function Uo(we,xe){let Ne=H.blockers.get(we)||hv;return At.get(we)!==xe&&At.set(we,xe),Ne}function ci(we){H.blockers.delete(we),At.delete(we)}function fi(we,xe){let Ne=H.blockers.get(we)||hv;yn(Ne.state==="unblocked"&&xe.state==="blocked"||Ne.state==="blocked"&&xe.state==="blocked"||Ne.state==="blocked"&&xe.state==="proceeding"||Ne.state==="blocked"&&xe.state==="unblocked"||Ne.state==="proceeding"&&xe.state==="unblocked","Invalid blocker state transition: "+Ne.state+" -> "+xe.state);let et=new Map(H.blockers);et.set(we,xe),ct({blockers:et})}function Fr(we){let{currentLocation:xe,nextLocation:Ne,historyAction:et}=we;if(At.size===0)return;At.size>1&&Zf(!1,"A router only supports one blocker at a time");let yt=Array.from(At.entries()),[St,zt]=yt[yt.length-1],bt=H.blockers.get(St);if(!(bt&&bt.state==="proceeding")&&zt({currentLocation:xe,nextLocation:Ne,historyAction:et}))return St}function Jr(we){let xe=[];return bn.forEach((Ne,et)=>{(!we||we(et))&&(Ne.cancel(),xe.push(et),bn.delete(et))}),xe}function Fo(we,xe,Ne){if(R=we,$=xe,F=Ne||null,!V&&H.navigation===AS){V=!0;let et=vo(H.location,H.matches);et!=null&&ct({restoreScrollPosition:et})}return()=>{R=null,$=null,F=null}}function go(we,xe){return F&&F(we,xe.map(et=>zR(et,H.loaderData)))||we.key}function La(we,xe){if(R&&$){let Ne=go(we,xe);R[Ne]=$()}}function vo(we,xe){if(R){let Ne=go(we,xe),et=R[Ne];if(typeof et=="number")return et}return null}function Pa(we){f={},w=zE(we,s,void 0,f)}return z={get basename(){return y},get state(){return H},get routes(){return g},get window(){return t},initialize:vt,subscribe:rt,enableScrollRestoration:Fo,navigate:Ct,fetch:_n,revalidate:Jt,createHref:we=>e.history.createHref(we),encodeLocation:we=>e.history.encodeLocation(we),getFetcher:An,deleteFetcher:Nn,dispose:xt,getBlocker:Uo,deleteBlocker:ci,_internalFetchControllers:Fe,_internalActiveDeferreds:bn,_internalSetRoutes:Pa},z}function f9(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function UE(e,t,n,o,s,f,g){let w,y;if(f!=null&&g!=="path"){w=[];for(let M of t)if(w.push(M),M.route.id===f){y=M;break}}else w=t,y=t[t.length-1];let E=UN(s||".",iC(w).map(M=>M.pathnameBase),_0(e.pathname,n)||e.pathname,g==="path");return s==null&&(E.search=e.search,E.hash=e.hash),(s==null||s===""||s===".")&&y&&y.route.index&&!sC(E.search)&&(E.search=E.search?E.search.replace(/^\?/,"?index&"):"?index"),o&&n!=="/"&&(E.pathname=E.pathname==="/"?n:rc([n,E.pathname])),v0(E)}function lA(e,t,n,o){if(!o||!f9(o))return{path:n};if(o.formMethod&&!_9(o.formMethod))return{path:n,error:ba(405,{method:o.formMethod})};let s=()=>({path:n,error:ba(400,{type:"invalid-body"})}),f=o.formMethod||"get",g=e?f.toUpperCase():f.toLowerCase(),w=HN(n);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!rs(g))return s();let R=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((F,$)=>{let[V,X]=$;return""+F+V+"="+X+`
`},""):String(o.body);return{path:n,submission:{formMethod:g,formAction:w,formEncType:o.formEncType,formData:void 0,json:void 0,text:R}}}else if(o.formEncType==="application/json"){if(!rs(g))return s();try{let R=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:n,submission:{formMethod:g,formAction:w,formEncType:o.formEncType,formData:void 0,json:R,text:void 0}}}catch{return s()}}}yn(typeof FormData=="function","FormData is not available in this environment");let y,E;if(o.formData)y=FE(o.formData),E=o.formData;else if(o.body instanceof FormData)y=FE(o.body),E=o.body;else if(o.body instanceof URLSearchParams)y=o.body,E=dA(y);else if(o.body==null)y=new URLSearchParams,E=new FormData;else try{y=new URLSearchParams(o.body),E=dA(y)}catch{return s()}let M={formMethod:g,formAction:w,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:E,json:void 0,text:void 0};if(rs(M.formMethod))return{path:n,submission:M};let N=$l(n);return t&&N.search&&sC(N.search)&&y.append("index",""),N.search="?"+y,{path:v0(N),submission:M}}function d9(e,t){let n=e;if(t){let o=e.findIndex(s=>s.route.id===t);o>=0&&(n=e.slice(0,o))}return n}function uA(e,t,n,o,s,f,g,w,y,E,M,N,R,F){let $=F?Object.values(F)[0]:R?Object.values(R)[0]:void 0,V=e.createURL(t.location),X=e.createURL(s),Z=F?Object.keys(F)[0]:void 0,z=d9(n,Z).filter((se,he)=>{if(se.route.lazy)return!0;if(se.route.loader==null)return!1;if(h9(t.loaderData,t.matches[he],se)||g.some(ke=>ke===se.route.id))return!0;let pe=t.matches[he],ge=se;return cA(se,Er({currentUrl:V,currentParams:pe.params,nextUrl:X,nextParams:ge.params},o,{actionResult:$,defaultShouldRevalidate:f||V.pathname+V.search===X.pathname+X.search||V.search!==X.search||jN(pe,ge)}))}),H=[];return y.forEach((se,he)=>{if(!n.some(Ue=>Ue.route.id===se.routeId))return;let pe=ip(M,se.path,N);if(!pe){H.push({key:he,routeId:se.routeId,path:se.path,matches:null,match:null,controller:null});return}let ge=t.fetchers.get(he),ke=BE(pe,se.path),be=!1;E.has(he)?be=!1:w.includes(he)?be=!0:ge&&ge.state!=="idle"&&ge.data===void 0?be=f:be=cA(ke,Er({currentUrl:V,currentParams:t.matches[t.matches.length-1].params,nextUrl:X,nextParams:n[n.length-1].params},o,{actionResult:$,defaultShouldRevalidate:f})),be&&H.push({key:he,routeId:se.routeId,path:se.path,matches:pe,match:ke,controller:new AbortController})}),[z,H]}function h9(e,t,n){let o=!t||n.route.id!==t.route.id,s=e[n.route.id]===void 0;return o||s}function jN(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function cA(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function fA(e,t,n){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let s=n[e.id];yn(s,"No route found in manifest");let f={};for(let g in o){let y=s[g]!==void 0&&g!=="hasErrorBoundary";Zf(!y,'Route "'+s.id+'" has a static property "'+g+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+g+'" will be ignored.')),!y&&!RR.has(g)&&(f[g]=o[g])}Object.assign(s,f),Object.assign(s,Er({},t(s),{lazy:void 0}))}async function pv(e,t,n,o,s,f,g,w){w===void 0&&(w={});let y,E,M,N=$=>{let V,X=new Promise((Z,D)=>V=D);return M=()=>V(),t.signal.addEventListener("abort",M),Promise.race([$({request:t,params:n.params,context:w.requestContext}),X])};try{let $=n.route[e];if(n.route.lazy)if($){let V,X=await Promise.all([N($).catch(Z=>{V=Z}),fA(n.route,f,s)]);if(V)throw V;E=X[0]}else if(await fA(n.route,f,s),$=n.route[e],$)E=await N($);else if(e==="action"){let V=new URL(t.url),X=V.pathname+V.search;throw ba(405,{method:t.method,pathname:X,routeId:n.route.id})}else return{type:Dr.data,data:void 0};else if($)E=await N($);else{let V=new URL(t.url),X=V.pathname+V.search;throw ba(404,{pathname:X})}yn(E!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch($){y=Dr.error,E=$}finally{M&&t.signal.removeEventListener("abort",M)}if(v9(E)){let $=E.status;if(a9.has($)){let Z=E.headers.get("Location");if(yn(Z,"Redirects returned/thrown from loaders/actions must have a Location header"),!BN.test(Z))Z=UE(new URL(t.url),o.slice(0,o.indexOf(n)+1),g,!0,Z);else if(!w.isStaticRequest){let D=new URL(t.url),z=Z.startsWith("//")?new URL(D.protocol+Z):new URL(Z),H=_0(z.pathname,g)!=null;z.origin===D.origin&&H&&(Z=z.pathname+z.search+z.hash)}if(w.isStaticRequest)throw E.headers.set("Location",Z),E;return{type:Dr.redirect,status:$,location:Z,revalidate:E.headers.get("X-Remix-Revalidate")!==null,reloadDocument:E.headers.get("X-Remix-Reload-Document")!==null}}if(w.isRouteRequest)throw{type:y===Dr.error?Dr.error:Dr.data,response:E};let V,X=E.headers.get("Content-Type");return X&&/\bapplication\/json\b/.test(X)?V=await E.json():V=await E.text(),y===Dr.error?{type:y,error:new oC($,E.statusText,V),headers:E.headers}:{type:Dr.data,data:V,statusCode:E.status,headers:E.headers}}if(y===Dr.error)return{type:y,error:E};if(g9(E)){var R,F;return{type:Dr.deferred,deferredData:E,statusCode:(R=E.init)==null?void 0:R.status,headers:((F=E.init)==null?void 0:F.headers)&&new Headers(E.init.headers)}}return{type:Dr.data,data:E}}function mv(e,t,n,o){let s=e.createURL(HN(t)).toString(),f={signal:n};if(o&&rs(o.formMethod)){let{formMethod:g,formEncType:w}=o;f.method=g.toUpperCase(),w==="application/json"?(f.headers=new Headers({"Content-Type":w}),f.body=JSON.stringify(o.json)):w==="text/plain"?f.body=o.text:w==="application/x-www-form-urlencoded"&&o.formData?f.body=FE(o.formData):f.body=o.formData}return new Request(s,f)}function FE(e){let t=new URLSearchParams;for(let[n,o]of e.entries())t.append(n,typeof o=="string"?o:o.name);return t}function dA(e){let t=new FormData;for(let[n,o]of e.entries())t.append(n,o);return t}function p9(e,t,n,o,s){let f={},g=null,w,y=!1,E={};return n.forEach((M,N)=>{let R=t[N].route.id;if(yn(!hp(M),"Cannot handle redirect results in processLoaderData"),jv(M)){let F=$v(e,R),$=M.error;o&&($=Object.values(o)[0],o=void 0),g=g||{},g[F.route.id]==null&&(g[F.route.id]=$),f[R]=void 0,y||(y=!0,w=aC(M.error)?M.error.status:500),M.headers&&(E[R]=M.headers)}else Df(M)?(s.set(R,M.deferredData),f[R]=M.deferredData.data):f[R]=M.data,M.statusCode!=null&&M.statusCode!==200&&!y&&(w=M.statusCode),M.headers&&(E[R]=M.headers)}),o&&(g=o,f[Object.keys(o)[0]]=void 0),{loaderData:f,errors:g,statusCode:w||200,loaderHeaders:E}}function hA(e,t,n,o,s,f,g,w){let{loaderData:y,errors:E}=p9(t,n,o,s,w);for(let M=0;M<f.length;M++){let{key:N,match:R,controller:F}=f[M];yn(g!==void 0&&g[M]!==void 0,"Did not find corresponding fetcher result");let $=g[M];if(!(F&&F.signal.aborted))if(jv($)){let V=$v(e.matches,R==null?void 0:R.route.id);E&&E[V.route.id]||(E=Er({},E,{[V.route.id]:$.error})),e.fetchers.delete(N)}else if(hp($))yn(!1,"Unhandled fetcher revalidation redirect");else if(Df($))yn(!1,"Unhandled fetcher deferred data");else{let V=Bu($.data);e.fetchers.set(N,V)}}return{loaderData:y,errors:E}}function pA(e,t,n,o){let s=Er({},t);for(let f of n){let g=f.route.id;if(t.hasOwnProperty(g)?t[g]!==void 0&&(s[g]=t[g]):e[g]!==void 0&&f.route.loader&&(s[g]=e[g]),o&&o.hasOwnProperty(g))break}return s}function $v(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function mA(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ba(e,t){let{pathname:n,routeId:o,method:s,type:f}=t===void 0?{}:t,g="Unknown Server Error",w="Unknown @remix-run/router error";return e===400?(g="Bad Request",s&&n&&o?w="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":f==="defer-action"?w="defer() is not supported in actions":f==="invalid-body"&&(w="Unable to encode submission body")):e===403?(g="Forbidden",w='Route "'+o+'" does not match URL "'+n+'"'):e===404?(g="Not Found",w='No route matches URL "'+n+'"'):e===405&&(g="Method Not Allowed",s&&n&&o?w="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":s&&(w='Invalid request method "'+s.toUpperCase()+'"')),new oC(e||500,g,new Error(w),!0)}function gA(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(hp(n))return{result:n,idx:t}}}function HN(e){let t=typeof e=="string"?$l(e):e;return v0(Er({},t,{hash:""}))}function m9(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Df(e){return e.type===Dr.deferred}function jv(e){return e.type===Dr.error}function hp(e){return(e&&e.type)===Dr.redirect}function g9(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function v9(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function _9(e){return o9.has(e.toLowerCase())}function rs(e){return r9.has(e.toLowerCase())}async function vA(e,t,n,o,s,f){for(let g=0;g<n.length;g++){let w=n[g],y=t[g];if(!y)continue;let E=e.find(N=>N.route.id===y.route.id),M=E!=null&&!jN(E,y)&&(f&&f[y.route.id])!==void 0;if(Df(w)&&(s||M)){let N=o[g];yn(N,"Expected an AbortSignal for revalidating fetcher deferred result"),await WN(w,N,s).then(R=>{R&&(n[g]=R||n[g])})}}}async function WN(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Dr.data,data:e.deferredData.unwrappedData}}catch(s){return{type:Dr.error,error:s}}return{type:Dr.data,data:e.deferredData.data}}}function sC(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function BE(e,t){let n=typeof t=="string"?$l(t).search:t.search;if(e[e.length-1].route.index&&sC(n||""))return e[e.length-1];let o=iC(e);return o[o.length-1]}function _A(e){let{formMethod:t,formAction:n,formEncType:o,text:s,formData:f,json:g}=e;if(!(!t||!n||!o)){if(s!=null)return{formMethod:t,formAction:n,formEncType:o,formData:void 0,json:void 0,text:s};if(f!=null)return{formMethod:t,formAction:n,formEncType:o,formData:f,json:void 0,text:void 0};if(g!==void 0)return{formMethod:t,formAction:n,formEncType:o,formData:void 0,json:g,text:void 0}}}function MS(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function y9(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function gv(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function w9(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Bu(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function b9(e,t){try{let n=e.sessionStorage.getItem($N);if(n){let o=JSON.parse(n);for(let[s,f]of Object.entries(o||{}))f&&Array.isArray(f)&&t.set(s,new Set(f||[]))}}catch{}}function x9(e,t){if(t.size>0){let n={};for(let[o,s]of t)n[o]=[...s];try{e.sessionStorage.setItem($N,JSON.stringify(n))}catch(o){Zf(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kw(){return kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},kw.apply(this,arguments)}const u2=J.createContext(null),VN=J.createContext(null),c2=J.createContext(null),f2=J.createContext(null),cc=J.createContext({outlet:null,matches:[],isDataRoute:!1}),ZN=J.createContext(null);function d2(){return J.useContext(f2)!=null}function lC(){return d2()||yn(!1),J.useContext(f2).location}function qN(e){J.useContext(c2).static||J.useLayoutEffect(e)}function uC(){let{isDataRoute:e}=J.useContext(cc);return e?R9():S9()}function S9(){d2()||yn(!1);let e=J.useContext(u2),{basename:t,navigator:n}=J.useContext(c2),{matches:o}=J.useContext(cc),{pathname:s}=lC(),f=JSON.stringify(iC(o).map(y=>y.pathnameBase)),g=J.useRef(!1);return qN(()=>{g.current=!0}),J.useCallback(function(y,E){if(E===void 0&&(E={}),!g.current)return;if(typeof y=="number"){n.go(y);return}let M=UN(y,JSON.parse(f),s,E.relative==="path");e==null&&t!=="/"&&(M.pathname=M.pathname==="/"?t:rc([t,M.pathname])),(E.replace?n.replace:n.push)(M,E.state,E)},[t,n,f,s,e])}const E9=J.createContext(null);function T9(e){let t=J.useContext(cc).outlet;return t&&J.createElement(E9.Provider,{value:e},t)}function y0(){let{matches:e}=J.useContext(cc),t=e[e.length-1];return t?t.params:{}}function C9(e,t,n){d2()||yn(!1);let{navigator:o}=J.useContext(c2),{matches:s}=J.useContext(cc),f=s[s.length-1],g=f?f.params:{};f&&f.pathname;let w=f?f.pathnameBase:"/";f&&f.route;let y=lC(),E;if(t){var M;let V=typeof t=="string"?$l(t):t;w==="/"||(M=V.pathname)!=null&&M.startsWith(w)||yn(!1),E=V}else E=y;let N=E.pathname||"/",R=w==="/"?N:N.slice(w.length)||"/",F=ip(e,{pathname:R}),$=L9(F&&F.map(V=>Object.assign({},V,{params:Object.assign({},g,V.params),pathname:rc([w,o.encodeLocation?o.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?w:rc([w,o.encodeLocation?o.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),s,n);return t&&$?J.createElement(f2.Provider,{value:{location:kw({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Rr.Pop}},$):$}function k9(){let e=KN(),t=aC(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},f=null;return J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},t),n?J.createElement("pre",{style:s},n):null,f)}const A9=J.createElement(k9,null);class M9 extends J.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?J.createElement(cc.Provider,{value:this.props.routeContext},J.createElement(ZN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N9(e){let{routeContext:t,match:n,children:o}=e,s=J.useContext(u2);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),J.createElement(cc.Provider,{value:t},o)}function L9(e,t,n){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let f=e,g=(o=n)==null?void 0:o.errors;if(g!=null){let w=f.findIndex(y=>y.route.id&&(g==null?void 0:g[y.route.id]));w>=0||yn(!1),f=f.slice(0,Math.min(f.length,w+1))}return f.reduceRight((w,y,E)=>{let M=y.route.id?g==null?void 0:g[y.route.id]:null,N=null;n&&(N=y.route.errorElement||A9);let R=t.concat(f.slice(0,E+1)),F=()=>{let $;return M?$=N:y.route.Component?$=J.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=w,J.createElement(N9,{match:y,routeContext:{outlet:w,matches:R,isDataRoute:n!=null},children:$})};return n&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?J.createElement(M9,{location:n.location,revalidation:n.revalidation,component:N,error:M,children:F(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):F()},null)}var GN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(GN||{}),Aw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Aw||{});function P9(e){let t=J.useContext(u2);return t||yn(!1),t}function I9(e){let t=J.useContext(VN);return t||yn(!1),t}function O9(e){let t=J.useContext(cc);return t||yn(!1),t}function YN(e){let t=O9(),n=t.matches[t.matches.length-1];return n.route.id||yn(!1),n.route.id}function KN(){var e;let t=J.useContext(ZN),n=I9(Aw.UseRouteError),o=YN(Aw.UseRouteError);return t||((e=n.errors)==null?void 0:e[o])}function R9(){let{router:e}=P9(GN.UseNavigateStable),t=YN(Aw.UseNavigateStable),n=J.useRef(!1);return qN(()=>{n.current=!0}),J.useCallback(function(s,f){f===void 0&&(f={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,kw({fromRouteId:t},f)))},[e,t])}function yA(e){return T9(e.context)}function D9(e){let{basename:t="/",children:n=null,location:o,navigationType:s=Rr.Pop,navigator:f,static:g=!1}=e;d2()&&yn(!1);let w=t.replace(/^\/*/,"/"),y=J.useMemo(()=>({basename:w,navigator:f,static:g}),[w,f,g]);typeof o=="string"&&(o=$l(o));let{pathname:E="/",search:M="",hash:N="",state:R=null,key:F="default"}=o,$=J.useMemo(()=>{let V=_0(E,w);return V==null?null:{location:{pathname:V,search:M,hash:N,state:R,key:F},navigationType:s}},[w,E,M,N,R,F,s]);return $==null?null:J.createElement(c2.Provider,{value:y},J.createElement(f2.Provider,{children:n,value:$}))}new Promise(()=>{});function z9(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:J.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:J.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mw.apply(this,arguments)}function $E(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let o=e[n];return t.concat(Array.isArray(o)?o.map(s=>[n,s]):[[n,o]])},[]))}function U9(e,t){let n=$E(e);return t&&t.forEach((o,s)=>{n.has(s)||t.getAll(s).forEach(f=>{n.append(s,f)})}),n}function F9(e,t){return c9({basename:t==null?void 0:t.basename,future:Mw({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:PR({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||B9(),routes:e,mapRouteProperties:z9,window:t==null?void 0:t.window}).initialize()}function B9(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Mw({},t,{errors:$9(t.errors)})),t}function $9(e){if(!e)return null;let t=Object.entries(e),n={};for(let[o,s]of t)if(s&&s.__type==="RouteErrorResponse")n[o]=new oC(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let f=window[s.__subType];if(typeof f=="function")try{let g=new f(s.message);g.stack="",n[o]=g}catch{}}if(n[o]==null){let f=new Error(s.message);f.stack="",n[o]=f}}else n[o]=s;return n}const j9=J.createContext({isTransitioning:!1}),H9=J.createContext(new Map),W9="startTransition",wA=bI[W9];function V9(e){wA?wA(e):e()}class Z9{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",n(o))}})}}function q9(e){let{fallbackElement:t,router:n,future:o}=e,[s,f]=J.useState(n.state),[g,w]=J.useState(),[y,E]=J.useState({isTransitioning:!1}),[M,N]=J.useState(),[R,F]=J.useState(),[$,V]=J.useState(),X=J.useRef(new Map),{v7_startTransition:Z}=o||{},D=J.useCallback(pe=>{Z?V9(pe):pe()},[Z]),z=J.useCallback((pe,ge)=>{let{deletedFetchers:ke,unstable_viewTransitionOpts:be}=ge;ke.forEach(Ue=>X.current.delete(Ue)),pe.fetchers.forEach((Ue,it)=>{Ue.data!==void 0&&X.current.set(it,Ue.data)}),!be||n.window==null||typeof n.window.document.startViewTransition!="function"?D(()=>f(pe)):R&&M?(M.resolve(),R.skipTransition(),V({state:pe,currentLocation:be.currentLocation,nextLocation:be.nextLocation})):(w(pe),E({isTransitioning:!0,currentLocation:be.currentLocation,nextLocation:be.nextLocation}))},[n.window,R,M,X,D]);J.useLayoutEffect(()=>n.subscribe(z),[n,z]),J.useEffect(()=>{y.isTransitioning&&N(new Z9)},[y.isTransitioning]),J.useEffect(()=>{if(M&&g&&n.window){let pe=g,ge=M.promise,ke=n.window.document.startViewTransition(async()=>{D(()=>f(pe)),await ge});ke.finished.finally(()=>{N(void 0),F(void 0),w(void 0),E({isTransitioning:!1})}),F(ke)}},[D,g,M,n.window]),J.useEffect(()=>{M&&g&&s.location.key===g.location.key&&M.resolve()},[M,R,s.location,g]),J.useEffect(()=>{!y.isTransitioning&&$&&(w($.state),E({isTransitioning:!0,currentLocation:$.currentLocation,nextLocation:$.nextLocation}),V(void 0))},[y.isTransitioning,$]);let H=J.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:pe=>n.navigate(pe),push:(pe,ge,ke)=>n.navigate(pe,{state:ge,preventScrollReset:ke==null?void 0:ke.preventScrollReset}),replace:(pe,ge,ke)=>n.navigate(pe,{replace:!0,state:ge,preventScrollReset:ke==null?void 0:ke.preventScrollReset})}),[n]),se=n.basename||"/",he=J.useMemo(()=>({router:n,navigator:H,static:!1,basename:se}),[n,H,se]);return J.createElement(J.Fragment,null,J.createElement(u2.Provider,{value:he},J.createElement(VN.Provider,{value:s},J.createElement(H9.Provider,{value:X.current},J.createElement(j9.Provider,{value:y},J.createElement(D9,{basename:se,location:s.location,navigationType:s.historyAction,navigator:H},s.initialized?J.createElement(G9,{routes:n.routes,state:s}):t))))),null)}function G9(e){let{routes:t,state:n}=e;return C9(t,void 0,n)}var bA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bA||(bA={}));var xA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xA||(xA={}));function JN(e){let t=J.useRef($E(e)),n=J.useRef(!1),o=lC(),s=J.useMemo(()=>U9(o.search,n.current?null:t.current),[o.search]),f=uC(),g=J.useCallback((w,y)=>{const E=$E(typeof w=="function"?w(s):w);n.current=!0,f("?"+E,y)},[f,s]);return[s,g]}const Y9={authority:eI,client_id:tI,redirect_uri:nI,post_logout_redirect_uri:rI,automaticSilentRenew:!0};function K9(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var NS={exports:{}};const J9={},X9=Object.freeze(Object.defineProperty({__proto__:null,default:J9},Symbol.toStringTag,{value:"Module"})),Q9=oI(X9);var SA;function h2(){return SA||(SA=1,function(e,t){(function(n,o){e.exports=o()})(Xo,function(){var n=n||function(o,s){var f;if(typeof window<"u"&&window.crypto&&(f=window.crypto),typeof self<"u"&&self.crypto&&(f=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(f=globalThis.crypto),!f&&typeof window<"u"&&window.msCrypto&&(f=window.msCrypto),!f&&typeof Xo<"u"&&Xo.crypto&&(f=Xo.crypto),!f&&typeof K9=="function")try{f=Q9}catch{}var g=function(){if(f){if(typeof f.getRandomValues=="function")try{return f.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof f.randomBytes=="function")try{return f.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},w=Object.create||function(){function D(){}return function(z){var H;return D.prototype=z,H=new D,D.prototype=null,H}}(),y={},E=y.lib={},M=E.Base=function(){return{extend:function(D){var z=w(this);return D&&z.mixIn(D),(!z.hasOwnProperty("init")||this.init===z.init)&&(z.init=function(){z.$super.init.apply(this,arguments)}),z.init.prototype=z,z.$super=this,z},create:function(){var D=this.extend();return D.init.apply(D,arguments),D},init:function(){},mixIn:function(D){for(var z in D)D.hasOwnProperty(z)&&(this[z]=D[z]);D.hasOwnProperty("toString")&&(this.toString=D.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),N=E.WordArray=M.extend({init:function(D,z){D=this.words=D||[],z!=s?this.sigBytes=z:this.sigBytes=D.length*4},toString:function(D){return(D||F).stringify(this)},concat:function(D){var z=this.words,H=D.words,se=this.sigBytes,he=D.sigBytes;if(this.clamp(),se%4)for(var pe=0;pe<he;pe++){var ge=H[pe>>>2]>>>24-pe%4*8&255;z[se+pe>>>2]|=ge<<24-(se+pe)%4*8}else for(var ke=0;ke<he;ke+=4)z[se+ke>>>2]=H[ke>>>2];return this.sigBytes+=he,this},clamp:function(){var D=this.words,z=this.sigBytes;D[z>>>2]&=4294967295<<32-z%4*8,D.length=o.ceil(z/4)},clone:function(){var D=M.clone.call(this);return D.words=this.words.slice(0),D},random:function(D){for(var z=[],H=0;H<D;H+=4)z.push(g());return new N.init(z,D)}}),R=y.enc={},F=R.Hex={stringify:function(D){for(var z=D.words,H=D.sigBytes,se=[],he=0;he<H;he++){var pe=z[he>>>2]>>>24-he%4*8&255;se.push((pe>>>4).toString(16)),se.push((pe&15).toString(16))}return se.join("")},parse:function(D){for(var z=D.length,H=[],se=0;se<z;se+=2)H[se>>>3]|=parseInt(D.substr(se,2),16)<<24-se%8*4;return new N.init(H,z/2)}},$=R.Latin1={stringify:function(D){for(var z=D.words,H=D.sigBytes,se=[],he=0;he<H;he++){var pe=z[he>>>2]>>>24-he%4*8&255;se.push(String.fromCharCode(pe))}return se.join("")},parse:function(D){for(var z=D.length,H=[],se=0;se<z;se++)H[se>>>2]|=(D.charCodeAt(se)&255)<<24-se%4*8;return new N.init(H,z)}},V=R.Utf8={stringify:function(D){try{return decodeURIComponent(escape($.stringify(D)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(D){return $.parse(unescape(encodeURIComponent(D)))}},X=E.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new N.init,this._nDataBytes=0},_append:function(D){typeof D=="string"&&(D=V.parse(D)),this._data.concat(D),this._nDataBytes+=D.sigBytes},_process:function(D){var z,H=this._data,se=H.words,he=H.sigBytes,pe=this.blockSize,ge=pe*4,ke=he/ge;D?ke=o.ceil(ke):ke=o.max((ke|0)-this._minBufferSize,0);var be=ke*pe,Ue=o.min(be*4,he);if(be){for(var it=0;it<be;it+=pe)this._doProcessBlock(se,it);z=se.splice(0,be),H.sigBytes-=Ue}return new N.init(z,Ue)},clone:function(){var D=M.clone.call(this);return D._data=this._data.clone(),D},_minBufferSize:0});E.Hasher=X.extend({cfg:M.extend(),init:function(D){this.cfg=this.cfg.extend(D),this.reset()},reset:function(){X.reset.call(this),this._doReset()},update:function(D){return this._append(D),this._process(),this},finalize:function(D){D&&this._append(D);var z=this._doFinalize();return z},blockSize:16,_createHelper:function(D){return function(z,H){return new D.init(H).finalize(z)}},_createHmacHelper:function(D){return function(z,H){return new Z.HMAC.init(D,H).finalize(z)}}});var Z=y.algo={};return y}(Math);return n})}(NS)),NS.exports}var eD=h2();const tD=Kf(eD);var XN={exports:{}};(function(e,t){(function(n,o){e.exports=o(h2())})(Xo,function(n){return function(o){var s=n,f=s.lib,g=f.WordArray,w=f.Hasher,y=s.algo,E=[],M=[];(function(){function F(Z){for(var D=o.sqrt(Z),z=2;z<=D;z++)if(!(Z%z))return!1;return!0}function $(Z){return(Z-(Z|0))*4294967296|0}for(var V=2,X=0;X<64;)F(V)&&(X<8&&(E[X]=$(o.pow(V,1/2))),M[X]=$(o.pow(V,1/3)),X++),V++})();var N=[],R=y.SHA256=w.extend({_doReset:function(){this._hash=new g.init(E.slice(0))},_doProcessBlock:function(F,$){for(var V=this._hash.words,X=V[0],Z=V[1],D=V[2],z=V[3],H=V[4],se=V[5],he=V[6],pe=V[7],ge=0;ge<64;ge++){if(ge<16)N[ge]=F[$+ge]|0;else{var ke=N[ge-15],be=(ke<<25|ke>>>7)^(ke<<14|ke>>>18)^ke>>>3,Ue=N[ge-2],it=(Ue<<15|Ue>>>17)^(Ue<<13|Ue>>>19)^Ue>>>10;N[ge]=be+N[ge-7]+it+N[ge-16]}var Xe=H&se^~H&he,Te=X&Z^X&D^Z&D,Fe=(X<<30|X>>>2)^(X<<19|X>>>13)^(X<<10|X>>>22),ot=(H<<26|H>>>6)^(H<<21|H>>>11)^(H<<7|H>>>25),Je=pe+ot+Xe+M[ge]+N[ge],Le=Fe+Te;pe=he,he=se,se=H,H=z+Je|0,z=D,D=Z,Z=X,X=Je+Le|0}V[0]=V[0]+X|0,V[1]=V[1]+Z|0,V[2]=V[2]+D|0,V[3]=V[3]+z|0,V[4]=V[4]+H|0,V[5]=V[5]+se|0,V[6]=V[6]+he|0,V[7]=V[7]+pe|0},_doFinalize:function(){var F=this._data,$=F.words,V=this._nDataBytes*8,X=F.sigBytes*8;return $[X>>>5]|=128<<24-X%32,$[(X+64>>>9<<4)+14]=o.floor(V/4294967296),$[(X+64>>>9<<4)+15]=V,F.sigBytes=$.length*4,this._process(),this._hash},clone:function(){var F=w.clone.call(this);return F._hash=this._hash.clone(),F}});s.SHA256=w._createHelper(R),s.HmacSHA256=w._createHmacHelper(R)}(Math),n.SHA256})})(XN);var nD=XN.exports;const rD=Kf(nD);var QN={exports:{}};(function(e,t){(function(n,o){e.exports=o(h2())})(Xo,function(n){return function(){var o=n,s=o.lib,f=s.WordArray,g=o.enc;g.Base64={stringify:function(y){var E=y.words,M=y.sigBytes,N=this._map;y.clamp();for(var R=[],F=0;F<M;F+=3)for(var $=E[F>>>2]>>>24-F%4*8&255,V=E[F+1>>>2]>>>24-(F+1)%4*8&255,X=E[F+2>>>2]>>>24-(F+2)%4*8&255,Z=$<<16|V<<8|X,D=0;D<4&&F+D*.75<M;D++)R.push(N.charAt(Z>>>6*(3-D)&63));var z=N.charAt(64);if(z)for(;R.length%4;)R.push(z);return R.join("")},parse:function(y){var E=y.length,M=this._map,N=this._reverseMap;if(!N){N=this._reverseMap=[];for(var R=0;R<M.length;R++)N[M.charCodeAt(R)]=R}var F=M.charAt(64);if(F){var $=y.indexOf(F);$!==-1&&(E=$)}return w(y,E,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function w(y,E,M){for(var N=[],R=0,F=0;F<E;F++)if(F%4){var $=M[y.charCodeAt(F-1)]<<F%4*2,V=M[y.charCodeAt(F)]>>>6-F%4*2,X=$|V;N[R>>>2]|=X<<24-R%4*8,R++}return f.create(N,R)}}(),n.enc.Base64})})(QN);var iD=QN.exports;const EA=Kf(iD);var e6={exports:{}};(function(e,t){(function(n,o){e.exports=o(h2())})(Xo,function(n){return n.enc.Utf8})})(e6);var oD=e6.exports;const aD=Kf(oD);function jE(e){this.message=e}jE.prototype=new Error,jE.prototype.name="InvalidCharacterError";var TA=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new jE("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,s=0,f=0,g="";o=t.charAt(f++);~o&&(n=s%4?64*n+o:o,s++%4)?g+=String.fromCharCode(255&n>>(-2*s&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return g};function sD(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(TA(n).replace(/(.)/g,function(o,s){var f=s.charCodeAt(0).toString(16).toUpperCase();return f.length<2&&(f="0"+f),"%"+f}))}(t)}catch{return TA(t)}}function Nw(e){this.message=e}function lD(e,t){if(typeof e!="string")throw new Nw("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(sD(e.split(".")[n]))}catch(o){throw new Nw("Invalid token specified: "+o.message)}}Nw.prototype=new Error,Nw.prototype.name="InvalidTokenError";var uD={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},Ps,Is,Lw=(e=>(e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e))(Lw||{});(e=>{function t(){Ps=3,Is=uD}e.reset=t;function n(s){if(!(0<=s&&s<=4))throw new Error("Invalid log level");Ps=s}e.setLevel=n;function o(s){Is=s}e.setLogger=o})(Lw||(Lw={}));var qt=class{constructor(e){this._name=e}debug(...e){Ps>=4&&Is.debug(qt._format(this._name,this._method),...e)}info(...e){Ps>=3&&Is.info(qt._format(this._name,this._method),...e)}warn(...e){Ps>=2&&Is.warn(qt._format(this._name,this._method),...e)}error(...e){Ps>=1&&Is.error(qt._format(this._name,this._method),...e)}throw(e){throw this.error(e),e}create(e){const t=Object.create(this);return t._method=e,t.debug("begin"),t}static createStatic(e,t){const n=new qt(`${e}.${t}`);return n.debug("begin"),n}static _format(e,t){const n=`[${e}]`;return t?`${n} ${t}:`:n}static debug(e,...t){Ps>=4&&Is.debug(qt._format(e),...t)}static info(e,...t){Ps>=3&&Is.info(qt._format(e),...t)}static warn(e,...t){Ps>=2&&Is.warn(qt._format(e),...t)}static error(e,...t){Ps>=1&&Is.error(qt._format(e),...t)}};Lw.reset();var cD="10000000-1000-4000-8000-100000000000",Ds=class{static _randomWord(){return tD.lib.WordArray.random(1).words[0]}static generateUUIDv4(){return cD.replace(/[018]/g,t=>(+t^Ds._randomWord()&15>>+t/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return Ds.generateUUIDv4()+Ds.generateUUIDv4()+Ds.generateUUIDv4()}static generateCodeChallenge(e){try{const t=rD(e);return EA.stringify(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(t){throw qt.error("CryptoUtils.generateCodeChallenge",t),t}}static generateBasicAuth(e,t){const n=aD.parse([e,t].join(":"));return EA.stringify(n)}},Hu=class{constructor(e){this._name=e,this._logger=new qt(`Event('${this._name}')`),this._callbacks=[]}addHandler(e){return this._callbacks.push(e),()=>this.removeHandler(e)}removeHandler(e){const t=this._callbacks.lastIndexOf(e);t>=0&&this._callbacks.splice(t,1)}raise(...e){this._logger.debug("raise:",...e);for(const t of this._callbacks)t(...e)}},HE=class{static decode(e){try{return lD(e)}catch(t){throw qt.error("JwtUtils.decode",t),t}}},CA=class{static center({...e}){var t,n,o;return e.width==null&&(e.width=(t=[800,720,600,480].find(s=>s<=window.outerWidth/1.618))!=null?t:360),(n=e.left)!=null||(e.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-e.width)/2))),e.height!=null&&((o=e.top)!=null||(e.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-e.height)/2)))),e}static serialize(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}=${typeof n!="boolean"?n:n?"yes":"no"}`).join(",")}},Ca=class extends Hu{constructor(){super(...arguments),this._logger=new qt(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{const e=this._expiration-Ca.getEpochTime();this._logger.debug("timer completes in",e),this._expiration<=Ca.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(e){const t=this._logger.create("init");e=Math.max(Math.floor(e),1);const n=Ca.getEpochTime()+e;if(this.expiration===n&&this._timerHandle){t.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),t.debug("using duration",e),this._expiration=n;const o=Math.min(e,5);this._timerHandle=setInterval(this._callback,o*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},WE=class{static readParams(e,t="query"){if(!e)throw new TypeError("Invalid URL");const o=new URL(e,"http://127.0.0.1")[t==="fragment"?"hash":"search"];return new URLSearchParams(o.slice(1))}},qf=class extends Error{constructor(e,t){var n,o,s;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw qt.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=(n=e.error_description)!=null?n:null,this.error_uri=(o=e.error_uri)!=null?o:null,this.state=e.userState,this.session_state=(s=e.session_state)!=null?s:null}},cC=class extends Error{constructor(e){super(e),this.name="ErrorTimeout"}},fD=class{constructor(e){this._logger=new qt("AccessTokenEvents"),this._expiringTimer=new Ca("Access token expiring"),this._expiredTimer=new Ca("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}load(e){const t=this._logger.create("load");if(e.access_token&&e.expires_in!==void 0){const n=e.expires_in;if(t.debug("access token present, remaining duration:",n),n>0){let s=n-this._expiringNotificationTimeInSeconds;s<=0&&(s=1),t.debug("registering expiring timer, raising in",s,"seconds"),this._expiringTimer.init(s)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();const o=n+1;t.debug("registering expired timer, raising in",o,"seconds"),this._expiredTimer.init(o)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}},dD=class{constructor(e,t,n,o,s){this._callback=e,this._client_id=t,this._intervalInSeconds=o,this._stopOnError=s,this._logger=new qt("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=g=>{g.origin===this._frame_origin&&g.source===this._frame.contentWindow&&(g.data==="error"?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):g.data==="changed"?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(g.data+" message from check session op iframe"))};const f=new URL(n);this._frame_origin=f.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=f.href}load(){return new Promise(e=>{this._frame.onload=()=>{e()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;const t=()=>{!this._frame.contentWindow||!this._session_state||this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,this._intervalInSeconds*1e3)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},t6=class{constructor(){this._logger=new qt("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create(`getItem('${e}')`),this._data[e]}setItem(e,t){this._logger.create(`setItem('${e}')`),this._data[e]=t}removeItem(e){this._logger.create(`removeItem('${e}')`),delete this._data[e]}get length(){return Object.getOwnPropertyNames(this._data).length}key(e){return Object.getOwnPropertyNames(this._data)[e]}},fC=class{constructor(e=[],t=null,n={}){this._jwtHandler=t,this._extraHeaders=n,this._logger=new qt("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e,t={}){const{timeoutInSeconds:n,...o}=t;if(!n)return await fetch(e,o);const s=new AbortController,f=setTimeout(()=>s.abort(),n*1e3);try{return await fetch(e,{...t,signal:s.signal})}catch(g){throw g instanceof DOMException&&g.name==="AbortError"?new cC("Network timed out"):g}finally{clearTimeout(f)}}async getJson(e,{token:t,credentials:n}={}){const o=this._logger.create("getJson"),s={Accept:this._contentTypes.join(", ")};t&&(o.debug("token passed, setting Authorization header"),s.Authorization="Bearer "+t),this.appendExtraHeaders(s);let f;try{o.debug("url:",e),f=await this.fetchWithTimeout(e,{method:"GET",headers:s,credentials:n})}catch(y){throw o.error("Network Error"),y}o.debug("HTTP response received, status",f.status);const g=f.headers.get("Content-Type");if(g&&!this._contentTypes.find(y=>g.startsWith(y))&&o.throw(new Error(`Invalid response Content-Type: ${g??"undefined"}, from URL: ${e}`)),f.ok&&this._jwtHandler&&(g!=null&&g.startsWith("application/jwt")))return await this._jwtHandler(await f.text());let w;try{w=await f.json()}catch(y){throw o.error("Error parsing JSON response",y),f.ok?y:new Error(`${f.statusText} (${f.status})`)}if(!f.ok)throw o.error("Error from server:",w),w.error?new qf(w):new Error(`${f.statusText} (${f.status}): ${JSON.stringify(w)}`);return w}async postForm(e,{body:t,basicAuth:n,timeoutInSeconds:o,initCredentials:s}){const f=this._logger.create("postForm"),g={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"};n!==void 0&&(g.Authorization="Basic "+n),this.appendExtraHeaders(g);let w;try{f.debug("url:",e),w=await this.fetchWithTimeout(e,{method:"POST",headers:g,body:t,timeoutInSeconds:o,credentials:s})}catch(N){throw f.error("Network error"),N}f.debug("HTTP response received, status",w.status);const y=w.headers.get("Content-Type");if(y&&!this._contentTypes.find(N=>y.startsWith(N)))throw new Error(`Invalid response Content-Type: ${y??"undefined"}, from URL: ${e}`);const E=await w.text();let M={};if(E)try{M=JSON.parse(E)}catch(N){throw f.error("Error parsing JSON response",N),w.ok?N:new Error(`${w.statusText} (${w.status})`)}if(!w.ok)throw f.error("Error from server:",M),M.error?new qf(M,t):new Error(`${w.statusText} (${w.status}): ${JSON.stringify(M)}`);return M}appendExtraHeaders(e){const t=this._logger.create("appendExtraHeaders"),n=Object.keys(this._extraHeaders),o=["authorization","accept","content-type"];n.length!==0&&n.forEach(s=>{if(o.includes(s.toLocaleLowerCase())){t.warn("Protected header could not be overridden",s,o);return}const f=typeof this._extraHeaders[s]=="function"?this._extraHeaders[s]():this._extraHeaders[s];f&&f!==""&&(e[s]=f)})}},hD=class{constructor(e){this._settings=e,this._logger=new qt("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new fC(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){const e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);const t=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials});return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,t),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(e=!0){return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(e=!0){return this._getMetadataProperty("revocation_endpoint",e)}getKeysEndpoint(e=!0){return this._getMetadataProperty("jwks_uri",e)}async _getMetadataProperty(e,t=!1){const n=this._logger.create(`_getMetadataProperty('${e}')`),o=await this.getMetadata();if(n.debug("resolved"),o[e]===void 0){if(t===!0){n.warn("Metadata does not contain optional property");return}n.throw(new Error("Metadata does not contain property "+e))}return o[e]}async getSigningKeys(){const e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;const t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);const n=await this._jsonService.getJson(t);if(e.debug("got key set",n),!Array.isArray(n.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=n.keys,this._signingKeys}},n6=class{constructor({prefix:e="oidc.",store:t=localStorage}={}){this._logger=new qt("WebStorageStateStore"),this._store=t,this._prefix=e}async set(e,t){this._logger.create(`set('${e}')`),e=this._prefix+e,await this._store.setItem(e,t)}async get(e){return this._logger.create(`get('${e}')`),e=this._prefix+e,await this._store.getItem(e)}async remove(e){this._logger.create(`remove('${e}')`),e=this._prefix+e;const t=await this._store.getItem(e);return await this._store.removeItem(e),t}async getAllKeys(){this._logger.create("getAllKeys");const e=await this._store.length,t=[];for(let n=0;n<e;n++){const o=await this._store.key(n);o&&o.indexOf(this._prefix)===0&&t.push(o.substr(this._prefix.length))}return t}},pD="code",mD="openid",gD="client_secret_post",vD="query",_D=60*15,yD=60*5,r6=class{constructor({authority:e,metadataUrl:t,metadata:n,signingKeys:o,metadataSeed:s,client_id:f,client_secret:g,response_type:w=pD,scope:y=mD,redirect_uri:E,post_logout_redirect_uri:M,client_authentication:N=gD,prompt:R,display:F,max_age:$,ui_locales:V,acr_values:X,resource:Z,response_mode:D=vD,filterProtocolClaims:z=!0,loadUserInfo:H=!1,staleStateAgeInSeconds:se=_D,clockSkewInSeconds:he=yD,userInfoJwtIssuer:pe="OP",mergeClaims:ge=!1,disablePKCE:ke=!1,stateStore:be,refreshTokenCredentials:Ue,revokeTokenAdditionalContentTypes:it,fetchRequestCredentials:Xe,refreshTokenAllowedScope:Te,extraQueryParams:Fe={},extraTokenParams:ot={},extraHeaders:Je={}}){if(this.authority=e,t?this.metadataUrl=t:(this.metadataUrl=e,e&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=n,this.metadataSeed=s,this.signingKeys=o,this.client_id=f,this.client_secret=g,this.response_type=w,this.scope=y,this.redirect_uri=E,this.post_logout_redirect_uri=M,this.client_authentication=N,this.prompt=R,this.display=F,this.max_age=$,this.ui_locales=V,this.acr_values=X,this.resource=Z,this.response_mode=D,this.filterProtocolClaims=z??!0,this.loadUserInfo=!!H,this.staleStateAgeInSeconds=se,this.clockSkewInSeconds=he,this.userInfoJwtIssuer=pe,this.mergeClaims=!!ge,this.disablePKCE=!!ke,this.revokeTokenAdditionalContentTypes=it,Xe&&Ue&&console.warn("Both fetchRequestCredentials and refreshTokenCredentials is set. Only fetchRequestCredentials will be used."),this.fetchRequestCredentials=Xe||Ue||"same-origin",be)this.stateStore=be;else{const Le=typeof window<"u"?window.localStorage:new t6;this.stateStore=new n6({store:Le})}this.refreshTokenAllowedScope=Te,this.extraQueryParams=Fe,this.extraTokenParams=ot,this.extraHeaders=Je}},wD=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new qt("UserInfoService"),this._getClaimsFromJwt=async n=>{const o=this._logger.create("_getClaimsFromJwt");try{const s=HE.decode(n);return o.debug("JWT decoding successful"),s}catch(s){throw o.error("Error parsing JWT response"),s}},this._jsonService=new fC(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(e){const t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));const n=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",n);const o=await this._jsonService.getJson(n,{token:e,credentials:this._settings.fetchRequestCredentials});return t.debug("got claims",o),o}},i6=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new qt("TokenClient"),this._jsonService=new fC(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:e="authorization_code",redirect_uri:t=this._settings.redirect_uri,client_id:n=this._settings.client_id,client_secret:o=this._settings.client_secret,...s}){const f=this._logger.create("exchangeCode");n||f.throw(new Error("A client_id is required")),t||f.throw(new Error("A redirect_uri is required")),s.code||f.throw(new Error("A code is required"));const g=new URLSearchParams({grant_type:e,redirect_uri:t});for(const[M,N]of Object.entries(s))N!=null&&g.set(M,N);let w;switch(this._settings.client_authentication){case"client_secret_basic":if(!o)throw f.throw(new Error("A client_secret is required")),null;w=Ds.generateBasicAuth(n,o);break;case"client_secret_post":g.append("client_id",n),o&&g.append("client_secret",o);break}const y=await this._metadataService.getTokenEndpoint(!1);f.debug("got token endpoint");const E=await this._jsonService.postForm(y,{body:g,basicAuth:w,initCredentials:this._settings.fetchRequestCredentials});return f.debug("got response"),E}async exchangeCredentials({grant_type:e="password",client_id:t=this._settings.client_id,client_secret:n=this._settings.client_secret,scope:o=this._settings.scope,...s}){const f=this._logger.create("exchangeCredentials");t||f.throw(new Error("A client_id is required"));const g=new URLSearchParams({grant_type:e,scope:o});for(const[M,N]of Object.entries(s))N!=null&&g.set(M,N);let w;switch(this._settings.client_authentication){case"client_secret_basic":if(!n)throw f.throw(new Error("A client_secret is required")),null;w=Ds.generateBasicAuth(t,n);break;case"client_secret_post":g.append("client_id",t),n&&g.append("client_secret",n);break}const y=await this._metadataService.getTokenEndpoint(!1);f.debug("got token endpoint");const E=await this._jsonService.postForm(y,{body:g,basicAuth:w,initCredentials:this._settings.fetchRequestCredentials});return f.debug("got response"),E}async exchangeRefreshToken({grant_type:e="refresh_token",client_id:t=this._settings.client_id,client_secret:n=this._settings.client_secret,timeoutInSeconds:o,...s}){const f=this._logger.create("exchangeRefreshToken");t||f.throw(new Error("A client_id is required")),s.refresh_token||f.throw(new Error("A refresh_token is required"));const g=new URLSearchParams({grant_type:e});for(const[M,N]of Object.entries(s))N!=null&&g.set(M,N);let w;switch(this._settings.client_authentication){case"client_secret_basic":if(!n)throw f.throw(new Error("A client_secret is required")),null;w=Ds.generateBasicAuth(t,n);break;case"client_secret_post":g.append("client_id",t),n&&g.append("client_secret",n);break}const y=await this._metadataService.getTokenEndpoint(!1);f.debug("got token endpoint");const E=await this._jsonService.postForm(y,{body:g,basicAuth:w,timeoutInSeconds:o,initCredentials:this._settings.fetchRequestCredentials});return f.debug("got response"),E}async revoke(e){var t;const n=this._logger.create("revoke");e.token||n.throw(new Error("A token is required"));const o=await this._metadataService.getRevocationEndpoint(!1);n.debug(`got revocation endpoint, revoking ${(t=e.token_type_hint)!=null?t:"default token type"}`);const s=new URLSearchParams;for(const[f,g]of Object.entries(e))g!=null&&s.set(f,g);s.set("client_id",this._settings.client_id),this._settings.client_secret&&s.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(o,{body:s}),n.debug("got response")}},bD=class{constructor(e,t,n){this._settings=e,this._metadataService=t,this._claimsService=n,this._logger=new qt("ResponseValidator"),this._userInfoService=new wD(this._settings,this._metadataService),this._tokenClient=new i6(this._settings,this._metadataService)}async validateSigninResponse(e,t){const n=this._logger.create("validateSigninResponse");this._processSigninState(e,t),n.debug("state processed"),await this._processCode(e,t),n.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),n.debug("tokens validated"),await this._processClaims(e,t==null?void 0:t.skipUserInfo,e.isOpenId),n.debug("claims processed")}async validateCredentialsResponse(e,t){const n=this._logger.create("validateCredentialsResponse");e.isOpenId&&this._validateIdTokenAttributes(e),n.debug("tokens validated"),await this._processClaims(e,t,e.isOpenId),n.debug("claims processed")}async validateRefreshResponse(e,t){var n,o;const s=this._logger.create("validateRefreshResponse");e.userState=t.data,(n=e.session_state)!=null||(e.session_state=t.session_state),(o=e.scope)!=null||(e.scope=t.scope),e.isOpenId&&e.id_token&&(this._validateIdTokenAttributes(e,t.id_token),s.debug("ID Token validated")),e.id_token||(e.id_token=t.id_token,e.profile=t.profile);const f=e.isOpenId&&!!e.id_token;await this._processClaims(e,!1,f),s.debug("claims processed")}validateSignoutResponse(e,t){const n=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&n.throw(new Error("State does not match")),n.debug("state validated"),e.userState=t.data,e.error)throw n.warn("Response was error",e.error),new qf(e)}_processSigninState(e,t){var n;const o=this._logger.create("_processSigninState");if(t.id!==e.state&&o.throw(new Error("State does not match")),t.client_id||o.throw(new Error("No client_id on state")),t.authority||o.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&o.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&o.throw(new Error("client_id mismatch on settings vs. signin state")),o.debug("state validated"),e.userState=t.data,(n=e.scope)!=null||(e.scope=t.scope),e.error)throw o.warn("Response was error",e.error),new qf(e);t.code_verifier&&!e.code&&o.throw(new Error("Expected code in response"))}async _processClaims(e,t=!1,n=!0){const o=this._logger.create("_processClaims");if(e.profile=this._claimsService.filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token){o.debug("not loading user info");return}o.debug("loading user info");const s=await this._userInfoService.getClaims(e.access_token);o.debug("user info claims received from user info endpoint"),n&&s.sub!==e.profile.sub&&o.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._claimsService.mergeClaims(e.profile,this._claimsService.filterProtocolClaims(s)),o.debug("user info claims received, updated profile:",e.profile)}async _processCode(e,t){const n=this._logger.create("_processCode");if(e.code){n.debug("Validating code");const o=await this._tokenClient.exchangeCode({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,...t.extraTokenParams});Object.assign(e,o)}else n.debug("No code to process")}_validateIdTokenAttributes(e,t){var n;const o=this._logger.create("_validateIdTokenAttributes");o.debug("decoding ID Token JWT");const s=HE.decode((n=e.id_token)!=null?n:"");if(s.sub||o.throw(new Error("ID Token is missing a subject claim")),t){const f=HE.decode(t);s.sub!==f.sub&&o.throw(new Error("sub in id_token does not match current sub")),s.auth_time&&s.auth_time!==f.auth_time&&o.throw(new Error("auth_time in id_token does not match original auth_time")),s.azp&&s.azp!==f.azp&&o.throw(new Error("azp in id_token does not match original azp")),!s.azp&&f.azp&&o.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=s}},Ep=class{constructor(e){this.id=e.id||Ds.generateUUIDv4(),this.data=e.data,e.created&&e.created>0?this.created=e.created:this.created=Ca.getEpochTime(),this.request_type=e.request_type}toStorageString(){return new qt("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})}static fromStorageString(e){return qt.createStatic("State","fromStorageString"),new Ep(JSON.parse(e))}static async clearStaleState(e,t){const n=qt.createStatic("State","clearStaleState"),o=Ca.getEpochTime()-t,s=await e.getAllKeys();n.debug("got keys",s);for(let f=0;f<s.length;f++){const g=s[f],w=await e.get(g);let y=!1;if(w)try{const E=Ep.fromStorageString(w);n.debug("got item from key:",g,E.created),E.created<=o&&(y=!0)}catch(E){n.error("Error parsing state for key:",g,E),y=!0}else n.debug("no item in storage for key:",g),y=!0;y&&(n.debug("removed item for key:",g),e.remove(g))}}},dC=class extends Ep{constructor(e){super(e),e.code_verifier===!0?this.code_verifier=Ds.generateCodeVerifier():e.code_verifier&&(this.code_verifier=e.code_verifier),this.code_verifier&&(this.code_challenge=Ds.generateCodeChallenge(this.code_verifier)),this.authority=e.authority,this.client_id=e.client_id,this.redirect_uri=e.redirect_uri,this.scope=e.scope,this.client_secret=e.client_secret,this.extraTokenParams=e.extraTokenParams,this.response_mode=e.response_mode,this.skipUserInfo=e.skipUserInfo}toStorageString(){return new qt("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(e){qt.createStatic("SigninState","fromStorageString");const t=JSON.parse(e);return new dC(t)}},xD=class{constructor({url:e,authority:t,client_id:n,redirect_uri:o,response_type:s,scope:f,state_data:g,response_mode:w,request_type:y,client_secret:E,nonce:M,resource:N,skipUserInfo:R,extraQueryParams:F,extraTokenParams:$,disablePKCE:V,...X}){if(this._logger=new qt("SigninRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");if(!n)throw this._logger.error("ctor: No client_id passed"),new Error("client_id");if(!o)throw this._logger.error("ctor: No redirect_uri passed"),new Error("redirect_uri");if(!s)throw this._logger.error("ctor: No response_type passed"),new Error("response_type");if(!f)throw this._logger.error("ctor: No scope passed"),new Error("scope");if(!t)throw this._logger.error("ctor: No authority passed"),new Error("authority");this.state=new dC({data:g,request_type:y,code_verifier:!V,client_id:n,authority:t,redirect_uri:o,response_mode:w,client_secret:E,scope:f,extraTokenParams:$,skipUserInfo:R});const Z=new URL(e);Z.searchParams.append("client_id",n),Z.searchParams.append("redirect_uri",o),Z.searchParams.append("response_type",s),Z.searchParams.append("scope",f),M&&Z.searchParams.append("nonce",M),Z.searchParams.append("state",this.state.id),this.state.code_challenge&&(Z.searchParams.append("code_challenge",this.state.code_challenge),Z.searchParams.append("code_challenge_method","S256")),N&&(Array.isArray(N)?N:[N]).forEach(z=>Z.searchParams.append("resource",z));for(const[D,z]of Object.entries({response_mode:w,...X,...F}))z!=null&&Z.searchParams.append(D,z.toString());this.url=Z.href}},SD="openid",LS=class{constructor(e){this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Ca.getEpochTime()}set expires_in(e){typeof e=="string"&&(e=Number(e)),e!==void 0&&e>=0&&(this.expires_at=Math.floor(e)+Ca.getEpochTime())}get isOpenId(){var e;return((e=this.scope)==null?void 0:e.split(" ").includes(SD))||!!this.id_token}},ED=class{constructor({url:e,state_data:t,id_token_hint:n,post_logout_redirect_uri:o,extraQueryParams:s,request_type:f}){if(this._logger=new qt("SignoutRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");const g=new URL(e);n&&g.searchParams.append("id_token_hint",n),o&&(g.searchParams.append("post_logout_redirect_uri",o),t&&(this.state=new Ep({data:t,request_type:f}),g.searchParams.append("state",this.state.id)));for(const[w,y]of Object.entries({...s}))y!=null&&g.searchParams.append(w,y.toString());this.url=g.href}},TD=class{constructor(e){this.state=e.get("state"),this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri")}},CD=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],kD=["sub","iss","aud","exp","iat"],AD=class{constructor(e){this._settings=e,this._logger=new qt("ClaimsService")}filterProtocolClaims(e){const t={...e};if(this._settings.filterProtocolClaims){let n;Array.isArray(this._settings.filterProtocolClaims)?n=this._settings.filterProtocolClaims:n=CD;for(const o of n)kD.includes(o)||delete t[o]}return t}mergeClaims(e,t){const n={...e};for(const[o,s]of Object.entries(t))for(const f of Array.isArray(s)?s:[s]){const g=n[o];g?Array.isArray(g)?g.includes(f)||g.push(f):n[o]!==f&&(typeof f=="object"&&this._settings.mergeClaims?n[o]=this.mergeClaims(g,f):n[o]=[g,f]):n[o]=f}return n}},MD=class{constructor(e){this._logger=new qt("OidcClient"),this.settings=new r6(e),this.metadataService=new hD(this.settings),this._claimsService=new AD(this.settings),this._validator=new bD(this.settings,this.metadataService,this._claimsService),this._tokenClient=new i6(this.settings,this.metadataService)}async createSigninRequest({state:e,request:t,request_uri:n,request_type:o,id_token_hint:s,login_hint:f,skipUserInfo:g,nonce:w,response_type:y=this.settings.response_type,scope:E=this.settings.scope,redirect_uri:M=this.settings.redirect_uri,prompt:N=this.settings.prompt,display:R=this.settings.display,max_age:F=this.settings.max_age,ui_locales:$=this.settings.ui_locales,acr_values:V=this.settings.acr_values,resource:X=this.settings.resource,response_mode:Z=this.settings.response_mode,extraQueryParams:D=this.settings.extraQueryParams,extraTokenParams:z=this.settings.extraTokenParams}){const H=this._logger.create("createSigninRequest");if(y!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");const se=await this.metadataService.getAuthorizationEndpoint();H.debug("Received authorization endpoint",se);const he=new xD({url:se,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:M,response_type:y,scope:E,state_data:e,prompt:N,display:R,max_age:F,ui_locales:$,id_token_hint:s,login_hint:f,acr_values:V,resource:X,request:t,request_uri:n,extraQueryParams:D,extraTokenParams:z,request_type:o,response_mode:Z,client_secret:this.settings.client_secret,skipUserInfo:g,nonce:w,disablePKCE:this.settings.disablePKCE});await this.clearStaleState();const pe=he.state;return await this.settings.stateStore.set(pe.id,pe.toStorageString()),he}async readSigninResponseState(e,t=!1){const n=this._logger.create("readSigninResponseState"),o=new LS(WE.readParams(e,this.settings.response_mode));if(!o.state)throw n.throw(new Error("No state in response")),null;const s=await this.settings.stateStore[t?"remove":"get"](o.state);if(!s)throw n.throw(new Error("No matching state found in storage")),null;return{state:dC.fromStorageString(s),response:o}}async processSigninResponse(e){const t=this._logger.create("processSigninResponse"),{state:n,response:o}=await this.readSigninResponseState(e,!0);return t.debug("received state from storage; validating response"),await this._validator.validateSigninResponse(o,n),o}async processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:n=!1,extraTokenParams:o={}}){const s=await this._tokenClient.exchangeCredentials({username:e,password:t,...o}),f=new LS(new URLSearchParams);return Object.assign(f,s),await this._validator.validateCredentialsResponse(f,n),f}async useRefreshToken({state:e,timeoutInSeconds:t}){var n;const o=this._logger.create("useRefreshToken");let s;if(this.settings.refreshTokenAllowedScope===void 0)s=e.scope;else{const w=this.settings.refreshTokenAllowedScope.split(" ");s=(((n=e.scope)==null?void 0:n.split(" "))||[]).filter(E=>w.includes(E)).join(" ")}const f=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,scope:s,timeoutInSeconds:t}),g=new LS(new URLSearchParams);return Object.assign(g,f),o.debug("validating response",g),await this._validator.validateRefreshResponse(g,{...e,scope:s}),g}async createSignoutRequest({state:e,id_token_hint:t,request_type:n,post_logout_redirect_uri:o=this.settings.post_logout_redirect_uri,extraQueryParams:s=this.settings.extraQueryParams}={}){const f=this._logger.create("createSignoutRequest"),g=await this.metadataService.getEndSessionEndpoint();if(!g)throw f.throw(new Error("No end session endpoint")),null;f.debug("Received end session endpoint",g);const w=new ED({url:g,id_token_hint:t,post_logout_redirect_uri:o,state_data:e,extraQueryParams:s,request_type:n});await this.clearStaleState();const y=w.state;return y&&(f.debug("Signout request has state to persist"),await this.settings.stateStore.set(y.id,y.toStorageString())),w}async readSignoutResponseState(e,t=!1){const n=this._logger.create("readSignoutResponseState"),o=new TD(WE.readParams(e,this.settings.response_mode));if(!o.state){if(n.debug("No state in response"),o.error)throw n.warn("Response was error:",o.error),new qf(o);return{state:void 0,response:o}}const s=await this.settings.stateStore[t?"remove":"get"](o.state);if(!s)throw n.throw(new Error("No matching state found in storage")),null;return{state:Ep.fromStorageString(s),response:o}}async processSignoutResponse(e){const t=this._logger.create("processSignoutResponse"),{state:n,response:o}=await this.readSignoutResponseState(e,!0);return n?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(o,n)):t.debug("No state from storage; skipping response validation"),o}clearStaleState(){return this._logger.create("clearStaleState"),Ep.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}},ND=class{constructor(e){this._userManager=e,this._logger=new qt("SessionMonitor"),this._start=async t=>{const n=t.session_state;if(!n)return;const o=this._logger.create("_start");if(t.profile?(this._sub=t.profile.sub,this._sid=t.profile.sid,o.debug("session_state",n,", sub",this._sub)):(this._sub=void 0,this._sid=void 0,o.debug("session_state",n,", anonymous user")),this._checkSessionIFrame){this._checkSessionIFrame.start(n);return}try{const s=await this._userManager.metadataService.getCheckSessionIframe();if(s){o.debug("initializing check session iframe");const f=this._userManager.settings.client_id,g=this._userManager.settings.checkSessionIntervalInSeconds,w=this._userManager.settings.stopCheckSessionOnError,y=new dD(this._callback,f,s,g,w);await y.load(),this._checkSessionIFrame=y,y.start(n)}else o.warn("no check session iframe found in the metadata")}catch(s){o.error("Error from getCheckSessionIframe:",s instanceof Error?s.message:s)}},this._stop=()=>{const t=this._logger.create("_stop");if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){const n=setInterval(async()=>{clearInterval(n);try{const o=await this._userManager.querySessionStatus();if(o){const s={session_state:o.session_state,profile:o.sub&&o.sid?{sub:o.sub,sid:o.sid}:null};this._start(s)}}catch(o){t.error("error from querySessionStatus",o instanceof Error?o.message:o)}},1e3)}},this._callback=async()=>{const t=this._logger.create("_callback");try{const n=await this._userManager.querySessionStatus();let o=!0;n&&this._checkSessionIFrame?n.sub===this._sub?(o=!1,this._checkSessionIFrame.start(n.session_state),n.sid===this._sid?t.debug("same sub still logged in at OP, restarting check session iframe; session_state",n.session_state):(t.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",n.session_state),this._userManager.events._raiseUserSessionChanged())):t.debug("different subject signed into OP",n.sub):t.debug("subject no longer signed into OP"),o?this._sub?this._userManager.events._raiseUserSignedOut():this._userManager.events._raiseUserSignedIn():t.debug("no change in session detected, no event to raise")}catch(n){this._sub&&(t.debug("Error calling queryCurrentSigninSession; raising signed out event",n),this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(t=>{this._logger.error(t)})}async _init(){this._logger.create("_init");const e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){const t=await this._userManager.querySessionStatus();if(t){const n={session_state:t.session_state,profile:t.sub&&t.sid?{sub:t.sub,sid:t.sid}:null};this._start(n)}}}},Gy=class{constructor(e){var t;this.id_token=e.id_token,this.session_state=(t=e.session_state)!=null?t:null,this.access_token=e.access_token,this.refresh_token=e.refresh_token,this.token_type=e.token_type,this.scope=e.scope,this.profile=e.profile,this.expires_at=e.expires_at,this.state=e.userState}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Ca.getEpochTime()}set expires_in(e){e!==void 0&&(this.expires_at=Math.floor(e)+Ca.getEpochTime())}get expired(){const e=this.expires_in;if(e!==void 0)return e<=0}get scopes(){var e,t;return(t=(e=this.scope)==null?void 0:e.split(" "))!=null?t:[]}toStorageString(){return new qt("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(e){return qt.createStatic("User","fromStorageString"),new Gy(JSON.parse(e))}},kA="oidc-client",o6=class{constructor(){this._abort=new Hu("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){const t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);const{url:n,keepOpen:o}=await new Promise((s,f)=>{const g=w=>{var y;const E=w.data,M=(y=e.scriptOrigin)!=null?y:window.location.origin;if(!(w.origin!==M||(E==null?void 0:E.source)!==kA)){try{const N=WE.readParams(E.url,e.response_mode).get("state");if(N||t.warn("no state found in response url"),w.source!==this._window&&N!==e.state)return}catch{this._dispose(),f(new Error("Invalid response from window"))}s(E)}};window.addEventListener("message",g,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",g,!1)),this._disposeHandlers.add(this._abort.addHandler(w=>{this._dispose(),f(w)}))});return t.debug("got response from window"),this._dispose(),o||this.close(),{url:n}}_dispose(){this._logger.create("_dispose");for(const e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t,n=!1,o=window.location.origin){e.postMessage({source:kA,url:t,keepOpen:n},o)}},a6={location:!1,toolbar:!1,height:640},s6="_blank",LD=60,PD=2,l6=10,ID=class extends r6{constructor(e){const{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:n=e.post_logout_redirect_uri,popupWindowFeatures:o=a6,popupWindowTarget:s=s6,redirectMethod:f="assign",redirectTarget:g="self",iframeNotifyParentOrigin:w=e.iframeNotifyParentOrigin,iframeScriptOrigin:y=e.iframeScriptOrigin,silent_redirect_uri:E=e.redirect_uri,silentRequestTimeoutInSeconds:M=l6,automaticSilentRenew:N=!0,validateSubOnSilentRenew:R=!0,includeIdTokenInSilentRenew:F=!1,monitorSession:$=!1,monitorAnonymousSession:V=!1,checkSessionIntervalInSeconds:X=PD,query_status_response_type:Z="code",stopCheckSessionOnError:D=!0,revokeTokenTypes:z=["access_token","refresh_token"],revokeTokensOnSignout:H=!1,includeIdTokenInSilentSignout:se=!1,accessTokenExpiringNotificationTimeInSeconds:he=LD,userStore:pe}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=n,this.popupWindowFeatures=o,this.popupWindowTarget=s,this.redirectMethod=f,this.redirectTarget=g,this.iframeNotifyParentOrigin=w,this.iframeScriptOrigin=y,this.silent_redirect_uri=E,this.silentRequestTimeoutInSeconds=M,this.automaticSilentRenew=N,this.validateSubOnSilentRenew=R,this.includeIdTokenInSilentRenew=F,this.monitorSession=$,this.monitorAnonymousSession=V,this.checkSessionIntervalInSeconds=X,this.stopCheckSessionOnError=D,this.query_status_response_type=Z,this.revokeTokenTypes=z,this.revokeTokensOnSignout=H,this.includeIdTokenInSilentSignout=se,this.accessTokenExpiringNotificationTimeInSeconds=he,pe)this.userStore=pe;else{const ge=typeof window<"u"?window.sessionStorage:new t6;this.userStore=new n6({store:ge})}}},VE=class extends o6{constructor({silentRequestTimeoutInSeconds:e=l6}){super(),this._logger=new qt("IFrameWindow"),this._timeoutInSeconds=e,this._frame=VE.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){const e=window.document.createElement("iframe");return e.style.visibility="hidden",e.style.position="fixed",e.style.left="-1000px",e.style.top="0",e.width="0",e.height="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),window.document.body.appendChild(e),e}async navigate(e){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);const t=setTimeout(()=>this._abort.raise(new cC("IFrame timed out without a response")),this._timeoutInSeconds*1e3);return this._disposeHandlers.add(()=>clearTimeout(t)),await super.navigate(e)}close(){var e;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",t=>{var n;const o=t.target;(n=o.parentNode)==null||n.removeChild(o),this._abort.raise(new Error("IFrame removed from DOM"))},!0),(e=this._frame.contentWindow)==null||e.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(e,t){return super._notifyParent(window.parent,e,!1,t)}},OD=class{constructor(e){this._settings=e,this._logger=new qt("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:e=this._settings.silentRequestTimeoutInSeconds}){return new VE({silentRequestTimeoutInSeconds:e})}async callback(e){this._logger.create("callback"),VE.notifyParent(e,this._settings.iframeNotifyParentOrigin)}},RD=500,AA=class extends o6{constructor({popupWindowTarget:e=s6,popupWindowFeatures:t={}}){super(),this._logger=new qt("PopupWindow");const n=CA.center({...a6,...t});this._window=window.open(void 0,e,CA.serialize(n))}async navigate(e){var t;(t=this._window)==null||t.focus();const n=setInterval(()=>{(!this._window||this._window.closed)&&this._abort.raise(new Error("Popup closed by user"))},RD);return this._disposeHandlers.add(()=>clearInterval(n)),await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return super._notifyParent(window.opener,e,t)}},DD=class{constructor(e){this._settings=e,this._logger=new qt("PopupNavigator")}async prepare({popupWindowFeatures:e=this._settings.popupWindowFeatures,popupWindowTarget:t=this._settings.popupWindowTarget}){return new AA({popupWindowFeatures:e,popupWindowTarget:t})}async callback(e,t=!1){this._logger.create("callback"),AA.notifyOpener(e,t)}},zD=class{constructor(e){this._settings=e,this._logger=new qt("RedirectNavigator")}async prepare({redirectMethod:e=this._settings.redirectMethod,redirectTarget:t=this._settings.redirectTarget}){var n;this._logger.create("prepare");let o=window.self;t==="top"&&(o=(n=window.top)!=null?n:window.self);const s=o.location[e].bind(o.location);let f;return{navigate:async g=>{this._logger.create("navigate");const w=new Promise((y,E)=>{f=E});return s(g.url),await w},close:()=>{this._logger.create("close"),f==null||f(new Error("Redirect aborted")),o.stop()}}}},UD=class extends fD{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new qt("UserManagerEvents"),this._userLoaded=new Hu("User loaded"),this._userUnloaded=new Hu("User unloaded"),this._silentRenewError=new Hu("Silent renew error"),this._userSignedIn=new Hu("User signed in"),this._userSignedOut=new Hu("User signed out"),this._userSessionChanged=new Hu("User session changed")}load(e,t=!0){super.load(e),t&&this._userLoaded.raise(e)}unload(){super.unload(),this._userUnloaded.raise()}addUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}_raiseSilentRenewError(e){this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}_raiseUserSignedIn(){this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}_raiseUserSignedOut(){this._userSignedOut.raise()}addUserSessionChanged(e){return this._userSessionChanged.addHandler(e)}removeUserSessionChanged(e){this._userSessionChanged.removeHandler(e)}_raiseUserSessionChanged(){this._userSessionChanged.raise()}},FD=class{constructor(e){this._userManager=e,this._logger=new qt("SilentRenewService"),this._isStarted=!1,this._retryTimer=new Ca("Retry Silent Renew"),this._tokenExpiring=async()=>{const t=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),t.debug("silent token renewal successful")}catch(n){if(n instanceof cC){t.warn("ErrorTimeout from signinSilent:",n,"retry in 5s"),this._retryTimer.init(5);return}t.error("Error from signinSilent:",n),this._userManager.events._raiseSilentRenewError(n)}}}async start(){const e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},BD=class{constructor(e){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.profile=e.profile,this.data=e.state}},$D=class{constructor(e){this._logger=new qt("UserManager"),this.settings=new ID(e),this._client=new MD(e),this._redirectNavigator=new zD(this.settings),this._popupNavigator=new DD(this.settings),this._iframeNavigator=new OD(this.settings),this._events=new UD(this.settings),this._silentRenewService=new FD(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new ND(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(){const e=this._logger.create("getUser"),t=await this._loadUser();return t?(e.info("user loaded"),this._events.load(t,!1),t):(e.info("user not found in storage"),null)}async removeUser(){const e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),this._events.unload()}async signinRedirect(e={}){this._logger.create("signinRedirect");const{redirectMethod:t,...n}=e,o=await this._redirectNavigator.prepare({redirectMethod:t});await this._signinStart({request_type:"si:r",...n},o)}async signinRedirectCallback(e=window.location.href){const t=this._logger.create("signinRedirectCallback"),n=await this._signinEnd(e);return n.profile&&n.profile.sub?t.info("success, signed in subject",n.profile.sub):t.info("no subject"),n}async signinResourceOwnerCredentials({username:e,password:t,skipUserInfo:n=!1}){const o=this._logger.create("signinResourceOwnerCredential"),s=await this._client.processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:n,extraTokenParams:this.settings.extraTokenParams});o.debug("got signin response");const f=await this._buildUser(s);return f.profile&&f.profile.sub?o.info("success, signed in subject",f.profile.sub):o.info("no subject"),f}async signinPopup(e={}){const t=this._logger.create("signinPopup"),{popupWindowFeatures:n,popupWindowTarget:o,...s}=e,f=this.settings.popup_redirect_uri;f||t.throw(new Error("No popup_redirect_uri configured"));const g=await this._popupNavigator.prepare({popupWindowFeatures:n,popupWindowTarget:o}),w=await this._signin({request_type:"si:p",redirect_uri:f,display:"popup",...s},g);return w&&(w.profile&&w.profile.sub?t.info("success, signed in subject",w.profile.sub):t.info("no subject")),w}async signinPopupCallback(e=window.location.href,t=!1){const n=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,t),n.info("success")}async signinSilent(e={}){var t;const n=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:o,...s}=e;let f=await this._loadUser();if(f!=null&&f.refresh_token){n.debug("using refresh token");const E=new BD(f);return await this._useRefreshToken(E)}const g=this.settings.silent_redirect_uri;g||n.throw(new Error("No silent_redirect_uri configured"));let w;f&&this.settings.validateSubOnSilentRenew&&(n.debug("subject prior to silent renew:",f.profile.sub),w=f.profile.sub);const y=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:o});return f=await this._signin({request_type:"si:s",redirect_uri:g,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?f==null?void 0:f.id_token:void 0,...s},y,w),f&&((t=f.profile)!=null&&t.sub?n.info("success, signed in subject",f.profile.sub):n.info("no subject")),f}async _useRefreshToken(e){const t=await this._client.useRefreshToken({state:e,timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}),n=new Gy({...e,...t});return await this.storeUser(n),this._events.load(n),n}async signinSilentCallback(e=window.location.href){const t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(e=window.location.href){const{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":return await this.signinPopupCallback(e);case"si:s":return await this.signinSilentCallback(e);default:throw new Error("invalid response_type in state")}}async signoutCallback(e=window.location.href,t=!1){const{state:n}=await this._client.readSignoutResponseState(e);if(n)switch(n.request_type){case"so:r":await this.signoutRedirectCallback(e);break;case"so:p":await this.signoutPopupCallback(e,t);break;case"so:s":await this.signoutSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(e={}){const t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:n,...o}=e,s=this.settings.silent_redirect_uri;s||t.throw(new Error("No silent_redirect_uri configured"));const f=await this._loadUser(),g=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n}),w=await this._signinStart({request_type:"si:s",redirect_uri:s,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?f==null?void 0:f.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...o},g);try{const y=await this._client.processSigninResponse(w.url);return t.debug("got signin response"),y.session_state&&y.profile.sub?(t.info("success for subject",y.profile.sub),{session_state:y.session_state,sub:y.profile.sub,sid:y.profile.sid}):(t.info("success, user not authenticated"),null)}catch(y){if(this.settings.monitorAnonymousSession&&y instanceof qf)switch(y.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:y.session_state}}throw y}}async _signin(e,t,n){const o=await this._signinStart(e,t);return await this._signinEnd(o.url,n)}async _signinStart(e,t){const n=this._logger.create("_signinStart");try{const o=await this._client.createSigninRequest(e);return n.debug("got signin request"),await t.navigate({url:o.url,state:o.state.id,response_mode:o.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(o){throw n.debug("error after preparing navigator, closing navigator window"),t.close(),o}}async _signinEnd(e,t){const n=this._logger.create("_signinEnd"),o=await this._client.processSigninResponse(e);return n.debug("got signin response"),await this._buildUser(o,t)}async _buildUser(e,t){const n=this._logger.create("_buildUser"),o=new Gy(e);if(t){if(t!==o.profile.sub)throw n.debug("current user does not match user returned from signin. sub from signin:",o.profile.sub),new qf({...e,error:"login_required"});n.debug("current user matches user returned from signin")}return await this.storeUser(o),n.debug("user stored"),this._events.load(o),o}async signoutRedirect(e={}){const t=this._logger.create("signoutRedirect"),{redirectMethod:n,...o}=e,s=await this._redirectNavigator.prepare({redirectMethod:n});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...o},s),t.info("success")}async signoutRedirectCallback(e=window.location.href){const t=this._logger.create("signoutRedirectCallback"),n=await this._signoutEnd(e);return t.info("success"),n}async signoutPopup(e={}){const t=this._logger.create("signoutPopup"),{popupWindowFeatures:n,popupWindowTarget:o,...s}=e,f=this.settings.popup_post_logout_redirect_uri,g=await this._popupNavigator.prepare({popupWindowFeatures:n,popupWindowTarget:o});await this._signout({request_type:"so:p",post_logout_redirect_uri:f,state:f==null?void 0:{},...s},g),t.info("success")}async signoutPopupCallback(e=window.location.href,t=!1){const n=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,t),n.info("success")}async _signout(e,t){const n=await this._signoutStart(e,t);return await this._signoutEnd(n.url)}async _signoutStart(e={},t){var n;const o=this._logger.create("_signoutStart");try{const s=await this._loadUser();o.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(s);const f=e.id_token_hint||s&&s.id_token;f&&(o.debug("setting id_token_hint in signout request"),e.id_token_hint=f),await this.removeUser(),o.debug("user removed, creating signout request");const g=await this._client.createSignoutRequest(e);return o.debug("got signout request"),await t.navigate({url:g.url,state:(n=g.state)==null?void 0:n.id})}catch(s){throw o.debug("error after preparing navigator, closing navigator window"),t.close(),s}}async _signoutEnd(e){const t=this._logger.create("_signoutEnd"),n=await this._client.processSignoutResponse(e);return t.debug("got signout response"),n}async signoutSilent(e={}){var t;const n=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:o,...s}=e,f=this.settings.includeIdTokenInSilentSignout?(t=await this._loadUser())==null?void 0:t.id_token:void 0,g=this.settings.popup_post_logout_redirect_uri,w=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:o});await this._signout({request_type:"so:s",post_logout_redirect_uri:g,id_token_hint:f,...s},w),n.info("success")}async signoutSilentCallback(e=window.location.href){const t=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async revokeTokens(e){const t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e,t=this.settings.revokeTokenTypes){const n=this._logger.create("_revokeInternal");if(!e)return;const o=t.filter(s=>typeof e[s]=="string");if(!o.length){n.debug("no need to revoke due to no token(s)");return}for(const s of o)await this._client.revokeToken(e[s],s),n.info(`${s} revoked successfully`),s!=="access_token"&&(e[s]=null);await this.storeUser(e),n.debug("user stored"),this._events.load(e)}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){const e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),Gy.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){const t=this._logger.create("storeUser");if(e){t.debug("storing user");const n=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,n)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey)}async clearStaleState(){await this._client.clearStaleState()}},hC=so.createContext(void 0);hC.displayName="AuthContext";var jD={isLoading:!0,isAuthenticated:!1},HD=(e,t)=>{switch(t.type){case"INITIALISED":case"USER_LOADED":return{...e,user:t.user,isLoading:!1,isAuthenticated:t.user?!t.user.expired:!1,error:void 0};case"USER_UNLOADED":return{...e,user:void 0,isAuthenticated:!1};case"NAVIGATOR_INIT":return{...e,isLoading:!0,activeNavigator:t.method};case"NAVIGATOR_CLOSE":return{...e,isLoading:!1,activeNavigator:void 0};case"ERROR":return{...e,isLoading:!1,error:t.error};default:return{...e,isLoading:!1,error:new Error(`unknown type ${t.type}`)}}},u6=(e=window.location)=>{let t=new URLSearchParams(e.search);return!!((t.get("code")||t.get("error"))&&t.get("state")||(t=new URLSearchParams(e.hash.replace("#","?")),(t.get("code")||t.get("error"))&&t.get("state")))},WD=e=>t=>t instanceof Error?t:new Error(e),VD=WD("Login failed"),ZD=["clearStaleState","querySessionStatus","revokeTokens","startSilentRenew","stopSilentRenew"],qD=["signinPopup","signinSilent","signinRedirect","signoutPopup","signoutRedirect","signoutSilent"],PS=e=>()=>{throw new Error(`UserManager#${e} was called from an unsupported context. If this is a server-rendered page, defer this call with useEffect() or pass a custom UserManager implementation.`)},GD=typeof window>"u"?null:$D,YD=e=>{const{children:t,onSigninCallback:n,skipSigninCallback:o,onRemoveUser:s,onSignoutRedirect:f,onSignoutPopup:g,implementation:w=GD,userManager:y,...E}=e,[M]=J.useState(()=>y??(w?new w(E):{settings:E})),[N,R]=J.useReducer(HD,jD),F=J.useMemo(()=>Object.assign({settings:M.settings,events:M.events},Object.fromEntries(ZD.map(z=>{var H,se;return[z,(se=(H=M[z])==null?void 0:H.bind(M))!=null?se:PS(z)]})),Object.fromEntries(qD.map(z=>[z,M[z]?async(...H)=>{R({type:"NAVIGATOR_INIT",method:z});try{return await M[z](...H)}finally{R({type:"NAVIGATOR_CLOSE"})}}:PS(z)]))),[M]),$=J.useRef(!1);J.useEffect(()=>{!M||$.current||($.current=!0,(async()=>{let z=null;try{u6()&&!o&&(z=await M.signinCallback(),n&&n(z)),z=z||await M.getUser(),R({type:"INITIALISED",user:z})}catch(H){R({type:"ERROR",error:VD(H)})}})())},[M,o,n]),J.useEffect(()=>{if(!M)return;const z=he=>{R({type:"USER_LOADED",user:he})};M.events.addUserLoaded(z);const H=()=>{R({type:"USER_UNLOADED"})};M.events.addUserUnloaded(H);const se=he=>{R({type:"ERROR",error:he})};return M.events.addSilentRenewError(se),()=>{M.events.removeUserLoaded(z),M.events.removeUserUnloaded(H),M.events.removeSilentRenewError(se)}},[M]);const V=J.useCallback(M?()=>M.removeUser().then(s):PS("removeUser"),[M,s]),X=J.useCallback(z=>F.signoutRedirect(z).then(f),[F.signoutRedirect,f]),Z=J.useCallback(z=>F.signoutPopup(z).then(g),[F.signoutPopup,g]),D=J.useCallback(z=>F.signoutSilent(z),[F.signoutSilent]);return so.createElement(hC.Provider,{value:{...N,...F,removeUser:V,signoutRedirect:X,signoutPopup:Z,signoutSilent:D}},t)},pC=()=>{const e=so.useContext(hC);if(!e)throw new Error("AuthProvider context is undefined, please verify you are calling useAuth() as child of a <AuthProvider> component.");return e};function MA(e,t,n=null){return t.split(/[\.\[\]\'\"]/).filter(o=>o).reduce((o,s)=>o?o[s]:n,e)}function KD(e,t,n){let o=t.split(/[\.\[\]\'\"]/).filter(g=>g),s=e,f=o.pop();o.forEach(g=>{s=s[g]}),s[f]=n}function Pw(e){return Array.from(e).reduce((t,n)=>0|31*t+n.charCodeAt(0),0)}function JD(){if(uo=="oidc")return window.OIDCUser;if(uo=="basic")return window.BasicUser}function Tr(e){const t=JD();if(e={...e},uo=="basic"&&t&&(e.Authorization=`Basic ${t}`),uo=="oidc"&&t){const n=t==null?void 0:t.access_token;e.Authorization=`Bearer ${n}`}return e}class fo{constructor(t,n,o){Po(this,"instance");Po(this,"link");Po(this,"error");Po(this,"auth");Po(this,"setInstance");Po(this,"fetch",async(t={"Content-Type":"application/json"})=>{if(this.link){t=Tr(t);try{const n=await fetch(this.link,{headers:t});let o=await n.json();if(n.status==200)return this.instance=o,Array.isArray(this.instance)?this.setInstance([...this.instance]):this.setInstance({...this.instance}),n;if(n.status==404)return this.error=`${this.link}: ${n.statusText}`,console.error(this.error),n}catch(n){this.error=n.message,console.error(this.error)}}});Po(this,"save",async(t,n={"Content-Type":"application/json"})=>{if(this.link){n=Tr(n);var o=await fetch(this.link,{method:t,headers:n,body:JSON.stringify(this.instance)});if(o.ok){var s=await o.json();this.instance=s.object}else{let f="Error "+o.status+" "+o.statusText;console.error(f)}}});Po(this,"update",async()=>{await this.save("PUT")});Po(this,"create",async()=>{await this.save("POST")});Po(this,"setProperty",(t,n)=>{t&&(KD(this.instance,t,n),Array.isArray(this.instance)?this.setInstance([...this.instance]):this.setInstance({...this.instance}))});this.link=t,this.instance=n,this.setInstance=o,this.error=""}}const c6=J.createContext(null);function fc(){return uo=="basic"?J.useContext(c6):pC()}let Iw=null;async function XD(e,t,n){e.preventDefault();let o=e.target.elements.username.value,s=e.target.elements.password.value;const f=btoa(`${o}:${s}`);let g={"Content-Type":"application/json",Authorization:`Basic ${f}`},w=await fetch(`${Dt}/current_user/`,{headers:g,method:"GET"});if(w.status!=200)return n(),window.BasicUser=null,!1;w.status==200&&(window.BasicUser=f,Iw&&Iw(),t())}class NA{constructor(t){Po(this,"isLoading",!0);Po(this,"isAuthenticated",!1);Po(this,"user",null);this.isLoading=t!=null&&t.hasOwnProperty("isLoading")?t.isLoading:!0,this.isAuthenticated=t!=null&&t.hasOwnProperty("isAuthenticated")?t.isAuthenticated:!1,this.user=t!=null&&t.hasOwnProperty("user")?t.user:null}signoutRedirect(t){window.location.assign(t)}signinRedirect(t){window.location.assign(t)}removeUser(){y5&&sessionStorage.setItem("BasicUser",""),window.BasicUser=null,this.isLoading=!1,this.isAuthenticated=!1,this.user=null}}function QD(e){let t={};uo=="basic"&&(t=new NA),uo=="oidc"&&(t=pC());const[n,o]=J.useState(t);return Iw=()=>{if(uo=="basic"&&(y5&&(window.BasicUser&&sessionStorage.setItem("BasicUser",window.BasicUser),window.BasicUser=sessionStorage.getItem("BasicUser")),window.BasicUser)){let s={"Content-Type":"application/json"};s=Tr(s),fetch(`${Dt}/current_user`,{headers:s,method:"GET"}).then(f=>f.json()).then(f=>{let g={...n};g.isLoading=!1,g.isAuthenticated=!0,g.user=f,g=new NA(g),(n==null?void 0:n.user)!==(g==null?void 0:g.user)&&o(g)})}},J.useEffect(Iw,[]),S(c6.Provider,{value:n,children:e.children})}function op(e){var y;const t=fc(),[n,o]=JN(),[s,f]=J.useState(e.message);let g=window.location.href;function w(E){function M(){f("Incorrect Username/Password: Unauthorized")}function N(){f("Authenticated.")}XD(E,N,M)}return e.doLogout&&(t==null||t.removeUser(),t==null||t.signoutRedirect("/login?message=You+have+been+logged+out&next=/")),(n.get("next")||e.next)&&(g=`${window.location.protocol}//${window.location.host}${n.get("next")||e.next}`),uo=="basic"&&((y=t==null?void 0:t.user)!=null&&y.scope)&&t.user.scope.indexOf(Pf)>=0&&(t==null||t.signinRedirect({redirect_uri:g})),te("div",{className:"flex w-full h-full",children:[S("div",{className:`
                    flex
                    w-full
                    md:w-3/5
                    xl:w-2/5
                    px-28
                    md:px-28
                    lg:px-40
                    xl:px-56
                    bg-esnetblue-800
                    mx-auto
                `,children:S("div",{className:"flex items-center justify-center h-full w-full pb-9",children:te("div",{className:"w-full items-center justify-center my-auto",children:[S("div",{className:"grid h-auto w-full",children:S("h2",{className:"mr-5 text-white",children:"Login"})}),te("div",{className:"grid w-full h-auto",children:[s?S("div",{className:"message-box",children:s}):null,n.get("message")?S("div",{className:"message-box",children:n.get("message")}):null]}),S("div",{className:"grid w-full h-auto"}),uo=="oidc"?S("div",{className:"grid h-auto w-full",children:S("input",{type:"button",className:"btn primary w-full",value:"Login with Keycloak",onClick:()=>{t==null||t.signinRedirect({redirect_uri:g})}})}):null,uo=="basic"?S("div",{className:"grid h-auto w-full",children:te("form",{onSubmit:w,children:[S("label",{htmlFor:"username",className:"text-white mt-2",children:"Username"}),S("input",{type:"text",name:"username",className:"w-full",autoComplete:"current-username"}),S("label",{htmlFor:"password",className:"text-white mt-2",children:"Password"}),S("input",{type:"password",name:"password",className:"w-full mb-8",autoComplete:"current-password"}),S("input",{type:"submit",value:"Login",className:"btn w-full secondary"})]})}):null]})})}),S("div",{className:`
                    hidden
                    md:w-3/5
                    xl:2/5
                    py-20
                    px-8
                    bg-tn-layer-3
                    md:grid
                    place-items-center
                    h-screen
                `,children:S("div",{className:"w-full h-3/4 bg-terranova-logo-name bg-contain bg-no-repeat bg-center"})})]})}function Cl(e){var n;const t=fc();switch(uo=="oidc"&&(window.OIDCUser=t==null?void 0:t.user),t==null?void 0:t.activeNavigator){case"signinRedirect":case"signinSilent":return S(op,{message:"Logging you in..."});case"signoutRedirect":return S(op,{message:"Logging you out..."})}if(!(t!=null&&t.isAuthenticated))return S(op,{});if(!((n=t==null?void 0:t.user)!=null&&n.scope)||t.user.scope.indexOf(Pf)<0)return S(op,{message:"Insufficient user privileges"});if(u6()){const[o,s]=JN();["state","session_state","code","error"].forEach(w=>{o.delete(w)});let g=window.location.href.split("?")[0];o.toString()&&(g+=`?${o.toString()}`),window.location=g}return uo!="basic"&&uo!="oidc"?S("div",{children:"Your application is misconfigured. Currently, terranova only supports HTTP Basic authentication or OIDC."}):e.children}function f6(...e){return e.filter(Boolean).join(" ")}function ez(){return S("div",{className:"flex-shrink-0",children:S("a",{href:"https://es.net",children:te("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 36 36",xmlSpace:"preserve",className:"esnet-logo mt-1",children:[S("style",{type:"text/css",children:`.st0{fill:#6D6F71;}
    .st1{fill:#6DB6CA; stroke:n}
    .st2{fill:#48C5DC;}`}),S("circle",{className:"st0",cx:"18",cy:"18",r:"17.09"}),te("g",{children:[S("path",{className:"st1",d:`M5.21,20.11c0.92-1.17,2.18-2.22,3.52-3.4c-2.54-2.5-4.53-5.4-5.52-7.26c-1.1,1.9-1.84,4.03-2.14,6.3
              C2.05,17.06,3.55,18.68,5.21,20.11z`}),S("path",{className:"st1",d:`M30.71,26.33c1.14-0.3,2.12-0.66,2.68-0.9c0.26-0.53,0.49-1.08,0.69-1.64c-0.59,0.15-1.9,0.4-3.37,0.55
              C30.71,25.05,30.77,25.72,30.71,26.33z`}),S("path",{className:"st1",d:`M15.13,21.29c-0.86-0.45-2.1-1.22-2.86-1.71c-1.2,1.09-2.2,2.26-3.06,3.37c1.29,0.73,3.13,1.65,4.7,2.23
              c6.04,2.26,11.42,2.15,14.99,1.55c-0.06-0.73-0.12-1.46-0.28-2.26C25.07,24.5,20.06,23.86,15.13,21.29z`}),S("path",{className:"st1",d:`M23.29,14.35c3.03,3.42,4.5,7.34,5.1,10.46c0.95-0.01,1.76-0.16,2.53-0.24c-0.02-3.13-1.1-7.64-3.71-11.69
              c-1.39,0.12-2.9,0.47-4.44,0.89C22.84,13.85,23.21,14.26,23.29,14.35z`}),S("path",{className:"st1",d:`M28.61,26.45c0.15,1.95,0.05,3.91-0.12,5.03c0.56-0.43,1.08-0.9,1.58-1.4c0.3-0.95,0.63-2.48,0.78-4.02
              C30.2,26.24,29.42,26.31,28.61,26.45z`}),S("path",{className:"st1",d:`M25.18,10.25c-0.26-0.29-0.98-1.07-1.26-1.36c-3.95-4.02-7.69-6.16-10.84-7.26c-2.72,0.82-5.15,2.29-7.11,4.24
              c2.83,0.29,8.55,1.58,13.47,4.99C21.41,10.34,23.36,10.3,25.18,10.25z`}),S("path",{className:"st2",d:`M28.64,26.78c0.81-0.14,1.55-0.3,2.19-0.47c0.06-0.62,0.09-1.28,0.09-1.97c-0.77,0.08-1.64,0.13-2.59,0.14
              C28.48,25.28,28.58,26.05,28.64,26.78z`}),S("path",{className:"st1",d:`M24.3,9.75c1.08,1.19,2.05,2.41,2.81,3.58c2.88-0.25,5.72-0.01,7.41,0.31c-0.25-0.93-0.57-1.83-0.96-2.7
              C31.37,10.31,27.83,9.67,24.3,9.75z`}),S("path",{className:"st1",d:`M5.22,19.68c-1.33,1.69-2.47,3.54-3.07,4.72c0.84,2.08,2.08,3.96,3.62,5.54c0.65-1.7,2.12-4.53,4.14-7.1
              C8.13,21.82,6.53,20.8,5.22,19.68z`}),S("path",{className:"st1",d:`M15.96,17.34c2.4-1.6,5.1-2.7,7.39-3.33c-1.28-1.4-2.51-2.59-3.91-3.56c-1.2,0.31-2.84,0.84-4.06,1.39
              c-2.82,1.27-5.44,3.14-7.31,4.81c1.23,1.21,2.71,2.37,4.38,3.47C13.41,19.24,14.75,18.14,15.96,17.34z`}),S("path",{className:"st2",d:`M12.71,19.87c-1.67-1.1-3.11-2.29-4.34-3.5c-1.33,1.19-2.44,2.41-3.36,3.57c1.31,1.13,2.84,2.24,4.61,3.24
              C10.49,22.08,11.51,20.96,12.71,19.87z`}),S("path",{className:"st2",d:`M23.06,14.09c1.54-0.42,3.03-0.67,4.42-0.79c-0.75-1.17-1.66-2.35-2.74-3.54c-1.82,0.04-3.75,0.28-5.73,0.79
              C20.41,11.52,21.78,12.69,23.06,14.09z`})]})]})})})}function tz({className:e}){return S("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:S("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}function nz({className:e}){return S("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:S("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function d6({navigation:e}){return S("div",{className:"ml-10 flex items-baseline space-x-4",children:e==null?void 0:e.map(t=>S("a",{href:t.href,className:f6(t.current?"bg-teal-900":"hover:font-bold","navigation-item"),"aria-current":t.current?"page":void 0,children:t.name},t.name))})}function rz({open:e}){return S("div",{className:"-mr-2 flex md:hidden",children:te("button",{type:"button",className:"inline-flex items-center justify-center rounded-md bg-color-primary p-2 text-white hover:bg-primary hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-teal-800",children:[S("span",{className:"sr-only",children:"Open main menu"}),e?S(nz,{className:"hidden h-6 w-6"}):S(tz,{className:"block h-6 w-6"})]})})}function iz({user:e,userNavigation:t}){var s;const[n,o]=J.useState(!1);return te("div",{className:"relative ml-3",children:[S("div",{children:te("button",{type:"button",onClick:()=>o(!n),className:"profile-button",children:[S("span",{className:"sr-only",children:"Open user menu"}),S("img",{className:"h-7 w-7 rounded-full",src:(s=e.profile)==null?void 0:s.image,alt:""})]})}),n?S("div",{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:t.map(f=>S("a",{href:f.href,className:f6(f.active?"bg-esnetblue-100":"","block px-4 py-2 text-sm text-color-primary"),onClick:()=>o(!n),children:f.name},f.name))}):null]})}function oz({user:e,userNavigation:t,navigation:n}){var o;return te("div",{className:"md:hidden",children:[S("div",{className:"space-y-1 px-2 pt-2 pb-3 sm:px-3",children:S(d6,{navigation:n})}),te("div",{className:"border-t border-teal-700 pt-4 pb-3",children:[te("div",{className:"flex items-center px-5",children:[S("div",{className:"flex-shrink-0",children:S("img",{className:"h-10 w-10 rounded-full",src:(o=e.profile)==null?void 0:o.image,alt:""})}),te("div",{className:"ml-3",children:[S("div",{className:"text-base font-medium leading-none text-white",children:e.username}),S("div",{className:"text-sm font-medium leading-none text-esnetblue-600",children:e.email})]})]}),S("div",{className:"mt-3 space-y-1 px-2",children:t.map(s=>S("a",{href:s.href,className:"block rounded-md px-3 py-2 text-base font-medium text-esnetblue-600 hover:bg-color-primary hover:text-white",children:s.name},s.name))})]})]})}function az({user:e,userNavigation:t,navigation:n}){return S("nav",{children:te("div",{className:"container",children:[te("div",{className:"centered",children:[S(ez,{}),S("div",{className:"hidden md:block",children:S(d6,{navigation:n})})]}),S("div",{className:"hidden md:block",children:S("div",{className:"centered ml-4 md:ml-6",children:S(iz,{user:e,userNavigation:t})})}),S(rz,{open:!1})]})})}function sz(){return S("nav",{children:S("div",{className:"container",children:S("div",{className:"loading",children:"Loading..."})})})}function lz(e){const n=[{name:"Sign out",href:e.logoutPath?e.logoutPath:"/logout",active:!1}];var[o,s]=J.useState([{name:"Terranova",href:"/",current:!1}]);J.useState([]);var[f,g]=J.useState({username:"Placeholder",email:"placeholder@example.com",profile:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEGWlDQ1BrQ0dDb2xvclNwYWNlR2VuZXJpY1JHQgAAOI2NVV1oHFUUPrtzZyMkzlNsNIV0qD8NJQ2TVjShtLp/3d02bpZJNtoi6GT27s6Yyc44M7v9oU9FUHwx6psUxL+3gCAo9Q/bPrQvlQol2tQgKD60+INQ6Ium65k7M5lpurHeZe58853vnnvuuWfvBei5qliWkRQBFpquLRcy4nOHj4g9K5CEh6AXBqFXUR0rXalMAjZPC3e1W99Dwntf2dXd/p+tt0YdFSBxH2Kz5qgLiI8B8KdVy3YBevqRHz/qWh72Yui3MUDEL3q44WPXw3M+fo1pZuQs4tOIBVVTaoiXEI/MxfhGDPsxsNZfoE1q66ro5aJim3XdoLFw72H+n23BaIXzbcOnz5mfPoTvYVz7KzUl5+FRxEuqkp9G/Ajia219thzg25abkRE/BpDc3pqvphHvRFys2weqvp+krbWKIX7nhDbzLOItiM8358pTwdirqpPFnMF2xLc1WvLyOwTAibpbmvHHcvttU57y5+XqNZrLe3lE/Pq8eUj2fXKfOe3pfOjzhJYtB/yll5SDFcSDiH+hRkH25+L+sdxKEAMZahrlSX8ukqMOWy/jXW2m6M9LDBc31B9LFuv6gVKg/0Szi3KAr1kGq1GMjU/aLbnq6/lRxc4XfJ98hTargX++DbMJBSiYMIe9Ck1YAxFkKEAG3xbYaKmDDgYyFK0UGYpfoWYXG+fAPPI6tJnNwb7ClP7IyF+D+bjOtCpkhz6CFrIa/I6sFtNl8auFXGMTP34sNwI/JhkgEtmDz14ySfaRcTIBInmKPE32kxyyE2Tv+thKbEVePDfW/byMM1Kmm0XdObS7oGD/MypMXFPXrCwOtoYjyyn7BV29/MZfsVzpLDdRtuIZnbpXzvlf+ev8MvYr/Gqk4H/kV/G3csdazLuyTMPsbFhzd1UabQbjFvDRmcWJxR3zcfHkVw9GfpbJmeev9F08WW8uDkaslwX6avlWGU6NRKz0g/SHtCy9J30o/ca9zX3Kfc19zn3BXQKRO8ud477hLnAfc1/G9mrzGlrfexZ5GLdn6ZZrrEohI2wVHhZywjbhUWEy8icMCGNCUdiBlq3r+xafL549HQ5jH+an+1y+LlYBifuxAvRN/lVVVOlwlCkdVm9NOL5BE4wkQ2SMlDZU97hX86EilU/lUmkQUztTE6mx1EEPh7OmdqBtAvv8HdWpbrJS6tJj3n0CWdM6busNzRV3S9KTYhqvNiqWmuroiKgYhshMjmhTh9ptWhsF7970j/SbMrsPE1suR5z7DMC+P/Hs+y7ijrQAlhyAgccjbhjPygfeBTjzhNqy28EdkUh8C+DU9+z2v/oyeH791OncxHOs5y2AtTc7nb/f73TWPkD/qwBnjX8BoJ98VQNcC+8AAAB4ZVhJZk1NACoAAAAIAAUBEgADAAAAAQABAAABGgAFAAAAAQAAAEoBGwAFAAAAAQAAAFIBKAADAAAAAQACAACHaQAEAAAAAQAAAFoAAAAAAAAASAAAAAEAAABIAAAAAQACoAIABAAAAAEAAABAoAMABAAAAAEAAABAAAAAAPqjpwEAAAAJcEhZcwAACxMAAAsTAQCanBgAAAI4aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj42NDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj42NDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrUocOHAAAFcklEQVR4Ae1aXWgcVRT+Ntnt2t8Y22xCwYKNtVKl2pcq2ApKH/RBRaQgIr6I+CT2RRRUivGh4JP4gwjik9b6i7SgIhQRREvbVCJVg1jTP1ItbWJtGtPdTdfvm9kJu+vGndk9d9TdObDZ2Zk7957vu+ece869Se06Viqhg6Wrg7F70BMCEgvocAYSF+hwA0BiAYkFdDgD6Tjxn5gCDh0Ejv4MTE0C+QKQyQK9VwCrrwE2bAQGMnFqBKTiSIW/OAR8/jEwc7wMjrR3VQC9RCJKeSrD+0sGgbu2AhtJSBzilIBTs8ArzwMXOOPpXoLmbEtKl/zvyr+pcjievQDMngeWrwe2PQksdVypOCPgwC/AziGCXgx0LyJokoE6wCtJ8K5JRKobKP7hP3nsBeCqnr+1MrtR5t2sP6+j4THgrWc56/RtzXqJJh4KvN4mSWqfXkriFgIvPc6YwdjhSswJOJsieJr9gv6yymFmvQ66UpE3qV03Z/9luoJ+uhBzAuTzmnXPp5sEPweU7ytYli6ShNfm7ppemBKw/ydgcpSztoSWzKhuIbIEudKxb4AjXDqtxZSATz8iePquAl4Q1U0UliVcBux516S3qk7MCJDv/87lrouBK3TAq1Jl/h+yAq0kJ7+fv02zT8wIOPwtZ17JjFmP1ZCUJBXPAT+MV99v9ZeZumNHCD6GxFpptKWYETB51j0BIvgMx7EUMwKKyvRiEOtxzAhYxChdL8c35YSrgcaxFDMCcsr8GK1diggeGLAdwYyAwbXuLUArzOC1/1EC1g+WkyAXVkDg2jPI9AFXMsu0FDML0Aq4agNr+Wn71UAzP8sc4MbNltD9vswIUHdbH/KTIWs15fspFlh332PdMzNXyy5XLgCuvwMonKHCquKoeCviAWc/hdPA5vu5XeZgd8iUAIF9mIpmV/o7Ol0kpBUSVFYXWQH23QDce1srVM7/rjkBGuq5HQyILIqK3NsTiGZEFiTwIvPpJ5rpIdw7TgjI0lR3vAgspvL536gIRwlVJ6gdrUbt878CuXXsZygckGZbOdsUDRR67zNg34d0BS5j2ivQzNarGOUqaqOKT+22PADceUvQi7tv5wRI9WnuFezeA4x8DVxkQAt2i0REECO04bGQFnPTrYz2t7sDXNtzLARUDnqa7qHSeYKuUeBeX5axoi/HDO9qoMdBlK8cu951DBV89bA5WkOOYKFPpfwL4DU8jbCzpeMJiMUFxvPA+HHg1Ljv+xNc36cZ7WdYNygOzAmnI8vNz2XLgX6WvatW01PWAsowXYl5EDxHHz/8HfDjCI+0xgiSUV8Hnt5JD1EoH/A+PP/z8oMaG1Q7bat737xW2wzPBfrXcIXYBGy6zpYKEwK0zO39Ejj4FXD+KJe5GV9xbZHrZEcgaiVY/mrvB78rcwUtm+pTn3QPsOZm4L4HgRUGgbMlAnQWsOtNntjso3J/MoHhSbBAB8p7IFssiOYIKZMoywhOjtdtAR5hwtSKNE3Azt3AAf7Tg8B2L/O/LQH/E6jAogoTHJsbJI9up1UwbjQjNR4YrovtPADd/4Hvm+nL+Y7SWM6M9YnQfNoE8UGxQfLqNqbbo/511L+RCXjqGfr5Cf/4O1Ak6qBW7TW+rEFH8e8MAaMsoKJKJAJef5u5/EnOfC8nu3L5ijqqZXtZHz+ZFcAbLMOjSmgCtLyN7vUHEvgg0EUd0El7EqB9B+0bvv9JtBFCEzAyXPbzaP3H1lq5g8roYVacUSQ0AVMO/08nisLztqUVgFaqXekoEpqAUuiWUYa3bxvVNf8nsMIT1SjDrO2p7QioBdjod0JAI4ba/XliAe0+w43wJRbQiKF2f55YQLvPcCN8iQU0Yqjdn/8FT/52MHoXBDwAAAAASUVORK5CYII="}});J.useState();const[w,y]=J.useState(!0);return J.useEffect(()=>{y(!1)},[]),w?S("div",{id:"top-bar",className:"top-bar",children:S(sz,{})}):te("div",{id:"top-bar",className:"top-bar",children:[S(az,{user:f,userNavigation:n,navigation:o}),S(oz,{user:f,userNavigation:n,navigation:o})]})}var uz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cz=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dn=(e,t)=>{const n=J.forwardRef(({color:o="currentColor",size:s=24,strokeWidth:f=2,absoluteStrokeWidth:g,children:w,...y},E)=>J.createElement("svg",{ref:E,...uz,width:s,height:s,stroke:o,strokeWidth:g?Number(f)*24/Number(s):f,className:`lucide lucide-${cz(e)}`,...y},[...t.map(([M,N])=>J.createElement(M,N)),...(Array.isArray(w)?w:[w])||[]]));return n.displayName=`${e}`,n},fz=dn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),dz=dn("ArrowUpToLine",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]),hz=dn("BadgePlus",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"8",y2:"16",key:"10p56q"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),pz=dn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),mz=dn("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),gz=dn("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),vz=dn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),_z=dn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),yz=dn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),wz=dn("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),bz=dn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),xz=dn("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Sz=dn("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ez=dn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Tz=dn("FileEdit",[["path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5",key:"1bg6eb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z",key:"1rgxu8"}]]),Cz=dn("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]),kz=dn("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Az=dn("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Mz=dn("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Nz=dn("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Lz=dn("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]),Pz=dn("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),Iz=dn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Oz=dn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Rz=dn("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),Dz=dn("PencilRuler",[["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"M13 7 8.7 2.7a2.41 2.41 0 0 0-3.4 0L2.7 5.3a2.41 2.41 0 0 0 0 3.4L7 13",key:"orapub"}],["path",{d:"m8 6 2-2",key:"115y1s"}],["path",{d:"m2 22 5.5-1.5L21.17 6.83a2.82 2.82 0 0 0-4-4L3.5 16.5Z",key:"hes763"}],["path",{d:"m18 16 2-2",key:"ee94s4"}],["path",{d:"m17 11 4.3 4.3c.94.94.94 2.46 0 3.4l-2.6 2.6c-.94.94-2.46.94-3.4 0L11 17",key:"cfq27r"}]]),zz=dn("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Uz=dn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Fz=dn("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Bz=dn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$z=dn("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),jz=dn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Hz=dn("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Wz=dn("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),Vz=dn("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Zz=dn("XSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),qz=dn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Gz=dn("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),st=e=>{let t=null;const{name:n,className:o,...s}=e;switch(n){case"lucide-alert-triangle":case"alert-triangle":t=fz;break;case"lucide-arrow-up-to-line":case"arrow-up-to-line":t=dz;break;case"lucide-badge-plus":case"badge-plus":t=hz;break;case"lucide-camera":case"camera":t=pz;break;case"lucide-zap":case"zap":t=Gz;break;case"lucide-pencil-ruler":case"pencil-ruler":t=Dz;break;case"lucide-folder-open":case"folder-open":t=Az;break;case"lucide-check":case"check":t=gz;break;case"lucide-check-square":case"check-square":t=mz;break;case"circle-user":case"user-circle":case"lucide-circle-user":t=Hz;break;case"lucide-chevron-down":case"chevron-down":t=vz;break;case"lucide-chevron-right":case"chevron-right":t=yz;break;case"lucide-chevron-left":case"chevron-left":t=_z;break;case"lucide-file-text":case"file-text":t=kz;break;case"lucide-file-pen":case"file-pen":case"file-edit":case"lucide-file-edit":t=Tz;break;case"file-spreadsheet":case"lucide-file-spreadsheet":t=Cz;break;case"lucide-mail":case"mail":t=Iz;break;case"lucide-key-round":case"key-round":t=Pz;break;case"lucide-map":case"map":t=Rz;break;case"lucide-database":case"database":t=xz;break;case"lucide-map-pin":case"map-pin":t=Oz;break;case"lucide-copy":case"copy":t=bz;break;case"lucide-clipboard-copy":case"clipboard-copy":t=wz;break;case"lucide-pencil":case"pencil":t=zz;break;case"lucide-eye":case"eye":t=Ez;break;case"lucide-eye-off":case"eye-off":t=Sz;break;case"lucide-help-circle":case"help-circle":t=Nz;break;case"lucide-hourglass":case"hourglass":t=Lz;break;case"lucide-grip-vertical":case"grip-vertical":t=Mz;break;case"lucide-save":case"save":t=Fz;break;case"lucide-settings":case"settings":t=Bz;break;case"lucide-star":case"star":t=$z;break;case"lucide-trash2":case"trash2":case"lucide-trash":case"trash":t=jz;break;case"lucide-user-cog":case"user-cog":t=Wz;break;case"lucide-plus":case"plus":t=Uz;break;case"lucide-x-square":case"x-square":t=Zz;break;case"lucide-x-circle":case"x-circle":t=Vz;break;case"lucide-x":case"x":t=qz;break;default:return S("span",{})}return J.createElement(t,{className:o,...s})};function h6(e){const{controller:t,instance:n}=J.useContext(m6);function o(y){if(!y.subItems||y.collapsible&&y.collapsed)return null;var E=y.subItems.map(M=>M.subItems?S(p6,{item:M},`menuList-${M.id}`):S(h6,{item:M},`menuItem-${M.id}`));return S("ul",{className:"w-full",children:E})}function s(y){return y?S(st,{name:y,className:"icon align-middle inline hover:bg-transparent"}):null}function f(){e.item||(e.item={}),e.item.collapsed=!e.item.collapsed,t.setInstance({...n})}function g(y){if(!y.collapsible)return null;var E="chevron-right";return y.collapsed||(E="chevron-down"),S(st,{name:E,className:"icon btn sm inline hover:bg-transparent"})}function w(y){return y.collapsible?te("div",{className:"compound justify-start collapsible",onClick:f,children:[g(y),S("a",{href:y.href,target:y.target,children:y.text})]}):S("a",{href:y.href,target:y.target,children:y.text})}return te("li",{className:e.item.className,children:[s(e.item.icon),w(e.item),o(e.item)]})}function p6(e){return S("ul",{children:S(h6,{item:e.item})})}const Yz="esdb",Kz=[{label:"Is Exactly",value:""},{label:"Is 'Like'",value:"like"},{label:"Is Not 'Like'",value:"not_like"},{label:"Does Not Equal",value:"not_equal"}],LA={esdb:[{label:"No Grouping (default)",value:""},{label:"Device Name",value:"device_name"}],services:[{label:"No Grouping (default)",value:""},{label:"Posture (local/remote)",value:"posture"},{label:"Router Name",value:"router_name"},{label:"Router Port",value:"router_port"},{label:"Site Short Name",value:"site_short_name"},{label:"Site ASN",value:"site_asn"},{label:"VLAN",value:"vlan"},{label:"CIDR",value:"cidr"}]},Jz=[{label:"Edge Graph",value:"logical"},{label:"Geographic",value:"geographic"},{label:"Table View",value:"table-view"}],PA=[{label:"Geographic",value:"geographic"},{label:"Edge Graph",value:"logical"}],Xz=[{label:`Dynamic ${String.fromCodePoint(9889)}`,value:"live-latest"},{label:`Static ${String.fromCodePoint(128247)} Latest`,value:"static-latest"}],Qz=[{value:"add",label:"Add"},{value:"override",label:"Override"},{value:"delete",label:"Delete"}],eU=[{value:"nodes",label:"Node"},{value:"edges",label:"Edge"}],ap={name:"",overrides:[],configuration:{initialViewStrategy:"static",latitudeVar:null,longitudeVar:null,viewport:{center:{lat:39,lng:-98},zoom:3},tileset:{geographic:"arcgis",boundaries:null,labels:null},background:"#DDDDDD",editMode:!1,showSidebar:!1,showViewControls:!0,showLegend:!1,legendColumnLength:3,legendPosition:"bottomLeft",legendDefaultBehavior:"minimized",enableScrolling:!0,enableEditing:!1,enableNodeAnimation:!0,enableEdgeAnimation:!0,thresholds:[],zIndexBase:10,layers:[]}},tU={name:"",overrides:[],configuration:{initialViewStrategy:"static",latitudeVar:null,longitudeVar:null,viewport:{center:{lat:0,lng:0},zoom:4},tileset:{geographic:null,boundaries:null,labels:null},background:"#EEEEEE",editMode:!1,showSidebar:!1,showViewControls:!0,showLegend:!1,legendColumnLength:3,legendPosition:"bottomLeft",legendDefaultBehavior:"minimized",enableScrolling:!0,enableEditing:!1,enableNodeAnimation:!1,enableEdgeAnimation:!1,thresholds:[],zIndexBase:10,layers:[]}},p2={name:"",visible:!0,jsonFromUrl:!1,color:"#AAAAFF",nodeWidth:5,edgeWidth:1.5,pathOffset:1,endpointId:"names",nodeHighlight:"#AAFFAA",srcFieldLabel:"Source:",dstFieldLabel:"Destination:",dataFieldLabel:"Volume:",srcField:"src",dstField:"dst",inboundValueField:"atoz",outboundValueField:"ztoa",nodeValueField:"node",legend:!0},nU={nodes:[],edges:[]},rU=[],iU=[],oU={endpoint:Yz,filters:rU},aU={name:"",query:oU};var sU={favorites:{maps:[],datasets:[],templates:[]},lastEdited:{maps:[],datasets:[],templates:[]}};const lU=1,uU={subItems:[{id:"dfnjkla",text:"Tools",href:"",className:"nav-head compound justify-start",icon:"lucide-pencil-ruler",collapsible:!1,current:!1,subItems:[{id:"fjlsjgs",text:"Create New Dataset",href:"/dataset/new",className:"tab-group",collapsible:!1,current:!1},{id:"SADdasd",text:"Create New Map",href:"/map/new",className:"tab-group",collapsible:!1,current:!1},{id:"SasdWEe",text:"Node Template Builder",href:"/template/new",className:"tab-group",collapsible:!1,current:!1}]},{id:"sdkflEe",text:"Libraries",href:"",className:"nav-head compound justify-start",icon:"lucide-folder-open",collapsible:!1,current:!1,subItems:[{id:"s*f8f8",text:"Datasets",href:"/library/datasets",className:"tab-group",collapsible:!0,collapsed:!0,current:!1,subItems:[]},{id:"dfi8uy",text:"Maps",href:"/library/maps",className:"tab-group",collapsible:!0,collapsed:!0,current:!1,subItems:[]}]},{id:"v8y89vew",text:"Documentation",href:"https://esnet.atlassian.net/wiki/spaces/MAAG/pages/3186196481/Terranova+Documentation",target:"docs",className:"nav-head compound justify-start",icon:"lucide-file-text",collapsible:!1,current:!1}]},cU={id:"fuf8jf",text:"Node Templates",href:"/library/templates",className:"tab-group",collapsible:!0,collapsed:!0,current:!1,subItems:[]},fU={grafana:`
        Copy the value at right.
        In Grafana, create a new NetworkMap Panel.
        Set the "Configure from URL" checkbox.
        In the URL blank that appears, enter the value you copied.
    `,"html-svg":`
        Copy the value at right.
        In your HTML document, paste the <img> tag you copied.
    `,svg:`
        The image at right displays the complete SVG code.
        Using the "Download" button, you can download the SVG document.
        Using the "Copy to Clipboard" button, you can copy the SVG code to your clipboard.
    `},IA=[{value:"grafana",label:"Grafana"},{value:"html-svg",label:"SVG HTML Image Tag"},{value:"svg",label:"Raw SVG Output"}],fs=J.createContext(null);function dU(e){let t=fc();const[n,o]=J.useState(JSON.parse(JSON.stringify(sU))),[s,f]=J.useState(new fo(Dt+"/userdata/",n,o));return J.useEffect(()=>{t!=null&&t.isAuthenticated&&(async()=>(await s.fetch()).status!==200&&s.create())()},[t==null?void 0:t.isAuthenticated]),S(fs.Provider,{value:{controller:s,instance:n},children:e.children})}const Op=J.createContext(null);function hU(e){let{controller:t,instance:n}=J.useContext(fs),[o,s]=J.useState({maps:[],datasets:[],templates:[]});return J.useEffect(()=>{var w;let f=Object.keys((w=t.instance)==null?void 0:w.lastEdited),g={maps:"mapId",datasets:"datasetId",templates:"templateId"};f.forEach(async y=>{var N,R,F,$,V,X,Z,D,z;let E=`lastEdited.${y}`+JSON.stringify((N=t.instance)==null?void 0:N.lastEdited[y]),M=localStorage.getItem(E);if(M){M=JSON.parse(M),o[y]=M,s({...o});return}if(Array.isArray((F=(R=t.instance)==null?void 0:R.lastEdited)==null?void 0:F[y])&&(($=t.instance.lastEdited)==null?void 0:$[y].length)>0){let H=(Z=(X=(V=t.instance)==null?void 0:V.lastEdited)==null?void 0:X[y])==null?void 0:Z.map(ge=>`${g[y]}=${ge}`).join("&"),se=`${Dt}/${y}/?${H}`,he={"Content-Type":"application/json"};he=Tr(he);let pe=await fetch(se,{headers:he,method:"GET"});if(pe.ok){let ge=await pe.json(),ke=(z=(D=t.instance)==null?void 0:D.lastEdited)==null?void 0:z[y];ge.sort(function(Ue,it){var Xe=Ue.mapId,Te=it.mapId;return ke.indexOf(Xe)>ke.indexOf(Te)?1:-1});const be=ge.map(Ue=>Ue[g[y]]);o[y]=be,s(JSON.parse(JSON.stringify(o))),localStorage.setItem(E,JSON.stringify(be))}}})},[t.instance]),S(Op.Provider,{value:o,children:e.children})}const mC=J.createContext(null);function pU(e){J.useContext(fs);let[t,n]=J.useState({});return J.useEffect(()=>{["maps","datasets","templates"].forEach(async s=>{let f=(Date.now()/1e3/HS).toFixed(0),g=`globalLastEdited.${s}.${f}`,w=localStorage.getItem(g);if(w){w=JSON.parse(w),t[s]=w,n({...t});return}let E=`${Dt}/${s}/?sort=-lastUpdatedBy&offset=0&limit=3`,M={"Content-Type":"application/json"};M=Tr(M);let N=await fetch(E,{headers:M,method:"GET"});if(N.ok){let R=await N.json();t[s]=R,n({...t}),localStorage.setItem(g,JSON.stringify(R))}})},[]),S(mC.Provider,{value:t,children:e.children})}const m6=J.createContext(null);function mU(){var Z,D;let e=!1,t=!1,n=fc();(Z=n==null?void 0:n.user)!=null&&Z.scope&&n.user.scope.indexOf(nw)>0&&(e=!0),(D=n==null?void 0:n.user)!=null&&D.scope&&n.user.scope.indexOf(w5)>0&&(t=!0);let[o,s]=J.useState(JSON.parse(JSON.stringify(uU))),f=J.useContext(Op),g=J.useContext(mC),[w,y]=J.useState([]),[E,M]=J.useState([]),[N,R]=J.useState([]);const[F]=J.useState(new fo(null,o,s)),$=(z,H)=>{if(z.lastUpdatedOn>H.lastUpdatedOn)return-1;if(z.lastUpdatedOn==H.lastUpdatedOn)return 0;if(z.lastUpdatedOn<H.lastUpdatedOn)return 1},V=(z,H,se,he)=>{let pe=[];if(z.length!==0)for(let ge of z){let ke={id:ge[se],text:ge.name,href:`/${H}/${ge[se]}`,className:"sub-group",collapsible:!1,current:!1,icon:he};pe.push(ke)}return pe},X=async(z,H)=>{var ke;let se=(ke=f==null?void 0:f[z])==null?void 0:ke.map(be=>`${H}=${be}`).join("&"),he=`${Dt}/${z}/?${se}`,pe={"Content-Type":"application/json"};pe=Tr(pe);let ge=await fetch(he,{headers:pe,method:"GET"});if(ge.ok){let be=await ge.json(),Ue=f==null?void 0:f[z];be.sort(function(it,Xe){var Te=it.mapId,Fe=Xe.mapId;return Ue.indexOf(Te)<Ue.indexOf(Fe)?1:-1}),z==="maps"?(w=be,y([...w])):z==="datasets"?(E=be,M([...E])):z==="templates"&&(N=be,R([...N]))}};return J.useEffect(()=>{var se,he,pe,ge,ke,be;if(((se=f==null?void 0:f.maps)==null?void 0:se.length)>0&&X("maps","mapId"),w.length<3&&(g!=null&&g.maps)){let Ue=3-w.length,it=(he=g.maps)==null?void 0:he.sort($).slice(0,Ue).filter(Xe=>!w.some(Te=>Te.mapId===Xe.mapId));w=w.concat(it),y(w)}if(((pe=f==null?void 0:f.datasets)==null?void 0:pe.length)>0&&X("datasets","datasetId"),E.length<3&&(g!=null&&g.datasets)){let Ue=3-E.length,it=(ge=g.datasets)==null?void 0:ge.sort($).slice(0,Ue).filter(Xe=>!E.some(Te=>Te.datasetId===Xe.datasetId));E=E.concat(it),M(E)}if(((ke=f==null?void 0:f.templates)==null?void 0:ke.length)>0&&X("templates","templateId"),N.length<3&&(g!=null&&g.templates)){let Ue=3-N.length,it=(be=g.templates)==null?void 0:be.sort($).slice(0,Ue).filter(Xe=>!N.some(Te=>Te.templateId===Xe.templateId));N=N.concat(it),R(N)}let z=V(E,"dataset","datasetId","lucide-database"),H=V(w,"map","mapId","lucide-map");if(o.subItems[1].subItems[0].subItems=z,o.subItems[1].subItems[1].subItems=H,e){let Ue=V(N,"template","templateId","lucide-map-pin");o.subItems[1].subItems.length<=2&&o.subItems[1].subItems.push(cU),o.subItems[1].subItems[2].subItems=Ue}F.setInstance({...o})},[f==null?void 0:f.maps,f==null?void 0:f.datasets,f==null?void 0:f.templates,g==null?void 0:g.maps,g==null?void 0:g.datasets,g==null?void 0:g.templates]),S(m6.Provider,{value:{controller:F,instance:o},children:S("div",{className:"toolbar nav-list",children:te("div",{className:"relative h-full",children:[S(p6,{item:o}),t?S("div",{className:"absolute bottom-0",children:te("div",{className:"nav-head compound justify-start",children:[S(st,{name:"settings",className:"icon align-middle inline hover:bg-transparent"}),S("a",{href:"/settings",children:"Settings"})]})}):null]})})})}const dc=J.createContext(null);function gU(e){let{controller:t,instance:n}=J.useContext(fs),[o,s]=J.useState({maps:[],datasets:[],templates:[]});return J.useEffect(()=>{var w;let f=Object.keys((w=t.instance)==null?void 0:w.favorites),g={maps:"mapId",datasets:"datasetId",templates:"templateId"};f.forEach(async y=>{var N,R,F,$,V,X,Z;let E=`favorites.${y}`+JSON.stringify((N=t.instance)==null?void 0:N.favorites[y]),M=localStorage.getItem(E);if(M){M=JSON.parse(M),o[y]=M,s({...o});return}if(Array.isArray((F=(R=t.instance)==null?void 0:R.favorites)==null?void 0:F[y])&&(($=t.instance.favorites)==null?void 0:$[y].length)>0){let D=(Z=(X=(V=t.instance)==null?void 0:V.favorites)==null?void 0:X[y])==null?void 0:Z.map(he=>`${g[y]}=${he}`).join("&"),z=`${Dt}/${y}/?${D}`,H={"Content-Type":"application/json"};H=Tr(H);let se=await fetch(z,{headers:H,method:"GET"});if(se.ok){const pe=(await se.json()).map(ge=>ge[g[y]]);o[y]=pe,s({...o}),localStorage.setItem(E,JSON.stringify(pe))}}})},[t.instance]),S(dc.Provider,{value:o,children:e.children})}const g6=e=>{navigator.clipboard.writeText(e.trim())},OA=e=>{const{buttonProps:t}=e,[n,o]=J.useState(!1);let s=t==null?void 0:t.onClick;return s||(s=()=>{g6(e.copyValue),o(!0),setTimeout(()=>{o(!1)},Zw*1e3)}),te("div",{children:[S("div",{title:e.title,children:S(st,{name:e.iconName,className:"icon btn bordered",onClick:s})}),S("div",{className:"absolute mt-1",children:n?S("span",{className:"tooltip-box copied-tooltip-box animate-fade opacity-0",children:"Copied!"}):null})]})};function vU(){var t;let e=fc();if(e!=null&&e.isAuthenticated){if(!(e!=null&&e.user))return S(Wn,{});if(!((t=e==null?void 0:e.user)!=null&&t.scope)||e.user.scope.indexOf(Lv)<0)return S("div",{className:"read-only-warning",children:te("div",{className:"compound justify-start",children:[S(st,{name:"alert-triangle",className:"icon small stroke-mauve-700"}),te("p",{className:"py-1",children:[S("strong",{className:"tn-bold text-mauve-900",children:"You are currently logged in as a read-only user."}),` You can look around but can't make any changes. Contact your administrator to add permissions for the effective scope "`,Lv,'"']})]})})}return S(Wn,{})}function _U(){var t;let e=fc();return S("div",{children:e!=null&&e.isAuthenticated&&((t=e==null?void 0:e.user)!=null&&t.scope)&&e.user.scope.indexOf(Pf)>=0?te(Wn,{children:[S(lz,{}),S(vU,{}),S(dU,{children:S(hU,{children:S(gU,{children:S(pU,{children:te("div",{className:"backdrop bg-tn-layer-1/80 h-auto",children:[S(mU,{}),S(yA,{})]})})})})})]}):S(yA,{})},Pw(JSON.stringify((window==null?void 0:window.BasicUser)||"")))}function yU(){function e(be){return be?S(st,{name:be,className:"icon btn"}):null}function t(be){return be?S(st,{name:be,className:"icon lg mt-4 mr-4 align-middle inline hover:bg-transparent"}):null}const n=(be,Ue)=>{if(be.lastUpdatedOn>Ue.lastUpdatedOn)return-1;if(be.lastUpdatedOn==Ue.lastUpdatedOn)return 0;if(be.lastUpdatedOn<Ue.lastUpdatedOn)return 1};let o=J.useContext(Op),s=J.useContext(mC),f=J.useContext(dc),[g,w]=J.useState([]),[y,E]=J.useState([]),[M,N]=J.useState([]),[R,F]=J.useState([]),[$,V]=J.useState([]),[X,Z]=J.useState([]),[D,z]=J.useState([]),[H,se]=J.useState([]),[he,pe]=J.useState([]);const ge=async(be,Ue)=>{var ot;let it=(ot=o==null?void 0:o[be])==null?void 0:ot.map(Je=>`${Ue}=${Je}`).join("&"),Xe=`${Dt}/${be}/?${it}`,Te={"Content-Type":"application/json"};Te=Tr(Te);let Fe=await fetch(Xe,{headers:Te,method:"GET"});if(Fe.ok){let Je=await Fe.json(),Le=o==null?void 0:o[be];Je.sort(function(Ye,Ze){var ut=Ye.mapId,Qe=Ze.mapId;return Le.indexOf(ut)<Le.indexOf(Qe)?1:-1}),be==="maps"?(R=Je,F([...R])):be==="datasets"?($=Je,V([...$])):be==="templates"&&(X=Je,Z([...X]))}},ke=async(be,Ue)=>{var ot;let it=(ot=f==null?void 0:f[be])==null?void 0:ot.map(Je=>`${Ue}=${Je}`).join("&"),Xe=`${Dt}/${be}/?${it}`,Te={"Content-Type":"application/json"};Te=Tr(Te);let Fe=await fetch(Xe,{headers:Te,method:"GET"});if(Fe.ok){let Je=await Fe.json();be==="maps"?(D=Je.sort(n),z([...D])):be==="datasets"?(H=Je.sort(n),se([...H])):be==="templates"&&(he=Je.sort(n),pe([...he]))}};return J.useEffect(()=>{var be,Ue,it,Xe,Te,Fe,ot,Je,Le;s!=null&&s.maps&&(g=(be=s.maps)==null?void 0:be.sort(n).slice(0,3),w([...g])),s!=null&&s.datasets&&(y=(Ue=s.datasets)==null?void 0:Ue.sort(n).slice(0,3),E([...y])),s!=null&&s.templates&&(M=(it=s.templates)==null?void 0:it.sort(n).slice(0,3),N([...M])),((Xe=o==null?void 0:o.maps)==null?void 0:Xe.length)>0&&ge("maps","mapId"),((Te=o==null?void 0:o.datasets)==null?void 0:Te.length)>0&&ge("datasets","datasetId"),((Fe=o==null?void 0:o.templates)==null?void 0:Fe.length)>0&&ge("templates","templateId"),((ot=f==null?void 0:f.maps)==null?void 0:ot.length)>0&&ke("maps","mapId"),((Je=f==null?void 0:f.datasets)==null?void 0:Je.length)>0&&ke("datasets","datasetId"),((Le=f==null?void 0:f.templates)==null?void 0:Le.length)>0&&ke("templates","templateId")},[o,s,f]),te("main",{className:"w-full",children:[S("div",{className:"homepage-back",children:S("div",{className:"homepage-logo"})}),te("div",{className:"main-content bg-transparent border-none lg:flex",children:[te("div",{className:"w-full lg:w-3/4 xl:w-3/4 mx-auto pt-6",children:[S("fieldset",{className:"main-page-panel",children:te("div",{children:[S("div",{className:"m-2",children:S("h3",{children:"Recent Activity"})}),te("div",{className:"flex flex-row",children:[te("div",{className:"m-2 w-1/2",children:[S("h4",{children:"Recent Maps"}),S("table",{className:"table-auto",children:S("tbody",{children:g.map((be,Ue)=>{let it=`${Dt}/output/map/${be.mapId}/?version=latest`;return te("tr",{children:[S("td",{children:S(OA,{iconName:"clipboard-copy",copyValue:it,title:"Copy URL for Latest Version"})}),S("td",{children:S("a",{className:"font-semibold",href:`/map/${be.mapId}`,children:be.name})})]},be.mapId)})},"global-top-maps")})]}),te("div",{className:"m-2",children:[S("h4",{children:"My Recent Maps"}),S("table",{className:"table-auto",children:S("tbody",{children:R.length>0?R.map((be,Ue)=>{let it=`${Dt}/output/map/${be.mapId}/?version=latest`;return te("tr",{children:[S("td",{children:S(OA,{iconName:"clipboard-copy",copyValue:it,title:"Copy URL for Latest Version"})}),S("td",{children:S("a",{className:"font-semibold",href:`/map/${be.mapId}`,children:be.name})})]},be.mapId)}):S("tr",{children:S("td",{children:"You haven't edited any maps recently"})})},"my-top-maps")})]})]}),te("div",{className:"flex flex-row",children:[te("div",{className:"m-2 w-1/2",children:[S("h4",{children:"Recent Datasets"}),S("table",{className:"narrow-p",children:S("tbody",{children:y.map((be,Ue)=>S("tr",{children:S("td",{children:S("a",{className:"font-semibold",href:`/dataset/${be.datasetId}`,children:be.name})})},be.datasetId))},"global-top-datasets")})]}),te("div",{className:"m-2",children:[S("h4",{children:"My Recent Datasets"}),S("table",{className:"narrow-p",children:S("tbody",{children:$.length>0?$.map((be,Ue)=>S("tr",{children:S("td",{children:S("a",{className:"font-semibold",href:`/dataset/${be.datasetId}`,children:be.name})})},be.datasetId)):S("tr",{children:S("td",{children:"You haven't edited any datasets recently"})})},"my-top-datasets")})]})]})]})}),te("fieldset",{className:"main-page-panel",children:[te("div",{className:"compound",children:[te("div",{className:"justify-start compound",children:[S("div",{children:t("database")}),S("h3",{children:"Datasets"})]}),S("form",{action:"/dataset/new",children:S("input",{type:"submit",className:"btn primary m-4",value:"+ New Dataset"})})]}),te("div",{className:"m-2",children:[S("h4",{children:"About Datasets"}),S("p",{children:"A Dataset is a set of data to be plotted on your map. To render a dataset, we create a query that yields a set of nodes. Datasets are later used to bundled together into a finished map, which also includes styling information."})]})]}),te("fieldset",{className:"main-page-panel",children:[te("div",{className:"compound",children:[te("div",{className:"justify-start compound",children:[S("div",{children:t("map")}),S("h3",{children:"Maps"})]}),S("form",{action:"/map/new",children:S("input",{type:"submit",className:"btn primary m-4",value:"+ New Map"})})]}),te("div",{className:"m-2",children:[S("h4",{children:"About Maps"}),S("p",{children:"A Map is a combination of one or more datasets that are plotted on your map along with the styling information. To render a map, we import datasets. Datasets yield a set of nodes and edges, which are then arranged into map layers."})]})]})]}),S("div",{className:"w-full lg:w-1/3 xl:w-2/5 mx-auto pt-6",children:te("fieldset",{className:"main-page-panel",children:[S("h3",{children:"My Favorites"}),D.length>0?S("h4",{children:"Maps"}):"",S("table",{className:"narrow-p",children:S("tbody",{children:D.map((be,Ue)=>te("tr",{children:[S("td",{children:e("lucide-map")}),S("td",{children:S("a",{className:"font-semibold",href:`/map/${be.mapId}`,children:be.name})})]},be.mapId))})}),H.length>0?S("h4",{children:"Datasets"}):"",S("table",{children:S("tbody",{children:H.map((be,Ue)=>te("tr",{children:[S("td",{children:e("lucide-database")}),S("td",{children:S("a",{className:"font-semibold",href:`/dataset/${be.datasetId}`,children:be.name})})]},be.datasetId))})}),he.length>0?S("h4",{children:"Templates"}):"",S("table",{children:S("tbody",{children:he.map((be,Ue)=>te("tr",{children:[S("td",{children:e("lucide-map-pin")}),S("td",{children:S("a",{className:"font-semibold",href:`/template/${be.templateId}`,children:be.name})})]},be.templateId))})}),S("table",{children:S("tbody",{children:D.length==0&&H.length==0&&he.length==0?S("tr",{children:S("td",{children:"You have not marked any favorites"})}):S("tr",{})})})]})})]})]})}function Hv(e){let[t,n]=J.useState(e.value||e.defaultValue);function o(s){n(s.target.value),e==null||e.onChange(s)}return te("div",{className:e.className?e.className:"compound",children:[S("input",{type:"range",name:e.name,className:"w-9/12",value:t,min:e.min,max:e.max,step:e.step,onChange:o}),S("input",{type:"text",className:"w-2/12",value:t,onChange:o})]})}function hc(e,t){var n=t;if(e&&e.__privatemessagebus__)return e.__privatemessagebus__;if(e&&e.dispatchEvent){var o=new CustomEvent("$SCOPE.DISCOVERY$",{bubbles:!0,cancelable:!0,composed:!0});o.callback=function(s){n=s},e.dispatchEvent(o)}return n}const v6=function(e,t,n,o){if(o.debug){var s="for bus with id #"+o.instanceId;console.debug("Received subscription to topic",e,s)}var f=t.toLocaleString();n||(n=this),o.topics[e]?o.topics[e][f]={callback:t,context:n}:o.topics[e]={hash:{callback:t,context:n}}},_6=function(e,t,n){if(n.debug){var o="scoped to bus with id #"+n.instanceId;console.debug("publishing event on topic",e,o)}var s=`${n.instanceId}.lastEvents.${e}`;try{localStorage.setItem(s,JSON.stringify(t))}catch(y){console.error(y),console.log("received error saving to localStorage. clearing localStorage."),localStorage.clear()}var f=n.topics[e];if(f)for(var g=Object.values(f),w=0;g&&w<g.length;w++)g[w].callback.call(g[w].context,t)},y6=e=>{e.debug&&console.debug("destroying all callbacks");for(var t=Object.keys(e.topics),n=0;n<t.length;n++)e.topics[t[n]]={}},w6=(e,t)=>{t.debug&&console.debug("destroying callbacks on topic '"+e+"'"),t.topics[e]&&(t.topics[e]={})},b6=(e,t)=>{`${t.instanceId}${e}`,t.debug&&console.debug("returning last value for",e,"from bus with id #",t.instanceId);try{return JSON.parse(localStorage.getItem(`${t.instanceId}.lastEvents.${e}`))}catch{return}},x6=(e,t)=>{t.debug&&console.debug("clearing last value for",e,"from bus with id #",t.instanceId);var n=`${t.instanceId}.lastEvents.${e}`;localStorage.removeItem(n)};let Bs=class{constructor(t,n){this.instanceId=Math.random().toString(16).substr(2,8);const o=this;this.debug=!1,n&&(this.debug=!!n),this.global={subscribe:function(s,f,g){v6.call(o,s,f,g,o)},publish:function(s,f){_6.call(o,s,f,o)},clearAllCallbacks:function(){y6(o)},clearTopicCallbacks:function(s){w6(s,o)},last:function(s){return b6(s,o)},clearLast:function(s){return x6(s,o)},setDebug:function(s){o.debug=s}},this.topics={},this.lastEvents={},t&&(t.__privatemessagebus__=this,t.addEventListener("$SCOPE.DISCOVERY$",s=>{s.callback&&s.callback(t.__privatemessagebus__),s.stopPropagation()})),this.debug&&console.debug("instantiating bus with ID #"+this.instanceId)}};Bs.prototype.setID=function(e,t){var n=hc(t,this);n.debug&&console.debug(`resetting bus id from #${n.instanceId} to #${e}`),n.instanceId=e};Bs.prototype.subscribe=function(e,t,n){var o=hc(n,this);v6.call(o,e,t,n,o)};Bs.prototype.publish=function(e,t,n){var o=hc(n,this);_6.call(o,e,t,o)};Bs.prototype.clearAllCallbacks=function(e){hc(e,this),y6(e)};Bs.prototype.clearTopicCallbacks=function(e,t){var n=hc(t,this);w6(e,n)};Bs.prototype.last=function(e,t){var n=hc(t,this);return b6(e,n)};Bs.prototype.clearLast=function(e,t){var n=hc(t,this);return x6(e,n)};Bs.prototype.setDebug=function(e,t){var n=hc(t,this);n.debug=e};var Ay=null;function ZE(){return Ay||(Ay=new Bs,Ay.setID("global")),Ay}var S6=ZE();try{IC.exports.PubSub=ZE(),PC.PubSub=ZE()}catch{}var qE={exports:{}};(function(e,t){(function(n,o){o(t)})(Xo,function(n){function o(r,i){return r==null||i==null?NaN:r<i?-1:r>i?1:r>=i?0:NaN}function s(r,i){return r==null||i==null?NaN:i<r?-1:i>r?1:i>=r?0:NaN}function f(r){let i,a,l;function c(d,p,m=0,v=d.length){if(m<v){if(i(p,p)!==0)return v;do{const _=m+v>>>1;a(d[_],p)<0?m=_+1:v=_}while(m<v)}return m}return r.length!==2?(i=o,a=(d,p)=>o(r(d),p),l=(d,p)=>r(d)-p):(i=r===o||r===s?r:g,a=r,l=r),{left:c,center:function(d,p,m=0,v=d.length){const _=c(d,p,m,v-1);return _>m&&l(d[_-1],p)>-l(d[_],p)?_-1:_},right:function(d,p,m=0,v=d.length){if(m<v){if(i(p,p)!==0)return v;do{const _=m+v>>>1;a(d[_],p)<=0?m=_+1:v=_}while(m<v)}return m}}}function g(){return 0}function w(r){return r===null?NaN:+r}const y=f(o),E=y.right,M=y.left,N=f(w).center;var R=E;function F(r,i){let a=0;if(i===void 0)for(let l of r)l!=null&&(l=+l)>=l&&++a;else{let l=-1;for(let c of r)(c=i(c,++l,r))!=null&&(c=+c)>=c&&++a}return a}function $(r){return 0|r.length}function V(r){return!(r>0)}function X(r){return typeof r!="object"||"length"in r?r:Array.from(r)}function Z(r,i){let a,l=0,c=0,d=0;if(i===void 0)for(let p of r)p!=null&&(p=+p)>=p&&(a=p-c,c+=a/++l,d+=a*(p-c));else{let p=-1;for(let m of r)(m=i(m,++p,r))!=null&&(m=+m)>=m&&(a=m-c,c+=a/++l,d+=a*(m-c))}if(l>1)return d/(l-1)}function D(r,i){const a=Z(r,i);return a&&Math.sqrt(a)}function z(r,i){let a,l;if(i===void 0)for(const c of r)c!=null&&(a===void 0?c>=c&&(a=l=c):(a>c&&(a=c),l<c&&(l=c)));else{let c=-1;for(let d of r)(d=i(d,++c,r))!=null&&(a===void 0?d>=d&&(a=l=d):(a>d&&(a=d),l<d&&(l=d)))}return[a,l]}class H{constructor(){this._partials=new Float64Array(32),this._n=0}add(i){const a=this._partials;let l=0;for(let c=0;c<this._n&&c<32;c++){const d=a[c],p=i+d,m=Math.abs(i)<Math.abs(d)?i-(p-d):d-(p-i);m&&(a[l++]=m),i=p}return a[l]=i,this._n=l+1,this}valueOf(){const i=this._partials;let a,l,c,d=this._n,p=0;if(d>0){for(p=i[--d];d>0&&(a=p,l=i[--d],p=a+l,c=l-(p-a),!c););d>0&&(c<0&&i[d-1]<0||c>0&&i[d-1]>0)&&(l=2*c,a=p+l,l==a-p&&(p=a))}return p}}class se extends Map{constructor(i,a=be){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),i!=null)for(const[l,c]of i)this.set(l,c)}get(i){return super.get(pe(this,i))}has(i){return super.has(pe(this,i))}set(i,a){return super.set(ge(this,i),a)}delete(i){return super.delete(ke(this,i))}}class he extends Set{constructor(i,a=be){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),i!=null)for(const l of i)this.add(l)}has(i){return super.has(pe(this,i))}add(i){return super.add(ge(this,i))}delete(i){return super.delete(ke(this,i))}}function pe({_intern:r,_key:i},a){const l=i(a);return r.has(l)?r.get(l):a}function ge({_intern:r,_key:i},a){const l=i(a);return r.has(l)?r.get(l):(r.set(l,a),a)}function ke({_intern:r,_key:i},a){const l=i(a);return r.has(l)&&(a=r.get(l),r.delete(l)),a}function be(r){return r!==null&&typeof r=="object"?r.valueOf():r}function Ue(r){return r}function it(r,...i){return Le(r,Ue,Ue,i)}function Xe(r,...i){return Le(r,Array.from,Ue,i)}function Te(r,i){for(let a=1,l=i.length;a<l;++a)r=r.flatMap(c=>c.pop().map(([d,p])=>[...c,d,p]));return r}function Fe(r,i,...a){return Le(r,Ue,i,a)}function ot(r,i,...a){return Le(r,Array.from,i,a)}function Je(r){if(r.length!==1)throw new Error("duplicate key");return r[0]}function Le(r,i,a,l){return function c(d,p){if(p>=l.length)return a(d);const m=new se,v=l[p++];let _=-1;for(const x of d){const C=v(x,++_,d),T=m.get(C);T?T.push(x):m.set(C,[x])}for(const[x,C]of m)m.set(x,c(C,p));return i(m)}(r,0)}function Ye(r,i){return Array.from(i,a=>r[a])}function Ze(r,...i){if(typeof r[Symbol.iterator]!="function")throw new TypeError("values is not iterable");r=Array.from(r);let[a]=i;if(a&&a.length!==2||i.length>1){const l=Uint32Array.from(r,(c,d)=>d);return i.length>1?(i=i.map(c=>r.map(c)),l.sort((c,d)=>{for(const p of i){const m=Qe(p[c],p[d]);if(m)return m}})):(a=r.map(a),l.sort((c,d)=>Qe(a[c],a[d]))),Ye(r,l)}return r.sort(ut(a))}function ut(r=o){if(r===o)return Qe;if(typeof r!="function")throw new TypeError("compare is not a function");return(i,a)=>{const l=r(i,a);return l||l===0?l:(r(a,a)===0)-(r(i,i)===0)}}function Qe(r,i){return(r==null||!(r>=r))-(i==null||!(i>=i))||(r<i?-1:r>i?1:0)}var bn=Array.prototype.slice;function At(r){return()=>r}var hn=Math.sqrt(50),vt=Math.sqrt(10),xt=Math.sqrt(2);function rt(r,i,a){var l,c,d,p,m=-1;if(a=+a,(r=+r)==(i=+i)&&a>0)return[r];if((l=i<r)&&(c=r,r=i,i=c),(p=ct(r,i,a))===0||!isFinite(p))return[];if(p>0){let v=Math.round(r/p),_=Math.round(i/p);for(v*p<r&&++v,_*p>i&&--_,d=new Array(c=_-v+1);++m<c;)d[m]=(v+m)*p}else{p=-p;let v=Math.round(r*p),_=Math.round(i*p);for(v/p<r&&++v,_/p>i&&--_,d=new Array(c=_-v+1);++m<c;)d[m]=(v+m)/p}return l&&d.reverse(),d}function ct(r,i,a){var l=(i-r)/Math.max(0,a),c=Math.floor(Math.log(l)/Math.LN10),d=l/Math.pow(10,c);return c>=0?(d>=hn?10:d>=vt?5:d>=xt?2:1)*Math.pow(10,c):-Math.pow(10,-c)/(d>=hn?10:d>=vt?5:d>=xt?2:1)}function Ve(r,i,a){var l=Math.abs(i-r)/Math.max(0,a),c=Math.pow(10,Math.floor(Math.log(l)/Math.LN10)),d=l/c;return d>=hn?c*=10:d>=vt?c*=5:d>=xt&&(c*=2),i<r?-c:c}function Ct(r,i,a){let l;for(;;){const c=ct(r,i,a);if(c===l||c===0||!isFinite(c))return[r,i];c>0?(r=Math.floor(r/c)*c,i=Math.ceil(i/c)*c):c<0&&(r=Math.ceil(r*c)/c,i=Math.floor(i*c)/c),l=c}}function Jt(r){return Math.ceil(Math.log(F(r))/Math.LN2)+1}function Be(){var r=Ue,i=z,a=Jt;function l(c){Array.isArray(c)||(c=Array.from(c));var d,p,m,v=c.length,_=new Array(v);for(d=0;d<v;++d)_[d]=r(c[d],d,c);var x=i(_),C=x[0],T=x[1],A=a(_,C,T);if(!Array.isArray(A)){const O=T,q=+A;if(i===z&&([C,T]=Ct(C,T,q)),(A=rt(C,T,q))[0]<=C&&(m=ct(C,T,q)),A[A.length-1]>=T)if(O>=T&&i===z){const W=ct(C,T,q);isFinite(W)&&(W>0?T=(Math.floor(T/W)+1)*W:W<0&&(T=(Math.ceil(T*-W)+1)/-W))}else A.pop()}for(var U=A.length;A[0]<=C;)A.shift(),--U;for(;A[U-1]>T;)A.pop(),--U;var I,P=new Array(U+1);for(d=0;d<=U;++d)(I=P[d]=[]).x0=d>0?A[d-1]:C,I.x1=d<U?A[d]:T;if(isFinite(m)){if(m>0)for(d=0;d<v;++d)(p=_[d])!=null&&C<=p&&p<=T&&P[Math.min(U,Math.floor((p-C)/m))].push(c[d]);else if(m<0){for(d=0;d<v;++d)if((p=_[d])!=null&&C<=p&&p<=T){const O=Math.floor((C-p)*m);P[Math.min(U,O+(A[O]<=p))].push(c[d])}}}else for(d=0;d<v;++d)(p=_[d])!=null&&C<=p&&p<=T&&P[R(A,p,0,U)].push(c[d]);return P}return l.value=function(c){return arguments.length?(r=typeof c=="function"?c:At(c),l):r},l.domain=function(c){return arguments.length?(i=typeof c=="function"?c:At([c[0],c[1]]),l):i},l.thresholds=function(c){return arguments.length?(a=typeof c=="function"?c:Array.isArray(c)?At(bn.call(c)):At(c),l):a},l}function at(r,i){let a;if(i===void 0)for(const l of r)l!=null&&(a<l||a===void 0&&l>=l)&&(a=l);else{let l=-1;for(let c of r)(c=i(c,++l,r))!=null&&(a<c||a===void 0&&c>=c)&&(a=c)}return a}function ft(r,i){let a;if(i===void 0)for(const l of r)l!=null&&(a>l||a===void 0&&l>=l)&&(a=l);else{let l=-1;for(let c of r)(c=i(c,++l,r))!=null&&(a>c||a===void 0&&c>=c)&&(a=c)}return a}function An(r,i,a=0,l=r.length-1,c){for(c=c===void 0?Qe:ut(c);l>a;){if(l-a>600){const v=l-a+1,_=i-a+1,x=Math.log(v),C=.5*Math.exp(2*x/3),T=.5*Math.sqrt(x*C*(v-C)/v)*(_-v/2<0?-1:1);An(r,i,Math.max(a,Math.floor(i-_*C/v+T)),Math.min(l,Math.floor(i+(v-_)*C/v+T)),c)}const d=r[i];let p=a,m=l;for(_n(r,a,i),c(r[l],d)>0&&_n(r,a,l);p<m;){for(_n(r,p,m),++p,--m;c(r[p],d)<0;)++p;for(;c(r[m],d)>0;)--m}c(r[a],d)===0?_n(r,a,m):(++m,_n(r,m,l)),m<=i&&(a=m+1),i<=m&&(l=m-1)}return r}function _n(r,i,a){const l=r[i];r[i]=r[a],r[a]=l}function ur(r,i,a){if(r=Float64Array.from(function*(m,v){if(v===void 0)for(let _ of m)_!=null&&(_=+_)>=_&&(yield _);else{let _=-1;for(let x of m)(x=v(x,++_,m))!=null&&(x=+x)>=x&&(yield x)}}(r,a)),l=r.length){if((i=+i)<=0||l<2)return ft(r);if(i>=1)return at(r);var l,c=(l-1)*i,d=Math.floor(c),p=at(An(r,d).subarray(0,d+1));return p+(ft(r.subarray(d+1))-p)*(c-d)}}function gr(r,i,a=w){if(l=r.length){if((i=+i)<=0||l<2)return+a(r[0],0,r);if(i>=1)return+a(r[l-1],l-1,r);var l,c=(l-1)*i,d=Math.floor(c),p=+a(r[d],d,r);return p+(+a(r[d+1],d+1,r)-p)*(c-d)}}function Mn(r,i){let a,l=-1,c=-1;if(i===void 0)for(const d of r)++c,d!=null&&(a<d||a===void 0&&d>=d)&&(a=d,l=c);else for(let d of r)(d=i(d,++c,r))!=null&&(a<d||a===void 0&&d>=d)&&(a=d,l=c);return l}function Bn(r){return Array.from(function*(i){for(const a of i)yield*a}(r))}function Vn(r,i){let a,l=-1,c=-1;if(i===void 0)for(const d of r)++c,d!=null&&(a>d||a===void 0&&d>=d)&&(a=d,l=c);else for(let d of r)(d=i(d,++c,r))!=null&&(a>d||a===void 0&&d>=d)&&(a=d,l=c);return l}function Qn(r,i){return[r,i]}function Ke(r,i,a){r=+r,i=+i,a=(c=arguments.length)<2?(i=r,r=0,1):c<3?1:+a;for(var l=-1,c=0|Math.max(0,Math.ceil((i-r)/a)),d=new Array(c);++l<c;)d[l]=r+l*a;return d}function Nn(r,i=o){if(i.length===1)return Vn(r,i);let a,l=-1,c=-1;for(const d of r)++c,(l<0?i(d,d)===0:i(d,a)<0)&&(a=d,l=c);return l}var Zn=er(Math.random);function er(r){return function(i,a=0,l=i.length){let c=l-(a=+a);for(;c;){const d=r()*c--|0,p=i[c+a];i[c+a]=i[d+a],i[d+a]=p}return i}}function Yr(r){if(!(c=r.length))return[];for(var i=-1,a=ft(r,Kr),l=new Array(a);++i<a;)for(var c,d=-1,p=l[i]=new Array(c);++d<c;)p[d]=r[d][i];return l}function Kr(r){return r.length}function Uo(r){return r instanceof he?r:new he(r)}function ci(r,i){const a=r[Symbol.iterator](),l=new Set;for(const c of i){const d=fi(c);if(l.has(d))continue;let p,m;for(;{value:p,done:m}=a.next();){if(m)return!1;const v=fi(p);if(l.add(v),Object.is(d,v))break}}return!0}function fi(r){return r!==null&&typeof r=="object"?r.valueOf():r}function Fr(r){return r}var Jr=1e-6;function Fo(r){return"translate("+r+",0)"}function go(r){return"translate(0,"+r+")"}function La(r){return i=>+r(i)}function vo(r,i){return i=Math.max(0,r.bandwidth()-2*i)/2,r.round()&&(i=Math.round(i)),a=>+r(a)+i}function Pa(){return!this.__axis}function we(r,i){var a=[],l=null,c=null,d=6,p=6,m=3,v=typeof window<"u"&&window.devicePixelRatio>1?0:.5,_=r===1||r===4?-1:1,x=r===4||r===2?"x":"y",C=r===1||r===3?Fo:go;function T(A){var U=l??(i.ticks?i.ticks.apply(i,a):i.domain()),I=c??(i.tickFormat?i.tickFormat.apply(i,a):Fr),P=Math.max(d,0)+m,O=i.range(),q=+O[0]+v,W=+O[O.length-1]+v,j=(i.bandwidth?vo:La)(i.copy(),v),Y=A.selection?A.selection():A,Q=Y.selectAll(".domain").data([null]),me=Y.selectAll(".tick").data(U,i).order(),Se=me.exit(),le=me.enter().append("g").attr("class","tick"),ae=me.select("line"),ie=me.select("text");Q=Q.merge(Q.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),me=me.merge(le),ae=ae.merge(le.append("line").attr("stroke","currentColor").attr(x+"2",_*d)),ie=ie.merge(le.append("text").attr("fill","currentColor").attr(x,_*P).attr("dy",r===1?"0em":r===3?"0.71em":"0.32em")),A!==Y&&(Q=Q.transition(A),me=me.transition(A),ae=ae.transition(A),ie=ie.transition(A),Se=Se.transition(A).attr("opacity",Jr).attr("transform",function(ue){return isFinite(ue=j(ue))?C(ue+v):this.getAttribute("transform")}),le.attr("opacity",Jr).attr("transform",function(ue){var ee=this.parentNode.__axis;return C((ee&&isFinite(ee=ee(ue))?ee:j(ue))+v)})),Se.remove(),Q.attr("d",r===4||r===2?p?"M"+_*p+","+q+"H"+v+"V"+W+"H"+_*p:"M"+v+","+q+"V"+W:p?"M"+q+","+_*p+"V"+v+"H"+W+"V"+_*p:"M"+q+","+v+"H"+W),me.attr("opacity",1).attr("transform",function(ue){return C(j(ue)+v)}),ae.attr(x+"2",_*d),ie.attr(x,_*P).text(I),Y.filter(Pa).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",r===2?"start":r===4?"end":"middle"),Y.each(function(){this.__axis=j})}return T.scale=function(A){return arguments.length?(i=A,T):i},T.ticks=function(){return a=Array.from(arguments),T},T.tickArguments=function(A){return arguments.length?(a=A==null?[]:Array.from(A),T):a.slice()},T.tickValues=function(A){return arguments.length?(l=A==null?null:Array.from(A),T):l&&l.slice()},T.tickFormat=function(A){return arguments.length?(c=A,T):c},T.tickSize=function(A){return arguments.length?(d=p=+A,T):d},T.tickSizeInner=function(A){return arguments.length?(d=+A,T):d},T.tickSizeOuter=function(A){return arguments.length?(p=+A,T):p},T.tickPadding=function(A){return arguments.length?(m=+A,T):m},T.offset=function(A){return arguments.length?(v=+A,T):v},T}var xe={value:()=>{}};function Ne(){for(var r,i=0,a=arguments.length,l={};i<a;++i){if(!(r=arguments[i]+"")||r in l||/[\s.]/.test(r))throw new Error("illegal type: "+r);l[r]=[]}return new et(l)}function et(r){this._=r}function yt(r,i){return r.trim().split(/^|\s+/).map(function(a){var l="",c=a.indexOf(".");if(c>=0&&(l=a.slice(c+1),a=a.slice(0,c)),a&&!i.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:l}})}function St(r,i){for(var a,l=0,c=r.length;l<c;++l)if((a=r[l]).name===i)return a.value}function zt(r,i,a){for(var l=0,c=r.length;l<c;++l)if(r[l].name===i){r[l]=xe,r=r.slice(0,l).concat(r.slice(l+1));break}return a!=null&&r.push({name:i,value:a}),r}et.prototype=Ne.prototype={constructor:et,on:function(r,i){var a,l=this._,c=yt(r+"",l),d=-1,p=c.length;if(!(arguments.length<2)){if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++d<p;)if(a=(r=c[d]).type)l[a]=zt(l[a],r.name,i);else if(i==null)for(a in l)l[a]=zt(l[a],r.name,null);return this}for(;++d<p;)if((a=(r=c[d]).type)&&(a=St(l[a],r.name)))return a},copy:function(){var r={},i=this._;for(var a in i)r[a]=i[a].slice();return new et(r)},call:function(r,i){if((a=arguments.length-2)>0)for(var a,l,c=new Array(a),d=0;d<a;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(d=0,a=(l=this._[r]).length;d<a;++d)l[d].value.apply(i,c)},apply:function(r,i,a){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var l=this._[r],c=0,d=l.length;c<d;++c)l[c].value.apply(i,a)}};var bt="http://www.w3.org/1999/xhtml",gt={svg:"http://www.w3.org/2000/svg",xhtml:bt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xt(r){var i=r+="",a=i.indexOf(":");return a>=0&&(i=r.slice(0,a))!=="xmlns"&&(r=r.slice(a+1)),gt.hasOwnProperty(i)?{space:gt[i],local:r}:r}function Ln(r){return function(){var i=this.ownerDocument,a=this.namespaceURI;return a===bt&&i.documentElement.namespaceURI===bt?i.createElement(r):i.createElementNS(a,r)}}function Vt(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function jt(r){var i=Xt(r);return(i.local?Vt:Ln)(i)}function Pn(){}function Xr(r){return r==null?Pn:function(){return this.querySelector(r)}}function yi(r){return r==null?[]:Array.isArray(r)?r:Array.from(r)}function _o(){return[]}function oe(r){return r==null?_o:function(){return this.querySelectorAll(r)}}function Ie(r){return function(){return this.matches(r)}}function Ge(r){return function(i){return i.matches(r)}}var kt=Array.prototype.find;function Gt(){return this.firstElementChild}var sn=Array.prototype.filter;function Zt(){return Array.from(this.children)}function Me(r){return new Array(r.length)}function ce(r,i){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=i}function Pe(r){return function(){return r}}function $e(r,i,a,l,c,d){for(var p,m=0,v=i.length,_=d.length;m<_;++m)(p=i[m])?(p.__data__=d[m],l[m]=p):a[m]=new ce(r,d[m]);for(;m<v;++m)(p=i[m])&&(c[m]=p)}function $t(r,i,a,l,c,d,p){var m,v,_,x=new Map,C=i.length,T=d.length,A=new Array(C);for(m=0;m<C;++m)(v=i[m])&&(A[m]=_=p.call(v,v.__data__,m,i)+"",x.has(_)?c[m]=v:x.set(_,v));for(m=0;m<T;++m)_=p.call(r,d[m],m,d)+"",(v=x.get(_))?(l[m]=v,v.__data__=d[m],x.delete(_)):a[m]=new ce(r,d[m]);for(m=0;m<C;++m)(v=i[m])&&x.get(A[m])===v&&(c[m]=v)}function xn(r){return r.__data__}function Jn(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function Dn(r,i){return r<i?-1:r>i?1:r>=i?0:NaN}function yo(r){return function(){this.removeAttribute(r)}}function Hs(r){return function(){this.removeAttributeNS(r.space,r.local)}}function Qr(r,i){return function(){this.setAttribute(r,i)}}function gc(r,i){return function(){this.setAttributeNS(r.space,r.local,i)}}function vc(r,i){return function(){var a=i.apply(this,arguments);a==null?this.removeAttribute(r):this.setAttribute(r,a)}}function S0(r,i){return function(){var a=i.apply(this,arguments);a==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,a)}}function Rp(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function C2(r){return function(){this.style.removeProperty(r)}}function k2(r,i,a){return function(){this.style.setProperty(r,i,a)}}function A2(r,i,a){return function(){var l=i.apply(this,arguments);l==null?this.style.removeProperty(r):this.style.setProperty(r,l,a)}}function ds(r,i){return r.style.getPropertyValue(i)||Rp(r).getComputedStyle(r,null).getPropertyValue(i)}function E0(r){return function(){delete this[r]}}function T0(r,i){return function(){this[r]=i}}function Dp(r,i){return function(){var a=i.apply(this,arguments);a==null?delete this[r]:this[r]=a}}function C0(r){return r.trim().split(/^|\s+/)}function ed(r){return r.classList||new _c(r)}function _c(r){this._node=r,this._names=C0(r.getAttribute("class")||"")}function zp(r,i){for(var a=ed(r),l=-1,c=i.length;++l<c;)a.add(i[l])}function k0(r,i){for(var a=ed(r),l=-1,c=i.length;++l<c;)a.remove(i[l])}function A0(r){return function(){zp(this,r)}}function M0(r){return function(){k0(this,r)}}function Up(r,i){return function(){(i.apply(this,arguments)?zp:k0)(this,r)}}function M2(){this.textContent=""}function N0(r){return function(){this.textContent=r}}function Fp(r){return function(){var i=r.apply(this,arguments);this.textContent=i??""}}function Bp(){this.innerHTML=""}function Hl(r){return function(){this.innerHTML=r}}function L0(r){return function(){var i=r.apply(this,arguments);this.innerHTML=i??""}}function P0(){this.nextSibling&&this.parentNode.appendChild(this)}function N2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function I0(){return null}function O0(){var r=this.parentNode;r&&r.removeChild(this)}function R0(){var r=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(r,this.nextSibling):r}function D0(){var r=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(r,this.nextSibling):r}function L2(r){return r.trim().split(/^|\s+/).map(function(i){var a="",l=i.indexOf(".");return l>=0&&(a=i.slice(l+1),i=i.slice(0,l)),{type:i,name:a}})}function P2(r){return function(){var i=this.__on;if(i){for(var a,l=0,c=-1,d=i.length;l<d;++l)a=i[l],r.type&&a.type!==r.type||a.name!==r.name?i[++c]=a:this.removeEventListener(a.type,a.listener,a.options);++c?i.length=c:delete this.__on}}}function I2(r,i,a){return function(){var l,c=this.__on,d=function(v){return function(_){v.call(this,_,this.__data__)}}(i);if(c){for(var p=0,m=c.length;p<m;++p)if((l=c[p]).type===r.type&&l.name===r.name)return this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=d,l.options=a),void(l.value=i)}this.addEventListener(r.type,d,a),l={type:r.type,name:r.name,value:i,listener:d,options:a},c?c.push(l):this.__on=[l]}}function $p(r,i,a){var l=Rp(r),c=l.CustomEvent;typeof c=="function"?c=new c(i,a):(c=l.document.createEvent("Event"),a?(c.initEvent(i,a.bubbles,a.cancelable),c.detail=a.detail):c.initEvent(i,!1,!1)),r.dispatchEvent(c)}function O2(r,i){return function(){return $p(this,r,i)}}function R2(r,i){return function(){return $p(this,r,i.apply(this,arguments))}}ce.prototype={constructor:ce,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,i){return this._parent.insertBefore(r,i)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}},_c.prototype={add:function(r){this._names.indexOf(r)<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var i=this._names.indexOf(r);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};var jp=[null];function wi(r,i){this._groups=r,this._parents=i}function Ia(){return new wi([[document.documentElement]],jp)}function di(r){return typeof r=="string"?new wi([[document.querySelector(r)]],[document.documentElement]):new wi([[r]],jp)}wi.prototype=Ia.prototype={constructor:wi,select:function(r){typeof r!="function"&&(r=Xr(r));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d,p,m=i[c],v=m.length,_=l[c]=new Array(v),x=0;x<v;++x)(d=m[x])&&(p=r.call(d,d.__data__,x,m))&&("__data__"in d&&(p.__data__=d.__data__),_[x]=p);return new wi(l,this._parents)},selectAll:function(r){r=typeof r=="function"?function(x){return function(){return yi(x.apply(this,arguments))}}(r):oe(r);for(var i=this._groups,a=i.length,l=[],c=[],d=0;d<a;++d)for(var p,m=i[d],v=m.length,_=0;_<v;++_)(p=m[_])&&(l.push(r.call(p,p.__data__,_,m)),c.push(p));return new wi(l,c)},selectChild:function(r){return this.select(r==null?Gt:function(i){return function(){return kt.call(this.children,i)}}(typeof r=="function"?r:Ge(r)))},selectChildren:function(r){return this.selectAll(r==null?Zt:function(i){return function(){return sn.call(this.children,i)}}(typeof r=="function"?r:Ge(r)))},filter:function(r){typeof r!="function"&&(r=Ie(r));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d,p=i[c],m=p.length,v=l[c]=[],_=0;_<m;++_)(d=p[_])&&r.call(d,d.__data__,_,p)&&v.push(d);return new wi(l,this._parents)},data:function(r,i){if(!arguments.length)return Array.from(this,xn);var a=i?$t:$e,l=this._parents,c=this._groups;typeof r!="function"&&(r=Pe(r));for(var d=c.length,p=new Array(d),m=new Array(d),v=new Array(d),_=0;_<d;++_){var x=l[_],C=c[_],T=C.length,A=Jn(r.call(x,x&&x.__data__,_,l)),U=A.length,I=m[_]=new Array(U),P=p[_]=new Array(U),O=v[_]=new Array(T);a(x,C,I,P,O,A,i);for(var q,W,j=0,Y=0;j<U;++j)if(q=I[j]){for(j>=Y&&(Y=j+1);!(W=P[Y])&&++Y<U;);q._next=W||null}}return(p=new wi(p,l))._enter=m,p._exit=v,p},enter:function(){return new wi(this._enter||this._groups.map(Me),this._parents)},exit:function(){return new wi(this._exit||this._groups.map(Me),this._parents)},join:function(r,i,a){var l=this.enter(),c=this,d=this.exit();return typeof r=="function"?(l=r(l))&&(l=l.selection()):l=l.append(r+""),i!=null&&(c=i(c))&&(c=c.selection()),a==null?d.remove():a(d),l&&c?l.merge(c).order():c},merge:function(r){for(var i=r.selection?r.selection():r,a=this._groups,l=i._groups,c=a.length,d=l.length,p=Math.min(c,d),m=new Array(c),v=0;v<p;++v)for(var _,x=a[v],C=l[v],T=x.length,A=m[v]=new Array(T),U=0;U<T;++U)(_=x[U]||C[U])&&(A[U]=_);for(;v<c;++v)m[v]=a[v];return new wi(m,this._parents)},selection:function(){return this},order:function(){for(var r=this._groups,i=-1,a=r.length;++i<a;)for(var l,c=r[i],d=c.length-1,p=c[d];--d>=0;)(l=c[d])&&(p&&4^l.compareDocumentPosition(p)&&p.parentNode.insertBefore(l,p),p=l);return this},sort:function(r){function i(C,T){return C&&T?r(C.__data__,T.__data__):!C-!T}r||(r=Dn);for(var a=this._groups,l=a.length,c=new Array(l),d=0;d<l;++d){for(var p,m=a[d],v=m.length,_=c[d]=new Array(v),x=0;x<v;++x)(p=m[x])&&(_[x]=p);_.sort(i)}return new wi(c,this._parents).order()},call:function(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var r=this._groups,i=0,a=r.length;i<a;++i)for(var l=r[i],c=0,d=l.length;c<d;++c){var p=l[c];if(p)return p}return null},size:function(){let r=0;for(const i of this)++r;return r},empty:function(){return!this.node()},each:function(r){for(var i=this._groups,a=0,l=i.length;a<l;++a)for(var c,d=i[a],p=0,m=d.length;p<m;++p)(c=d[p])&&r.call(c,c.__data__,p,d);return this},attr:function(r,i){var a=Xt(r);if(arguments.length<2){var l=this.node();return a.local?l.getAttributeNS(a.space,a.local):l.getAttribute(a)}return this.each((i==null?a.local?Hs:yo:typeof i=="function"?a.local?S0:vc:a.local?gc:Qr)(a,i))},style:function(r,i,a){return arguments.length>1?this.each((i==null?C2:typeof i=="function"?A2:k2)(r,i,a??"")):ds(this.node(),r)},property:function(r,i){return arguments.length>1?this.each((i==null?E0:typeof i=="function"?Dp:T0)(r,i)):this.node()[r]},classed:function(r,i){var a=C0(r+"");if(arguments.length<2){for(var l=ed(this.node()),c=-1,d=a.length;++c<d;)if(!l.contains(a[c]))return!1;return!0}return this.each((typeof i=="function"?Up:i?A0:M0)(a,i))},text:function(r){return arguments.length?this.each(r==null?M2:(typeof r=="function"?Fp:N0)(r)):this.node().textContent},html:function(r){return arguments.length?this.each(r==null?Bp:(typeof r=="function"?L0:Hl)(r)):this.node().innerHTML},raise:function(){return this.each(P0)},lower:function(){return this.each(N2)},append:function(r){var i=typeof r=="function"?r:jt(r);return this.select(function(){return this.appendChild(i.apply(this,arguments))})},insert:function(r,i){var a=typeof r=="function"?r:jt(r),l=i==null?I0:typeof i=="function"?i:Xr(i);return this.select(function(){return this.insertBefore(a.apply(this,arguments),l.apply(this,arguments)||null)})},remove:function(){return this.each(O0)},clone:function(r){return this.select(r?D0:R0)},datum:function(r){return arguments.length?this.property("__data__",r):this.node().__data__},on:function(r,i,a){var l,c,d=L2(r+""),p=d.length;if(!(arguments.length<2)){for(m=i?I2:P2,l=0;l<p;++l)this.each(m(d[l],i,a));return this}var m=this.node().__on;if(m){for(var v,_=0,x=m.length;_<x;++_)for(l=0,v=m[_];l<p;++l)if((c=d[l]).type===v.type&&c.name===v.name)return v.value}},dispatch:function(r,i){return this.each((typeof i=="function"?R2:O2)(r,i))},[Symbol.iterator]:function*(){for(var r=this._groups,i=0,a=r.length;i<a;++i)for(var l,c=r[i],d=0,p=c.length;d<p;++d)(l=c[d])&&(yield l)}};var D2=0;function z0(){return new Hp}function Hp(){this._="@"+(++D2).toString(36)}function U0(r){let i;for(;i=r.sourceEvent;)r=i;return r}function ln(r,i){if(r=U0(r),i===void 0&&(i=r.currentTarget),i){var a=i.ownerSVGElement||i;if(a.createSVGPoint){var l=a.createSVGPoint();return l.x=r.clientX,l.y=r.clientY,[(l=l.matrixTransform(i.getScreenCTM().inverse())).x,l.y]}if(i.getBoundingClientRect){var c=i.getBoundingClientRect();return[r.clientX-c.left-i.clientLeft,r.clientY-c.top-i.clientTop]}}return[r.pageX,r.pageY]}Hp.prototype=z0.prototype={constructor:Hp,get:function(r){for(var i=this._;!(i in r);)if(!(r=r.parentNode))return;return r[i]},set:function(r,i){return r[this._]=i},remove:function(r){return this._ in r&&delete r[this._]},toString:function(){return this._}};const Hn={passive:!1},yc={capture:!0,passive:!1};function Wp(r){r.stopImmediatePropagation()}function Wl(r){r.preventDefault(),r.stopImmediatePropagation()}function td(r){var i=r.document.documentElement,a=di(r).on("dragstart.drag",Wl,yc);"onselectstart"in i?a.on("selectstart.drag",Wl,yc):(i.__noselect=i.style.MozUserSelect,i.style.MozUserSelect="none")}function nd(r,i){var a=r.document.documentElement,l=di(r).on("dragstart.drag",null);i&&(l.on("click.drag",Wl,yc),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in a?l.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}var rd=r=>()=>r;function id(r,{sourceEvent:i,subject:a,target:l,identifier:c,active:d,x:p,y:m,dx:v,dy:_,dispatch:x}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},identifier:{value:c,enumerable:!0,configurable:!0},active:{value:d,enumerable:!0,configurable:!0},x:{value:p,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:v,enumerable:!0,configurable:!0},dy:{value:_,enumerable:!0,configurable:!0},_:{value:x}})}function z2(r){return!r.ctrlKey&&!r.button}function ei(){return this.parentNode}function Vp(r,i){return i??{x:r.x,y:r.y}}function Ws(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vs(r,i,a){r.prototype=i.prototype=a,a.constructor=r}function Zs(r,i){var a=Object.create(r.prototype);for(var l in i)a[l]=i[l];return a}function Nr(){}id.prototype.on=function(){var r=this._.on.apply(this._,arguments);return r===this._?this:r};var hs=.7,qs=1/hs,Gs="\\s*([+-]?\\d+)\\s*",Vl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F0=/^#([0-9a-f]{3,8})$/,Ji=new RegExp(`^rgb\\(${Gs},${Gs},${Gs}\\)$`),U2=new RegExp(`^rgb\\(${Bo},${Bo},${Bo}\\)$`),wo=new RegExp(`^rgba\\(${Gs},${Gs},${Gs},${Vl}\\)$`),F2=new RegExp(`^rgba\\(${Bo},${Bo},${Bo},${Vl}\\)$`),B0=new RegExp(`^hsl\\(${Vl},${Bo},${Bo}\\)$`),ps=new RegExp(`^hsla\\(${Vl},${Bo},${Bo},${Vl}\\)$`),wc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function od(){return this.rgb().formatHex()}function qn(){return this.rgb().formatRgb()}function bi(r){var i,a;return r=(r+"").trim().toLowerCase(),(i=F0.exec(r))?(a=i[1].length,i=parseInt(i[1],16),a===6?ad(i):a===3?new Br(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):a===8?sd(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):a===4?sd(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Ji.exec(r))?new Br(i[1],i[2],i[3],1):(i=U2.exec(r))?new Br(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=wo.exec(r))?sd(i[1],i[2],i[3],i[4]):(i=F2.exec(r))?sd(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=B0.exec(r))?qp(i[1],i[2]/100,i[3]/100,1):(i=ps.exec(r))?qp(i[1],i[2]/100,i[3]/100,i[4]):wc.hasOwnProperty(r)?ad(wc[r]):r==="transparent"?new Br(NaN,NaN,NaN,0):null}function ad(r){return new Br(r>>16&255,r>>8&255,255&r,1)}function sd(r,i,a,l){return l<=0&&(r=i=a=NaN),new Br(r,i,a,l)}function bc(r){return r instanceof Nr||(r=bi(r)),r?new Br((r=r.rgb()).r,r.g,r.b,r.opacity):new Br}function Zl(r,i,a,l){return arguments.length===1?bc(r):new Br(r,i,a,l??1)}function Br(r,i,a,l){this.r=+r,this.g=+i,this.b=+a,this.opacity=+l}function $0(){return`#${Ks(this.r)}${Ks(this.g)}${Ks(this.b)}`}function Zp(){const r=Ys(this.opacity);return`${r===1?"rgb(":"rgba("}${bo(this.r)}, ${bo(this.g)}, ${bo(this.b)}${r===1?")":`, ${r})`}`}function Ys(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function bo(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Ks(r){return((r=bo(r))<16?"0":"")+r.toString(16)}function qp(r,i,a,l){return l<=0?r=i=a=NaN:a<=0||a>=1?r=i=NaN:i<=0&&(r=NaN),new Xi(r,i,a,l)}function Gp(r){if(r instanceof Xi)return new Xi(r.h,r.s,r.l,r.opacity);if(r instanceof Nr||(r=bi(r)),!r)return new Xi;if(r instanceof Xi)return r;var i=(r=r.rgb()).r/255,a=r.g/255,l=r.b/255,c=Math.min(i,a,l),d=Math.max(i,a,l),p=NaN,m=d-c,v=(d+c)/2;return m?(p=i===d?(a-l)/m+6*(a<l):a===d?(l-i)/m+2:(i-a)/m+4,m/=v<.5?d+c:2-d-c,p*=60):m=v>0&&v<1?0:p,new Xi(p,m,v,r.opacity)}function ql(r,i,a,l){return arguments.length===1?Gp(r):new Xi(r,i,a,l??1)}function Xi(r,i,a,l){this.h=+r,this.s=+i,this.l=+a,this.opacity=+l}function Yp(r){return(r=(r||0)%360)<0?r+360:r}function ld(r){return Math.max(0,Math.min(1,r||0))}function xc(r,i,a){return 255*(r<60?i+(a-i)*r/60:r<180?a:r<240?i+(a-i)*(240-r)/60:i)}Vs(Nr,bi,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:od,formatHex:od,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Gp(this).formatHsl()},formatRgb:qn,toString:qn}),Vs(Br,Zl,Zs(Nr,{brighter(r){return r=r==null?qs:Math.pow(qs,r),new Br(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?hs:Math.pow(hs,r),new Br(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Br(bo(this.r),bo(this.g),bo(this.b),Ys(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$0,formatHex:$0,formatHex8:function(){return`#${Ks(this.r)}${Ks(this.g)}${Ks(this.b)}${Ks(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Zp,toString:Zp})),Vs(Xi,ql,Zs(Nr,{brighter(r){return r=r==null?qs:Math.pow(qs,r),new Xi(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?hs:Math.pow(hs,r),new Xi(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+360*(this.h<0),i=isNaN(r)||isNaN(this.s)?0:this.s,a=this.l,l=a+(a<.5?a:1-a)*i,c=2*a-l;return new Br(xc(r>=240?r-240:r+120,c,l),xc(r,c,l),xc(r<120?r+240:r-120,c,l),this.opacity)},clamp(){return new Xi(Yp(this.h),ld(this.s),ld(this.l),Ys(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Ys(this.opacity);return`${r===1?"hsl(":"hsla("}${Yp(this.h)}, ${100*ld(this.s)}%, ${100*ld(this.l)}%${r===1?")":`, ${r})`}`}}));const ud=Math.PI/180,j0=180/Math.PI,Kp=.96422,$i=.82521,cd=4/29,Js=6/29,Jp=3*Js*Js;function Xp(r){if(r instanceof $o)return new $o(r.l,r.a,r.b,r.opacity);if(r instanceof xo)return nm(r);r instanceof Br||(r=bc(r));var i,a,l=ms(r.r),c=ms(r.g),d=ms(r.b),p=Qp((.2225045*l+.7168786*c+.0606169*d)/1);return l===c&&c===d?i=a=p:(i=Qp((.4360747*l+.3850649*c+.1430804*d)/Kp),a=Qp((.0139322*l+.0971045*c+.7141733*d)/$i)),new $o(116*p-16,500*(i-p),200*(p-a),r.opacity)}function fd(r,i,a,l){return arguments.length===1?Xp(r):new $o(r,i,a,l??1)}function $o(r,i,a,l){this.l=+r,this.a=+i,this.b=+a,this.opacity=+l}function Qp(r){return r>.008856451679035631?Math.pow(r,1/3):r/Jp+cd}function em(r){return r>Js?r*r*r:Jp*(r-cd)}function tm(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function ms(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function H0(r){if(r instanceof xo)return new xo(r.h,r.c,r.l,r.opacity);if(r instanceof $o||(r=Xp(r)),r.a===0&&r.b===0)return new xo(NaN,0<r.l&&r.l<100?0:NaN,r.l,r.opacity);var i=Math.atan2(r.b,r.a)*j0;return new xo(i<0?i+360:i,Math.sqrt(r.a*r.a+r.b*r.b),r.l,r.opacity)}function dd(r,i,a,l){return arguments.length===1?H0(r):new xo(r,i,a,l??1)}function xo(r,i,a,l){this.h=+r,this.c=+i,this.l=+a,this.opacity=+l}function nm(r){if(isNaN(r.h))return new $o(r.l,0,0,r.opacity);var i=r.h*ud;return new $o(r.l,Math.cos(i)*r.c,Math.sin(i)*r.c,r.opacity)}Vs($o,fd,Zs(Nr,{brighter(r){return new $o(this.l+18*(r??1),this.a,this.b,this.opacity)},darker(r){return new $o(this.l-18*(r??1),this.a,this.b,this.opacity)},rgb(){var r=(this.l+16)/116,i=isNaN(this.a)?r:r+this.a/500,a=isNaN(this.b)?r:r-this.b/200;return new Br(tm(3.1338561*(i=Kp*em(i))-1.6168667*(r=1*em(r))-.4906146*(a=$i*em(a))),tm(-.9787684*i+1.9161415*r+.033454*a),tm(.0719453*i-.2289914*r+1.4052427*a),this.opacity)}})),Vs(xo,dd,Zs(Nr,{brighter(r){return new xo(this.h,this.c,this.l+18*(r??1),this.opacity)},darker(r){return new xo(this.h,this.c,this.l-18*(r??1),this.opacity)},rgb(){return nm(this).rgb()}}));var Oa=-.14861,Gl=1.78277,rm=-.29227,hd=-.90649,Sc=1.97294,Xs=Sc*hd,So=Sc*Gl,im=Gl*rm-hd*Oa;function B2(r){if(r instanceof Qs)return new Qs(r.h,r.s,r.l,r.opacity);r instanceof Br||(r=bc(r));var i=r.r/255,a=r.g/255,l=r.b/255,c=(im*l+Xs*i-So*a)/(im+Xs-So),d=l-c,p=(Sc*(a-c)-rm*d)/hd,m=Math.sqrt(p*p+d*d)/(Sc*c*(1-c)),v=m?Math.atan2(p,d)*j0-120:NaN;return new Qs(v<0?v+360:v,m,c,r.opacity)}function jo(r,i,a,l){return arguments.length===1?B2(r):new Qs(r,i,a,l??1)}function Qs(r,i,a,l){this.h=+r,this.s=+i,this.l=+a,this.opacity=+l}function W0(r,i,a,l,c){var d=r*r,p=d*r;return((1-3*r+3*d-p)*i+(4-6*d+3*p)*a+(1+3*r+3*d-3*p)*l+p*c)/6}function V0(r){var i=r.length-1;return function(a){var l=a<=0?a=0:a>=1?(a=1,i-1):Math.floor(a*i),c=r[l],d=r[l+1],p=l>0?r[l-1]:2*c-d,m=l<i-1?r[l+2]:2*d-c;return W0((a-l/i)*i,p,c,d,m)}}function el(r){var i=r.length;return function(a){var l=Math.floor(((a%=1)<0?++a:a)*i),c=r[(l+i-1)%i],d=r[l%i],p=r[(l+1)%i],m=r[(l+2)%i];return W0((a-l/i)*i,c,d,p,m)}}Vs(Qs,jo,Zs(Nr,{brighter(r){return r=r==null?qs:Math.pow(qs,r),new Qs(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?hs:Math.pow(hs,r),new Qs(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=isNaN(this.h)?0:(this.h+120)*ud,i=+this.l,a=isNaN(this.s)?0:this.s*i*(1-i),l=Math.cos(r),c=Math.sin(r);return new Br(255*(i+a*(Oa*l+Gl*c)),255*(i+a*(rm*l+hd*c)),255*(i+a*(Sc*l)),this.opacity)}}));var _e=r=>()=>r;function Ae(r,i){return function(a){return r+a*i}}function Ce(r,i){var a=i-r;return a?Ae(r,a>180||a<-180?a-360*Math.round(a/360):a):_e(isNaN(r)?i:r)}function dt(r){return(r=+r)==1?_t:function(i,a){return a-i?function(l,c,d){return l=Math.pow(l,d),c=Math.pow(c,d)-l,d=1/d,function(p){return Math.pow(l+p*c,d)}}(i,a,r):_e(isNaN(i)?a:i)}}function _t(r,i){var a=i-r;return a?Ae(r,a):_e(isNaN(r)?i:r)}var pn=function r(i){var a=dt(i);function l(c,d){var p=a((c=Zl(c)).r,(d=Zl(d)).r),m=a(c.g,d.g),v=a(c.b,d.b),_=_t(c.opacity,d.opacity);return function(x){return c.r=p(x),c.g=m(x),c.b=v(x),c.opacity=_(x),c+""}}return l.gamma=r,l}(1);function br(r){return function(i){var a,l,c=i.length,d=new Array(c),p=new Array(c),m=new Array(c);for(a=0;a<c;++a)l=Zl(i[a]),d[a]=l.r||0,p[a]=l.g||0,m[a]=l.b||0;return d=r(d),p=r(p),m=r(m),l.opacity=1,function(v){return l.r=d(v),l.g=p(v),l.b=m(v),l+""}}}var Un=br(V0),om=br(el);function am(r,i){i||(i=[]);var a,l=r?Math.min(i.length,r.length):0,c=i.slice();return function(d){for(a=0;a<l;++a)c[a]=r[a]*(1-d)+i[a]*d;return c}}function Qi(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Ec(r,i){var a,l=i?i.length:0,c=r?Math.min(l,r.length):0,d=new Array(c),p=new Array(l);for(a=0;a<c;++a)d[a]=Ra(r[a],i[a]);for(;a<l;++a)p[a]=i[a];return function(m){for(a=0;a<c;++a)p[a]=d[a](m);return p}}function Z0(r,i){var a=new Date;return r=+r,i=+i,function(l){return a.setTime(r*(1-l)+i*l),a}}function ti(r,i){return r=+r,i=+i,function(a){return r*(1-a)+i*a}}function Tc(r,i){var a,l={},c={};for(a in r!==null&&typeof r=="object"||(r={}),i!==null&&typeof i=="object"||(i={}),i)a in r?l[a]=Ra(r[a],i[a]):c[a]=i[a];return function(d){for(a in l)c[a]=l[a](d);return c}}var Yl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sn=new RegExp(Yl.source,"g");function sm(r,i){var a,l,c,d=Yl.lastIndex=Sn.lastIndex=0,p=-1,m=[],v=[];for(r+="",i+="";(a=Yl.exec(r))&&(l=Sn.exec(i));)(c=l.index)>d&&(c=i.slice(d,c),m[p]?m[p]+=c:m[++p]=c),(a=a[0])===(l=l[0])?m[p]?m[p]+=l:m[++p]=l:(m[++p]=null,v.push({i:p,x:ti(a,l)})),d=Sn.lastIndex;return d<i.length&&(c=i.slice(d),m[p]?m[p]+=c:m[++p]=c),m.length<2?v[0]?function(_){return function(x){return _(x)+""}}(v[0].x):function(_){return function(){return _}}(i):(i=v.length,function(_){for(var x,C=0;C<i;++C)m[(x=v[C]).i]=x.x(_);return m.join("")})}function Ra(r,i){var a,l=typeof i;return i==null||l==="boolean"?_e(i):(l==="number"?ti:l==="string"?(a=bi(i))?(i=a,pn):sm:i instanceof bi?pn:i instanceof Date?Z0:Qi(i)?am:Array.isArray(i)?Ec:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?Tc:ti)(r,i)}function tl(r,i){return r=+r,i=+i,function(a){return Math.round(r*(1-a)+i*a)}}var pd,q0=180/Math.PI,lm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cc(r,i,a,l,c,d){var p,m,v;return(p=Math.sqrt(r*r+i*i))&&(r/=p,i/=p),(v=r*a+i*l)&&(a-=r*v,l-=i*v),(m=Math.sqrt(a*a+l*l))&&(a/=m,l/=m,v/=m),r*l<i*a&&(r=-r,i=-i,v=-v,p=-p),{translateX:c,translateY:d,rotate:Math.atan2(i,r)*q0,skewX:Math.atan(v)*q0,scaleX:p,scaleY:m}}function Da(r,i,a,l){function c(d){return d.length?d.pop()+" ":""}return function(d,p){var m=[],v=[];return d=r(d),p=r(p),function(_,x,C,T,A,U){if(_!==C||x!==T){var I=A.push("translate(",null,i,null,a);U.push({i:I-4,x:ti(_,C)},{i:I-2,x:ti(x,T)})}else(C||T)&&A.push("translate("+C+i+T+a)}(d.translateX,d.translateY,p.translateX,p.translateY,m,v),function(_,x,C,T){_!==x?(_-x>180?x+=360:x-_>180&&(_+=360),T.push({i:C.push(c(C)+"rotate(",null,l)-2,x:ti(_,x)})):x&&C.push(c(C)+"rotate("+x+l)}(d.rotate,p.rotate,m,v),function(_,x,C,T){_!==x?T.push({i:C.push(c(C)+"skewX(",null,l)-2,x:ti(_,x)}):x&&C.push(c(C)+"skewX("+x+l)}(d.skewX,p.skewX,m,v),function(_,x,C,T,A,U){if(_!==C||x!==T){var I=A.push(c(A)+"scale(",null,",",null,")");U.push({i:I-4,x:ti(_,C)},{i:I-2,x:ti(x,T)})}else C===1&&T===1||A.push(c(A)+"scale("+C+","+T+")")}(d.scaleX,d.scaleY,p.scaleX,p.scaleY,m,v),d=p=null,function(_){for(var x,C=-1,T=v.length;++C<T;)m[(x=v[C]).i]=x.x(_);return m.join("")}}}var kc=Da(function(r){const i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return i.isIdentity?lm:Cc(i.a,i.b,i.c,i.d,i.e,i.f)},"px, ","px)","deg)"),um=Da(function(r){return r==null?lm:(pd||(pd=document.createElementNS("http://www.w3.org/2000/svg","g")),pd.setAttribute("transform",r),(r=pd.transform.baseVal.consolidate())?Cc((r=r.matrix).a,r.b,r.c,r.d,r.e,r.f):lm)},", ",")",")");function Ac(r){return((r=Math.exp(r))+1/r)/2}var cm=function r(i,a,l){function c(d,p){var m,v,_=d[0],x=d[1],C=d[2],T=p[0],A=p[1],U=p[2],I=T-_,P=A-x,O=I*I+P*P;if(O<1e-12)v=Math.log(U/C)/i,m=function(me){return[_+me*I,x+me*P,C*Math.exp(i*me*v)]};else{var q=Math.sqrt(O),W=(U*U-C*C+l*O)/(2*C*a*q),j=(U*U-C*C-l*O)/(2*U*a*q),Y=Math.log(Math.sqrt(W*W+1)-W),Q=Math.log(Math.sqrt(j*j+1)-j);v=(Q-Y)/i,m=function(me){var Se=me*v,le=Ac(Y),ae=C/(a*q)*(le*function(ie){return((ie=Math.exp(2*ie))-1)/(ie+1)}(i*Se+Y)-function(ie){return((ie=Math.exp(ie))-1/ie)/2}(Y));return[_+ae*I,x+ae*P,C*le/Ac(i*Se+Y)]}}return m.duration=1e3*v*i/Math.SQRT2,m}return c.rho=function(d){var p=Math.max(.001,+d),m=p*p;return r(p,m,m*m)},c}(Math.SQRT2,2,4);function fm(r){return function(i,a){var l=r((i=ql(i)).h,(a=ql(a)).h),c=_t(i.s,a.s),d=_t(i.l,a.l),p=_t(i.opacity,a.opacity);return function(m){return i.h=l(m),i.s=c(m),i.l=d(m),i.opacity=p(m),i+""}}}var md=fm(Ce),G0=fm(_t);function Kl(r){return function(i,a){var l=r((i=dd(i)).h,(a=dd(a)).h),c=_t(i.c,a.c),d=_t(i.l,a.l),p=_t(i.opacity,a.opacity);return function(m){return i.h=l(m),i.c=c(m),i.l=d(m),i.opacity=p(m),i+""}}}var nl=Kl(Ce),gd=Kl(_t);function Y0(r){return function i(a){function l(c,d){var p=r((c=jo(c)).h,(d=jo(d)).h),m=_t(c.s,d.s),v=_t(c.l,d.l),_=_t(c.opacity,d.opacity);return function(x){return c.h=p(x),c.s=m(x),c.l=v(Math.pow(x,a)),c.opacity=_(x),c+""}}return a=+a,l.gamma=i,l}(1)}var $2=Y0(Ce),vd=Y0(_t);function Mc(r,i){i===void 0&&(i=r,r=Ra);for(var a=0,l=i.length-1,c=i[0],d=new Array(l<0?0:l);a<l;)d[a]=r(c,c=i[++a]);return function(p){var m=Math.max(0,Math.min(l-1,Math.floor(p*=l)));return d[m](p-m)}}var rl,il,Jl=0,Xl=0,Nc=0,_d=0,Gn=0,Lr=0,Lc=typeof performance=="object"&&performance.now?performance:Date,K0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function Ql(){return Gn||(K0(j2),Gn=Lc.now()+Lr)}function j2(){Gn=0}function ol(){this._call=this._time=this._next=null}function gs(r,i,a){var l=new ol;return l.restart(r,i,a),l}function yd(){Ql(),++Jl;for(var r,i=rl;i;)(r=Gn-i._time)>=0&&i._call.call(void 0,r),i=i._next;--Jl}function al(){Gn=(_d=Lc.now())+Lr,Jl=Xl=0;try{yd()}finally{Jl=0,function(){for(var r,i,a=rl,l=1/0;a;)a._call?(l>a._time&&(l=a._time),r=a,a=a._next):(i=a._next,a._next=null,a=r?r._next=i:rl=i);il=r,sl(l)}(),Gn=0}}function Pc(){var r=Lc.now(),i=r-_d;i>1e3&&(Lr-=i,_d=r)}function sl(r){Jl||(Xl&&(Xl=clearTimeout(Xl)),r-Gn>24?(r<1/0&&(Xl=setTimeout(al,r-Lc.now()-Lr)),Nc&&(Nc=clearInterval(Nc))):(Nc||(_d=Lc.now(),Nc=setInterval(Pc,1e3)),Jl=1,K0(al)))}function eu(r,i,a){var l=new ol;return i=i==null?0:+i,l.restart(c=>{l.stop(),r(c+i)},i,a),l}ol.prototype=gs.prototype={constructor:ol,restart:function(r,i,a){if(typeof r!="function")throw new TypeError("callback is not a function");a=(a==null?Ql():+a)+(i==null?0:+i),this._next||il===this||(il?il._next=this:rl=this,il=this),this._call=r,this._time=a,sl()},stop:function(){this._call&&(this._call=null,this._time=1/0,sl())}};var tu=Ne("start","end","cancel","interrupt"),H2=[];function wd(r,i,a,l,c,d){var p=r.__transition;if(p){if(a in p)return}else r.__transition={};(function(m,v,_){var x,C=m.__transition;function T(P){_.state=1,_.timer.restart(A,_.delay,_.time),_.delay<=P&&A(P-_.delay)}function A(P){var O,q,W,j;if(_.state!==1)return I();for(O in C)if((j=C[O]).name===_.name){if(j.state===3)return eu(A);j.state===4?(j.state=6,j.timer.stop(),j.on.call("interrupt",m,m.__data__,j.index,j.group),delete C[O]):+O<v&&(j.state=6,j.timer.stop(),j.on.call("cancel",m,m.__data__,j.index,j.group),delete C[O])}if(eu(function(){_.state===3&&(_.state=4,_.timer.restart(U,_.delay,_.time),U(P))}),_.state=2,_.on.call("start",m,m.__data__,_.index,_.group),_.state===2){for(_.state=3,x=new Array(W=_.tween.length),O=0,q=-1;O<W;++O)(j=_.tween[O].value.call(m,m.__data__,_.index,_.group))&&(x[++q]=j);x.length=q+1}}function U(P){for(var O=P<_.duration?_.ease.call(null,P/_.duration):(_.timer.restart(I),_.state=5,1),q=-1,W=x.length;++q<W;)x[q].call(m,O);_.state===5&&(_.on.call("end",m,m.__data__,_.index,_.group),I())}function I(){for(var P in _.state=6,_.timer.stop(),delete C[v],C)return;delete m.__transition}C[v]=_,_.timer=gs(T,0,_.time)})(r,a,{name:i,index:l,group:c,on:tu,tween:H2,time:d.time,delay:d.delay,duration:d.duration,ease:d.ease,timer:null,state:0})}function dm(r,i){var a=Ho(r,i);if(a.state>0)throw new Error("too late; already scheduled");return a}function sa(r,i){var a=Ho(r,i);if(a.state>3)throw new Error("too late; already running");return a}function Ho(r,i){var a=r.__transition;if(!a||!(a=a[i]))throw new Error("transition not found");return a}function la(r,i){var a,l,c,d=r.__transition,p=!0;if(d){for(c in i=i==null?null:i+"",d)(a=d[c]).name===i?(l=a.state>2&&a.state<5,a.state=6,a.timer.stop(),a.on.call(l?"interrupt":"cancel",r,r.__data__,a.index,a.group),delete d[c]):p=!1;p&&delete r.__transition}}function Ic(r,i){var a,l;return function(){var c=sa(this,r),d=c.tween;if(d!==a){for(var p=0,m=(l=a=d).length;p<m;++p)if(l[p].name===i){(l=l.slice()).splice(p,1);break}}c.tween=l}}function J0(r,i,a){var l,c;if(typeof a!="function")throw new Error;return function(){var d=sa(this,r),p=d.tween;if(p!==l){c=(l=p).slice();for(var m={name:i,value:a},v=0,_=c.length;v<_;++v)if(c[v].name===i){c[v]=m;break}v===_&&c.push(m)}d.tween=c}}function G(r,i,a){var l=r._id;return r.each(function(){var c=sa(this,l);(c.value||(c.value={}))[i]=a.apply(this,arguments)}),function(c){return Ho(c,l).value[i]}}function ll(r,i){var a;return(typeof i=="number"?ti:i instanceof bi?pn:(a=bi(i))?(i=a,pn):sm)(r,i)}function bd(r){return function(){this.removeAttribute(r)}}function Eo(r){return function(){this.removeAttributeNS(r.space,r.local)}}function fn(r,i,a){var l,c,d=a+"";return function(){var p=this.getAttribute(r);return p===d?null:p===l?c:c=i(l=p,a)}}function W2(r,i,a){var l,c,d=a+"";return function(){var p=this.getAttributeNS(r.space,r.local);return p===d?null:p===l?c:c=i(l=p,a)}}function V2(r,i,a){var l,c,d;return function(){var p,m,v=a(this);if(v!=null)return(p=this.getAttribute(r))===(m=v+"")?null:p===l&&m===c?d:(c=m,d=i(l=p,v));this.removeAttribute(r)}}function Z2(r,i,a){var l,c,d;return function(){var p,m,v=a(this);if(v!=null)return(p=this.getAttributeNS(r.space,r.local))===(m=v+"")?null:p===l&&m===c?d:(c=m,d=i(l=p,v));this.removeAttributeNS(r.space,r.local)}}function ul(r,i){return function(a){this.setAttribute(r,i.call(this,a))}}function q2(r,i){return function(a){this.setAttributeNS(r.space,r.local,i.call(this,a))}}function G2(r,i){var a,l;function c(){var d=i.apply(this,arguments);return d!==l&&(a=(l=d)&&q2(r,d)),a}return c._value=i,c}function Y2(r,i){var a,l;function c(){var d=i.apply(this,arguments);return d!==l&&(a=(l=d)&&ul(r,d)),a}return c._value=i,c}function K2(r,i){return function(){dm(this,r).delay=+i.apply(this,arguments)}}function J2(r,i){return i=+i,function(){dm(this,r).delay=i}}function za(r,i){return function(){sa(this,r).duration=+i.apply(this,arguments)}}function X2(r,i){return i=+i,function(){sa(this,r).duration=i}}function Q2(r,i){if(typeof i!="function")throw new Error;return function(){sa(this,r).ease=i}}function eb(r,i,a){var l,c,d=function(p){return(p+"").trim().split(/^|\s+/).every(function(m){var v=m.indexOf(".");return v>=0&&(m=m.slice(0,v)),!m||m==="start"})}(i)?dm:sa;return function(){var p=d(this,r),m=p.on;m!==l&&(c=(l=m).copy()).on(i,a),p.on=c}}var tb=Ia.prototype.constructor;function X0(r){return function(){this.style.removeProperty(r)}}function Ua(r,i,a){return function(l){this.style.setProperty(r,i.call(this,l),a)}}function nb(r,i,a){var l,c;function d(){var p=i.apply(this,arguments);return p!==c&&(l=(c=p)&&Ua(r,p,a)),l}return d._value=i,d}function rb(r){return function(i){this.textContent=r.call(this,i)}}function ib(r){var i,a;function l(){var c=r.apply(this,arguments);return c!==a&&(i=(a=c)&&rb(c)),i}return l._value=r,l}var ob=0;function ua(r,i,a,l){this._groups=r,this._parents=i,this._name=a,this._id=l}function vs(r){return Ia().transition(r)}function Q0(){return++ob}var Fa=Ia.prototype;ua.prototype=vs.prototype={constructor:ua,select:function(r){var i=this._name,a=this._id;typeof r!="function"&&(r=Xr(r));for(var l=this._groups,c=l.length,d=new Array(c),p=0;p<c;++p)for(var m,v,_=l[p],x=_.length,C=d[p]=new Array(x),T=0;T<x;++T)(m=_[T])&&(v=r.call(m,m.__data__,T,_))&&("__data__"in m&&(v.__data__=m.__data__),C[T]=v,wd(C[T],i,a,T,C,Ho(m,a)));return new ua(d,this._parents,i,a)},selectAll:function(r){var i=this._name,a=this._id;typeof r!="function"&&(r=oe(r));for(var l=this._groups,c=l.length,d=[],p=[],m=0;m<c;++m)for(var v,_=l[m],x=_.length,C=0;C<x;++C)if(v=_[C]){for(var T,A=r.call(v,v.__data__,C,_),U=Ho(v,a),I=0,P=A.length;I<P;++I)(T=A[I])&&wd(T,i,a,I,A,U);d.push(A),p.push(v)}return new ua(d,p,i,a)},selectChild:Fa.selectChild,selectChildren:Fa.selectChildren,filter:function(r){typeof r!="function"&&(r=Ie(r));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d,p=i[c],m=p.length,v=l[c]=[],_=0;_<m;++_)(d=p[_])&&r.call(d,d.__data__,_,p)&&v.push(d);return new ua(l,this._parents,this._name,this._id)},merge:function(r){if(r._id!==this._id)throw new Error;for(var i=this._groups,a=r._groups,l=i.length,c=a.length,d=Math.min(l,c),p=new Array(l),m=0;m<d;++m)for(var v,_=i[m],x=a[m],C=_.length,T=p[m]=new Array(C),A=0;A<C;++A)(v=_[A]||x[A])&&(T[A]=v);for(;m<l;++m)p[m]=i[m];return new ua(p,this._parents,this._name,this._id)},selection:function(){return new tb(this._groups,this._parents)},transition:function(){for(var r=this._name,i=this._id,a=Q0(),l=this._groups,c=l.length,d=0;d<c;++d)for(var p,m=l[d],v=m.length,_=0;_<v;++_)if(p=m[_]){var x=Ho(p,i);wd(p,r,a,_,m,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new ua(l,this._parents,r,a)},call:Fa.call,nodes:Fa.nodes,node:Fa.node,size:Fa.size,empty:Fa.empty,each:Fa.each,on:function(r,i){var a=this._id;return arguments.length<2?Ho(this.node(),a).on.on(r):this.each(eb(a,r,i))},attr:function(r,i){var a=Xt(r),l=a==="transform"?um:ll;return this.attrTween(r,typeof i=="function"?(a.local?Z2:V2)(a,l,G(this,"attr."+r,i)):i==null?(a.local?Eo:bd)(a):(a.local?W2:fn)(a,l,i))},attrTween:function(r,i){var a="attr."+r;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(i==null)return this.tween(a,null);if(typeof i!="function")throw new Error;var l=Xt(r);return this.tween(a,(l.local?G2:Y2)(l,i))},style:function(r,i,a){var l=(r+="")=="transform"?kc:ll;return i==null?this.styleTween(r,function(c,d){var p,m,v;return function(){var _=ds(this,c),x=(this.style.removeProperty(c),ds(this,c));return _===x?null:_===p&&x===m?v:v=d(p=_,m=x)}}(r,l)).on("end.style."+r,X0(r)):typeof i=="function"?this.styleTween(r,function(c,d,p){var m,v,_;return function(){var x=ds(this,c),C=p(this),T=C+"";return C==null&&(this.style.removeProperty(c),T=C=ds(this,c)),x===T?null:x===m&&T===v?_:(v=T,_=d(m=x,C))}}(r,l,G(this,"style."+r,i))).each(function(c,d){var p,m,v,_,x="style."+d,C="end."+x;return function(){var T=sa(this,c),A=T.on,U=T.value[x]==null?_||(_=X0(d)):void 0;A===p&&v===U||(m=(p=A).copy()).on(C,v=U),T.on=m}}(this._id,r)):this.styleTween(r,function(c,d,p){var m,v,_=p+"";return function(){var x=ds(this,c);return x===_?null:x===m?v:v=d(m=x,p)}}(r,l,i),a).on("end.style."+r,null)},styleTween:function(r,i,a){var l="style."+(r+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(i==null)return this.tween(l,null);if(typeof i!="function")throw new Error;return this.tween(l,nb(r,i,a??""))},text:function(r){return this.tween("text",typeof r=="function"?function(i){return function(){var a=i(this);this.textContent=a??""}}(G(this,"text",r)):function(i){return function(){this.textContent=i}}(r==null?"":r+""))},textTween:function(r){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,ib(r))},remove:function(){return this.on("end.remove",function(r){return function(){var i=this.parentNode;for(var a in this.__transition)if(+a!==r)return;i&&i.removeChild(this)}}(this._id))},tween:function(r,i){var a=this._id;if(r+="",arguments.length<2){for(var l,c=Ho(this.node(),a).tween,d=0,p=c.length;d<p;++d)if((l=c[d]).name===r)return l.value;return null}return this.each((i==null?Ic:J0)(a,r,i))},delay:function(r){var i=this._id;return arguments.length?this.each((typeof r=="function"?K2:J2)(i,r)):Ho(this.node(),i).delay},duration:function(r){var i=this._id;return arguments.length?this.each((typeof r=="function"?za:X2)(i,r)):Ho(this.node(),i).duration},ease:function(r){var i=this._id;return arguments.length?this.each(Q2(i,r)):Ho(this.node(),i).ease},easeVarying:function(r){if(typeof r!="function")throw new Error;return this.each(function(i,a){return function(){var l=a.apply(this,arguments);if(typeof l!="function")throw new Error;sa(this,i).ease=l}}(this._id,r))},end:function(){var r,i,a=this,l=a._id,c=a.size();return new Promise(function(d,p){var m={value:p},v={value:function(){--c==0&&d()}};a.each(function(){var _=sa(this,l),x=_.on;x!==r&&((i=(r=x).copy())._.cancel.push(m),i._.interrupt.push(m),i._.end.push(v)),_.on=i}),c===0&&d()})},[Symbol.iterator]:Fa[Symbol.iterator]};function To(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function hm(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var ab=function r(i){function a(l){return Math.pow(l,i)}return i=+i,a.exponent=r,a}(3),sb=function r(i){function a(l){return 1-Math.pow(1-l,i)}return i=+i,a.exponent=r,a}(3),e_=function r(i){function a(l){return((l*=2)<=1?Math.pow(l,i):2-Math.pow(2-l,i))/2}return i=+i,a.exponent=r,a}(3),t_=Math.PI,pm=t_/2;function mm(r){return(1-Math.cos(t_*r))/2}function _s(r){return 1.0009775171065494*(Math.pow(2,-10*r)-.0009765625)}function n_(r){return((r*=2)<=1?_s(1-r):2-_s(r-1))/2}function xd(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var Oc=4/11,cl=7.5625;function Rc(r){return(r=+r)<Oc?cl*r*r:r<.7272727272727273?cl*(r-=.5454545454545454)*r+.75:r<.9090909090909091?cl*(r-=.8181818181818182)*r+.9375:cl*(r-=.9545454545454546)*r+.984375}var Sd=1.70158,lb=function r(i){function a(l){return(l=+l)*l*(i*(l-1)+l)}return i=+i,a.overshoot=r,a}(Sd),Ba=function r(i){function a(l){return--l*l*((l+1)*i+l)+1}return i=+i,a.overshoot=r,a}(Sd),Ed=function r(i){function a(l){return((l*=2)<1?l*l*((i+1)*l-i):(l-=2)*l*((i+1)*l+i)+2)/2}return i=+i,a.overshoot=r,a}(Sd),Co=2*Math.PI,ko=function r(i,a){var l=Math.asin(1/(i=Math.max(1,i)))*(a/=Co);function c(d){return i*_s(- --d)*Math.sin((l-d)/a)}return c.amplitude=function(d){return r(d,a*Co)},c.period=function(d){return r(i,d)},c}(1,.3),r_=function r(i,a){var l=Math.asin(1/(i=Math.max(1,i)))*(a/=Co);function c(d){return 1-i*_s(d=+d)*Math.sin((d+l)/a)}return c.amplitude=function(d){return r(d,a*Co)},c.period=function(d){return r(i,d)},c}(1,.3),i_=function r(i,a){var l=Math.asin(1/(i=Math.max(1,i)))*(a/=Co);function c(d){return((d=2*d-1)<0?i*_s(-d)*Math.sin((l-d)/a):2-i*_s(d)*Math.sin((l+d)/a))/2}return c.amplitude=function(d){return r(d,a*Co)},c.period=function(d){return r(i,d)},c}(1,.3),o_={time:null,delay:0,duration:250,ease:hm};function Dc(r,i){for(var a;!(a=r.__transition)||!(a=a[i]);)if(!(r=r.parentNode))throw new Error(`transition ${i} not found`);return a}Ia.prototype.interrupt=function(r){return this.each(function(){la(this,r)})},Ia.prototype.transition=function(r){var i,a;r instanceof ua?(i=r._id,r=r._name):(i=Q0(),(a=o_).time=Ql(),r=r==null?null:r+"");for(var l=this._groups,c=l.length,d=0;d<c;++d)for(var p,m=l[d],v=m.length,_=0;_<v;++_)(p=m[_])&&wd(p,r,i,_,m,a||Dc(p,i));return new ua(l,this._parents,r,i)};var ys=[null],Td=r=>()=>r;function ub(r,{sourceEvent:i,target:a,selection:l,mode:c,dispatch:d}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:l,enumerable:!0,configurable:!0},mode:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function Cd(r){r.stopImmediatePropagation()}function gm(r){r.preventDefault(),r.stopImmediatePropagation()}var vm={name:"drag"},Pr={name:"space"},ws={name:"handle"},fl={name:"center"};const{abs:Wo,max:$r,min:Ir}=Math;function bs(r){return[+r[0],+r[1]]}function kd(r){return[bs(r[0]),bs(r[1])]}var jr={name:"x",handles:["w","e"].map(ru),input:function(r,i){return r==null?null:[[+r[0],i[0][1]],[+r[1],i[1][1]]]},output:function(r){return r&&[r[0][0],r[1][0]]}},nu={name:"y",handles:["n","s"].map(ru),input:function(r,i){return r==null?null:[[i[0][0],+r[0]],[i[1][0],+r[1]]]},output:function(r){return r&&[r[0][1],r[1][1]]}},cb={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ru),input:function(r){return r==null?null:kd(r)},output:function(r){return r}},$a={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},a_={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ad={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},fb={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},zc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ru(r){return{type:r}}function db(r){return!r.ctrlKey&&!r.button}function hb(){var r=this.ownerSVGElement||this;return r.hasAttribute("viewBox")?[[(r=r.viewBox.baseVal).x,r.y],[r.x+r.width,r.y+r.height]]:[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]}function Uc(){return navigator.maxTouchPoints||"ontouchstart"in this}function _m(r){for(;!r.__brush;)if(!(r=r.parentNode))return;return r.__brush}function pb(r){return r[0][0]===r[1][0]||r[0][1]===r[1][1]}function Fc(r){var i,a=hb,l=db,c=Uc,d=!0,p=Ne("start","brush","end"),m=6;function v(P){var O=P.property("__brush",I).selectAll(".overlay").data([ru("overlay")]);O.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",$a.overlay).merge(O).each(function(){var W=_m(this).extent;di(this).attr("x",W[0][0]).attr("y",W[0][1]).attr("width",W[1][0]-W[0][0]).attr("height",W[1][1]-W[0][1])}),P.selectAll(".selection").data([ru("selection")]).enter().append("rect").attr("class","selection").attr("cursor",$a.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var q=P.selectAll(".handle").data(r.handles,function(W){return W.type});q.exit().remove(),q.enter().append("rect").attr("class",function(W){return"handle handle--"+W.type}).attr("cursor",function(W){return $a[W.type]}),P.each(_).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",T).filter(c).on("touchstart.brush",T).on("touchmove.brush",A).on("touchend.brush touchcancel.brush",U).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(){var P=di(this),O=_m(this).selection;O?(P.selectAll(".selection").style("display",null).attr("x",O[0][0]).attr("y",O[0][1]).attr("width",O[1][0]-O[0][0]).attr("height",O[1][1]-O[0][1]),P.selectAll(".handle").style("display",null).attr("x",function(q){return q.type[q.type.length-1]==="e"?O[1][0]-m/2:O[0][0]-m/2}).attr("y",function(q){return q.type[0]==="s"?O[1][1]-m/2:O[0][1]-m/2}).attr("width",function(q){return q.type==="n"||q.type==="s"?O[1][0]-O[0][0]+m:m}).attr("height",function(q){return q.type==="e"||q.type==="w"?O[1][1]-O[0][1]+m:m})):P.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function x(P,O,q){var W=P.__brush.emitter;return!W||q&&W.clean?new C(P,O,q):W}function C(P,O,q){this.that=P,this.args=O,this.state=P.__brush,this.active=0,this.clean=q}function T(P){if((!i||P.touches)&&l.apply(this,arguments)){var O,q,W,j,Y,Q,me,Se,le,ae,ie,ue=this,ee=P.target.__data__.type,re=(d&&P.metaKey?ee="overlay":ee)==="selection"?vm:d&&P.altKey?fl:ws,de=r===nu?null:fb[ee],ve=r===jr?null:zc[ee],Ee=_m(ue),De=Ee.extent,He=Ee.selection,tt=De[0][0],We=De[0][1],Lt=De[1][0],It=De[1][1],mt=0,Et=0,Tn=de&&ve&&d&&P.shiftKey,nn=Array.from(P.touches||[P],on=>{const ai=on.identifier;return(on=ln(on,ue)).point0=on.slice(),on.identifier=ai,on});la(ue);var io=x(ue,arguments,!0).beforestart();if(ee==="overlay"){He&&(le=!0);const on=[nn[0],nn[1]||nn[0]];Ee.selection=He=[[O=r===nu?tt:Ir(on[0][0],on[1][0]),W=r===jr?We:Ir(on[0][1],on[1][1])],[Y=r===nu?Lt:$r(on[0][0],on[1][0]),me=r===jr?It:$r(on[0][1],on[1][1])]],nn.length>1&&Cf(P)}else O=He[0][0],W=He[0][1],Y=He[1][0],me=He[1][1];q=O,j=W,Q=Y,Se=me;var zu=di(ue).attr("pointer-events","none"),Xa=zu.selectAll(".overlay").attr("cursor",$a[ee]);if(P.touches)io.moved=qk,io.ended=Gk;else{var Wh=di(P.view).on("mousemove.brush",qk,!0).on("mouseup.brush",Gk,!0);d&&Wh.on("keydown.brush",Y7,!0).on("keyup.brush",K7,!0),td(P.view)}_.call(ue),io.start(P,re.name)}function qk(on){for(const ai of on.changedTouches||[on])for(const iv of nn)iv.identifier===ai.identifier&&(iv.cur=ln(ai,ue));if(Tn&&!ae&&!ie&&nn.length===1){const ai=nn[0];Wo(ai.cur[0]-ai[0])>Wo(ai.cur[1]-ai[1])?ie=!0:ae=!0}for(const ai of nn)ai.cur&&(ai[0]=ai.cur[0],ai[1]=ai.cur[1]);le=!0,gm(on),Cf(on)}function Cf(on){const ai=nn[0],iv=ai.point0;var Uu;switch(mt=ai[0]-iv[0],Et=ai[1]-iv[1],re){case Pr:case vm:de&&(mt=$r(tt-O,Ir(Lt-Y,mt)),q=O+mt,Q=Y+mt),ve&&(Et=$r(We-W,Ir(It-me,Et)),j=W+Et,Se=me+Et);break;case ws:nn[1]?(de&&(q=$r(tt,Ir(Lt,nn[0][0])),Q=$r(tt,Ir(Lt,nn[1][0])),de=1),ve&&(j=$r(We,Ir(It,nn[0][1])),Se=$r(We,Ir(It,nn[1][1])),ve=1)):(de<0?(mt=$r(tt-O,Ir(Lt-O,mt)),q=O+mt,Q=Y):de>0&&(mt=$r(tt-Y,Ir(Lt-Y,mt)),q=O,Q=Y+mt),ve<0?(Et=$r(We-W,Ir(It-W,Et)),j=W+Et,Se=me):ve>0&&(Et=$r(We-me,Ir(It-me,Et)),j=W,Se=me+Et));break;case fl:de&&(q=$r(tt,Ir(Lt,O-mt*de)),Q=$r(tt,Ir(Lt,Y+mt*de))),ve&&(j=$r(We,Ir(It,W-Et*ve)),Se=$r(We,Ir(It,me+Et*ve)))}Q<q&&(de*=-1,Uu=O,O=Y,Y=Uu,Uu=q,q=Q,Q=Uu,ee in a_&&Xa.attr("cursor",$a[ee=a_[ee]])),Se<j&&(ve*=-1,Uu=W,W=me,me=Uu,Uu=j,j=Se,Se=Uu,ee in Ad&&Xa.attr("cursor",$a[ee=Ad[ee]])),Ee.selection&&(He=Ee.selection),ae&&(q=He[0][0],Q=He[1][0]),ie&&(j=He[0][1],Se=He[1][1]),He[0][0]===q&&He[0][1]===j&&He[1][0]===Q&&He[1][1]===Se||(Ee.selection=[[q,j],[Q,Se]],_.call(ue),io.brush(on,re.name))}function Gk(on){if(Cd(on),on.touches){if(on.touches.length)return;i&&clearTimeout(i),i=setTimeout(function(){i=null},500)}else nd(on.view,le),Wh.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);zu.attr("pointer-events","all"),Xa.attr("cursor",$a.overlay),Ee.selection&&(He=Ee.selection),pb(He)&&(Ee.selection=null,_.call(ue)),io.end(on,re.name)}function Y7(on){switch(on.keyCode){case 16:Tn=de&&ve;break;case 18:re===ws&&(de&&(Y=Q-mt*de,O=q+mt*de),ve&&(me=Se-Et*ve,W=j+Et*ve),re=fl,Cf(on));break;case 32:re!==ws&&re!==fl||(de<0?Y=Q-mt:de>0&&(O=q-mt),ve<0?me=Se-Et:ve>0&&(W=j-Et),re=Pr,Xa.attr("cursor",$a.selection),Cf(on));break;default:return}gm(on)}function K7(on){switch(on.keyCode){case 16:Tn&&(ae=ie=Tn=!1,Cf(on));break;case 18:re===fl&&(de<0?Y=Q:de>0&&(O=q),ve<0?me=Se:ve>0&&(W=j),re=ws,Cf(on));break;case 32:re===Pr&&(on.altKey?(de&&(Y=Q-mt*de,O=q+mt*de),ve&&(me=Se-Et*ve,W=j+Et*ve),re=fl):(de<0?Y=Q:de>0&&(O=q),ve<0?me=Se:ve>0&&(W=j),re=ws),Xa.attr("cursor",$a[ee]),Cf(on));break;default:return}gm(on)}}function A(P){x(this,arguments).moved(P)}function U(P){x(this,arguments).ended(P)}function I(){var P=this.__brush||{selection:null};return P.extent=kd(a.apply(this,arguments)),P.dim=r,P}return v.move=function(P,O,q){P.tween?P.on("start.brush",function(W){x(this,arguments).beforestart().start(W)}).on("interrupt.brush end.brush",function(W){x(this,arguments).end(W)}).tween("brush",function(){var W=this,j=W.__brush,Y=x(W,arguments),Q=j.selection,me=r.input(typeof O=="function"?O.apply(this,arguments):O,j.extent),Se=Ra(Q,me);function le(ae){j.selection=ae===1&&me===null?null:Se(ae),_.call(W),Y.brush()}return Q!==null&&me!==null?le:le(1)}):P.each(function(){var W=this,j=arguments,Y=W.__brush,Q=r.input(typeof O=="function"?O.apply(W,j):O,Y.extent),me=x(W,j).beforestart();la(W),Y.selection=Q===null?null:Q,_.call(W),me.start(q).brush(q).end(q)})},v.clear=function(P,O){v.move(P,null,O)},C.prototype={beforestart:function(){return++this.active==1&&(this.state.emitter=this,this.starting=!0),this},start:function(P,O){return this.starting?(this.starting=!1,this.emit("start",P,O)):this.emit("brush",P),this},brush:function(P,O){return this.emit("brush",P,O),this},end:function(P,O){return--this.active==0&&(delete this.state.emitter,this.emit("end",P,O)),this},emit:function(P,O,q){var W=di(this.that).datum();p.call(P,this.that,new ub(P,{sourceEvent:O,target:v,selection:r.output(this.state.selection),mode:q,dispatch:p}),W)}},v.extent=function(P){return arguments.length?(a=typeof P=="function"?P:Td(kd(P)),v):a},v.filter=function(P){return arguments.length?(l=typeof P=="function"?P:Td(!!P),v):l},v.touchable=function(P){return arguments.length?(c=typeof P=="function"?P:Td(!!P),v):c},v.handleSize=function(P){return arguments.length?(m=+P,v):m},v.keyModifiers=function(P){return arguments.length?(d=!!P,v):d},v.on=function(){var P=p.on.apply(p,arguments);return P===p?v:P},v}var ym=Math.abs,iu=Math.cos,ou=Math.sin,s_=Math.PI,Bc=s_/2,Md=2*s_,l_=Math.max,$c=1e-12;function Nd(r,i){return Array.from({length:i-r},(a,l)=>r+l)}function u_(r){return function(i,a){return r(i.source.value+i.target.value,a.source.value+a.target.value)}}function Ld(r,i){var a=0,l=null,c=null,d=null;function p(m){var v,_=m.length,x=new Array(_),C=Nd(0,_),T=new Array(_*_),A=new Array(_),U=0;m=Float64Array.from({length:_*_},i?(I,P)=>m[P%_][P/_|0]:(I,P)=>m[P/_|0][P%_]);for(let I=0;I<_;++I){let P=0;for(let O=0;O<_;++O)P+=m[I*_+O]+r*m[O*_+I];U+=x[I]=P}v=(U=l_(0,Md-a*_)/U)?a:Md/_;{let I=0;l&&C.sort((P,O)=>l(x[P],x[O]));for(const P of C){const O=I;if(r){const q=Nd(1+~_,_).filter(W=>W<0?m[~W*_+P]:m[P*_+W]);c&&q.sort((W,j)=>c(W<0?-m[~W*_+P]:m[P*_+W],j<0?-m[~j*_+P]:m[P*_+j]));for(const W of q)W<0?(T[~W*_+P]||(T[~W*_+P]={source:null,target:null})).target={index:P,startAngle:I,endAngle:I+=m[~W*_+P]*U,value:m[~W*_+P]}:(T[P*_+W]||(T[P*_+W]={source:null,target:null})).source={index:P,startAngle:I,endAngle:I+=m[P*_+W]*U,value:m[P*_+W]};A[P]={index:P,startAngle:O,endAngle:I,value:x[P]}}else{const q=Nd(0,_).filter(W=>m[P*_+W]||m[W*_+P]);c&&q.sort((W,j)=>c(m[P*_+W],m[P*_+j]));for(const W of q){let j;if(P<W?(j=T[P*_+W]||(T[P*_+W]={source:null,target:null}),j.source={index:P,startAngle:I,endAngle:I+=m[P*_+W]*U,value:m[P*_+W]}):(j=T[W*_+P]||(T[W*_+P]={source:null,target:null}),j.target={index:P,startAngle:I,endAngle:I+=m[P*_+W]*U,value:m[P*_+W]},P===W&&(j.source=j.target)),j.source&&j.target&&j.source.value<j.target.value){const Y=j.source;j.source=j.target,j.target=Y}}A[P]={index:P,startAngle:O,endAngle:I,value:x[P]}}I+=v}}return(T=Object.values(T)).groups=A,d?T.sort(d):T}return p.padAngle=function(m){return arguments.length?(a=l_(0,m),p):a},p.sortGroups=function(m){return arguments.length?(l=m,p):l},p.sortSubgroups=function(m){return arguments.length?(c=m,p):c},p.sortChords=function(m){return arguments.length?(m==null?d=null:(d=u_(m))._=m,p):d&&d._},p}const au=Math.PI,wm=2*au,xs=1e-6,c_=wm-xs;function bm(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ja(){return new bm}bm.prototype=ja.prototype={constructor:bm,moveTo:function(r,i){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+i)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,i){this._+="L"+(this._x1=+r)+","+(this._y1=+i)},quadraticCurveTo:function(r,i,a,l){this._+="Q"+ +r+","+ +i+","+(this._x1=+a)+","+(this._y1=+l)},bezierCurveTo:function(r,i,a,l,c,d){this._+="C"+ +r+","+ +i+","+ +a+","+ +l+","+(this._x1=+c)+","+(this._y1=+d)},arcTo:function(r,i,a,l,c){r=+r,i=+i,a=+a,l=+l,c=+c;var d=this._x1,p=this._y1,m=a-r,v=l-i,_=d-r,x=p-i,C=_*_+x*x;if(c<0)throw new Error("negative radius: "+c);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=i);else if(C>xs)if(Math.abs(x*m-v*_)>xs&&c){var T=a-d,A=l-p,U=m*m+v*v,I=T*T+A*A,P=Math.sqrt(U),O=Math.sqrt(C),q=c*Math.tan((au-Math.acos((U+C-I)/(2*P*O)))/2),W=q/O,j=q/P;Math.abs(W-1)>xs&&(this._+="L"+(r+W*_)+","+(i+W*x)),this._+="A"+c+","+c+",0,0,"+ +(x*T>_*A)+","+(this._x1=r+j*m)+","+(this._y1=i+j*v)}else this._+="L"+(this._x1=r)+","+(this._y1=i)},arc:function(r,i,a,l,c,d){r=+r,i=+i,d=!!d;var p=(a=+a)*Math.cos(l),m=a*Math.sin(l),v=r+p,_=i+m,x=1^d,C=d?l-c:c-l;if(a<0)throw new Error("negative radius: "+a);this._x1===null?this._+="M"+v+","+_:(Math.abs(this._x1-v)>xs||Math.abs(this._y1-_)>xs)&&(this._+="L"+v+","+_),a&&(C<0&&(C=C%wm+wm),C>c_?this._+="A"+a+","+a+",0,1,"+x+","+(r-p)+","+(i-m)+"A"+a+","+a+",0,1,"+x+","+(this._x1=v)+","+(this._y1=_):C>xs&&(this._+="A"+a+","+a+",0,"+ +(C>=au)+","+x+","+(this._x1=r+a*Math.cos(c))+","+(this._y1=i+a*Math.sin(c))))},rect:function(r,i,a,l){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+i)+"h"+ +a+"v"+ +l+"h"+-a+"Z"},toString:function(){return this._}};var mb=Array.prototype.slice;function Ha(r){return function(){return r}}function f_(r){return r.source}function xm(r){return r.target}function d_(r){return r.radius}function Sm(r){return r.startAngle}function Qt(r){return r.endAngle}function gb(){return 0}function vb(){return 10}function su(r){var i=f_,a=xm,l=d_,c=d_,d=Sm,p=Qt,m=gb,v=null;function _(){var x,C=i.apply(this,arguments),T=a.apply(this,arguments),A=m.apply(this,arguments)/2,U=mb.call(arguments),I=+l.apply(this,(U[0]=C,U)),P=d.apply(this,U)-Bc,O=p.apply(this,U)-Bc,q=+c.apply(this,(U[0]=T,U)),W=d.apply(this,U)-Bc,j=p.apply(this,U)-Bc;if(v||(v=x=ja()),A>$c&&(ym(O-P)>2*A+$c?O>P?(P+=A,O-=A):(P-=A,O+=A):P=O=(P+O)/2,ym(j-W)>2*A+$c?j>W?(W+=A,j-=A):(W-=A,j+=A):W=j=(W+j)/2),v.moveTo(I*iu(P),I*ou(P)),v.arc(0,0,I,P,O),P!==W||O!==j)if(r){var Y=+r.apply(this,arguments),Q=q-Y,me=(W+j)/2;v.quadraticCurveTo(0,0,Q*iu(W),Q*ou(W)),v.lineTo(q*iu(me),q*ou(me)),v.lineTo(Q*iu(j),Q*ou(j))}else v.quadraticCurveTo(0,0,q*iu(W),q*ou(W)),v.arc(0,0,q,W,j);if(v.quadraticCurveTo(0,0,I*iu(P),I*ou(P)),v.closePath(),x)return v=null,x+""||null}return r&&(_.headRadius=function(x){return arguments.length?(r=typeof x=="function"?x:Ha(+x),_):r}),_.radius=function(x){return arguments.length?(l=c=typeof x=="function"?x:Ha(+x),_):l},_.sourceRadius=function(x){return arguments.length?(l=typeof x=="function"?x:Ha(+x),_):l},_.targetRadius=function(x){return arguments.length?(c=typeof x=="function"?x:Ha(+x),_):c},_.startAngle=function(x){return arguments.length?(d=typeof x=="function"?x:Ha(+x),_):d},_.endAngle=function(x){return arguments.length?(p=typeof x=="function"?x:Ha(+x),_):p},_.padAngle=function(x){return arguments.length?(m=typeof x=="function"?x:Ha(+x),_):m},_.source=function(x){return arguments.length?(i=x,_):i},_.target=function(x){return arguments.length?(a=x,_):a},_.context=function(x){return arguments.length?(v=x??null,_):v},_}var Em=Array.prototype.slice;function _b(r,i){return r-i}var Ss=r=>()=>r;function Ao(r,i){for(var a,l=-1,c=i.length;++l<c;)if(a=yb(r,i[l]))return a;return 0}function yb(r,i){for(var a=i[0],l=i[1],c=-1,d=0,p=r.length,m=p-1;d<p;m=d++){var v=r[d],_=v[0],x=v[1],C=r[m],T=C[0],A=C[1];if(Pd(v,C,i))return 0;x>l!=A>l&&a<(T-_)*(l-x)/(A-x)+_&&(c=-c)}return c}function Pd(r,i,a){var l,c,d,p;return function(m,v,_){return(v[0]-m[0])*(_[1]-m[1])==(_[0]-m[0])*(v[1]-m[1])}(r,i,a)&&(c=r[l=+(r[0]===i[0])],d=a[l],p=i[l],c<=d&&d<=p||p<=d&&d<=c)}function Tm(){}var ca=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Cm(){var r=1,i=1,a=Jt,l=m;function c(v){var _=a(v);if(Array.isArray(_))_=_.slice().sort(_b);else{const x=z(v),C=Ve(x[0],x[1],_);_=rt(Math.floor(x[0]/C)*C,Math.floor(x[1]/C-1)*C,_)}return _.map(x=>d(v,x))}function d(v,_){var x=[],C=[];return function(T,A,U){var I,P,O,q,W,j,Y=new Array,Q=new Array;for(I=P=-1,q=T[0]>=A,ca[q<<1].forEach(me);++I<r-1;)O=q,q=T[I+1]>=A,ca[O|q<<1].forEach(me);for(ca[q<<0].forEach(me);++P<i-1;){for(I=-1,q=T[P*r+r]>=A,W=T[P*r]>=A,ca[q<<1|W<<2].forEach(me);++I<r-1;)O=q,q=T[P*r+r+I+1]>=A,j=W,W=T[P*r+I+1]>=A,ca[O|q<<1|W<<2|j<<3].forEach(me);ca[q|W<<3].forEach(me)}for(I=-1,W=T[P*r]>=A,ca[W<<2].forEach(me);++I<r-1;)j=W,W=T[P*r+I+1]>=A,ca[W<<2|j<<3].forEach(me);function me(Se){var le,ae,ie=[Se[0][0]+I,Se[0][1]+P],ue=[Se[1][0]+I,Se[1][1]+P],ee=p(ie),re=p(ue);(le=Q[ee])?(ae=Y[re])?(delete Q[le.end],delete Y[ae.start],le===ae?(le.ring.push(ue),U(le.ring)):Y[le.start]=Q[ae.end]={start:le.start,end:ae.end,ring:le.ring.concat(ae.ring)}):(delete Q[le.end],le.ring.push(ue),Q[le.end=re]=le):(le=Y[re])?(ae=Q[ee])?(delete Y[le.start],delete Q[ae.end],le===ae?(le.ring.push(ue),U(le.ring)):Y[ae.start]=Q[le.end]={start:ae.start,end:le.end,ring:ae.ring.concat(le.ring)}):(delete Y[le.start],le.ring.unshift(ie),Y[le.start=ee]=le):Y[ee]=Q[re]={start:ee,end:re,ring:[ie,ue]}}ca[W<<3].forEach(me)}(v,_,function(T){l(T,v,_),function(A){for(var U=0,I=A.length,P=A[I-1][1]*A[0][0]-A[I-1][0]*A[0][1];++U<I;)P+=A[U-1][1]*A[U][0]-A[U-1][0]*A[U][1];return P}(T)>0?x.push([T]):C.push(T)}),C.forEach(function(T){for(var A,U=0,I=x.length;U<I;++U)if(Ao((A=x[U])[0],T)!==-1)return void A.push(T)}),{type:"MultiPolygon",value:_,coordinates:x}}function p(v){return 2*v[0]+v[1]*(r+1)*4}function m(v,_,x){v.forEach(function(C){var T,A=C[0],U=C[1],I=0|A,P=0|U,O=_[P*r+I];A>0&&A<r&&I===A&&(T=_[P*r+I-1],C[0]=A+(x-T)/(O-T)-.5),U>0&&U<i&&P===U&&(T=_[(P-1)*r+I],C[1]=U+(x-T)/(O-T)-.5)})}return c.contour=d,c.size=function(v){if(!arguments.length)return[r,i];var _=Math.floor(v[0]),x=Math.floor(v[1]);if(!(_>=0&&x>=0))throw new Error("invalid size");return r=_,i=x,c},c.thresholds=function(v){return arguments.length?(a=typeof v=="function"?v:Array.isArray(v)?Ss(Em.call(v)):Ss(v),c):a},c.smooth=function(v){return arguments.length?(l=v?m:Tm,c):l===m},c}function xi(r,i,a){for(var l=r.width,c=r.height,d=1+(a<<1),p=0;p<c;++p)for(var m=0,v=0;m<l+a;++m)m<l&&(v+=r.data[m+p*l]),m>=a&&(m>=d&&(v-=r.data[m-d+p*l]),i.data[m-a+p*l]=v/Math.min(m+1,l-1+d-m,d))}function fa(r,i,a){for(var l=r.width,c=r.height,d=1+(a<<1),p=0;p<l;++p)for(var m=0,v=0;m<c+a;++m)m<c&&(v+=r.data[p+m*l]),m>=a&&(m>=d&&(v-=r.data[p+(m-d)*l]),i.data[p+(m-a)*l]=v/Math.min(m+1,c-1+d-m,d))}function km(r){return r[0]}function h_(r){return r[1]}function Id(){return 1}const ni=134217729;function jc(r,i,a,l,c){let d,p,m,v,_=i[0],x=l[0],C=0,T=0;x>_==x>-_?(d=_,_=i[++C]):(d=x,x=l[++T]);let A=0;if(C<r&&T<a)for(x>_==x>-_?(p=_+d,m=d-(p-_),_=i[++C]):(p=x+d,m=d-(p-x),x=l[++T]),d=p,m!==0&&(c[A++]=m);C<r&&T<a;)x>_==x>-_?(p=d+_,v=p-d,m=d-(p-v)+(_-v),_=i[++C]):(p=d+x,v=p-d,m=d-(p-v)+(x-v),x=l[++T]),d=p,m!==0&&(c[A++]=m);for(;C<r;)p=d+_,v=p-d,m=d-(p-v)+(_-v),_=i[++C],d=p,m!==0&&(c[A++]=m);for(;T<a;)p=d+x,v=p-d,m=d-(p-v)+(x-v),x=l[++T],d=p,m!==0&&(c[A++]=m);return d===0&&A!==0||(c[A++]=d),A}function lu(r){return new Float64Array(r)}const Es=lu(4),Od=lu(8),Wa=lu(12),p_=lu(16),cr=lu(4);function Hc(r,i,a,l,c,d){const p=(i-d)*(a-c),m=(r-c)*(l-d),v=p-m;if(p===0||m===0||p>0!=m>0)return v;const _=Math.abs(p+m);return Math.abs(v)>=33306690738754716e-32*_?v:-function(x,C,T,A,U,I,P){let O,q,W,j,Y,Q,me,Se,le,ae,ie,ue,ee,re,de,ve,Ee,De;const He=x-U,tt=T-U,We=C-I,Lt=A-I;re=He*Lt,Q=ni*He,me=Q-(Q-He),Se=He-me,Q=ni*Lt,le=Q-(Q-Lt),ae=Lt-le,de=Se*ae-(re-me*le-Se*le-me*ae),ve=We*tt,Q=ni*We,me=Q-(Q-We),Se=We-me,Q=ni*tt,le=Q-(Q-tt),ae=tt-le,Ee=Se*ae-(ve-me*le-Se*le-me*ae),ie=de-Ee,Y=de-ie,Es[0]=de-(ie+Y)+(Y-Ee),ue=re+ie,Y=ue-re,ee=re-(ue-Y)+(ie-Y),ie=ee-ve,Y=ee-ie,Es[1]=ee-(ie+Y)+(Y-ve),De=ue+ie,Y=De-ue,Es[2]=ue-(De-Y)+(ie-Y),Es[3]=De;let It=function(io,zu){let Xa=zu[0];for(let Wh=1;Wh<io;Wh++)Xa+=zu[Wh];return Xa}(4,Es),mt=22204460492503146e-32*P;if(It>=mt||-It>=mt||(Y=x-He,O=x-(He+Y)+(Y-U),Y=T-tt,W=T-(tt+Y)+(Y-U),Y=C-We,q=C-(We+Y)+(Y-I),Y=A-Lt,j=A-(Lt+Y)+(Y-I),O===0&&q===0&&W===0&&j===0)||(mt=11093356479670487e-47*P+33306690738754706e-32*Math.abs(It),It+=He*j+Lt*O-(We*W+tt*q),It>=mt||-It>=mt))return It;re=O*Lt,Q=ni*O,me=Q-(Q-O),Se=O-me,Q=ni*Lt,le=Q-(Q-Lt),ae=Lt-le,de=Se*ae-(re-me*le-Se*le-me*ae),ve=q*tt,Q=ni*q,me=Q-(Q-q),Se=q-me,Q=ni*tt,le=Q-(Q-tt),ae=tt-le,Ee=Se*ae-(ve-me*le-Se*le-me*ae),ie=de-Ee,Y=de-ie,cr[0]=de-(ie+Y)+(Y-Ee),ue=re+ie,Y=ue-re,ee=re-(ue-Y)+(ie-Y),ie=ee-ve,Y=ee-ie,cr[1]=ee-(ie+Y)+(Y-ve),De=ue+ie,Y=De-ue,cr[2]=ue-(De-Y)+(ie-Y),cr[3]=De;const Et=jc(4,Es,4,cr,Od);re=He*j,Q=ni*He,me=Q-(Q-He),Se=He-me,Q=ni*j,le=Q-(Q-j),ae=j-le,de=Se*ae-(re-me*le-Se*le-me*ae),ve=We*W,Q=ni*We,me=Q-(Q-We),Se=We-me,Q=ni*W,le=Q-(Q-W),ae=W-le,Ee=Se*ae-(ve-me*le-Se*le-me*ae),ie=de-Ee,Y=de-ie,cr[0]=de-(ie+Y)+(Y-Ee),ue=re+ie,Y=ue-re,ee=re-(ue-Y)+(ie-Y),ie=ee-ve,Y=ee-ie,cr[1]=ee-(ie+Y)+(Y-ve),De=ue+ie,Y=De-ue,cr[2]=ue-(De-Y)+(ie-Y),cr[3]=De;const Tn=jc(Et,Od,4,cr,Wa);re=O*j,Q=ni*O,me=Q-(Q-O),Se=O-me,Q=ni*j,le=Q-(Q-j),ae=j-le,de=Se*ae-(re-me*le-Se*le-me*ae),ve=q*W,Q=ni*q,me=Q-(Q-q),Se=q-me,Q=ni*W,le=Q-(Q-W),ae=W-le,Ee=Se*ae-(ve-me*le-Se*le-me*ae),ie=de-Ee,Y=de-ie,cr[0]=de-(ie+Y)+(Y-Ee),ue=re+ie,Y=ue-re,ee=re-(ue-Y)+(ie-Y),ie=ee-ve,Y=ee-ie,cr[1]=ee-(ie+Y)+(Y-ve),De=ue+ie,Y=De-ue,cr[2]=ue-(De-Y)+(ie-Y),cr[3]=De;const nn=jc(Tn,Wa,4,cr,p_);return p_[nn-1]}(r,i,a,l,c,d,_)}const Am=Math.pow(2,-52),uu=new Uint32Array(512);class Rd{static from(i,a=g_,l=v_){const c=i.length,d=new Float64Array(2*c);for(let p=0;p<c;p++){const m=i[p];d[2*p]=a(m),d[2*p+1]=l(m)}return new Rd(d)}constructor(i){const a=i.length>>1;if(a>0&&typeof i[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=i;const l=Math.max(2*a-5,0);this._triangles=new Uint32Array(3*l),this._halfedges=new Int32Array(3*l),this._hashSize=Math.ceil(Math.sqrt(a)),this._hullPrev=new Uint32Array(a),this._hullNext=new Uint32Array(a),this._hullTri=new Uint32Array(a),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(a),this._dists=new Float64Array(a),this.update()}update(){const{coords:i,_hullPrev:a,_hullNext:l,_hullTri:c,_hullHash:d}=this,p=i.length>>1;let m=1/0,v=1/0,_=-1/0,x=-1/0;for(let ae=0;ae<p;ae++){const ie=i[2*ae],ue=i[2*ae+1];ie<m&&(m=ie),ue<v&&(v=ue),ie>_&&(_=ie),ue>x&&(x=ue),this._ids[ae]=ae}const C=(m+_)/2,T=(v+x)/2;let A,U,I,P=1/0;for(let ae=0;ae<p;ae++){const ie=Mm(C,T,i[2*ae],i[2*ae+1]);ie<P&&(A=ae,P=ie)}const O=i[2*A],q=i[2*A+1];P=1/0;for(let ae=0;ae<p;ae++){if(ae===A)continue;const ie=Mm(O,q,i[2*ae],i[2*ae+1]);ie<P&&ie>0&&(U=ae,P=ie)}let W=i[2*U],j=i[2*U+1],Y=1/0;for(let ae=0;ae<p;ae++){if(ae===A||ae===U)continue;const ie=m_(O,q,W,j,i[2*ae],i[2*ae+1]);ie<Y&&(I=ae,Y=ie)}let Q=i[2*I],me=i[2*I+1];if(Y===1/0){for(let ue=0;ue<p;ue++)this._dists[ue]=i[2*ue]-i[0]||i[2*ue+1]-i[1];dl(this._ids,this._dists,0,p-1);const ae=new Uint32Array(p);let ie=0;for(let ue=0,ee=-1/0;ue<p;ue++){const re=this._ids[ue];this._dists[re]>ee&&(ae[ie++]=re,ee=this._dists[re])}return this.hull=ae.subarray(0,ie),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Hc(O,q,W,j,Q,me)<0){const ae=U,ie=W,ue=j;U=I,W=Q,j=me,I=ae,Q=ie,me=ue}const Se=function(ae,ie,ue,ee,re,de){const ve=ue-ae,Ee=ee-ie,De=re-ae,He=de-ie,tt=ve*ve+Ee*Ee,We=De*De+He*He,Lt=.5/(ve*He-Ee*De);return{x:ae+(He*tt-Ee*We)*Lt,y:ie+(ve*We-De*tt)*Lt}}(O,q,W,j,Q,me);this._cx=Se.x,this._cy=Se.y;for(let ae=0;ae<p;ae++)this._dists[ae]=Mm(i[2*ae],i[2*ae+1],Se.x,Se.y);dl(this._ids,this._dists,0,p-1),this._hullStart=A;let le=3;l[A]=a[I]=U,l[U]=a[A]=I,l[I]=a[U]=A,c[A]=0,c[U]=1,c[I]=2,d.fill(-1),d[this._hashKey(O,q)]=A,d[this._hashKey(W,j)]=U,d[this._hashKey(Q,me)]=I,this.trianglesLen=0,this._addTriangle(A,U,I,-1,-1,-1);for(let ae,ie,ue=0;ue<this._ids.length;ue++){const ee=this._ids[ue],re=i[2*ee],de=i[2*ee+1];if(ue>0&&Math.abs(re-ae)<=Am&&Math.abs(de-ie)<=Am||(ae=re,ie=de,ee===A||ee===U||ee===I))continue;let ve=0;for(let We=0,Lt=this._hashKey(re,de);We<this._hashSize&&(ve=d[(Lt+We)%this._hashSize],ve===-1||ve===l[ve]);We++);ve=a[ve];let Ee,De=ve;for(;Ee=l[De],Hc(re,de,i[2*De],i[2*De+1],i[2*Ee],i[2*Ee+1])>=0;)if(De=Ee,De===ve){De=-1;break}if(De===-1)continue;let He=this._addTriangle(De,ee,l[De],-1,-1,c[De]);c[ee]=this._legalize(He+2),c[De]=He,le++;let tt=l[De];for(;Ee=l[tt],Hc(re,de,i[2*tt],i[2*tt+1],i[2*Ee],i[2*Ee+1])<0;)He=this._addTriangle(tt,ee,Ee,c[ee],-1,c[tt]),c[ee]=this._legalize(He+2),l[tt]=tt,le--,tt=Ee;if(De===ve)for(;Ee=a[De],Hc(re,de,i[2*Ee],i[2*Ee+1],i[2*De],i[2*De+1])<0;)He=this._addTriangle(Ee,ee,De,-1,c[De],c[Ee]),this._legalize(He+2),c[Ee]=He,l[De]=De,le--,De=Ee;this._hullStart=a[ee]=De,l[De]=a[tt]=ee,l[ee]=tt,d[this._hashKey(re,de)]=ee,d[this._hashKey(i[2*De],i[2*De+1])]=De}this.hull=new Uint32Array(le);for(let ae=0,ie=this._hullStart;ae<le;ae++)this.hull[ae]=ie,ie=l[ie];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(i,a){return Math.floor(function(l,c){const d=l/(Math.abs(l)+Math.abs(c));return(c>0?3-d:1+d)/4}(i-this._cx,a-this._cy)*this._hashSize)%this._hashSize}_legalize(i){const{_triangles:a,_halfedges:l,coords:c}=this;let d=0,p=0;for(;;){const m=l[i],v=i-i%3;if(p=v+(i+2)%3,m===-1){if(d===0)break;i=uu[--d];continue}const _=m-m%3,x=v+(i+1)%3,C=_+(m+2)%3,T=a[p],A=a[i],U=a[x],I=a[C];if(wb(c[2*T],c[2*T+1],c[2*A],c[2*A+1],c[2*U],c[2*U+1],c[2*I],c[2*I+1])){a[i]=I,a[m]=T;const P=l[C];if(P===-1){let q=this._hullStart;do{if(this._hullTri[q]===C){this._hullTri[q]=i;break}q=this._hullPrev[q]}while(q!==this._hullStart)}this._link(i,P),this._link(m,l[p]),this._link(p,C);const O=_+(m+1)%3;d<uu.length&&(uu[d++]=O)}else{if(d===0)break;i=uu[--d]}}return p}_link(i,a){this._halfedges[i]=a,a!==-1&&(this._halfedges[a]=i)}_addTriangle(i,a,l,c,d,p){const m=this.trianglesLen;return this._triangles[m]=i,this._triangles[m+1]=a,this._triangles[m+2]=l,this._link(m,c),this._link(m+1,d),this._link(m+2,p),this.trianglesLen+=3,m}}function Mm(r,i,a,l){const c=r-a,d=i-l;return c*c+d*d}function wb(r,i,a,l,c,d,p,m){const v=r-p,_=i-m,x=a-p,C=l-m,T=c-p,A=d-m,U=x*x+C*C,I=T*T+A*A;return v*(C*I-U*A)-_*(x*I-U*T)+(v*v+_*_)*(x*A-C*T)<0}function m_(r,i,a,l,c,d){const p=a-r,m=l-i,v=c-r,_=d-i,x=p*p+m*m,C=v*v+_*_,T=.5/(p*_-m*v),A=(_*x-m*C)*T,U=(p*C-v*x)*T;return A*A+U*U}function dl(r,i,a,l){if(l-a<=20)for(let c=a+1;c<=l;c++){const d=r[c],p=i[d];let m=c-1;for(;m>=a&&i[r[m]]>p;)r[m+1]=r[m--];r[m+1]=d}else{let c=a+1,d=l;Wc(r,a+l>>1,c),i[r[a]]>i[r[l]]&&Wc(r,a,l),i[r[c]]>i[r[l]]&&Wc(r,c,l),i[r[a]]>i[r[c]]&&Wc(r,a,c);const p=r[c],m=i[p];for(;;){do c++;while(i[r[c]]<m);do d--;while(i[r[d]]>m);if(d<c)break;Wc(r,c,d)}r[a+1]=r[d],r[d]=p,l-c+1>=d-a?(dl(r,i,c,l),dl(r,i,a,d-1)):(dl(r,i,a,d-1),dl(r,i,c,l))}}function Wc(r,i,a){const l=r[i];r[i]=r[a],r[a]=l}function g_(r){return r[0]}function v_(r){return r[1]}const Si=1e-6;class hi{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(i,a){this._+=`M${this._x0=this._x1=+i},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(i,a){this._+=`L${this._x1=+i},${this._y1=+a}`}arc(i,a,l){const c=(i=+i)+(l=+l),d=a=+a;if(l<0)throw new Error("negative radius");this._x1===null?this._+=`M${c},${d}`:(Math.abs(this._x1-c)>Si||Math.abs(this._y1-d)>Si)&&(this._+="L"+c+","+d),l&&(this._+=`A${l},${l},0,1,1,${i-l},${a}A${l},${l},0,1,1,${this._x1=c},${this._y1=d}`)}rect(i,a,l,c){this._+=`M${this._x0=this._x1=+i},${this._y0=this._y1=+a}h${+l}v${+c}h${-l}Z`}value(){return this._||null}}class Nm{constructor(){this._=[]}moveTo(i,a){this._.push([i,a])}closePath(){this._.push(this._[0].slice())}lineTo(i,a){this._.push([i,a])}value(){return this._.length?this._:null}}class __{constructor(i,[a,l,c,d]=[0,0,960,500]){if(!((c=+c)>=(a=+a)&&(d=+d)>=(l=+l)))throw new Error("invalid bounds");this.delaunay=i,this._circumcenters=new Float64Array(2*i.points.length),this.vectors=new Float64Array(2*i.points.length),this.xmax=c,this.xmin=a,this.ymax=d,this.ymin=l,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:i,hull:a,triangles:l},vectors:c}=this,d=this.circumcenters=this._circumcenters.subarray(0,l.length/3*2);for(let A,U,I=0,P=0,O=l.length;I<O;I+=3,P+=2){const q=2*l[I],W=2*l[I+1],j=2*l[I+2],Y=i[q],Q=i[q+1],me=i[W],Se=i[W+1],le=i[j],ae=i[j+1],ie=me-Y,ue=Se-Q,ee=le-Y,re=ae-Q,de=2*(ie*re-ue*ee);if(Math.abs(de)<1e-9){let ve=1e9;const Ee=2*l[0];ve*=Math.sign((i[Ee]-Y)*re-(i[Ee+1]-Q)*ee),A=(Y+le)/2-ve*re,U=(Q+ae)/2+ve*ee}else{const ve=1/de,Ee=ie*ie+ue*ue,De=ee*ee+re*re;A=Y+(re*Ee-ue*De)*ve,U=Q+(ie*De-ee*Ee)*ve}d[P]=A,d[P+1]=U}let p,m,v,_=a[a.length-1],x=4*_,C=i[2*_],T=i[2*_+1];c.fill(0);for(let A=0;A<a.length;++A)_=a[A],p=x,m=C,v=T,x=4*_,C=i[2*_],T=i[2*_+1],c[p+2]=c[x]=v-T,c[p+3]=c[x+1]=C-m}render(i){const a=i==null?i=new hi:void 0,{delaunay:{halfedges:l,inedges:c,hull:d},circumcenters:p,vectors:m}=this;if(d.length<=1)return null;for(let x=0,C=l.length;x<C;++x){const T=l[x];if(T<x)continue;const A=2*Math.floor(x/3),U=2*Math.floor(T/3),I=p[A],P=p[A+1],O=p[U],q=p[U+1];this._renderSegment(I,P,O,q,i)}let v,_=d[d.length-1];for(let x=0;x<d.length;++x){v=_,_=d[x];const C=2*Math.floor(c[_]/3),T=p[C],A=p[C+1],U=4*v,I=this._project(T,A,m[U+2],m[U+3]);I&&this._renderSegment(T,A,I[0],I[1],i)}return a&&a.value()}renderBounds(i){const a=i==null?i=new hi:void 0;return i.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),a&&a.value()}renderCell(i,a){const l=a==null?a=new hi:void 0,c=this._clip(i);if(c===null||!c.length)return;a.moveTo(c[0],c[1]);let d=c.length;for(;c[0]===c[d-2]&&c[1]===c[d-1]&&d>1;)d-=2;for(let p=2;p<d;p+=2)c[p]===c[p-2]&&c[p+1]===c[p-1]||a.lineTo(c[p],c[p+1]);return a.closePath(),l&&l.value()}*cellPolygons(){const{delaunay:{points:i}}=this;for(let a=0,l=i.length/2;a<l;++a){const c=this.cellPolygon(a);c&&(c.index=a,yield c)}}cellPolygon(i){const a=new Nm;return this.renderCell(i,a),a.value()}_renderSegment(i,a,l,c,d){let p;const m=this._regioncode(i,a),v=this._regioncode(l,c);m===0&&v===0?(d.moveTo(i,a),d.lineTo(l,c)):(p=this._clipSegment(i,a,l,c,m,v))&&(d.moveTo(p[0],p[1]),d.lineTo(p[2],p[3]))}contains(i,a,l){return(a=+a)==a&&(l=+l)==l&&this.delaunay._step(i,a,l)===i}*neighbors(i){const a=this._clip(i);if(a)for(const l of this.delaunay.neighbors(i)){const c=this._clip(l);if(c){e:for(let d=0,p=a.length;d<p;d+=2)for(let m=0,v=c.length;m<v;m+=2)if(a[d]==c[m]&&a[d+1]==c[m+1]&&a[(d+2)%p]==c[(m+v-2)%v]&&a[(d+3)%p]==c[(m+v-1)%v]){yield l;break e}}}}_cell(i){const{circumcenters:a,delaunay:{inedges:l,halfedges:c,triangles:d}}=this,p=l[i];if(p===-1)return null;const m=[];let v=p;do{const _=Math.floor(v/3);if(m.push(a[2*_],a[2*_+1]),v=v%3==2?v-2:v+1,d[v]!==i)break;v=c[v]}while(v!==p&&v!==-1);return m}_clip(i){if(i===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const a=this._cell(i);if(a===null)return null;const{vectors:l}=this,c=4*i;return l[c]||l[c+1]?this._clipInfinite(i,a,l[c],l[c+1],l[c+2],l[c+3]):this._clipFinite(i,a)}_clipFinite(i,a){const l=a.length;let c,d,p,m,v=null,_=a[l-2],x=a[l-1],C=this._regioncode(_,x),T=0;for(let A=0;A<l;A+=2)if(c=_,d=x,_=a[A],x=a[A+1],p=C,C=this._regioncode(_,x),p===0&&C===0)m=T,T=0,v?v.push(_,x):v=[_,x];else{let U,I,P,O,q;if(p===0){if((U=this._clipSegment(c,d,_,x,p,C))===null)continue;[I,P,O,q]=U}else{if((U=this._clipSegment(_,x,c,d,C,p))===null)continue;[O,q,I,P]=U,m=T,T=this._edgecode(I,P),m&&T&&this._edge(i,m,T,v,v.length),v?v.push(I,P):v=[I,P]}m=T,T=this._edgecode(O,q),m&&T&&this._edge(i,m,T,v,v.length),v?v.push(O,q):v=[O,q]}if(v)m=T,T=this._edgecode(v[0],v[1]),m&&T&&this._edge(i,m,T,v,v.length);else if(this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return v}_clipSegment(i,a,l,c,d,p){for(;;){if(d===0&&p===0)return[i,a,l,c];if(d&p)return null;let m,v,_=d||p;8&_?(m=i+(l-i)*(this.ymax-a)/(c-a),v=this.ymax):4&_?(m=i+(l-i)*(this.ymin-a)/(c-a),v=this.ymin):2&_?(v=a+(c-a)*(this.xmax-i)/(l-i),m=this.xmax):(v=a+(c-a)*(this.xmin-i)/(l-i),m=this.xmin),d?(i=m,a=v,d=this._regioncode(i,a)):(l=m,c=v,p=this._regioncode(l,c))}}_clipInfinite(i,a,l,c,d,p){let m,v=Array.from(a);if((m=this._project(v[0],v[1],l,c))&&v.unshift(m[0],m[1]),(m=this._project(v[v.length-2],v[v.length-1],d,p))&&v.push(m[0],m[1]),v=this._clipFinite(i,v))for(let _,x=0,C=v.length,T=this._edgecode(v[C-2],v[C-1]);x<C;x+=2)_=T,T=this._edgecode(v[x],v[x+1]),_&&T&&(x=this._edge(i,_,T,v,x),C=v.length);else this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(v=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return v}_edge(i,a,l,c,d){for(;a!==l;){let p,m;switch(a){case 5:a=4;continue;case 4:a=6,p=this.xmax,m=this.ymin;break;case 6:a=2;continue;case 2:a=10,p=this.xmax,m=this.ymax;break;case 10:a=8;continue;case 8:a=9,p=this.xmin,m=this.ymax;break;case 9:a=1;continue;case 1:a=5,p=this.xmin,m=this.ymin}c[d]===p&&c[d+1]===m||!this.contains(i,p,m)||(c.splice(d,0,p,m),d+=2)}if(c.length>4)for(let p=0;p<c.length;p+=2){const m=(p+2)%c.length,v=(p+4)%c.length;(c[p]===c[m]&&c[m]===c[v]||c[p+1]===c[m+1]&&c[m+1]===c[v+1])&&(c.splice(m,2),p-=2)}return d}_project(i,a,l,c){let d,p,m,v=1/0;if(c<0){if(a<=this.ymin)return null;(d=(this.ymin-a)/c)<v&&(m=this.ymin,p=i+(v=d)*l)}else if(c>0){if(a>=this.ymax)return null;(d=(this.ymax-a)/c)<v&&(m=this.ymax,p=i+(v=d)*l)}if(l>0){if(i>=this.xmax)return null;(d=(this.xmax-i)/l)<v&&(p=this.xmax,m=a+(v=d)*c)}else if(l<0){if(i<=this.xmin)return null;(d=(this.xmin-i)/l)<v&&(p=this.xmin,m=a+(v=d)*c)}return[p,m]}_edgecode(i,a){return(i===this.xmin?1:i===this.xmax?2:0)|(a===this.ymin?4:a===this.ymax?8:0)}_regioncode(i,a){return(i<this.xmin?1:i>this.xmax?2:0)|(a<this.ymin?4:a>this.ymax?8:0)}}const Dd=2*Math.PI,Vo=Math.pow;function y_(r){return r[0]}function w_(r){return r[1]}function bb(r,i,a){return[r+Math.sin(r+i)*a,i+Math.cos(r-i)*a]}class zd{static from(i,a=y_,l=w_,c){return new zd("length"in i?function(d,p,m,v){const _=d.length,x=new Float64Array(2*_);for(let C=0;C<_;++C){const T=d[C];x[2*C]=p.call(v,T,C,d),x[2*C+1]=m.call(v,T,C,d)}return x}(i,a,l,c):Float64Array.from(function*(d,p,m,v){let _=0;for(const x of d)yield p.call(v,x,_,d),yield m.call(v,x,_,d),++_}(i,a,l,c)))}constructor(i){this._delaunator=new Rd(i),this.inedges=new Int32Array(i.length/2),this._hullIndex=new Int32Array(i.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const i=this._delaunator,a=this.points;if(i.hull&&i.hull.length>2&&function(v){const{triangles:_,coords:x}=v;for(let C=0;C<_.length;C+=3){const T=2*_[C],A=2*_[C+1],U=2*_[C+2];if((x[U]-x[T])*(x[A+1]-x[T+1])-(x[A]-x[T])*(x[U+1]-x[T+1])>1e-10)return!1}return!0}(i)){this.collinear=Int32Array.from({length:a.length/2},(T,A)=>A).sort((T,A)=>a[2*T]-a[2*A]||a[2*T+1]-a[2*A+1]);const v=this.collinear[0],_=this.collinear[this.collinear.length-1],x=[a[2*v],a[2*v+1],a[2*_],a[2*_+1]],C=1e-8*Math.hypot(x[3]-x[1],x[2]-x[0]);for(let T=0,A=a.length/2;T<A;++T){const U=bb(a[2*T],a[2*T+1],C);a[2*T]=U[0],a[2*T+1]=U[1]}this._delaunator=new Rd(a)}else delete this.collinear;const l=this.halfedges=this._delaunator.halfedges,c=this.hull=this._delaunator.hull,d=this.triangles=this._delaunator.triangles,p=this.inedges.fill(-1),m=this._hullIndex.fill(-1);for(let v=0,_=l.length;v<_;++v){const x=d[v%3==2?v-2:v+1];l[v]!==-1&&p[x]!==-1||(p[x]=v)}for(let v=0,_=c.length;v<_;++v)m[c[v]]=v;c.length<=2&&c.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=c[0],p[c[0]]=1,c.length===2&&(p[c[1]]=0,this.triangles[1]=c[1],this.triangles[2]=c[1]))}voronoi(i){return new __(this,i)}*neighbors(i){const{inedges:a,hull:l,_hullIndex:c,halfedges:d,triangles:p,collinear:m}=this;if(m){const C=m.indexOf(i);return C>0&&(yield m[C-1]),void(C<m.length-1&&(yield m[C+1]))}const v=a[i];if(v===-1)return;let _=v,x=-1;do{if(yield x=p[_],_=_%3==2?_-2:_+1,p[_]!==i)return;if(_=d[_],_===-1){const C=l[(c[i]+1)%l.length];return void(C!==x&&(yield C))}}while(_!==v)}find(i,a,l=0){if((i=+i)!=i||(a=+a)!=a)return-1;const c=l;let d;for(;(d=this._step(l,i,a))>=0&&d!==l&&d!==c;)l=d;return d}_step(i,a,l){const{inedges:c,hull:d,_hullIndex:p,halfedges:m,triangles:v,points:_}=this;if(c[i]===-1||!_.length)return(i+1)%(_.length>>1);let x=i,C=Vo(a-_[2*i],2)+Vo(l-_[2*i+1],2);const T=c[i];let A=T;do{let U=v[A];const I=Vo(a-_[2*U],2)+Vo(l-_[2*U+1],2);if(I<C&&(C=I,x=U),A=A%3==2?A-2:A+1,v[A]!==i)break;if(A=m[A],A===-1){if(A=d[(p[i]+1)%d.length],A!==U&&Vo(a-_[2*A],2)+Vo(l-_[2*A+1],2)<C)return A;break}}while(A!==T);return x}render(i){const a=i==null?i=new hi:void 0,{points:l,halfedges:c,triangles:d}=this;for(let p=0,m=c.length;p<m;++p){const v=c[p];if(v<p)continue;const _=2*d[p],x=2*d[v];i.moveTo(l[_],l[_+1]),i.lineTo(l[x],l[x+1])}return this.renderHull(i),a&&a.value()}renderPoints(i,a){a!==void 0||i&&typeof i.moveTo=="function"||(a=i,i=null),a=a==null?2:+a;const l=i==null?i=new hi:void 0,{points:c}=this;for(let d=0,p=c.length;d<p;d+=2){const m=c[d],v=c[d+1];i.moveTo(m+a,v),i.arc(m,v,a,0,Dd)}return l&&l.value()}renderHull(i){const a=i==null?i=new hi:void 0,{hull:l,points:c}=this,d=2*l[0],p=l.length;i.moveTo(c[d],c[d+1]);for(let m=1;m<p;++m){const v=2*l[m];i.lineTo(c[v],c[v+1])}return i.closePath(),a&&a.value()}hullPolygon(){const i=new Nm;return this.renderHull(i),i.value()}renderTriangle(i,a){const l=a==null?a=new hi:void 0,{points:c,triangles:d}=this,p=2*d[i*=3],m=2*d[i+1],v=2*d[i+2];return a.moveTo(c[p],c[p+1]),a.lineTo(c[m],c[m+1]),a.lineTo(c[v],c[v+1]),a.closePath(),l&&l.value()}*trianglePolygons(){const{triangles:i}=this;for(let a=0,l=i.length/3;a<l;++a)yield this.trianglePolygon(a)}trianglePolygon(i){const a=new Nm;return this.renderTriangle(i,a),a.value()}}var hl={},pl={};function b_(r){return new Function("d","return {"+r.map(function(i,a){return JSON.stringify(i)+": d["+a+'] || ""'}).join(",")+"}")}function Lm(r){var i=Object.create(null),a=[];return r.forEach(function(l){for(var c in l)c in i||a.push(i[c]=c)}),a}function Ei(r,i){var a=r+"",l=a.length;return l<i?new Array(i-l+1).join(0)+a:a}function Ud(r){var i=r.getUTCHours(),a=r.getUTCMinutes(),l=r.getUTCSeconds(),c=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":function(d){return d<0?"-"+Ei(-d,6):d>9999?"+"+Ei(d,6):Ei(d,4)}(r.getUTCFullYear())+"-"+Ei(r.getUTCMonth()+1,2)+"-"+Ei(r.getUTCDate(),2)+(c?"T"+Ei(i,2)+":"+Ei(a,2)+":"+Ei(l,2)+"."+Ei(c,3)+"Z":l?"T"+Ei(i,2)+":"+Ei(a,2)+":"+Ei(l,2)+"Z":a||i?"T"+Ei(i,2)+":"+Ei(a,2)+"Z":"")}function Vc(r){var i=new RegExp('["'+r+`
\r]`),a=r.charCodeAt(0);function l(m,v){var _,x=[],C=m.length,T=0,A=0,U=C<=0,I=!1;function P(){if(U)return pl;if(I)return I=!1,hl;var q,W,j=T;if(m.charCodeAt(j)===34){for(;T++<C&&m.charCodeAt(T)!==34||m.charCodeAt(++T)===34;);return(q=T)>=C?U=!0:(W=m.charCodeAt(T++))===10?I=!0:W===13&&(I=!0,m.charCodeAt(T)===10&&++T),m.slice(j+1,q-1).replace(/""/g,'"')}for(;T<C;){if((W=m.charCodeAt(q=T++))===10)I=!0;else if(W===13)I=!0,m.charCodeAt(T)===10&&++T;else if(W!==a)continue;return m.slice(j,q)}return U=!0,m.slice(j,C)}for(m.charCodeAt(C-1)===10&&--C,m.charCodeAt(C-1)===13&&--C;(_=P())!==pl;){for(var O=[];_!==hl&&_!==pl;)O.push(_),_=P();v&&(O=v(O,A++))==null||x.push(O)}return x}function c(m,v){return m.map(function(_){return v.map(function(x){return p(_[x])}).join(r)})}function d(m){return m.map(p).join(r)}function p(m){return m==null?"":m instanceof Date?Ud(m):i.test(m+="")?'"'+m.replace(/"/g,'""')+'"':m}return{parse:function(m,v){var _,x,C=l(m,function(T,A){if(_)return _(T,A-1);x=T,_=v?function(U,I){var P=b_(U);return function(O,q){return I(P(O),q,U)}}(T,v):b_(T)});return C.columns=x||[],C},parseRows:l,format:function(m,v){return v==null&&(v=Lm(m)),[v.map(p).join(r)].concat(c(m,v)).join(`
`)},formatBody:function(m,v){return v==null&&(v=Lm(m)),c(m,v).join(`
`)},formatRows:function(m){return m.map(d).join(`
`)},formatRow:d,formatValue:p}}var da=Vc(","),Fd=da.parse,Bd=da.parseRows,xb=da.format,x_=da.formatBody,$d=da.formatRows,S_=da.formatRow,Pm=da.formatValue,ml=Vc("	"),Im=ml.parse,Va=ml.parseRows,E_=ml.format,T_=ml.formatBody,Sb=ml.formatRows,C_=ml.formatRow,Eb=ml.formatValue;const Tb=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Za(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.blob()}function Om(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.arrayBuffer()}function Rm(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);return r.text()}function cu(r,i){return fetch(r,i).then(Rm)}function Zc(r){return function(i,a,l){return arguments.length===2&&typeof a=="function"&&(l=a,a=void 0),cu(i,a).then(function(c){return r(c,l)})}}var fu=Zc(Fd),Ut=Zc(Im);function jd(r){if(!r.ok)throw new Error(r.status+" "+r.statusText);if(r.status!==204&&r.status!==205)return r.json()}function qc(r){return(i,a)=>cu(i,a).then(l=>new DOMParser().parseFromString(l,r))}var gl=qc("application/xml"),Cb=qc("text/html"),Dm=qc("image/svg+xml");function zm(r,i,a,l){if(isNaN(i)||isNaN(a))return r;var c,d,p,m,v,_,x,C,T,A=r._root,U={data:l},I=r._x0,P=r._y0,O=r._x1,q=r._y1;if(!A)return r._root=U,r;for(;A.length;)if((_=i>=(d=(I+O)/2))?I=d:O=d,(x=a>=(p=(P+q)/2))?P=p:q=p,c=A,!(A=A[C=x<<1|_]))return c[C]=U,r;if(m=+r._x.call(null,A.data),v=+r._y.call(null,A.data),i===m&&a===v)return U.next=A,c?c[C]=U:r._root=U,r;do c=c?c[C]=new Array(4):r._root=new Array(4),(_=i>=(d=(I+O)/2))?I=d:O=d,(x=a>=(p=(P+q)/2))?P=p:q=p;while((C=x<<1|_)==(T=(v>=p)<<1|m>=d));return c[T]=A,c[C]=U,r}function In(r,i,a,l,c){this.node=r,this.x0=i,this.y0=a,this.x1=l,this.y1=c}function kb(r){return r[0]}function Ab(r){return r[1]}function Gc(r,i,a){var l=new Um(i??kb,a??Ab,NaN,NaN,NaN,NaN);return r==null?l:l.addAll(r)}function Um(r,i,a,l,c,d){this._x=r,this._y=i,this._x0=a,this._y0=l,this._x1=c,this._y1=d,this._root=void 0}function Fm(r){for(var i={data:r.data},a=i;r=r.next;)a=a.next={data:r.data};return i}var Ti=Gc.prototype=Um.prototype;function Or(r){return function(){return r}}function Ts(r){return 1e-6*(r()-.5)}function qa(r){return r.x+r.vx}function Ci(r){return r.y+r.vy}function Bm(r){return r.index}function k_(r,i){var a=r.get(i);if(!a)throw new Error("node not found: "+i);return a}Ti.copy=function(){var r,i,a=new Um(this._x,this._y,this._x0,this._y0,this._x1,this._y1),l=this._root;if(!l)return a;if(!l.length)return a._root=Fm(l),a;for(r=[{source:l,target:a._root=new Array(4)}];l=r.pop();)for(var c=0;c<4;++c)(i=l.source[c])&&(i.length?r.push({source:i,target:l.target[c]=new Array(4)}):l.target[c]=Fm(i));return a},Ti.add=function(r){const i=+this._x.call(null,r),a=+this._y.call(null,r);return zm(this.cover(i,a),i,a,r)},Ti.addAll=function(r){var i,a,l,c,d=r.length,p=new Array(d),m=new Array(d),v=1/0,_=1/0,x=-1/0,C=-1/0;for(a=0;a<d;++a)isNaN(l=+this._x.call(null,i=r[a]))||isNaN(c=+this._y.call(null,i))||(p[a]=l,m[a]=c,l<v&&(v=l),l>x&&(x=l),c<_&&(_=c),c>C&&(C=c));if(v>x||_>C)return this;for(this.cover(v,_).cover(x,C),a=0;a<d;++a)zm(this,p[a],m[a],r[a]);return this},Ti.cover=function(r,i){if(isNaN(r=+r)||isNaN(i=+i))return this;var a=this._x0,l=this._y0,c=this._x1,d=this._y1;if(isNaN(a))c=(a=Math.floor(r))+1,d=(l=Math.floor(i))+1;else{for(var p,m,v=c-a||1,_=this._root;a>r||r>=c||l>i||i>=d;)switch(m=(i<l)<<1|r<a,(p=new Array(4))[m]=_,_=p,v*=2,m){case 0:c=a+v,d=l+v;break;case 1:a=c-v,d=l+v;break;case 2:c=a+v,l=d-v;break;case 3:a=c-v,l=d-v}this._root&&this._root.length&&(this._root=_)}return this._x0=a,this._y0=l,this._x1=c,this._y1=d,this},Ti.data=function(){var r=[];return this.visit(function(i){if(!i.length)do r.push(i.data);while(i=i.next)}),r},Ti.extent=function(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ti.find=function(r,i,a){var l,c,d,p,m,v,_,x=this._x0,C=this._y0,T=this._x1,A=this._y1,U=[],I=this._root;for(I&&U.push(new In(I,x,C,T,A)),a==null?a=1/0:(x=r-a,C=i-a,T=r+a,A=i+a,a*=a);v=U.pop();)if(!(!(I=v.node)||(c=v.x0)>T||(d=v.y0)>A||(p=v.x1)<x||(m=v.y1)<C))if(I.length){var P=(c+p)/2,O=(d+m)/2;U.push(new In(I[3],P,O,p,m),new In(I[2],c,O,P,m),new In(I[1],P,d,p,O),new In(I[0],c,d,P,O)),(_=(i>=O)<<1|r>=P)&&(v=U[U.length-1],U[U.length-1]=U[U.length-1-_],U[U.length-1-_]=v)}else{var q=r-+this._x.call(null,I.data),W=i-+this._y.call(null,I.data),j=q*q+W*W;if(j<a){var Y=Math.sqrt(a=j);x=r-Y,C=i-Y,T=r+Y,A=i+Y,l=I.data}}return l},Ti.remove=function(r){if(isNaN(d=+this._x.call(null,r))||isNaN(p=+this._y.call(null,r)))return this;var i,a,l,c,d,p,m,v,_,x,C,T,A=this._root,U=this._x0,I=this._y0,P=this._x1,O=this._y1;if(!A)return this;if(A.length)for(;;){if((_=d>=(m=(U+P)/2))?U=m:P=m,(x=p>=(v=(I+O)/2))?I=v:O=v,i=A,!(A=A[C=x<<1|_]))return this;if(!A.length)break;(i[C+1&3]||i[C+2&3]||i[C+3&3])&&(a=i,T=C)}for(;A.data!==r;)if(l=A,!(A=A.next))return this;return(c=A.next)&&delete A.next,l?(c?l.next=c:delete l.next,this):i?(c?i[C]=c:delete i[C],(A=i[0]||i[1]||i[2]||i[3])&&A===(i[3]||i[2]||i[1]||i[0])&&!A.length&&(a?a[T]=A:this._root=A),this):(this._root=c,this)},Ti.removeAll=function(r){for(var i=0,a=r.length;i<a;++i)this.remove(r[i]);return this},Ti.root=function(){return this._root},Ti.size=function(){var r=0;return this.visit(function(i){if(!i.length)do++r;while(i=i.next)}),r},Ti.visit=function(r){var i,a,l,c,d,p,m=[],v=this._root;for(v&&m.push(new In(v,this._x0,this._y0,this._x1,this._y1));i=m.pop();)if(!r(v=i.node,l=i.x0,c=i.y0,d=i.x1,p=i.y1)&&v.length){var _=(l+d)/2,x=(c+p)/2;(a=v[3])&&m.push(new In(a,_,x,d,p)),(a=v[2])&&m.push(new In(a,l,x,_,p)),(a=v[1])&&m.push(new In(a,_,c,d,x)),(a=v[0])&&m.push(new In(a,l,c,_,x))}return this},Ti.visitAfter=function(r){var i,a=[],l=[];for(this._root&&a.push(new In(this._root,this._x0,this._y0,this._x1,this._y1));i=a.pop();){var c=i.node;if(c.length){var d,p=i.x0,m=i.y0,v=i.x1,_=i.y1,x=(p+v)/2,C=(m+_)/2;(d=c[0])&&a.push(new In(d,p,m,x,C)),(d=c[1])&&a.push(new In(d,x,m,v,C)),(d=c[2])&&a.push(new In(d,p,C,x,_)),(d=c[3])&&a.push(new In(d,x,C,v,_))}l.push(i)}for(;i=l.pop();)r(i.node,i.x0,i.y0,i.x1,i.y1);return this},Ti.x=function(r){return arguments.length?(this._x=r,this):this._x},Ti.y=function(r){return arguments.length?(this._y=r,this):this._y};const Hd=4294967296;function Mb(r){return r.x}function Nb(r){return r.y}var Yc=Math.PI*(3-Math.sqrt(5));function Kc(r,i){if((a=(r=i?r.toExponential(i-1):r.toExponential()).indexOf("e"))<0)return null;var a,l=r.slice(0,a);return[l.length>1?l[0]+l.slice(2):l,+r.slice(a+1)]}function vl(r){return(r=Kc(Math.abs(r)))?r[1]:NaN}var A_,Lb=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function du(r){if(!(i=Lb.exec(r)))throw new Error("invalid format: "+r);var i;return new Wd({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function Wd(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}function $m(r,i){var a=Kc(r,i);if(!a)return r+"";var l=a[0],c=a[1];return c<0?"0."+new Array(-c).join("0")+l:l.length>c+1?l.slice(0,c+1)+"."+l.slice(c+1):l+new Array(c-l.length+2).join("0")}du.prototype=Wd.prototype,Wd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var jm={"%":(r,i)=>(100*r).toFixed(i),b:r=>Math.round(r).toString(2),c:r=>r+"",d:function(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)},e:(r,i)=>r.toExponential(i),f:(r,i)=>r.toFixed(i),g:(r,i)=>r.toPrecision(i),o:r=>Math.round(r).toString(8),p:(r,i)=>$m(100*r,i),r:$m,s:function(r,i){var a=Kc(r,i);if(!a)return r+"";var l=a[0],c=a[1],d=c-(A_=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1,p=l.length;return d===p?l:d>p?l+new Array(d-p+1).join("0"):d>0?l.slice(0,d)+"."+l.slice(d):"0."+new Array(1-d).join("0")+Kc(r,Math.max(0,i+d-1))[0]},X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function M_(r){return r}var hu,Hm=Array.prototype.map,pu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Vd(r){var i,a,l=r.grouping===void 0||r.thousands===void 0?M_:(i=Hm.call(r.grouping,Number),a=r.thousands+"",function(T,A){for(var U=T.length,I=[],P=0,O=i[0],q=0;U>0&&O>0&&(q+O+1>A&&(O=Math.max(1,A-q)),I.push(T.substring(U-=O,U+O)),!((q+=O+1)>A));)O=i[P=(P+1)%i.length];return I.reverse().join(a)}),c=r.currency===void 0?"":r.currency[0]+"",d=r.currency===void 0?"":r.currency[1]+"",p=r.decimal===void 0?".":r.decimal+"",m=r.numerals===void 0?M_:function(T){return function(A){return A.replace(/[0-9]/g,function(U){return T[+U]})}}(Hm.call(r.numerals,String)),v=r.percent===void 0?"%":r.percent+"",_=r.minus===void 0?"":r.minus+"",x=r.nan===void 0?"NaN":r.nan+"";function C(T){var A=(T=du(T)).fill,U=T.align,I=T.sign,P=T.symbol,O=T.zero,q=T.width,W=T.comma,j=T.precision,Y=T.trim,Q=T.type;Q==="n"?(W=!0,Q="g"):jm[Q]||(j===void 0&&(j=12),Y=!0,Q="g"),(O||A==="0"&&U==="=")&&(O=!0,A="0",U="=");var me=P==="$"?c:P==="#"&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",Se=P==="$"?d:/[%p]/.test(Q)?v:"",le=jm[Q],ae=/[defgprs%]/.test(Q);function ie(ue){var ee,re,de,ve=me,Ee=Se;if(Q==="c")Ee=le(ue)+Ee,ue="";else{var De=(ue=+ue)<0||1/ue<0;if(ue=isNaN(ue)?x:le(Math.abs(ue),j),Y&&(ue=function(We){e:for(var Lt,It=We.length,mt=1,Et=-1;mt<It;++mt)switch(We[mt]){case".":Et=Lt=mt;break;case"0":Et===0&&(Et=mt),Lt=mt;break;default:if(!+We[mt])break e;Et>0&&(Et=0)}return Et>0?We.slice(0,Et)+We.slice(Lt+1):We}(ue)),De&&+ue==0&&I!=="+"&&(De=!1),ve=(De?I==="("?I:_:I==="-"||I==="("?"":I)+ve,Ee=(Q==="s"?pu[8+A_/3]:"")+Ee+(De&&I==="("?")":""),ae){for(ee=-1,re=ue.length;++ee<re;)if(48>(de=ue.charCodeAt(ee))||de>57){Ee=(de===46?p+ue.slice(ee+1):ue.slice(ee))+Ee,ue=ue.slice(0,ee);break}}}W&&!O&&(ue=l(ue,1/0));var He=ve.length+ue.length+Ee.length,tt=He<q?new Array(q-He+1).join(A):"";switch(W&&O&&(ue=l(tt+ue,tt.length?q-Ee.length:1/0),tt=""),U){case"<":ue=ve+ue+Ee+tt;break;case"=":ue=ve+tt+ue+Ee;break;case"^":ue=tt.slice(0,He=tt.length>>1)+ve+ue+Ee+tt.slice(He);break;default:ue=tt+ve+ue+Ee}return m(ue)}return j=j===void 0?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),ie.toString=function(){return T+""},ie}return{format:C,formatPrefix:function(T,A){var U=C(((T=du(T)).type="f",T)),I=3*Math.max(-8,Math.min(8,Math.floor(vl(A)/3))),P=Math.pow(10,-I),O=pu[8+I/3];return function(q){return U(P*q)+O}}}}function Wm(r){return hu=Vd(r),n.format=hu.format,n.formatPrefix=hu.formatPrefix,hu}function Vm(r){return Math.max(0,-vl(Math.abs(r)))}function Jc(r,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vl(i)/3)))-vl(Math.abs(r)))}function Zm(r,i){return r=Math.abs(r),i=Math.abs(i)-r,Math.max(0,vl(i)-vl(r))+1}n.format=void 0,n.formatPrefix=void 0,Wm({thousands:",",grouping:[3],currency:["$",""]});var Mt=1e-6,ha=1e-12,en=Math.PI,tr=en/2,Zd=en/4,ki=2*en,$n=180/en,Pt=en/180,mn=Math.abs,mu=Math.atan,Ai=Math.atan2,wt=Math.cos,qd=Math.ceil,N_=Math.exp,qm=Math.hypot,Xc=Math.log,Gd=Math.pow,lt=Math.sin,Mo=Math.sign||function(r){return r>0?1:r<0?-1:0},Hr=Math.sqrt,Gm=Math.tan;function Ym(r){return r>1?0:r<-1?en:Math.acos(r)}function Mi(r){return r>1?tr:r<-1?-tr:Math.asin(r)}function L_(r){return(r=lt(r/2))*r}function nr(){}function Yd(r,i){r&&I_.hasOwnProperty(r.type)&&I_[r.type](r,i)}var P_={Feature:function(r,i){Yd(r.geometry,i)},FeatureCollection:function(r,i){for(var a=r.features,l=-1,c=a.length;++l<c;)Yd(a[l].geometry,i)}},I_={Sphere:function(r,i){i.sphere()},Point:function(r,i){r=r.coordinates,i.point(r[0],r[1],r[2])},MultiPoint:function(r,i){for(var a=r.coordinates,l=-1,c=a.length;++l<c;)r=a[l],i.point(r[0],r[1],r[2])},LineString:function(r,i){ji(r.coordinates,i,0)},MultiLineString:function(r,i){for(var a=r.coordinates,l=-1,c=a.length;++l<c;)ji(a[l],i,0)},Polygon:function(r,i){O_(r.coordinates,i)},MultiPolygon:function(r,i){for(var a=r.coordinates,l=-1,c=a.length;++l<c;)O_(a[l],i)},GeometryCollection:function(r,i){for(var a=r.geometries,l=-1,c=a.length;++l<c;)Yd(a[l],i)}};function ji(r,i,a){var l,c=-1,d=r.length-a;for(i.lineStart();++c<d;)l=r[c],i.point(l[0],l[1],l[2]);i.lineEnd()}function O_(r,i){var a=-1,l=r.length;for(i.polygonStart();++a<l;)ji(r[a],i,1);i.polygonEnd()}function Zo(r,i){r&&P_.hasOwnProperty(r.type)?P_[r.type](r,i):Yd(r,i)}var R_,Km,Jm,Xm,Qm,rr,pi,fr,eo,_l,D_,z_,gu,Qc,Cs,Ga,Kd=new H,Jd=new H,pa={point:nr,lineStart:nr,lineEnd:nr,polygonStart:function(){Kd=new H,pa.lineStart=Pb,pa.lineEnd=Ib},polygonEnd:function(){var r=+Kd;Jd.add(r<0?ki+r:r),this.lineStart=this.lineEnd=this.point=nr},sphere:function(){Jd.add(ki)}};function Pb(){pa.point=Ob}function Ib(){U_(R_,Km)}function Ob(r,i){pa.point=U_,R_=r,Km=i,Jm=r*=Pt,Xm=wt(i=(i*=Pt)/2+Zd),Qm=lt(i)}function U_(r,i){var a=(r*=Pt)-Jm,l=a>=0?1:-1,c=l*a,d=wt(i=(i*=Pt)/2+Zd),p=lt(i),m=Qm*p,v=Xm*d+m*wt(c),_=m*l*lt(c);Kd.add(Ai(_,v)),Jm=r,Xm=d,Qm=p}function Xd(r){return[Ai(r[1],r[0]),Mi(r[2])]}function yl(r){var i=r[0],a=r[1],l=wt(a);return[l*wt(i),l*lt(i),lt(a)]}function Qd(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]}function vu(r,i){return[r[1]*i[2]-r[2]*i[1],r[2]*i[0]-r[0]*i[2],r[0]*i[1]-r[1]*i[0]]}function ef(r,i){r[0]+=i[0],r[1]+=i[1],r[2]+=i[2]}function tf(r,i){return[r[0]*i,r[1]*i,r[2]*i]}function eh(r){var i=Hr(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=i,r[1]/=i,r[2]/=i}var nf,th,nh,rh,ih,oh,ah,rf,eg,_u,tg,F_,B_,Ni,Li,Pi,Ya={point:ng,lineStart:j_,lineEnd:H_,polygonStart:function(){Ya.point=W_,Ya.lineStart=Rb,Ya.lineEnd=Db,Qc=new H,pa.polygonStart()},polygonEnd:function(){pa.polygonEnd(),Ya.point=ng,Ya.lineStart=j_,Ya.lineEnd=H_,Kd<0?(rr=-(fr=180),pi=-(eo=90)):Qc>Mt?eo=90:Qc<-1e-6&&(pi=-90),Ga[0]=rr,Ga[1]=fr},sphere:function(){rr=-(fr=180),pi=-(eo=90)}};function ng(r,i){Cs.push(Ga=[rr=r,fr=r]),i<pi&&(pi=i),i>eo&&(eo=i)}function $_(r,i){var a=yl([r*Pt,i*Pt]);if(gu){var l=vu(gu,a),c=vu([l[1],-l[0],0],l);eh(c),c=Xd(c);var d,p=r-_l,m=p>0?1:-1,v=c[0]*$n*m,_=mn(p)>180;_^(m*_l<v&&v<m*r)?(d=c[1]*$n)>eo&&(eo=d):_^(m*_l<(v=(v+360)%360-180)&&v<m*r)?(d=-c[1]*$n)<pi&&(pi=d):(i<pi&&(pi=i),i>eo&&(eo=i)),_?r<_l?to(rr,r)>to(rr,fr)&&(fr=r):to(r,fr)>to(rr,fr)&&(rr=r):fr>=rr?(r<rr&&(rr=r),r>fr&&(fr=r)):r>_l?to(rr,r)>to(rr,fr)&&(fr=r):to(r,fr)>to(rr,fr)&&(rr=r)}else Cs.push(Ga=[rr=r,fr=r]);i<pi&&(pi=i),i>eo&&(eo=i),gu=a,_l=r}function j_(){Ya.point=$_}function H_(){Ga[0]=rr,Ga[1]=fr,Ya.point=ng,gu=null}function W_(r,i){if(gu){var a=r-_l;Qc.add(mn(a)>180?a+(a>0?360:-360):a)}else D_=r,z_=i;pa.point(r,i),$_(r,i)}function Rb(){pa.lineStart()}function Db(){W_(D_,z_),pa.lineEnd(),mn(Qc)>Mt&&(rr=-(fr=180)),Ga[0]=rr,Ga[1]=fr,gu=null}function to(r,i){return(i-=r)<0?i+360:i}function zb(r,i){return r[0]-i[0]}function rg(r,i){return r[0]<=r[1]?r[0]<=i&&i<=r[1]:i<r[0]||r[1]<i}var No={sphere:nr,point:ig,lineStart:V_,lineEnd:Z_,polygonStart:function(){No.lineStart=Fb,No.lineEnd=Bb},polygonEnd:function(){No.lineStart=V_,No.lineEnd=Z_}};function ig(r,i){r*=Pt;var a=wt(i*=Pt);of(a*wt(r),a*lt(r),lt(i))}function of(r,i,a){++nf,nh+=(r-nh)/nf,rh+=(i-rh)/nf,ih+=(a-ih)/nf}function V_(){No.point=Ub}function Ub(r,i){r*=Pt;var a=wt(i*=Pt);Ni=a*wt(r),Li=a*lt(r),Pi=lt(i),No.point=sh,of(Ni,Li,Pi)}function sh(r,i){r*=Pt;var a=wt(i*=Pt),l=a*wt(r),c=a*lt(r),d=lt(i),p=Ai(Hr((p=Li*d-Pi*c)*p+(p=Pi*l-Ni*d)*p+(p=Ni*c-Li*l)*p),Ni*l+Li*c+Pi*d);th+=p,oh+=p*(Ni+(Ni=l)),ah+=p*(Li+(Li=c)),rf+=p*(Pi+(Pi=d)),of(Ni,Li,Pi)}function Z_(){No.point=ig}function Fb(){No.point=$b}function Bb(){q_(F_,B_),No.point=ig}function $b(r,i){F_=r,B_=i,r*=Pt,i*=Pt,No.point=q_;var a=wt(i);Ni=a*wt(r),Li=a*lt(r),Pi=lt(i),of(Ni,Li,Pi)}function q_(r,i){r*=Pt;var a=wt(i*=Pt),l=a*wt(r),c=a*lt(r),d=lt(i),p=Li*d-Pi*c,m=Pi*l-Ni*d,v=Ni*c-Li*l,_=qm(p,m,v),x=Mi(_),C=_&&-x/_;eg.add(C*p),_u.add(C*m),tg.add(C*v),th+=x,oh+=x*(Ni+(Ni=l)),ah+=x*(Li+(Li=c)),rf+=x*(Pi+(Pi=d)),of(Ni,Li,Pi)}function yu(r){return function(){return r}}function og(r,i){function a(l,c){return l=r(l,c),i(l[0],l[1])}return r.invert&&i.invert&&(a.invert=function(l,c){return(l=i.invert(l,c))&&r.invert(l[0],l[1])}),a}function ag(r,i){return[mn(r)>en?r+Math.round(-r/ki)*ki:r,i]}function sg(r,i,a){return(r%=ki)?i||a?og(Y_(r),af(i,a)):Y_(r):i||a?af(i,a):ag}function G_(r){return function(i,a){return[(i+=r)>en?i-ki:i<-en?i+ki:i,a]}}function Y_(r){var i=G_(r);return i.invert=G_(-r),i}function af(r,i){var a=wt(r),l=lt(r),c=wt(i),d=lt(i);function p(m,v){var _=wt(v),x=wt(m)*_,C=lt(m)*_,T=lt(v),A=T*a+x*l;return[Ai(C*c-A*d,x*a-T*l),Mi(A*c+C*d)]}return p.invert=function(m,v){var _=wt(v),x=wt(m)*_,C=lt(m)*_,T=lt(v),A=T*c-C*d;return[Ai(C*c+T*d,x*a+A*l),Mi(A*a-x*l)]},p}function K_(r){function i(a){return(a=r(a[0]*Pt,a[1]*Pt))[0]*=$n,a[1]*=$n,a}return r=sg(r[0]*Pt,r[1]*Pt,r.length>2?r[2]*Pt:0),i.invert=function(a){return(a=r.invert(a[0]*Pt,a[1]*Pt))[0]*=$n,a[1]*=$n,a},i}function lg(r,i,a,l,c,d){if(a){var p=wt(i),m=lt(i),v=l*a;c==null?(c=i+l*ki,d=i-v/2):(c=ug(p,c),d=ug(p,d),(l>0?c<d:c>d)&&(c+=l*ki));for(var _,x=c;l>0?x>d:x<d;x-=v)_=Xd([p,-m*wt(x),-m*lt(x)]),r.point(_[0],_[1])}}function ug(r,i){(i=yl(i))[0]-=r,eh(i);var a=Ym(-i[1]);return((-i[2]<0?-a:a)+ki-Mt)%ki}function lh(){var r,i=[];return{point:function(a,l,c){r.push([a,l,c])},lineStart:function(){i.push(r=[])},lineEnd:nr,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var a=i;return i=[],r=null,a}}}function sf(r,i){return mn(r[0]-i[0])<Mt&&mn(r[1]-i[1])<Mt}function lf(r,i,a,l){this.x=r,this.z=i,this.o=a,this.e=l,this.v=!1,this.n=this.p=null}function cg(r,i,a,l,c){var d,p,m=[],v=[];if(r.forEach(function(U){if(!((I=U.length-1)<=0)){var I,P,O=U[0],q=U[I];if(sf(O,q)){if(!O[2]&&!q[2]){for(c.lineStart(),d=0;d<I;++d)c.point((O=U[d])[0],O[1]);return void c.lineEnd()}q[0]+=2e-6}m.push(P=new lf(O,U,null,!0)),v.push(P.o=new lf(O,null,P,!1)),m.push(P=new lf(q,U,null,!1)),v.push(P.o=new lf(q,null,P,!0))}}),m.length){for(v.sort(i),fg(m),fg(v),d=0,p=v.length;d<p;++d)v[d].e=a=!a;for(var _,x,C=m[0];;){for(var T=C,A=!0;T.v;)if((T=T.n)===C)return;_=T.z,c.lineStart();do{if(T.v=T.o.v=!0,T.e){if(A)for(d=0,p=_.length;d<p;++d)c.point((x=_[d])[0],x[1]);else l(T.x,T.n.x,1,c);T=T.n}else{if(A)for(_=T.p.z,d=_.length-1;d>=0;--d)c.point((x=_[d])[0],x[1]);else l(T.x,T.p.x,-1,c);T=T.p}_=(T=T.o).z,A=!A}while(!T.v);c.lineEnd()}}}function fg(r){if(i=r.length){for(var i,a,l=0,c=r[0];++l<i;)c.n=a=r[l],a.p=c,c=a;c.n=a=r[0],a.p=c}}function dg(r){return mn(r[0])<=en?r[0]:Mo(r[0])*((mn(r[0])+en)%ki-en)}function J_(r,i){var a=dg(i),l=i[1],c=lt(l),d=[lt(a),-wt(a),0],p=0,m=0,v=new H;c===1?l=tr+Mt:c===-1&&(l=-tr-Mt);for(var _=0,x=r.length;_<x;++_)if(T=(C=r[_]).length)for(var C,T,A=C[T-1],U=dg(A),I=A[1]/2+Zd,P=lt(I),O=wt(I),q=0;q<T;++q,U=j,P=Q,O=me,A=W){var W=C[q],j=dg(W),Y=W[1]/2+Zd,Q=lt(Y),me=wt(Y),Se=j-U,le=Se>=0?1:-1,ae=le*Se,ie=ae>en,ue=P*Q;if(v.add(Ai(ue*le*lt(ae),O*me+ue*wt(ae))),p+=ie?Se+le*ki:Se,ie^U>=a^j>=a){var ee=vu(yl(A),yl(W));eh(ee);var re=vu(d,ee);eh(re);var de=(ie^Se>=0?-1:1)*Mi(re[2]);(l>de||l===de&&(ee[0]||ee[1]))&&(m+=ie^Se>=0?1:-1)}}return(p<-1e-6||p<Mt&&v<-1e-12)^1&m}function X_(r,i,a,l){return function(c){var d,p,m,v=i(c),_=lh(),x=i(_),C=!1,T={point:A,lineStart:I,lineEnd:P,polygonStart:function(){T.point=O,T.lineStart=q,T.lineEnd=W,p=[],d=[]},polygonEnd:function(){T.point=A,T.lineStart=I,T.lineEnd=P,p=Bn(p);var j=J_(d,l);p.length?(C||(c.polygonStart(),C=!0),cg(p,ch,j,a,c)):j&&(C||(c.polygonStart(),C=!0),c.lineStart(),a(null,null,1,c),c.lineEnd()),C&&(c.polygonEnd(),C=!1),p=d=null},sphere:function(){c.polygonStart(),c.lineStart(),a(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function A(j,Y){r(j,Y)&&c.point(j,Y)}function U(j,Y){v.point(j,Y)}function I(){T.point=U,v.lineStart()}function P(){T.point=A,v.lineEnd()}function O(j,Y){m.push([j,Y]),x.point(j,Y)}function q(){x.lineStart(),m=[]}function W(){O(m[0][0],m[0][1]),x.lineEnd();var j,Y,Q,me,Se=x.clean(),le=_.result(),ae=le.length;if(m.pop(),d.push(m),m=null,ae)if(1&Se){if((Y=(Q=le[0]).length-1)>0){for(C||(c.polygonStart(),C=!0),c.lineStart(),j=0;j<Y;++j)c.point((me=Q[j])[0],me[1]);c.lineEnd()}}else ae>1&&2&Se&&le.push(le.pop().concat(le.shift())),p.push(le.filter(uh))}return T}}function uh(r){return r.length>1}function ch(r,i){return((r=r.x)[0]<0?r[1]-tr-Mt:tr-r[1])-((i=i.x)[0]<0?i[1]-tr-Mt:tr-i[1])}ag.invert=ag;var hg=X_(function(){return!0},function(r){var i,a=NaN,l=NaN,c=NaN;return{lineStart:function(){r.lineStart(),i=1},point:function(d,p){var m=d>0?en:-en,v=mn(d-a);mn(v-en)<Mt?(r.point(a,l=(l+p)/2>0?tr:-tr),r.point(c,l),r.lineEnd(),r.lineStart(),r.point(m,l),r.point(d,l),i=0):c!==m&&v>=en&&(mn(a-c)<Mt&&(a-=c*Mt),mn(d-m)<Mt&&(d-=m*Mt),l=function(_,x,C,T){var A,U,I=lt(_-C);return mn(I)>Mt?mu((lt(x)*(U=wt(T))*lt(C)-lt(T)*(A=wt(x))*lt(_))/(A*U*I)):(x+T)/2}(a,l,d,p),r.point(c,l),r.lineEnd(),r.lineStart(),r.point(m,l),i=0),r.point(a=d,l=p),c=m},lineEnd:function(){r.lineEnd(),a=l=NaN},clean:function(){return 2-i}}},function(r,i,a,l){var c;if(r==null)c=a*tr,l.point(-en,c),l.point(0,c),l.point(en,c),l.point(en,0),l.point(en,-c),l.point(0,-c),l.point(-en,-c),l.point(-en,0),l.point(-en,c);else if(mn(r[0]-i[0])>Mt){var d=r[0]<i[0]?en:-en;c=a*d/2,l.point(-d,c),l.point(0,c),l.point(d,c)}else l.point(i[0],i[1])},[-en,-tr]);function Q_(r){var i=wt(r),a=6*Pt,l=i>0,c=mn(i)>Mt;function d(v,_){return wt(v)*wt(_)>i}function p(v,_,x){var C=[1,0,0],T=vu(yl(v),yl(_)),A=Qd(T,T),U=T[0],I=A-U*U;if(!I)return!x&&v;var P=i*A/I,O=-i*U/I,q=vu(C,T),W=tf(C,P);ef(W,tf(T,O));var j=q,Y=Qd(W,j),Q=Qd(j,j),me=Y*Y-Q*(Qd(W,W)-1);if(!(me<0)){var Se=Hr(me),le=tf(j,(-Y-Se)/Q);if(ef(le,W),le=Xd(le),!x)return le;var ae,ie=v[0],ue=_[0],ee=v[1],re=_[1];ue<ie&&(ae=ie,ie=ue,ue=ae);var de=ue-ie,ve=mn(de-en)<Mt;if(!ve&&re<ee&&(ae=ee,ee=re,re=ae),ve||de<Mt?ve?ee+re>0^le[1]<(mn(le[0]-ie)<Mt?ee:re):ee<=le[1]&&le[1]<=re:de>en^(ie<=le[0]&&le[0]<=ue)){var Ee=tf(j,(-Y+Se)/Q);return ef(Ee,W),[le,Xd(Ee)]}}}function m(v,_){var x=l?r:en-r,C=0;return v<-x?C|=1:v>x&&(C|=2),_<-x?C|=4:_>x&&(C|=8),C}return X_(d,function(v){var _,x,C,T,A;return{lineStart:function(){T=C=!1,A=1},point:function(U,I){var P,O=[U,I],q=d(U,I),W=l?q?0:m(U,I):q?m(U+(U<0?en:-en),I):0;if(!_&&(T=C=q)&&v.lineStart(),q!==C&&(!(P=p(_,O))||sf(_,P)||sf(O,P))&&(O[2]=1),q!==C)A=0,q?(v.lineStart(),P=p(O,_),v.point(P[0],P[1])):(P=p(_,O),v.point(P[0],P[1],2),v.lineEnd()),_=P;else if(c&&_&&l^q){var j;W&x||!(j=p(O,_,!0))||(A=0,l?(v.lineStart(),v.point(j[0][0],j[0][1]),v.point(j[1][0],j[1][1]),v.lineEnd()):(v.point(j[1][0],j[1][1]),v.lineEnd(),v.lineStart(),v.point(j[0][0],j[0][1],3)))}!q||_&&sf(_,O)||v.point(O[0],O[1]),_=O,C=q,x=W},lineEnd:function(){C&&v.lineEnd(),_=null},clean:function(){return A|(T&&C)<<1}}},function(v,_,x,C){lg(C,r,a,x,v,_)},l?[0,-r]:[-en,r-en])}var uf,fh,dh,hh,cf=1e9,ph=-cf;function mh(r,i,a,l){function c(_,x){return r<=_&&_<=a&&i<=x&&x<=l}function d(_,x,C,T){var A=0,U=0;if(_==null||(A=p(_,C))!==(U=p(x,C))||v(_,x)<0^C>0)do T.point(A===0||A===3?r:a,A>1?l:i);while((A=(A+C+4)%4)!==U);else T.point(x[0],x[1])}function p(_,x){return mn(_[0]-r)<Mt?x>0?0:3:mn(_[0]-a)<Mt?x>0?2:1:mn(_[1]-i)<Mt?x>0?1:0:x>0?3:2}function m(_,x){return v(_.x,x.x)}function v(_,x){var C=p(_,1),T=p(x,1);return C!==T?C-T:C===0?x[1]-_[1]:C===1?_[0]-x[0]:C===2?_[1]-x[1]:x[0]-_[0]}return function(_){var x,C,T,A,U,I,P,O,q,W,j,Y=_,Q=lh(),me={point:Se,lineStart:function(){me.point=le,C&&C.push(T=[]),W=!0,q=!1,P=O=NaN},lineEnd:function(){x&&(le(A,U),I&&q&&Q.rejoin(),x.push(Q.result())),me.point=Se,q&&Y.lineEnd()},polygonStart:function(){Y=Q,x=[],C=[],j=!0},polygonEnd:function(){var ae=function(){for(var ee=0,re=0,de=C.length;re<de;++re)for(var ve,Ee,De=C[re],He=1,tt=De.length,We=De[0],Lt=We[0],It=We[1];He<tt;++He)ve=Lt,Ee=It,Lt=(We=De[He])[0],It=We[1],Ee<=l?It>l&&(Lt-ve)*(l-Ee)>(It-Ee)*(r-ve)&&++ee:It<=l&&(Lt-ve)*(l-Ee)<(It-Ee)*(r-ve)&&--ee;return ee}(),ie=j&&ae,ue=(x=Bn(x)).length;(ie||ue)&&(_.polygonStart(),ie&&(_.lineStart(),d(null,null,1,_),_.lineEnd()),ue&&cg(x,m,ae,d,_),_.polygonEnd()),Y=_,x=C=T=null}};function Se(ae,ie){c(ae,ie)&&Y.point(ae,ie)}function le(ae,ie){var ue=c(ae,ie);if(C&&T.push([ae,ie]),W)A=ae,U=ie,I=ue,W=!1,ue&&(Y.lineStart(),Y.point(ae,ie));else if(ue&&q)Y.point(ae,ie);else{var ee=[P=Math.max(ph,Math.min(cf,P)),O=Math.max(ph,Math.min(cf,O))],re=[ae=Math.max(ph,Math.min(cf,ae)),ie=Math.max(ph,Math.min(cf,ie))];(function(de,ve,Ee,De,He,tt){var We,Lt=de[0],It=de[1],mt=0,Et=1,Tn=ve[0]-Lt,nn=ve[1]-It;if(We=Ee-Lt,Tn||!(We>0)){if(We/=Tn,Tn<0){if(We<mt)return;We<Et&&(Et=We)}else if(Tn>0){if(We>Et)return;We>mt&&(mt=We)}if(We=He-Lt,Tn||!(We<0)){if(We/=Tn,Tn<0){if(We>Et)return;We>mt&&(mt=We)}else if(Tn>0){if(We<mt)return;We<Et&&(Et=We)}if(We=De-It,nn||!(We>0)){if(We/=nn,nn<0){if(We<mt)return;We<Et&&(Et=We)}else if(nn>0){if(We>Et)return;We>mt&&(mt=We)}if(We=tt-It,nn||!(We<0)){if(We/=nn,nn<0){if(We>Et)return;We>mt&&(mt=We)}else if(nn>0){if(We<mt)return;We<Et&&(Et=We)}return mt>0&&(de[0]=Lt+mt*Tn,de[1]=It+mt*nn),Et<1&&(ve[0]=Lt+Et*Tn,ve[1]=It+Et*nn),!0}}}}})(ee,re,r,i,a,l)?(q||(Y.lineStart(),Y.point(ee[0],ee[1])),Y.point(re[0],re[1]),ue||Y.lineEnd(),j=!1):ue&&(Y.lineStart(),Y.point(ae,ie),j=!1)}P=ae,O=ie,q=ue}return me}}var wu={sphere:nr,point:nr,lineStart:function(){wu.point=Hb,wu.lineEnd=jb},lineEnd:nr,polygonStart:nr,polygonEnd:nr};function jb(){wu.point=wu.lineEnd=nr}function Hb(r,i){fh=r*=Pt,dh=lt(i*=Pt),hh=wt(i),wu.point=Wb}function Wb(r,i){r*=Pt;var a=lt(i*=Pt),l=wt(i),c=mn(r-fh),d=wt(c),p=l*lt(c),m=hh*a-dh*l*d,v=dh*a+hh*l*d;uf.add(Ai(Hr(p*p+m*m),v)),fh=r,dh=a,hh=l}function e1(r){return uf=new H,Zo(r,wu),+uf}var pg=[null,null],Vb={type:"LineString",coordinates:pg};function Hi(r,i){return pg[0]=r,pg[1]=i,e1(Vb)}var t1={Feature:function(r,i){return ma(r.geometry,i)},FeatureCollection:function(r,i){for(var a=r.features,l=-1,c=a.length;++l<c;)if(ma(a[l].geometry,i))return!0;return!1}},n1={Sphere:function(){return!0},Point:function(r,i){return Ht(r.coordinates,i)},MultiPoint:function(r,i){for(var a=r.coordinates,l=-1,c=a.length;++l<c;)if(Ht(a[l],i))return!0;return!1},LineString:function(r,i){return r1(r.coordinates,i)},MultiLineString:function(r,i){for(var a=r.coordinates,l=-1,c=a.length;++l<c;)if(r1(a[l],i))return!0;return!1},Polygon:function(r,i){return Ii(r.coordinates,i)},MultiPolygon:function(r,i){for(var a=r.coordinates,l=-1,c=a.length;++l<c;)if(Ii(a[l],i))return!0;return!1},GeometryCollection:function(r,i){for(var a=r.geometries,l=-1,c=a.length;++l<c;)if(ma(a[l],i))return!0;return!1}};function ma(r,i){return!(!r||!n1.hasOwnProperty(r.type))&&n1[r.type](r,i)}function Ht(r,i){return Hi(r,i)===0}function r1(r,i){for(var a,l,c,d=0,p=r.length;d<p;d++){if((l=Hi(r[d],i))===0||d>0&&(c=Hi(r[d],r[d-1]))>0&&a<=c&&l<=c&&(a+l-c)*(1-Math.pow((a-l)/c,2))<ha*c)return!0;a=l}return!1}function Ii(r,i){return!!J_(r.map(vr),i1(i))}function vr(r){return(r=r.map(i1)).pop(),r}function i1(r){return[r[0]*Pt,r[1]*Pt]}function Ka(r,i,a){var l=Ke(r,i-Mt,a).concat(i);return function(c){return l.map(function(d){return[c,d]})}}function o1(r,i,a){var l=Ke(r,i-Mt,a).concat(i);return function(c){return l.map(function(d){return[d,c]})}}function a1(){var r,i,a,l,c,d,p,m,v,_,x,C,T=10,A=T,U=90,I=360,P=2.5;function O(){return{type:"MultiLineString",coordinates:q()}}function q(){return Ke(qd(l/U)*U,a,U).map(x).concat(Ke(qd(m/I)*I,p,I).map(C)).concat(Ke(qd(i/T)*T,r,T).filter(function(W){return mn(W%U)>Mt}).map(v)).concat(Ke(qd(d/A)*A,c,A).filter(function(W){return mn(W%I)>Mt}).map(_))}return O.lines=function(){return q().map(function(W){return{type:"LineString",coordinates:W}})},O.outline=function(){return{type:"Polygon",coordinates:[x(l).concat(C(p).slice(1),x(a).reverse().slice(1),C(m).reverse().slice(1))]}},O.extent=function(W){return arguments.length?O.extentMajor(W).extentMinor(W):O.extentMinor()},O.extentMajor=function(W){return arguments.length?(l=+W[0][0],a=+W[1][0],m=+W[0][1],p=+W[1][1],l>a&&(W=l,l=a,a=W),m>p&&(W=m,m=p,p=W),O.precision(P)):[[l,m],[a,p]]},O.extentMinor=function(W){return arguments.length?(i=+W[0][0],r=+W[1][0],d=+W[0][1],c=+W[1][1],i>r&&(W=i,i=r,r=W),d>c&&(W=d,d=c,c=W),O.precision(P)):[[i,d],[r,c]]},O.step=function(W){return arguments.length?O.stepMajor(W).stepMinor(W):O.stepMinor()},O.stepMajor=function(W){return arguments.length?(U=+W[0],I=+W[1],O):[U,I]},O.stepMinor=function(W){return arguments.length?(T=+W[0],A=+W[1],O):[T,A]},O.precision=function(W){return arguments.length?(P=+W,v=Ka(d,c,90),_=o1(i,r,P),x=Ka(m,p,90),C=o1(l,a,P),O):P},O.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}var s1,l1,mg,ff,df=r=>r,qo=new H,gh=new H,Go={point:nr,lineStart:nr,lineEnd:nr,polygonStart:function(){Go.lineStart=ir,Go.lineEnd=Zb},polygonEnd:function(){Go.lineStart=Go.lineEnd=Go.point=nr,qo.add(mn(gh)),gh=new H},result:function(){var r=qo/2;return qo=new H,r}};function ir(){Go.point=dr}function dr(r,i){Go.point=gg,s1=mg=r,l1=ff=i}function gg(r,i){gh.add(ff*r-mg*i),mg=r,ff=i}function Zb(){gg(s1,l1)}var u1=Go,bu=1/0,vh=bu,hf=-bu,_h=hf,c1={point:function(r,i){r<bu&&(bu=r),r>hf&&(hf=r),i<vh&&(vh=i),i>_h&&(_h=i)},lineStart:nr,lineEnd:nr,polygonStart:nr,polygonEnd:nr,result:function(){var r=[[bu,vh],[hf,_h]];return hf=_h=-(vh=bu=1/0),r}},xu,yh,ga,Yo,wl=c1,Oi=0,ks=0,pf=0,wh=0,bh=0,Su=0,vg=0,xh=0,no=0,Ft={point:As,lineStart:ro,lineEnd:En,polygonStart:function(){Ft.lineStart=Gb,Ft.lineEnd=d1},polygonEnd:function(){Ft.point=As,Ft.lineStart=ro,Ft.lineEnd=En},result:function(){var r=no?[vg/no,xh/no]:Su?[wh/Su,bh/Su]:pf?[Oi/pf,ks/pf]:[NaN,NaN];return Oi=ks=pf=wh=bh=Su=vg=xh=no=0,r}};function As(r,i){Oi+=r,ks+=i,++pf}function ro(){Ft.point=f1}function f1(r,i){Ft.point=qb,As(ga=r,Yo=i)}function qb(r,i){var a=r-ga,l=i-Yo,c=Hr(a*a+l*l);wh+=c*(ga+r)/2,bh+=c*(Yo+i)/2,Su+=c,As(ga=r,Yo=i)}function En(){Ft.point=As}function Gb(){Ft.point=Sh}function d1(){h1(xu,yh)}function Sh(r,i){Ft.point=h1,As(xu=ga=r,yh=Yo=i)}function h1(r,i){var a=r-ga,l=i-Yo,c=Hr(a*a+l*l);wh+=c*(ga+r)/2,bh+=c*(Yo+i)/2,Su+=c,vg+=(c=Yo*r-ga*i)*(ga+r),xh+=c*(Yo+i),no+=3*c,As(ga=r,Yo=i)}var p1=Ft;function m1(r){this._context=r}m1.prototype={_radius:4.5,pointRadius:function(r){return this._radius=r,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(r,i){switch(this._point){case 0:this._context.moveTo(r,i),this._point=1;break;case 1:this._context.lineTo(r,i);break;default:this._context.moveTo(r+this._radius,i),this._context.arc(r,i,this._radius,0,ki)}},result:nr};var _g,g1,v1,mf,gf,yg=new H,Eh={point:nr,lineStart:function(){Eh.point=Yb},lineEnd:function(){_g&&_1(g1,v1),Eh.point=nr},polygonStart:function(){_g=!0},polygonEnd:function(){_g=null},result:function(){var r=+yg;return yg=new H,r}};function Yb(r,i){Eh.point=_1,g1=mf=r,v1=gf=i}function _1(r,i){mf-=r,gf-=i,yg.add(Hr(mf*mf+gf*gf)),mf=r,gf=i}var y1=Eh;function Th(){this._string=[]}function w1(r){return"m0,"+r+"a"+r+","+r+" 0 1,1 0,"+-2*r+"a"+r+","+r+" 0 1,1 0,"+2*r+"z"}function bl(r){return function(i){var a=new wg;for(var l in r)a[l]=r[l];return a.stream=i,a}}function wg(){}function bg(r,i,a){var l=r.clipExtent&&r.clipExtent();return r.scale(150).translate([0,0]),l!=null&&r.clipExtent(null),Zo(a,r.stream(wl)),i(wl.result()),l!=null&&r.clipExtent(l),r}function Ch(r,i,a){return bg(r,function(l){var c=i[1][0]-i[0][0],d=i[1][1]-i[0][1],p=Math.min(c/(l[1][0]-l[0][0]),d/(l[1][1]-l[0][1])),m=+i[0][0]+(c-p*(l[1][0]+l[0][0]))/2,v=+i[0][1]+(d-p*(l[1][1]+l[0][1]))/2;r.scale(150*p).translate([m,v])},a)}function xr(r,i,a){return Ch(r,[[0,0],i],a)}function mi(r,i,a){return bg(r,function(l){var c=+i,d=c/(l[1][0]-l[0][0]),p=(c-d*(l[1][0]+l[0][0]))/2,m=-d*l[0][1];r.scale(150*d).translate([p,m])},a)}function xg(r,i,a){return bg(r,function(l){var c=+i,d=c/(l[1][1]-l[0][1]),p=-d*l[0][0],m=(c-d*(l[1][1]+l[0][1]))/2;r.scale(150*d).translate([p,m])},a)}Th.prototype={_radius:4.5,_circle:w1(4.5),pointRadius:function(r){return(r=+r)!==this._radius&&(this._radius=r,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(r,i){switch(this._point){case 0:this._string.push("M",r,",",i),this._point=1;break;case 1:this._string.push("L",r,",",i);break;default:this._circle==null&&(this._circle=w1(this._radius)),this._string.push("M",r,",",i,this._circle)}},result:function(){if(this._string.length){var r=this._string.join("");return this._string=[],r}return null}},wg.prototype={constructor:wg,point:function(r,i){this.stream.point(r,i)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Kb=wt(30*Pt);function b1(r,i){return+i?function(a,l){function c(d,p,m,v,_,x,C,T,A,U,I,P,O,q){var W=C-d,j=T-p,Y=W*W+j*j;if(Y>4*l&&O--){var Q=v+U,me=_+I,Se=x+P,le=Hr(Q*Q+me*me+Se*Se),ae=Mi(Se/=le),ie=mn(mn(Se)-1)<Mt||mn(m-A)<Mt?(m+A)/2:Ai(me,Q),ue=a(ie,ae),ee=ue[0],re=ue[1],de=ee-d,ve=re-p,Ee=j*de-W*ve;(Ee*Ee/Y>l||mn((W*de+j*ve)/Y-.5)>.3||v*U+_*I+x*P<Kb)&&(c(d,p,m,v,_,x,ee,re,ie,Q/=le,me/=le,Se,O,q),q.point(ee,re),c(ee,re,ie,Q,me,Se,C,T,A,U,I,P,O,q))}}return function(d){var p,m,v,_,x,C,T,A,U,I,P,O,q={point:W,lineStart:j,lineEnd:Q,polygonStart:function(){d.polygonStart(),q.lineStart=me},polygonEnd:function(){d.polygonEnd(),q.lineStart=j}};function W(ae,ie){ae=a(ae,ie),d.point(ae[0],ae[1])}function j(){A=NaN,q.point=Y,d.lineStart()}function Y(ae,ie){var ue=yl([ae,ie]),ee=a(ae,ie);c(A,U,T,I,P,O,A=ee[0],U=ee[1],T=ae,I=ue[0],P=ue[1],O=ue[2],16,d),d.point(A,U)}function Q(){q.point=W,d.lineEnd()}function me(){j(),q.point=Se,q.lineEnd=le}function Se(ae,ie){Y(p=ae,ie),m=A,v=U,_=I,x=P,C=O,q.point=Y}function le(){c(A,U,T,I,P,O,m,v,p,_,x,C,16,d),q.lineEnd=Q,Q()}return q}}(r,i):function(a){return bl({point:function(l,c){l=a(l,c),this.stream.point(l[0],l[1])}})}(r)}var x1=bl({point:function(r,i){this.stream.point(r*Pt,i*Pt)}});function S1(r,i,a,l,c,d){if(!d)return function(I,P,O,q,W){function j(Y,Q){return[P+I*(Y*=q),O-I*(Q*=W)]}return j.invert=function(Y,Q){return[(Y-P)/I*q,(O-Q)/I*W]},j}(r,i,a,l,c);var p=wt(d),m=lt(d),v=p*r,_=m*r,x=p/r,C=m/r,T=(m*a-p*i)/r,A=(m*i+p*a)/r;function U(I,P){return[v*(I*=l)-_*(P*=c)+i,a-_*I-v*P]}return U.invert=function(I,P){return[l*(x*I-C*P+T),c*(A-C*I-x*P)]},U}function va(r){return Sg(function(){return r})()}function Sg(r){var i,a,l,c,d,p,m,v,_,x,C=150,T=480,A=250,U=0,I=0,P=0,O=0,q=0,W=0,j=1,Y=1,Q=null,me=hg,Se=null,le=df,ae=.5;function ie(de){return v(de[0]*Pt,de[1]*Pt)}function ue(de){return(de=v.invert(de[0],de[1]))&&[de[0]*$n,de[1]*$n]}function ee(){var de=S1(C,0,0,j,Y,W).apply(null,i(U,I)),ve=S1(C,T-de[0],A-de[1],j,Y,W);return a=sg(P,O,q),m=og(i,ve),v=og(a,m),p=b1(m,ae),re()}function re(){return _=x=null,ie}return ie.stream=function(de){return _&&x===de?_:_=x1(function(ve){return bl({point:function(Ee,De){var He=ve(Ee,De);return this.stream.point(He[0],He[1])}})}(a)(me(p(le(x=de)))))},ie.preclip=function(de){return arguments.length?(me=de,Q=void 0,re()):me},ie.postclip=function(de){return arguments.length?(le=de,Se=l=c=d=null,re()):le},ie.clipAngle=function(de){return arguments.length?(me=+de?Q_(Q=de*Pt):(Q=null,hg),re()):Q*$n},ie.clipExtent=function(de){return arguments.length?(le=de==null?(Se=l=c=d=null,df):mh(Se=+de[0][0],l=+de[0][1],c=+de[1][0],d=+de[1][1]),re()):Se==null?null:[[Se,l],[c,d]]},ie.scale=function(de){return arguments.length?(C=+de,ee()):C},ie.translate=function(de){return arguments.length?(T=+de[0],A=+de[1],ee()):[T,A]},ie.center=function(de){return arguments.length?(U=de[0]%360*Pt,I=de[1]%360*Pt,ee()):[U*$n,I*$n]},ie.rotate=function(de){return arguments.length?(P=de[0]%360*Pt,O=de[1]%360*Pt,q=de.length>2?de[2]%360*Pt:0,ee()):[P*$n,O*$n,q*$n]},ie.angle=function(de){return arguments.length?(W=de%360*Pt,ee()):W*$n},ie.reflectX=function(de){return arguments.length?(j=de?-1:1,ee()):j<0},ie.reflectY=function(de){return arguments.length?(Y=de?-1:1,ee()):Y<0},ie.precision=function(de){return arguments.length?(p=b1(m,ae=de*de),re()):Hr(ae)},ie.fitExtent=function(de,ve){return Ch(ie,de,ve)},ie.fitSize=function(de,ve){return xr(ie,de,ve)},ie.fitWidth=function(de,ve){return mi(ie,de,ve)},ie.fitHeight=function(de,ve){return xg(ie,de,ve)},function(){return i=r.apply(this,arguments),ie.invert=i.invert&&ue,ee()}}function kh(r){var i=0,a=en/3,l=Sg(r),c=l(i,a);return c.parallels=function(d){return arguments.length?l(i=d[0]*Pt,a=d[1]*Pt):[i*$n,a*$n]},c}function E1(r,i){var a=lt(r),l=(a+lt(i))/2;if(mn(l)<Mt)return function(m){var v=wt(m);function _(x,C){return[x*v,lt(C)/v]}return _.invert=function(x,C){return[x/v,Mi(C*v)]},_}(r);var c=1+a*(2*l-a),d=Hr(c)/l;function p(m,v){var _=Hr(c-2*l*lt(v))/l;return[_*lt(m*=l),d-_*wt(m)]}return p.invert=function(m,v){var _=d-v,x=Ai(m,mn(_))*Mo(_);return _*l<0&&(x-=en*Mo(m)*Mo(_)),[x/l,Mi((c-(m*m+_*_)*l*l)/(2*l))]},p}function Ah(){return kh(E1).scale(155.424).center([0,33.6442])}function T1(){return Ah().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Eg(r){return function(i,a){var l=wt(i),c=wt(a),d=r(l*c);return d===1/0?[2,0]:[d*c*lt(i),d*lt(a)]}}function Eu(r){return function(i,a){var l=Hr(i*i+a*a),c=r(l),d=lt(c),p=wt(c);return[Ai(i*d,l*p),Mi(l&&a*d/l)]}}var Tg=Eg(function(r){return Hr(2/(1+r))});Tg.invert=Eu(function(r){return 2*Mi(r/2)});var Cg=Eg(function(r){return(r=Ym(r))&&r/lt(r)});function vf(r,i){return[r,Xc(Gm((tr+i)/2))]}function C1(r){var i,a,l,c=va(r),d=c.center,p=c.scale,m=c.translate,v=c.clipExtent,_=null;function x(){var C=en*p(),T=c(K_(c.rotate()).invert([0,0]));return v(_==null?[[T[0]-C,T[1]-C],[T[0]+C,T[1]+C]]:r===vf?[[Math.max(T[0]-C,_),i],[Math.min(T[0]+C,a),l]]:[[_,Math.max(T[1]-C,i)],[a,Math.min(T[1]+C,l)]])}return c.scale=function(C){return arguments.length?(p(C),x()):p()},c.translate=function(C){return arguments.length?(m(C),x()):m()},c.center=function(C){return arguments.length?(d(C),x()):d()},c.clipExtent=function(C){return arguments.length?(C==null?_=i=a=l=null:(_=+C[0][0],i=+C[0][1],a=+C[1][0],l=+C[1][1]),x()):_==null?null:[[_,i],[a,l]]},x()}function Ja(r){return Gm((tr+r)/2)}function k1(r,i){var a=wt(r),l=r===i?lt(r):Xc(a/wt(i))/Xc(Ja(i)/Ja(r)),c=a*Gd(Ja(r),l)/l;if(!l)return vf;function d(p,m){c>0?m<-tr+Mt&&(m=-tr+Mt):m>tr-Mt&&(m=tr-Mt);var v=c/Gd(Ja(m),l);return[v*lt(l*p),c-v*wt(l*p)]}return d.invert=function(p,m){var v=c-m,_=Mo(l)*Hr(p*p+v*v),x=Ai(p,mn(v))*Mo(v);return v*l<0&&(x-=en*Mo(p)*Mo(v)),[x/l,2*mu(Gd(c/_,1/l))-tr]},d}function _f(r,i){return[r,i]}function A1(r,i){var a=wt(r),l=r===i?lt(r):(a-wt(i))/(i-r),c=a/l+r;if(mn(l)<Mt)return _f;function d(p,m){var v=c-m,_=l*p;return[v*lt(_),c-v*wt(_)]}return d.invert=function(p,m){var v=c-m,_=Ai(p,mn(v))*Mo(v);return v*l<0&&(_-=en*Mo(p)*Mo(v)),[_/l,c-Mo(l)*Hr(p*p+v*v)]},d}Cg.invert=Eu(function(r){return r}),vf.invert=function(r,i){return[r,2*mu(N_(i))-tr]},_f.invert=_f;var yf=1.340264,wf=-.081106,Tu=893e-6,Cu=.003796,Mh=Hr(3)/2;function kg(r,i){var a=Mi(Mh*lt(i)),l=a*a,c=l*l*l;return[r*wt(a)/(Mh*(yf+3*wf*l+c*(7*Tu+9*Cu*l))),a*(yf+wf*l+c*(Tu+Cu*l))]}function Ag(r,i){var a=wt(i),l=wt(r)*a;return[a*lt(r)/l,lt(i)/l]}function Mg(r,i){var a=i*i,l=a*a;return[r*(.8707-.131979*a+l*(l*(.003971*a-.001529*l)-.013791)),i*(1.007226+a*(.015085+l*(.028874*a-.044475-.005916*l)))]}function Ng(r,i){return[wt(i)*lt(r),lt(i)]}function Lg(r,i){var a=wt(i),l=1+wt(r)*a;return[a*lt(r)/l,lt(i)/l]}function Pg(r,i){return[Xc(Gm((tr+i)/2)),-r]}function Jb(r,i){return r.parent===i.parent?1:2}function Xb(r,i){return r+i.x}function Qb(r,i){return Math.max(r,i.y)}function ex(r){var i=0,a=r.children,l=a&&a.length;if(l)for(;--l>=0;)i+=a[l].value;else i=1;r.value=i}function Ig(r,i){r instanceof Map?(r=[void 0,r],i===void 0&&(i=nx)):i===void 0&&(i=tx);for(var a,l,c,d,p,m=new xl(r),v=[m];a=v.pop();)if((c=i(a.data))&&(p=(c=Array.from(c)).length))for(a.children=c,d=p-1;d>=0;--d)v.push(l=c[d]=new xl(c[d])),l.parent=a,l.depth=a.depth+1;return m.eachBefore(M1)}function tx(r){return r.children}function nx(r){return Array.isArray(r)?r[1]:null}function rx(r){r.data.value!==void 0&&(r.value=r.data.value),r.data=r.data.data}function M1(r){var i=0;do r.height=i;while((r=r.parent)&&r.height<++i)}function xl(r){this.data=r,this.depth=this.height=0,this.parent=null}function Nh(r){return r==null?null:N1(r)}function N1(r){if(typeof r!="function")throw new Error;return r}function Sl(){return 0}function ku(r){return function(){return r}}kg.invert=function(r,i){for(var a,l=i,c=l*l,d=c*c*c,p=0;p<12&&(d=(c=(l-=a=(l*(yf+wf*c+d*(Tu+Cu*c))-i)/(yf+3*wf*c+d*(7*Tu+9*Cu*c)))*l)*c*c,!(mn(a)<ha));++p);return[Mh*r*(yf+3*wf*c+d*(7*Tu+9*Cu*c))/wt(l),Mi(lt(l)/Mh)]},Ag.invert=Eu(mu),Mg.invert=function(r,i){var a,l=i,c=25;do{var d=l*l,p=d*d;l-=a=(l*(1.007226+d*(.015085+p*(.028874*d-.044475-.005916*p)))-i)/(1.007226+d*(.045255+p*(.259866*d-.311325-.005916*11*p)))}while(mn(a)>Mt&&--c>0);return[r/(.8707+(d=l*l)*(d*(d*d*d*(.003971-.001529*d)-.013791)-.131979)),l]},Ng.invert=Eu(Mi),Lg.invert=Eu(function(r){return 2*mu(r)}),Pg.invert=function(r,i){return[-i,2*mu(N_(r))-tr]},xl.prototype=Ig.prototype={constructor:xl,count:function(){return this.eachAfter(ex)},each:function(r,i){let a=-1;for(const l of this)r.call(i,l,++a,this);return this},eachAfter:function(r,i){for(var a,l,c,d=this,p=[d],m=[],v=-1;d=p.pop();)if(m.push(d),a=d.children)for(l=0,c=a.length;l<c;++l)p.push(a[l]);for(;d=m.pop();)r.call(i,d,++v,this);return this},eachBefore:function(r,i){for(var a,l,c=this,d=[c],p=-1;c=d.pop();)if(r.call(i,c,++p,this),a=c.children)for(l=a.length-1;l>=0;--l)d.push(a[l]);return this},find:function(r,i){let a=-1;for(const l of this)if(r.call(i,l,++a,this))return l},sum:function(r){return this.eachAfter(function(i){for(var a=+r(i.data)||0,l=i.children,c=l&&l.length;--c>=0;)a+=l[c].value;i.value=a})},sort:function(r){return this.eachBefore(function(i){i.children&&i.children.sort(r)})},path:function(r){for(var i=this,a=function(d,p){if(d===p)return d;var m=d.ancestors(),v=p.ancestors(),_=null;for(d=m.pop(),p=v.pop();d===p;)_=d,d=m.pop(),p=v.pop();return _}(i,r),l=[i];i!==a;)i=i.parent,l.push(i);for(var c=l.length;r!==a;)l.splice(c,0,r),r=r.parent;return l},ancestors:function(){for(var r=this,i=[r];r=r.parent;)i.push(r);return i},descendants:function(){return Array.from(this)},leaves:function(){var r=[];return this.eachBefore(function(i){i.children||r.push(i)}),r},links:function(){var r=this,i=[];return r.each(function(a){a!==r&&i.push({source:a.parent,target:a})}),i},copy:function(){return Ig(this).eachBefore(rx)},[Symbol.iterator]:function*(){var r,i,a,l,c=this,d=[c];do for(r=d.reverse(),d=[];c=r.pop();)if(yield c,i=c.children)for(a=0,l=i.length;a<l;++a)d.push(i[a]);while(d.length)}};const L1=4294967296;function Og(){let r=1;return()=>(r=(1664525*r+1013904223)%L1)/L1}function P1(r,i){for(var a,l,c=0,d=(r=function(m,v){let _,x,C=m.length;for(;C;)x=v()*C--|0,_=m[C],m[C]=m[x],m[x]=_;return m}(Array.from(r),i)).length,p=[];c<d;)a=r[c],l&&Rg(l,a)?++c:(l=ox(p=ix(p,a)),c=0);return l}function ix(r,i){var a,l;if(Lh(i,r))return[i];for(a=0;a<r.length;++a)if(Au(i,r[a])&&Lh(bf(r[a],i),r))return[r[a],i];for(a=0;a<r.length-1;++a)for(l=a+1;l<r.length;++l)if(Au(bf(r[a],r[l]),i)&&Au(bf(r[a],i),r[l])&&Au(bf(r[l],i),r[a])&&Lh(I1(r[a],r[l],i),r))return[r[a],r[l],i];throw new Error}function Au(r,i){var a=r.r-i.r,l=i.x-r.x,c=i.y-r.y;return a<0||a*a<l*l+c*c}function Rg(r,i){var a=r.r-i.r+1e-9*Math.max(r.r,i.r,1),l=i.x-r.x,c=i.y-r.y;return a>0&&a*a>l*l+c*c}function Lh(r,i){for(var a=0;a<i.length;++a)if(!Rg(r,i[a]))return!1;return!0}function ox(r){switch(r.length){case 1:return function(i){return{x:i.x,y:i.y,r:i.r}}(r[0]);case 2:return bf(r[0],r[1]);case 3:return I1(r[0],r[1],r[2])}}function bf(r,i){var a=r.x,l=r.y,c=r.r,d=i.x,p=i.y,m=i.r,v=d-a,_=p-l,x=m-c,C=Math.sqrt(v*v+_*_);return{x:(a+d+v/C*x)/2,y:(l+p+_/C*x)/2,r:(C+c+m)/2}}function I1(r,i,a){var l=r.x,c=r.y,d=r.r,p=i.x,m=i.y,v=i.r,_=a.x,x=a.y,C=a.r,T=l-p,A=l-_,U=c-m,I=c-x,P=v-d,O=C-d,q=l*l+c*c-d*d,W=q-p*p-m*m+v*v,j=q-_*_-x*x+C*C,Y=A*U-T*I,Q=(U*j-I*W)/(2*Y)-l,me=(I*P-U*O)/Y,Se=(A*W-T*j)/(2*Y)-c,le=(T*O-A*P)/Y,ae=me*me+le*le-1,ie=2*(d+Q*me+Se*le),ue=Q*Q+Se*Se-d*d,ee=-(Math.abs(ae)>1e-6?(ie+Math.sqrt(ie*ie-4*ae*ue))/(2*ae):ue/ie);return{x:l+Q+me*ee,y:c+Se+le*ee,r:ee}}function Ph(r,i,a){var l,c,d,p,m=r.x-i.x,v=r.y-i.y,_=m*m+v*v;_?(c=i.r+a.r,c*=c,p=r.r+a.r,c>(p*=p)?(l=(_+p-c)/(2*_),d=Math.sqrt(Math.max(0,p/_-l*l)),a.x=r.x-l*m-d*v,a.y=r.y-l*v+d*m):(l=(_+c-p)/(2*_),d=Math.sqrt(Math.max(0,c/_-l*l)),a.x=i.x+l*m-d*v,a.y=i.y+l*v+d*m)):(a.x=i.x+a.r,a.y=i.y)}function O1(r,i){var a=r.r+i.r-1e-6,l=i.x-r.x,c=i.y-r.y;return a>0&&a*a>l*l+c*c}function R1(r){var i=r._,a=r.next._,l=i.r+a.r,c=(i.x*a.r+a.x*i.r)/l,d=(i.y*a.r+a.y*i.r)/l;return c*c+d*d}function Ih(r){this._=r,this.next=null,this.previous=null}function Ri(r,i){if(!(d=(r=function(A){return typeof A=="object"&&"length"in A?A:Array.from(A)}(r)).length))return 0;var a,l,c,d,p,m,v,_,x,C,T;if((a=r[0]).x=0,a.y=0,!(d>1))return a.r;if(l=r[1],a.x=-l.r,l.x=a.r,l.y=0,!(d>2))return a.r+l.r;Ph(l,a,c=r[2]),a=new Ih(a),l=new Ih(l),c=new Ih(c),a.next=c.previous=l,l.next=a.previous=c,c.next=l.previous=a;e:for(v=3;v<d;++v){Ph(a._,l._,c=r[v]),c=new Ih(c),_=l.next,x=a.previous,C=l._.r,T=a._.r;do if(C<=T){if(O1(_._,c._)){l=_,a.next=l,l.previous=a,--v;continue e}C+=_._.r,_=_.next}else{if(O1(x._,c._)){(a=x).next=l,l.previous=a,--v;continue e}T+=x._.r,x=x.previous}while(_!==x.next);for(c.previous=a,c.next=l,a.next=l.previous=l=c,p=R1(a);(c=c.next)!==l;)(m=R1(c))<p&&(a=c,p=m);l=a.next}for(a=[l._],c=l;(c=c.next)!==l;)a.push(c._);for(c=P1(a,i),v=0;v<d;++v)(a=r[v]).x-=c.x,a.y-=c.y;return c.r}function Dg(r){return Math.sqrt(r.value)}function D1(r){return function(i){i.children||(i.r=Math.max(0,+r(i)||0))}}function zg(r,i,a){return function(l){if(c=l.children){var c,d,p,m=c.length,v=r(l)*i||0;if(v)for(d=0;d<m;++d)c[d].r+=v;if(p=Ri(c,a),v)for(d=0;d<m;++d)c[d].r-=v;l.r=p+v}}}function z1(r){return function(i){var a=i.parent;i.r*=r,a&&(i.x=a.x+r*i.x,i.y=a.y+r*i.y)}}function U1(r){r.x0=Math.round(r.x0),r.y0=Math.round(r.y0),r.x1=Math.round(r.x1),r.y1=Math.round(r.y1)}function El(r,i,a,l,c){for(var d,p=r.children,m=-1,v=p.length,_=r.value&&(l-i)/r.value;++m<v;)(d=p[m]).y0=a,d.y1=c,d.x0=i,d.x1=i+=d.value*_}var ax={depth:-1},Oh={},Ug={};function sx(r){return r.id}function lx(r){return r.parentId}function F1(r){let i=r.length;if(i<2)return"";for(;--i>1&&!Rh(r,i););return r.slice(0,i)}function Rh(r,i){if(r[i]==="/"){let a=0;for(;i>0&&r[--i]==="\\";)++a;if(!(1&a))return!0}return!1}function ux(r,i){return r.parent===i.parent?1:2}function Fg(r){var i=r.children;return i?i[0]:r.t}function Bg(r){var i=r.children;return i?i[i.length-1]:r.t}function $g(r,i,a){var l=a/(i.i-r.i);i.c-=l,i.s+=a,r.c+=l,i.z+=a,i.m+=a}function jg(r,i,a){return r.a.parent===i.parent?r.a:a}function Dh(r,i){this._=r,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}function zh(r,i,a,l,c){for(var d,p=r.children,m=-1,v=p.length,_=r.value&&(c-a)/r.value;++m<v;)(d=p[m]).x0=i,d.x1=l,d.y0=a,d.y1=a+=d.value*_}Dh.prototype=Object.create(xl.prototype);var B1=(1+Math.sqrt(5))/2;function $1(r,i,a,l,c,d){for(var p,m,v,_,x,C,T,A,U,I,P,O=[],q=i.children,W=0,j=0,Y=q.length,Q=i.value;W<Y;){v=c-a,_=d-l;do x=q[j++].value;while(!x&&j<Y);for(C=T=x,P=x*x*(I=Math.max(_/v,v/_)/(Q*r)),U=Math.max(T/P,P/C);j<Y;++j){if(x+=m=q[j].value,m<C&&(C=m),m>T&&(T=m),P=x*x*I,(A=Math.max(T/P,P/C))>U){x-=m;break}U=A}O.push(p={value:x,dice:v<_,children:q.slice(W,j)}),p.dice?El(p,a,l,c,Q?l+=_*x/Q:d):zh(p,a,l,Q?a+=v*x/Q:c,d),Q-=x,W=j}return O}var j1=function r(i){function a(l,c,d,p,m){$1(i,l,c,d,p,m)}return a.ratio=function(l){return r((l=+l)>1?l:1)},a}(B1),cx=function r(i){function a(l,c,d,p,m){if((v=l._squarify)&&v.ratio===i)for(var v,_,x,C,T,A=-1,U=v.length,I=l.value;++A<U;){for(x=(_=v[A]).children,C=_.value=0,T=x.length;C<T;++C)_.value+=x[C].value;_.dice?El(_,c,d,p,I?d+=(m-d)*_.value/I:m):zh(_,c,d,I?c+=(p-c)*_.value/I:p,m),I-=_.value}else l._squarify=v=$1(i,l,c,d,p,m),v.ratio=i}return a.ratio=function(l){return r((l=+l)>1?l:1)},a}(B1);function fx(r,i,a){return(i[0]-r[0])*(a[1]-r[1])-(i[1]-r[1])*(a[0]-r[0])}function dx(r,i){return r[0]-i[0]||r[1]-i[1]}function H1(r){const i=r.length,a=[0,1];let l,c=2;for(l=2;l<i;++l){for(;c>1&&fx(r[a[c-2]],r[a[c-1]],r[l])<=0;)--c;a[c++]=l}return a.slice(0,c)}var ri=Math.random,hx=function r(i){function a(l,c){return l=l==null?0:+l,c=c==null?1:+c,arguments.length===1?(c=l,l=0):c-=l,function(){return i()*c+l}}return a.source=r,a}(ri),px=function r(i){function a(l,c){return arguments.length<2&&(c=l,l=0),l=Math.floor(l),c=Math.floor(c)-l,function(){return Math.floor(i()*c+l)}}return a.source=r,a}(ri),Hg=function r(i){function a(l,c){var d,p;return l=l==null?0:+l,c=c==null?1:+c,function(){var m;if(d!=null)m=d,d=null;else do d=2*i()-1,m=2*i()-1,p=d*d+m*m;while(!p||p>1);return l+c*m*Math.sqrt(-2*Math.log(p)/p)}}return a.source=r,a}(ri),mx=function r(i){var a=Hg.source(i);function l(){var c=a.apply(this,arguments);return function(){return Math.exp(c())}}return l.source=r,l}(ri),W1=function r(i){function a(l){return(l=+l)<=0?()=>0:function(){for(var c=0,d=l;d>1;--d)c+=i();return c+d*i()}}return a.source=r,a}(ri),gx=function r(i){var a=W1.source(i);function l(c){if((c=+c)==0)return i;var d=a(c);return function(){return d()/c}}return l.source=r,l}(ri),vx=function r(i){function a(l){return function(){return-Math.log1p(-i())/l}}return a.source=r,a}(ri),_x=function r(i){function a(l){if((l=+l)<0)throw new RangeError("invalid alpha");return l=1/-l,function(){return Math.pow(1-i(),l)}}return a.source=r,a}(ri),yx=function r(i){function a(l){if((l=+l)<0||l>1)throw new RangeError("invalid p");return function(){return Math.floor(i()+l)}}return a.source=r,a}(ri),V1=function r(i){function a(l){if((l=+l)<0||l>1)throw new RangeError("invalid p");return l===0?()=>1/0:l===1?()=>1:(l=Math.log1p(-l),function(){return 1+Math.floor(Math.log1p(-i())/l)})}return a.source=r,a}(ri),Wg=function r(i){var a=Hg.source(i)();function l(c,d){if((c=+c)<0)throw new RangeError("invalid k");if(c===0)return()=>0;if(d=d==null?1:+d,c===1)return()=>-Math.log1p(-i())*d;var p=(c<1?c+1:c)-1/3,m=1/(3*Math.sqrt(p)),v=c<1?()=>Math.pow(i(),1/c):()=>1;return function(){do{do var _=a(),x=1+m*_;while(x<=0);x*=x*x;var C=1-i()}while(C>=1-.0331*_*_*_*_&&Math.log(C)>=.5*_*_+p*(1-x+Math.log(x)));return p*x*v()*d}}return l.source=r,l}(ri),u=function r(i){var a=Wg.source(i);function l(c,d){var p=a(c),m=a(d);return function(){var v=p();return v===0?0:v/(v+m())}}return l.source=r,l}(ri),h=function r(i){var a=V1.source(i),l=u.source(i);function c(d,p){return d=+d,(p=+p)>=1?()=>d:p<=0?()=>0:function(){for(var m=0,v=d,_=p;v*_>16&&v*(1-_)>16;){var x=Math.floor((v+1)*_),C=l(x,v-x+1)();C<=_?(m+=x,v-=x,_=(_-C)/(1-C)):(v=x-1,_/=C)}for(var T=_<.5,A=a(T?_:1-_),U=A(),I=0;U<=v;++I)U+=A();return m+(T?I:v-I)}}return c.source=r,c}(ri),b=function r(i){function a(l,c,d){var p;return(l=+l)==0?p=m=>-Math.log(m):(l=1/l,p=m=>Math.pow(m,l)),c=c==null?0:+c,d=d==null?1:+d,function(){return c+d*p(-Math.log1p(-i()))}}return a.source=r,a}(ri),k=function r(i){function a(l,c){return l=l==null?0:+l,c=c==null?1:+c,function(){return l+c*Math.tan(Math.PI*i())}}return a.source=r,a}(ri),B=function r(i){function a(l,c){return l=l==null?0:+l,c=c==null?1:+c,function(){var d=i();return l+c*Math.log(d/(1-d))}}return a.source=r,a}(ri),K=function r(i){var a=Wg.source(i),l=h.source(i);function c(d){return function(){for(var p=0,m=d;m>16;){var v=Math.floor(.875*m),_=a(v)();if(_>m)return p+l(v-1,m/_)();p+=v,m-=_}for(var x=-Math.log1p(-i()),C=0;x<=m;++C)x-=Math.log1p(-i());return p+C}}return c.source=r,c}(ri);const ne=1/4294967296;function fe(r,i){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(i).domain(r)}return this}function ye(r,i){switch(arguments.length){case 0:break;case 1:typeof r=="function"?this.interpolator(r):this.range(r);break;default:this.domain(r),typeof i=="function"?this.interpolator(i):this.range(i)}return this}const Oe=Symbol("implicit");function Re(){var r=new se,i=[],a=[],l=Oe;function c(d){let p=r.get(d);if(p===void 0){if(l!==Oe)return l;r.set(d,p=i.push(d)-1)}return a[p%a.length]}return c.domain=function(d){if(!arguments.length)return i.slice();i=[],r=new se;for(const p of d)r.has(p)||r.set(p,i.push(p)-1);return c},c.range=function(d){return arguments.length?(a=Array.from(d),c):a.slice()},c.unknown=function(d){return arguments.length?(l=d,c):l},c.copy=function(){return Re(i,a).unknown(l)},fe.apply(c,arguments),c}function je(){var r,i,a=Re().unknown(void 0),l=a.domain,c=a.range,d=0,p=1,m=!1,v=0,_=0,x=.5;function C(){var T=l().length,A=p<d,U=A?p:d,I=A?d:p;r=(I-U)/Math.max(1,T-v+2*_),m&&(r=Math.floor(r)),U+=(I-U-r*(T-v))*x,i=r*(1-v),m&&(U=Math.round(U),i=Math.round(i));var P=Ke(T).map(function(O){return U+r*O});return c(A?P.reverse():P)}return delete a.unknown,a.domain=function(T){return arguments.length?(l(T),C()):l()},a.range=function(T){return arguments.length?([d,p]=T,d=+d,p=+p,C()):[d,p]},a.rangeRound=function(T){return[d,p]=T,d=+d,p=+p,m=!0,C()},a.bandwidth=function(){return i},a.step=function(){return r},a.round=function(T){return arguments.length?(m=!!T,C()):m},a.padding=function(T){return arguments.length?(v=Math.min(1,_=+T),C()):v},a.paddingInner=function(T){return arguments.length?(v=Math.min(1,T),C()):v},a.paddingOuter=function(T){return arguments.length?(_=+T,C()):_},a.align=function(T){return arguments.length?(x=Math.max(0,Math.min(1,T)),C()):x},a.copy=function(){return je(l(),[d,p]).round(m).paddingInner(v).paddingOuter(_).align(x)},fe.apply(C(),arguments)}function nt(r){var i=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return nt(i())},r}function pt(r){return+r}var Bt=[0,1];function Nt(r){return r}function Rt(r,i){return(i-=r=+r)?function(a){return(a-r)/i}:function(a){return function(){return a}}(isNaN(i)?NaN:.5)}function un(r,i,a){var l=r[0],c=r[1],d=i[0],p=i[1];return c<l?(l=Rt(c,l),d=a(p,d)):(l=Rt(l,c),d=a(d,p)),function(m){return d(l(m))}}function gn(r,i,a){var l=Math.min(r.length,i.length)-1,c=new Array(l),d=new Array(l),p=-1;for(r[l]<r[0]&&(r=r.slice().reverse(),i=i.slice().reverse());++p<l;)c[p]=Rt(r[p],r[p+1]),d[p]=a(i[p],i[p+1]);return function(m){var v=R(r,m,1,l)-1;return d[v](c[v](m))}}function ii(r,i){return i.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function Wr(){var r,i,a,l,c,d,p=Bt,m=Bt,v=Ra,_=Nt;function x(){var T=Math.min(p.length,m.length);return _!==Nt&&(_=function(A,U){var I;return A>U&&(I=A,A=U,U=I),function(P){return Math.max(A,Math.min(U,P))}}(p[0],p[T-1])),l=T>2?gn:un,c=d=null,C}function C(T){return T==null||isNaN(T=+T)?a:(c||(c=l(p.map(r),m,v)))(r(_(T)))}return C.invert=function(T){return _(i((d||(d=l(m,p.map(r),ti)))(T)))},C.domain=function(T){return arguments.length?(p=Array.from(T,pt),x()):p.slice()},C.range=function(T){return arguments.length?(m=Array.from(T),x()):m.slice()},C.rangeRound=function(T){return m=Array.from(T),v=tl,x()},C.clamp=function(T){return arguments.length?(_=!!T||Nt,x()):_!==Nt},C.interpolate=function(T){return arguments.length?(v=T,x()):v},C.unknown=function(T){return arguments.length?(a=T,C):a},function(T,A){return r=T,i=A,x()}}function Di(){return Wr()(Nt,Nt)}function hr(r,i,a,l){var c,d=Ve(r,i,a);switch((l=du(l??",f")).type){case"s":var p=Math.max(Math.abs(r),Math.abs(i));return l.precision!=null||isNaN(c=Jc(d,p))||(l.precision=c),n.formatPrefix(l,p);case"":case"e":case"g":case"p":case"r":l.precision!=null||isNaN(c=Zm(d,Math.max(Math.abs(r),Math.abs(i))))||(l.precision=c-(l.type==="e"));break;case"f":case"%":l.precision!=null||isNaN(c=Vm(d))||(l.precision=c-2*(l.type==="%"))}return n.format(l)}function Vr(r){var i=r.domain;return r.ticks=function(a){var l=i();return rt(l[0],l[l.length-1],a??10)},r.tickFormat=function(a,l){var c=i();return hr(c[0],c[c.length-1],a??10,l)},r.nice=function(a){a==null&&(a=10);var l,c,d=i(),p=0,m=d.length-1,v=d[p],_=d[m],x=10;for(_<v&&(c=v,v=_,_=c,c=p,p=m,m=c);x-- >0;){if((c=ct(v,_,a))===l)return d[p]=v,d[m]=_,i(d);if(c>0)v=Math.floor(v/c)*c,_=Math.ceil(_/c)*c;else{if(!(c<0))break;v=Math.ceil(v*c)/c,_=Math.floor(_*c)/c}l=c}return r},r}function _a(r,i){var a,l=0,c=(r=r.slice()).length-1,d=r[l],p=r[c];return p<d&&(a=l,l=c,c=a,a=d,d=p,p=a),r[l]=i.floor(d),r[c]=i.ceil(p),r}function Vg(r){return Math.log(r)}function OC(r){return Math.exp(r)}function FL(r){return-Math.log(-r)}function BL(r){return-Math.exp(-r)}function $L(r){return isFinite(r)?+("1e"+r):r<0?0:r}function RC(r){return(i,a)=>-r(-i,a)}function wx(r){const i=r(Vg,OC),a=i.domain;let l,c,d=10;function p(){return l=function(m){return m===Math.E?Math.log:m===10&&Math.log10||m===2&&Math.log2||(m=Math.log(m),v=>Math.log(v)/m)}(d),c=function(m){return m===10?$L:m===Math.E?Math.exp:v=>Math.pow(m,v)}(d),a()[0]<0?(l=RC(l),c=RC(c),r(FL,BL)):r(Vg,OC),i}return i.base=function(m){return arguments.length?(d=+m,p()):d},i.domain=function(m){return arguments.length?(a(m),p()):a()},i.ticks=m=>{const v=a();let _=v[0],x=v[v.length-1];const C=x<_;C&&([_,x]=[x,_]);let T,A,U=l(_),I=l(x);const P=m==null?10:+m;let O=[];if(!(d%1)&&I-U<P){if(U=Math.floor(U),I=Math.ceil(I),_>0){for(;U<=I;++U)for(T=1;T<d;++T)if(A=U<0?T/c(-U):T*c(U),!(A<_)){if(A>x)break;O.push(A)}}else for(;U<=I;++U)for(T=d-1;T>=1;--T)if(A=U>0?T/c(-U):T*c(U),!(A<_)){if(A>x)break;O.push(A)}2*O.length<P&&(O=rt(_,x,P))}else O=rt(U,I,Math.min(I-U,P)).map(c);return C?O.reverse():O},i.tickFormat=(m,v)=>{if(m==null&&(m=10),v==null&&(v=d===10?"s":","),typeof v!="function"&&(d%1||(v=du(v)).precision!=null||(v.trim=!0),v=n.format(v)),m===1/0)return v;const _=Math.max(1,d*m/i.ticks().length);return x=>{let C=x/c(Math.round(l(x)));return C*d<d-.5&&(C*=d),C<=_?v(x):""}},i.nice=()=>a(_a(a(),{floor:m=>c(Math.floor(l(m))),ceil:m=>c(Math.ceil(l(m)))})),i}function DC(r){return function(i){return Math.sign(i)*Math.log1p(Math.abs(i/r))}}function zC(r){return function(i){return Math.sign(i)*Math.expm1(Math.abs(i))*r}}function bx(r){var i=1,a=r(DC(i),zC(i));return a.constant=function(l){return arguments.length?r(DC(i=+l),zC(i)):i},Vr(a)}function UC(r){return function(i){return i<0?-Math.pow(-i,r):Math.pow(i,r)}}function jL(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function HL(r){return r<0?-r*r:r*r}function xx(r){var i=r(Nt,Nt),a=1;function l(){return a===1?r(Nt,Nt):a===.5?r(jL,HL):r(UC(a),UC(1/a))}return i.exponent=function(c){return arguments.length?(a=+c,l()):a},Vr(i)}function Sx(){var r=xx(Wr());return r.copy=function(){return ii(r,Sx()).exponent(r.exponent())},fe.apply(r,arguments),r}function FC(r){return Math.sign(r)*r*r}function WL(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}var Ex=new Date,Tx=new Date;function oi(r,i,a,l){function c(d){return r(d=arguments.length===0?new Date:new Date(+d)),d}return c.floor=function(d){return r(d=new Date(+d)),d},c.ceil=function(d){return r(d=new Date(d-1)),i(d,1),r(d),d},c.round=function(d){var p=c(d),m=c.ceil(d);return d-p<m-d?p:m},c.offset=function(d,p){return i(d=new Date(+d),p==null?1:Math.floor(p)),d},c.range=function(d,p,m){var v,_=[];if(d=c.ceil(d),m=m==null?1:Math.floor(m),!(d<p&&m>0))return _;do _.push(v=new Date(+d)),i(d,m),r(d);while(v<d&&d<p);return _},c.filter=function(d){return oi(function(p){if(p>=p)for(;r(p),!d(p);)p.setTime(p-1)},function(p,m){if(p>=p)if(m<0)for(;++m<=0;)for(;i(p,-1),!d(p););else for(;--m>=0;)for(;i(p,1),!d(p););})},a&&(c.count=function(d,p){return Ex.setTime(+d),Tx.setTime(+p),r(Ex),r(Tx),Math.floor(a(Ex,Tx))},c.every=function(d){return d=Math.floor(d),isFinite(d)&&d>0?d>1?c.filter(l?function(p){return l(p)%d==0}:function(p){return c.count(0,p)%d==0}):c:null}),c}var Z1=oi(function(){},function(r,i){r.setTime(+r+i)},function(r,i){return i-r});Z1.every=function(r){return r=Math.floor(r),isFinite(r)&&r>0?r>1?oi(function(i){i.setTime(Math.floor(i/r)*r)},function(i,a){i.setTime(+i+a*r)},function(i,a){return(a-i)/r}):Z1:null};var Cx=Z1,BC=Z1.range;const Zg=1e3,Mu=6e4,qg=36e5,kx=864e5,Ax=6048e5,VL=2592e6,Mx=31536e6;var $C=oi(function(r){r.setTime(r-r.getMilliseconds())},function(r,i){r.setTime(+r+i*Zg)},function(r,i){return(i-r)/Zg},function(r){return r.getUTCSeconds()}),Nu=$C,jC=$C.range,HC=oi(function(r){r.setTime(r-r.getMilliseconds()-r.getSeconds()*Zg)},function(r,i){r.setTime(+r+i*Mu)},function(r,i){return(i-r)/Mu},function(r){return r.getMinutes()}),Nx=HC,ZL=HC.range,WC=oi(function(r){r.setTime(r-r.getMilliseconds()-r.getSeconds()*Zg-r.getMinutes()*Mu)},function(r,i){r.setTime(+r+i*qg)},function(r,i){return(i-r)/qg},function(r){return r.getHours()}),Lx=WC,qL=WC.range,VC=oi(r=>r.setHours(0,0,0,0),(r,i)=>r.setDate(r.getDate()+i),(r,i)=>(i-r-(i.getTimezoneOffset()-r.getTimezoneOffset())*Mu)/kx,r=>r.getDate()-1),Gg=VC,GL=VC.range;function xf(r){return oi(function(i){i.setDate(i.getDate()-(i.getDay()+7-r)%7),i.setHours(0,0,0,0)},function(i,a){i.setDate(i.getDate()+7*a)},function(i,a){return(a-i-(a.getTimezoneOffset()-i.getTimezoneOffset())*Mu)/Ax})}var Uh=xf(0),Yg=xf(1),ZC=xf(2),qC=xf(3),Sf=xf(4),GC=xf(5),YC=xf(6),KC=Uh.range,YL=Yg.range,KL=ZC.range,JL=qC.range,XL=Sf.range,QL=GC.range,eP=YC.range,JC=oi(function(r){r.setDate(1),r.setHours(0,0,0,0)},function(r,i){r.setMonth(r.getMonth()+i)},function(r,i){return i.getMonth()-r.getMonth()+12*(i.getFullYear()-r.getFullYear())},function(r){return r.getMonth()}),Px=JC,tP=JC.range,Ix=oi(function(r){r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,i){r.setFullYear(r.getFullYear()+i)},function(r,i){return i.getFullYear()-r.getFullYear()},function(r){return r.getFullYear()});Ix.every=function(r){return isFinite(r=Math.floor(r))&&r>0?oi(function(i){i.setFullYear(Math.floor(i.getFullYear()/r)*r),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,a){i.setFullYear(i.getFullYear()+a*r)}):null};var Lu=Ix,nP=Ix.range,XC=oi(function(r){r.setUTCSeconds(0,0)},function(r,i){r.setTime(+r+i*Mu)},function(r,i){return(i-r)/Mu},function(r){return r.getUTCMinutes()}),Ox=XC,rP=XC.range,QC=oi(function(r){r.setUTCMinutes(0,0,0)},function(r,i){r.setTime(+r+i*qg)},function(r,i){return(i-r)/qg},function(r){return r.getUTCHours()}),Rx=QC,iP=QC.range,e3=oi(function(r){r.setUTCHours(0,0,0,0)},function(r,i){r.setUTCDate(r.getUTCDate()+i)},function(r,i){return(i-r)/kx},function(r){return r.getUTCDate()-1}),Kg=e3,oP=e3.range;function Ef(r){return oi(function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-r)%7),i.setUTCHours(0,0,0,0)},function(i,a){i.setUTCDate(i.getUTCDate()+7*a)},function(i,a){return(a-i)/Ax})}var Fh=Ef(0),Jg=Ef(1),t3=Ef(2),n3=Ef(3),Tf=Ef(4),r3=Ef(5),i3=Ef(6),o3=Fh.range,aP=Jg.range,sP=t3.range,lP=n3.range,uP=Tf.range,cP=r3.range,fP=i3.range,a3=oi(function(r){r.setUTCDate(1),r.setUTCHours(0,0,0,0)},function(r,i){r.setUTCMonth(r.getUTCMonth()+i)},function(r,i){return i.getUTCMonth()-r.getUTCMonth()+12*(i.getUTCFullYear()-r.getUTCFullYear())},function(r){return r.getUTCMonth()}),Dx=a3,dP=a3.range,zx=oi(function(r){r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,i){r.setUTCFullYear(r.getUTCFullYear()+i)},function(r,i){return i.getUTCFullYear()-r.getUTCFullYear()},function(r){return r.getUTCFullYear()});zx.every=function(r){return isFinite(r=Math.floor(r))&&r>0?oi(function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/r)*r),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,a){i.setUTCFullYear(i.getUTCFullYear()+a*r)}):null};var Pu=zx,hP=zx.range;function s3(r,i,a,l,c,d){const p=[[Nu,1,Zg],[Nu,5,5e3],[Nu,15,15e3],[Nu,30,3e4],[d,1,Mu],[d,5,3e5],[d,15,9e5],[d,30,18e5],[c,1,qg],[c,3,108e5],[c,6,216e5],[c,12,432e5],[l,1,kx],[l,2,1728e5],[a,1,Ax],[i,1,VL],[i,3,7776e6],[r,1,Mx]];function m(v,_,x){const C=Math.abs(_-v)/x,T=f(([,,I])=>I).right(p,C);if(T===p.length)return r.every(Ve(v/Mx,_/Mx,x));if(T===0)return Cx.every(Math.max(Ve(v,_,x),1));const[A,U]=p[C/p[T-1][2]<p[T][2]/C?T-1:T];return A.every(U)}return[function(v,_,x){const C=_<v;C&&([v,_]=[_,v]);const T=x&&typeof x.range=="function"?x:m(v,_,x),A=T?T.range(v,+_+1):[];return C?A.reverse():A},m]}const[l3,u3]=s3(Pu,Dx,Fh,Kg,Rx,Ox),[c3,f3]=s3(Lu,Px,Uh,Gg,Lx,Nx);function Ux(r){if(0<=r.y&&r.y<100){var i=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return i.setFullYear(r.y),i}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function Fx(r){if(0<=r.y&&r.y<100){var i=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return i.setUTCFullYear(r.y),i}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function Xg(r,i,a){return{y:r,m:i,d:a,H:0,M:0,S:0,L:0}}function d3(r){var i=r.dateTime,a=r.date,l=r.time,c=r.periods,d=r.days,p=r.shortDays,m=r.months,v=r.shortMonths,_=Qg(c),x=ev(c),C=Qg(d),T=ev(d),A=Qg(p),U=ev(p),I=Qg(m),P=ev(m),O=Qg(v),q=ev(v),W={a:function(le){return p[le.getDay()]},A:function(le){return d[le.getDay()]},b:function(le){return v[le.getMonth()]},B:function(le){return m[le.getMonth()]},c:null,d:_3,e:_3,f:DP,g:ZP,G:GP,H:IP,I:OP,j:RP,L:y3,m:zP,M:UP,p:function(le){return c[+(le.getHours()>=12)]},q:function(le){return 1+~~(le.getMonth()/3)},Q:T3,s:C3,S:FP,u:BP,U:$P,V:jP,w:HP,W:WP,x:null,X:null,y:VP,Y:qP,Z:YP,"%":E3},j={a:function(le){return p[le.getUTCDay()]},A:function(le){return d[le.getUTCDay()]},b:function(le){return v[le.getUTCMonth()]},B:function(le){return m[le.getUTCMonth()]},c:null,d:b3,e:b3,f:QP,g:u8,G:f8,H:KP,I:JP,j:XP,L:x3,m:e8,M:t8,p:function(le){return c[+(le.getUTCHours()>=12)]},q:function(le){return 1+~~(le.getUTCMonth()/3)},Q:T3,s:C3,S:n8,u:r8,U:i8,V:o8,w:a8,W:s8,x:null,X:null,y:l8,Y:c8,Z:d8,"%":E3},Y={a:function(le,ae,ie){var ue=A.exec(ae.slice(ie));return ue?(le.w=U.get(ue[0].toLowerCase()),ie+ue[0].length):-1},A:function(le,ae,ie){var ue=C.exec(ae.slice(ie));return ue?(le.w=T.get(ue[0].toLowerCase()),ie+ue[0].length):-1},b:function(le,ae,ie){var ue=O.exec(ae.slice(ie));return ue?(le.m=q.get(ue[0].toLowerCase()),ie+ue[0].length):-1},B:function(le,ae,ie){var ue=I.exec(ae.slice(ie));return ue?(le.m=P.get(ue[0].toLowerCase()),ie+ue[0].length):-1},c:function(le,ae,ie){return Se(le,i,ae,ie)},d:g3,e:g3,f:MP,g:m3,G:p3,H:v3,I:v3,j:TP,L:AP,m:EP,M:CP,p:function(le,ae,ie){var ue=_.exec(ae.slice(ie));return ue?(le.p=x.get(ue[0].toLowerCase()),ie+ue[0].length):-1},q:SP,Q:LP,s:PP,S:kP,u:_P,U:yP,V:wP,w:vP,W:bP,x:function(le,ae,ie){return Se(le,a,ae,ie)},X:function(le,ae,ie){return Se(le,l,ae,ie)},y:m3,Y:p3,Z:xP,"%":NP};function Q(le,ae){return function(ie){var ue,ee,re,de=[],ve=-1,Ee=0,De=le.length;for(ie instanceof Date||(ie=new Date(+ie));++ve<De;)le.charCodeAt(ve)===37&&(de.push(le.slice(Ee,ve)),(ee=h3[ue=le.charAt(++ve)])!=null?ue=le.charAt(++ve):ee=ue==="e"?" ":"0",(re=ae[ue])&&(ue=re(ie,ee)),de.push(ue),Ee=ve+1);return de.push(le.slice(Ee,ve)),de.join("")}}function me(le,ae){return function(ie){var ue,ee,re=Xg(1900,void 0,1);if(Se(re,le,ie+="",0)!=ie.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(1e3*re.s+("L"in re?re.L:0));if(ae&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+12*re.p),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(ee=(ue=Fx(Xg(re.y,0,1))).getUTCDay(),ue=ee>4||ee===0?Jg.ceil(ue):Jg(ue),ue=Kg.offset(ue,7*(re.V-1)),re.y=ue.getUTCFullYear(),re.m=ue.getUTCMonth(),re.d=ue.getUTCDate()+(re.w+6)%7):(ee=(ue=Ux(Xg(re.y,0,1))).getDay(),ue=ee>4||ee===0?Yg.ceil(ue):Yg(ue),ue=Gg.offset(ue,7*(re.V-1)),re.y=ue.getFullYear(),re.m=ue.getMonth(),re.d=ue.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),ee="Z"in re?Fx(Xg(re.y,0,1)).getUTCDay():Ux(Xg(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+7*re.W-(ee+5)%7:re.w+7*re.U-(ee+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,Fx(re)):Ux(re)}}function Se(le,ae,ie,ue){for(var ee,re,de=0,ve=ae.length,Ee=ie.length;de<ve;){if(ue>=Ee)return-1;if((ee=ae.charCodeAt(de++))===37){if(ee=ae.charAt(de++),!(re=Y[ee in h3?ae.charAt(de++):ee])||(ue=re(le,ie,ue))<0)return-1}else if(ee!=ie.charCodeAt(ue++))return-1}return ue}return W.x=Q(a,W),W.X=Q(l,W),W.c=Q(i,W),j.x=Q(a,j),j.X=Q(l,j),j.c=Q(i,j),{format:function(le){var ae=Q(le+="",W);return ae.toString=function(){return le},ae},parse:function(le){var ae=me(le+="",!1);return ae.toString=function(){return le},ae},utcFormat:function(le){var ae=Q(le+="",j);return ae.toString=function(){return le},ae},utcParse:function(le){var ae=me(le+="",!0);return ae.toString=function(){return le},ae}}}var Bh,h3={"-":"",_:" ",0:"0"},gi=/^\s*\d+/,pP=/^%/,mP=/[\\^$*+?|[\]().{}]/g;function On(r,i,a){var l=r<0?"-":"",c=(l?-r:r)+"",d=c.length;return l+(d<a?new Array(a-d+1).join(i)+c:c)}function gP(r){return r.replace(mP,"\\$&")}function Qg(r){return new RegExp("^(?:"+r.map(gP).join("|")+")","i")}function ev(r){return new Map(r.map((i,a)=>[i.toLowerCase(),a]))}function vP(r,i,a){var l=gi.exec(i.slice(a,a+1));return l?(r.w=+l[0],a+l[0].length):-1}function _P(r,i,a){var l=gi.exec(i.slice(a,a+1));return l?(r.u=+l[0],a+l[0].length):-1}function yP(r,i,a){var l=gi.exec(i.slice(a,a+2));return l?(r.U=+l[0],a+l[0].length):-1}function wP(r,i,a){var l=gi.exec(i.slice(a,a+2));return l?(r.V=+l[0],a+l[0].length):-1}function bP(r,i,a){var l=gi.exec(i.slice(a,a+2));return l?(r.W=+l[0],a+l[0].length):-1}function p3(r,i,a){var l=gi.exec(i.slice(a,a+4));return l?(r.y=+l[0],a+l[0].length):-1}function m3(r,i,a){var l=gi.exec(i.slice(a,a+2));return l?(r.y=+l[0]+(+l[0]>68?1900:2e3),a+l[0].length):-1}function xP(r,i,a){var l=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(a,a+6));return l?(r.Z=l[1]?0:-(l[2]+(l[3]||"00")),a+l[0].length):-1}function SP(r,i,a){var l=gi.exec(i.slice(a,a+1));return l?(r.q=3*l[0]-3,a+l[0].length):-1}function EP(r,i,a){var l=gi.exec(i.slice(a,a+2));return l?(r.m=l[0]-1,a+l[0].length):-1}function g3(r,i,a){var l=gi.exec(i.slice(a,a+2));return l?(r.d=+l[0],a+l[0].length):-1}function TP(r,i,a){var l=gi.exec(i.slice(a,a+3));return l?(r.m=0,r.d=+l[0],a+l[0].length):-1}function v3(r,i,a){var l=gi.exec(i.slice(a,a+2));return l?(r.H=+l[0],a+l[0].length):-1}function CP(r,i,a){var l=gi.exec(i.slice(a,a+2));return l?(r.M=+l[0],a+l[0].length):-1}function kP(r,i,a){var l=gi.exec(i.slice(a,a+2));return l?(r.S=+l[0],a+l[0].length):-1}function AP(r,i,a){var l=gi.exec(i.slice(a,a+3));return l?(r.L=+l[0],a+l[0].length):-1}function MP(r,i,a){var l=gi.exec(i.slice(a,a+6));return l?(r.L=Math.floor(l[0]/1e3),a+l[0].length):-1}function NP(r,i,a){var l=pP.exec(i.slice(a,a+1));return l?a+l[0].length:-1}function LP(r,i,a){var l=gi.exec(i.slice(a));return l?(r.Q=+l[0],a+l[0].length):-1}function PP(r,i,a){var l=gi.exec(i.slice(a));return l?(r.s=+l[0],a+l[0].length):-1}function _3(r,i){return On(r.getDate(),i,2)}function IP(r,i){return On(r.getHours(),i,2)}function OP(r,i){return On(r.getHours()%12||12,i,2)}function RP(r,i){return On(1+Gg.count(Lu(r),r),i,3)}function y3(r,i){return On(r.getMilliseconds(),i,3)}function DP(r,i){return y3(r,i)+"000"}function zP(r,i){return On(r.getMonth()+1,i,2)}function UP(r,i){return On(r.getMinutes(),i,2)}function FP(r,i){return On(r.getSeconds(),i,2)}function BP(r){var i=r.getDay();return i===0?7:i}function $P(r,i){return On(Uh.count(Lu(r)-1,r),i,2)}function w3(r){var i=r.getDay();return i>=4||i===0?Sf(r):Sf.ceil(r)}function jP(r,i){return r=w3(r),On(Sf.count(Lu(r),r)+(Lu(r).getDay()===4),i,2)}function HP(r){return r.getDay()}function WP(r,i){return On(Yg.count(Lu(r)-1,r),i,2)}function VP(r,i){return On(r.getFullYear()%100,i,2)}function ZP(r,i){return On((r=w3(r)).getFullYear()%100,i,2)}function qP(r,i){return On(r.getFullYear()%1e4,i,4)}function GP(r,i){var a=r.getDay();return On((r=a>=4||a===0?Sf(r):Sf.ceil(r)).getFullYear()%1e4,i,4)}function YP(r){var i=r.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+On(i/60|0,"0",2)+On(i%60,"0",2)}function b3(r,i){return On(r.getUTCDate(),i,2)}function KP(r,i){return On(r.getUTCHours(),i,2)}function JP(r,i){return On(r.getUTCHours()%12||12,i,2)}function XP(r,i){return On(1+Kg.count(Pu(r),r),i,3)}function x3(r,i){return On(r.getUTCMilliseconds(),i,3)}function QP(r,i){return x3(r,i)+"000"}function e8(r,i){return On(r.getUTCMonth()+1,i,2)}function t8(r,i){return On(r.getUTCMinutes(),i,2)}function n8(r,i){return On(r.getUTCSeconds(),i,2)}function r8(r){var i=r.getUTCDay();return i===0?7:i}function i8(r,i){return On(Fh.count(Pu(r)-1,r),i,2)}function S3(r){var i=r.getUTCDay();return i>=4||i===0?Tf(r):Tf.ceil(r)}function o8(r,i){return r=S3(r),On(Tf.count(Pu(r),r)+(Pu(r).getUTCDay()===4),i,2)}function a8(r){return r.getUTCDay()}function s8(r,i){return On(Jg.count(Pu(r)-1,r),i,2)}function l8(r,i){return On(r.getUTCFullYear()%100,i,2)}function u8(r,i){return On((r=S3(r)).getUTCFullYear()%100,i,2)}function c8(r,i){return On(r.getUTCFullYear()%1e4,i,4)}function f8(r,i){var a=r.getUTCDay();return On((r=a>=4||a===0?Tf(r):Tf.ceil(r)).getUTCFullYear()%1e4,i,4)}function d8(){return"+0000"}function E3(){return"%"}function T3(r){return+r}function C3(r){return Math.floor(+r/1e3)}function k3(r){return Bh=d3(r),n.timeFormat=Bh.format,n.timeParse=Bh.parse,n.utcFormat=Bh.utcFormat,n.utcParse=Bh.utcParse,Bh}n.timeFormat=void 0,n.timeParse=void 0,n.utcFormat=void 0,n.utcParse=void 0,k3({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var A3="%Y-%m-%dT%H:%M:%S.%LZ",h8=Date.prototype.toISOString?function(r){return r.toISOString()}:n.utcFormat(A3),p8=h8,m8=+new Date("2000-01-01T00:00:00.000Z")?function(r){var i=new Date(r);return isNaN(i)?null:i}:n.utcParse(A3),g8=m8;function v8(r){return new Date(r)}function _8(r){return r instanceof Date?+r:+new Date(+r)}function Bx(r,i,a,l,c,d,p,m,v,_){var x=Di(),C=x.invert,T=x.domain,A=_(".%L"),U=_(":%S"),I=_("%I:%M"),P=_("%I %p"),O=_("%a %d"),q=_("%b %d"),W=_("%B"),j=_("%Y");function Y(Q){return(v(Q)<Q?A:m(Q)<Q?U:p(Q)<Q?I:d(Q)<Q?P:l(Q)<Q?c(Q)<Q?O:q:a(Q)<Q?W:j)(Q)}return x.invert=function(Q){return new Date(C(Q))},x.domain=function(Q){return arguments.length?T(Array.from(Q,_8)):T().map(v8)},x.ticks=function(Q){var me=T();return r(me[0],me[me.length-1],Q??10)},x.tickFormat=function(Q,me){return me==null?Y:_(me)},x.nice=function(Q){var me=T();return Q&&typeof Q.range=="function"||(Q=i(me[0],me[me.length-1],Q??10)),Q?T(_a(me,Q)):x},x.copy=function(){return ii(x,Bx(r,i,a,l,c,d,p,m,v,_))},x}function q1(){var r,i,a,l,c,d=0,p=1,m=Nt,v=!1;function _(C){return C==null||isNaN(C=+C)?c:m(a===0?.5:(C=(l(C)-r)*a,v?Math.max(0,Math.min(1,C)):C))}function x(C){return function(T){var A,U;return arguments.length?([A,U]=T,m=C(A,U),_):[m(0),m(1)]}}return _.domain=function(C){return arguments.length?([d,p]=C,r=l(d=+d),i=l(p=+p),a=r===i?0:1/(i-r),_):[d,p]},_.clamp=function(C){return arguments.length?(v=!!C,_):v},_.interpolator=function(C){return arguments.length?(m=C,_):m},_.range=x(Ra),_.rangeRound=x(tl),_.unknown=function(C){return arguments.length?(c=C,_):c},function(C){return l=C,r=C(d),i=C(p),a=r===i?0:1/(i-r),_}}function Iu(r,i){return i.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function $x(){var r=xx(q1());return r.copy=function(){return Iu(r,$x()).exponent(r.exponent())},ye.apply(r,arguments)}function G1(){var r,i,a,l,c,d,p,m=0,v=.5,_=1,x=1,C=Nt,T=!1;function A(I){return isNaN(I=+I)?p:(I=.5+((I=+d(I))-i)*(x*I<x*i?l:c),C(T?Math.max(0,Math.min(1,I)):I))}function U(I){return function(P){var O,q,W;return arguments.length?([O,q,W]=P,C=Mc(I,[O,q,W]),A):[C(0),C(.5),C(1)]}}return A.domain=function(I){return arguments.length?([m,v,_]=I,r=d(m=+m),i=d(v=+v),a=d(_=+_),l=r===i?0:.5/(i-r),c=i===a?0:.5/(a-i),x=i<r?-1:1,A):[m,v,_]},A.clamp=function(I){return arguments.length?(T=!!I,A):T},A.interpolator=function(I){return arguments.length?(C=I,A):C},A.range=U(Ra),A.rangeRound=U(tl),A.unknown=function(I){return arguments.length?(p=I,A):p},function(I){return d=I,r=I(m),i=I(v),a=I(_),l=r===i?0:.5/(i-r),c=i===a?0:.5/(a-i),x=i<r?-1:1,A}}function jx(){var r=xx(G1());return r.copy=function(){return Iu(r,jx()).exponent(r.exponent())},ye.apply(r,arguments)}function tn(r){for(var i=r.length/6|0,a=new Array(i),l=0;l<i;)a[l]="#"+r.slice(6*l,6*++l);return a}var y8=tn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),w8=tn("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),b8=tn("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),x8=tn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),S8=tn("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),E8=tn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),T8=tn("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),C8=tn("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),k8=tn("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),A8=tn("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Yn=r=>Un(r[r.length-1]),M3=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(tn),M8=Yn(M3),N3=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(tn),N8=Yn(N3),L3=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(tn),L8=Yn(L3),P3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(tn),P8=Yn(P3),I3=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(tn),I8=Yn(I3),O3=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(tn),O8=Yn(O3),R3=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(tn),R8=Yn(R3),D3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(tn),D8=Yn(D3),z3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(tn),z8=Yn(z3),U3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(tn),U8=Yn(U3),F3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(tn),F8=Yn(F3),B3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(tn),B8=Yn(B3),$3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(tn),$8=Yn($3),j3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(tn),j8=Yn(j3),H3=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(tn),H8=Yn(H3),W3=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(tn),W8=Yn(W3),V3=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(tn),V8=Yn(V3),Z3=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(tn),Z8=Yn(Z3),q3=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(tn),q8=Yn(q3),G3=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(tn),G8=Yn(G3),Y3=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(tn),Y8=Yn(Y3),K3=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(tn),K8=Yn(K3),J3=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(tn),J8=Yn(J3),X3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(tn),X8=Yn(X3),Q3=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(tn),Q8=Yn(Q3),ek=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(tn),e7=Yn(ek),tk=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(tn),t7=Yn(tk),n7=vd(jo(300,.5,0),jo(-240,.5,1)),r7=vd(jo(-100,.75,.35),jo(80,1.5,.8)),i7=vd(jo(260,.75,.35),jo(80,1.5,.8)),Y1=jo(),K1=Zl(),o7=Math.PI/3,a7=2*Math.PI/3;function J1(r){var i=r.length;return function(a){return r[Math.max(0,Math.min(i-1,Math.floor(a*i)))]}}var s7=J1(tn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),l7=J1(tn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),u7=J1(tn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),c7=J1(tn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Yt(r){return function(){return r}}const nk=Math.abs,Wi=Math.atan2,Tl=Math.cos,f7=Math.max,$h=Math.min,Lo=Math.sin,or=Math.sqrt,Vi=1e-12,Ou=Math.PI,X1=Ou/2,Ru=2*Ou;function d7(r){return r>1?0:r<-1?Ou:Math.acos(r)}function rk(r){return r>=1?X1:r<=-1?-X1:Math.asin(r)}function h7(r){return r.innerRadius}function p7(r){return r.outerRadius}function m7(r){return r.startAngle}function g7(r){return r.endAngle}function v7(r){return r&&r.padAngle}function _7(r,i,a,l,c,d,p,m){var v=a-r,_=l-i,x=p-c,C=m-d,T=C*v-x*_;if(!(T*T<Vi))return[r+(T=(x*(i-d)-C*(r-c))/T)*v,i+T*_]}function Q1(r,i,a,l,c,d,p){var m=r-a,v=i-l,_=(p?d:-d)/or(m*m+v*v),x=_*v,C=-_*m,T=r+x,A=i+C,U=a+x,I=l+C,P=(T+U)/2,O=(A+I)/2,q=U-T,W=I-A,j=q*q+W*W,Y=c-d,Q=T*I-U*A,me=(W<0?-1:1)*or(f7(0,Y*Y*j-Q*Q)),Se=(Q*W-q*me)/j,le=(-Q*q-W*me)/j,ae=(Q*W+q*me)/j,ie=(-Q*q+W*me)/j,ue=Se-P,ee=le-O,re=ae-P,de=ie-O;return ue*ue+ee*ee>re*re+de*de&&(Se=ae,le=ie),{cx:Se,cy:le,x01:-x,y01:-C,x11:Se*(c/Y-1),y11:le*(c/Y-1)}}var y7=Array.prototype.slice;function ey(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function ik(r){this._context=r}function ty(r){return new ik(r)}function Hx(r){return r[0]}function Wx(r){return r[1]}function Vx(r,i){var a=Yt(!0),l=null,c=ty,d=null;function p(m){var v,_,x,C=(m=ey(m)).length,T=!1;for(l==null&&(d=c(x=ja())),v=0;v<=C;++v)!(v<C&&a(_=m[v],v,m))===T&&((T=!T)?d.lineStart():d.lineEnd()),T&&d.point(+r(_,v,m),+i(_,v,m));if(x)return d=null,x+""||null}return r=typeof r=="function"?r:r===void 0?Hx:Yt(r),i=typeof i=="function"?i:i===void 0?Wx:Yt(i),p.x=function(m){return arguments.length?(r=typeof m=="function"?m:Yt(+m),p):r},p.y=function(m){return arguments.length?(i=typeof m=="function"?m:Yt(+m),p):i},p.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Yt(!!m),p):a},p.curve=function(m){return arguments.length?(c=m,l!=null&&(d=c(l)),p):c},p.context=function(m){return arguments.length?(m==null?l=d=null:d=c(l=m),p):l},p}function ok(r,i,a){var l=null,c=Yt(!0),d=null,p=ty,m=null;function v(x){var C,T,A,U,I,P=(x=ey(x)).length,O=!1,q=new Array(P),W=new Array(P);for(d==null&&(m=p(I=ja())),C=0;C<=P;++C){if(!(C<P&&c(U=x[C],C,x))===O)if(O=!O)T=C,m.areaStart(),m.lineStart();else{for(m.lineEnd(),m.lineStart(),A=C-1;A>=T;--A)m.point(q[A],W[A]);m.lineEnd(),m.areaEnd()}O&&(q[C]=+r(U,C,x),W[C]=+i(U,C,x),m.point(l?+l(U,C,x):q[C],a?+a(U,C,x):W[C]))}if(I)return m=null,I+""||null}function _(){return Vx().defined(c).curve(p).context(d)}return r=typeof r=="function"?r:r===void 0?Hx:Yt(+r),i=typeof i=="function"?i:Yt(i===void 0?0:+i),a=typeof a=="function"?a:a===void 0?Wx:Yt(+a),v.x=function(x){return arguments.length?(r=typeof x=="function"?x:Yt(+x),l=null,v):r},v.x0=function(x){return arguments.length?(r=typeof x=="function"?x:Yt(+x),v):r},v.x1=function(x){return arguments.length?(l=x==null?null:typeof x=="function"?x:Yt(+x),v):l},v.y=function(x){return arguments.length?(i=typeof x=="function"?x:Yt(+x),a=null,v):i},v.y0=function(x){return arguments.length?(i=typeof x=="function"?x:Yt(+x),v):i},v.y1=function(x){return arguments.length?(a=x==null?null:typeof x=="function"?x:Yt(+x),v):a},v.lineX0=v.lineY0=function(){return _().x(r).y(i)},v.lineY1=function(){return _().x(r).y(a)},v.lineX1=function(){return _().x(l).y(i)},v.defined=function(x){return arguments.length?(c=typeof x=="function"?x:Yt(!!x),v):c},v.curve=function(x){return arguments.length?(p=x,d!=null&&(m=p(d)),v):p},v.context=function(x){return arguments.length?(x==null?d=m=null:m=p(d=x),v):d},v}function w7(r,i){return i<r?-1:i>r?1:i>=r?0:NaN}function b7(r){return r}ik.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,i){switch(r=+r,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 1:this._point=2;default:this._context.lineTo(r,i)}}};var ak=Zx(ty);function sk(r){this._curve=r}function Zx(r){function i(a){return new sk(r(a))}return i._curve=r,i}function tv(r){var i=r.curve;return r.angle=r.x,delete r.x,r.radius=r.y,delete r.y,r.curve=function(a){return arguments.length?i(Zx(a)):i()._curve},r}function lk(){return tv(Vx().curve(ak))}function uk(){var r=ok().curve(ak),i=r.curve,a=r.lineX0,l=r.lineX1,c=r.lineY0,d=r.lineY1;return r.angle=r.x,delete r.x,r.startAngle=r.x0,delete r.x0,r.endAngle=r.x1,delete r.x1,r.radius=r.y,delete r.y,r.innerRadius=r.y0,delete r.y0,r.outerRadius=r.y1,delete r.y1,r.lineStartAngle=function(){return tv(a())},delete r.lineX0,r.lineEndAngle=function(){return tv(l())},delete r.lineX1,r.lineInnerRadius=function(){return tv(c())},delete r.lineY0,r.lineOuterRadius=function(){return tv(d())},delete r.lineY1,r.curve=function(p){return arguments.length?i(Zx(p)):i()._curve},r}function nv(r,i){return[(i=+i)*Math.cos(r-=Math.PI/2),i*Math.sin(r)]}sk.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(r,i){this._curve.point(i*Math.sin(r),i*-Math.cos(r))}};class ck{constructor(i,a){this._context=i,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(i,a){switch(i=+i,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,a):this._context.moveTo(i,a);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+i)/2,this._y0,this._x0,a,i,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,i,this._y0,i,a)}this._x0=i,this._y0=a}}class x7{constructor(i){this._context=i}lineStart(){this._point=0}lineEnd(){}point(i,a){if(i=+i,a=+a,this._point++==0)this._x0=i,this._y0=a;else{const l=nv(this._x0,this._y0),c=nv(this._x0,this._y0=(this._y0+a)/2),d=nv(i,this._y0),p=nv(i,a);this._context.moveTo(...l),this._context.bezierCurveTo(...c,...d,...p)}}}function fk(r){return new ck(r,!0)}function dk(r){return new ck(r,!1)}function S7(r){return new x7(r)}function E7(r){return r.source}function T7(r){return r.target}function ny(r){let i=E7,a=T7,l=Hx,c=Wx,d=null,p=null;function m(){let v;const _=y7.call(arguments),x=i.apply(this,_),C=a.apply(this,_);if(d==null&&(p=r(v=ja())),p.lineStart(),_[0]=x,p.point(+l.apply(this,_),+c.apply(this,_)),_[0]=C,p.point(+l.apply(this,_),+c.apply(this,_)),p.lineEnd(),v)return p=null,v+""||null}return m.source=function(v){return arguments.length?(i=v,m):i},m.target=function(v){return arguments.length?(a=v,m):a},m.x=function(v){return arguments.length?(l=typeof v=="function"?v:Yt(+v),m):l},m.y=function(v){return arguments.length?(c=typeof v=="function"?v:Yt(+v),m):c},m.context=function(v){return arguments.length?(v==null?d=p=null:p=r(d=v),m):d},m}const C7=or(3);var hk={draw(r,i){const a=.59436*or(i+$h(i/28,.75)),l=a/2,c=l*C7;r.moveTo(0,a),r.lineTo(0,-a),r.moveTo(-c,-l),r.lineTo(c,l),r.moveTo(-c,l),r.lineTo(c,-l)}},ry={draw(r,i){const a=or(i/Ou);r.moveTo(a,0),r.arc(0,0,a,0,Ru)}},pk={draw(r,i){const a=or(i/5)/2;r.moveTo(-3*a,-a),r.lineTo(-a,-a),r.lineTo(-a,-3*a),r.lineTo(a,-3*a),r.lineTo(a,-a),r.lineTo(3*a,-a),r.lineTo(3*a,a),r.lineTo(a,a),r.lineTo(a,3*a),r.lineTo(-a,3*a),r.lineTo(-a,a),r.lineTo(-3*a,a),r.closePath()}};const mk=or(1/3),k7=2*mk;var gk={draw(r,i){const a=or(i/k7),l=a*mk;r.moveTo(0,-a),r.lineTo(l,0),r.lineTo(0,a),r.lineTo(-l,0),r.closePath()}},vk={draw(r,i){const a=.62625*or(i);r.moveTo(0,-a),r.lineTo(a,0),r.lineTo(0,a),r.lineTo(-a,0),r.closePath()}},_k={draw(r,i){const a=.87559*or(i-$h(i/7,2));r.moveTo(-a,0),r.lineTo(a,0),r.moveTo(0,a),r.lineTo(0,-a)}},yk={draw(r,i){const a=or(i),l=-a/2;r.rect(l,l,a,a)}},wk={draw(r,i){const a=.4431*or(i);r.moveTo(a,a),r.lineTo(a,-a),r.lineTo(-a,-a),r.lineTo(-a,a),r.closePath()}};const bk=Lo(Ou/10)/Lo(7*Ou/10),A7=Lo(Ru/10)*bk,M7=-Tl(Ru/10)*bk;var xk={draw(r,i){const a=or(.8908130915292852*i),l=A7*a,c=M7*a;r.moveTo(0,-a),r.lineTo(l,c);for(let d=1;d<5;++d){const p=Ru*d/5,m=Tl(p),v=Lo(p);r.lineTo(v*a,-m*a),r.lineTo(m*l-v*c,v*l+m*c)}r.closePath()}};const qx=or(3);var Sk={draw(r,i){const a=-or(i/(3*qx));r.moveTo(0,2*a),r.lineTo(-qx*a,-a),r.lineTo(qx*a,-a),r.closePath()}};const N7=or(3);var Ek={draw(r,i){const a=.6824*or(i),l=a/2,c=a*N7/2;r.moveTo(0,-a),r.lineTo(c,l),r.lineTo(-c,l),r.closePath()}};const ya=-.5,wa=or(3)/2,Gx=1/or(12),L7=3*(Gx/2+1);var Tk={draw(r,i){const a=or(i/L7),l=a/2,c=a*Gx,d=l,p=a*Gx+a,m=-d,v=p;r.moveTo(l,c),r.lineTo(d,p),r.lineTo(m,v),r.lineTo(ya*l-wa*c,wa*l+ya*c),r.lineTo(ya*d-wa*p,wa*d+ya*p),r.lineTo(ya*m-wa*v,wa*m+ya*v),r.lineTo(ya*l+wa*c,ya*c-wa*l),r.lineTo(ya*d+wa*p,ya*p-wa*d),r.lineTo(ya*m+wa*v,ya*v-wa*m),r.closePath()}},Ck={draw(r,i){const a=.6189*or(i-$h(i/6,1.7));r.moveTo(-a,-a),r.lineTo(a,a),r.moveTo(-a,a),r.lineTo(a,-a)}};const kk=[ry,pk,gk,yk,xk,Sk,Tk],P7=[ry,_k,Ck,Ek,hk,wk,vk];function Du(){}function iy(r,i,a){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+i)/6,(r._y0+4*r._y1+a)/6)}function oy(r){this._context=r}function Ak(r){this._context=r}function Mk(r){this._context=r}function Nk(r,i){this._basis=new oy(r),this._beta=i}oy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:iy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,i){switch(r=+r,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:iy(this,r,i)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=i}},Ak.prototype={areaStart:Du,areaEnd:Du,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(r,i){switch(r=+r,i=+i,this._point){case 0:this._point=1,this._x2=r,this._y2=i;break;case 1:this._point=2,this._x3=r,this._y3=i;break;case 2:this._point=3,this._x4=r,this._y4=i,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+i)/6);break;default:iy(this,r,i)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=i}},Mk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,i){switch(r=+r,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+r)/6,l=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(a,l):this._context.moveTo(a,l);break;case 3:this._point=4;default:iy(this,r,i)}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=i}},Nk.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var r=this._x,i=this._y,a=r.length-1;if(a>0)for(var l,c=r[0],d=i[0],p=r[a]-c,m=i[a]-d,v=-1;++v<=a;)l=v/a,this._basis.point(this._beta*r[v]+(1-this._beta)*(c+l*p),this._beta*i[v]+(1-this._beta)*(d+l*m));this._x=this._y=null,this._basis.lineEnd()},point:function(r,i){this._x.push(+r),this._y.push(+i)}};var I7=function r(i){function a(l){return i===1?new oy(l):new Nk(l,i)}return a.beta=function(l){return r(+l)},a}(.85);function ay(r,i,a){r._context.bezierCurveTo(r._x1+r._k*(r._x2-r._x0),r._y1+r._k*(r._y2-r._y0),r._x2+r._k*(r._x1-i),r._y2+r._k*(r._y1-a),r._x2,r._y2)}function Yx(r,i){this._context=r,this._k=(1-i)/6}Yx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ay(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,i){switch(r=+r,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 1:this._point=2,this._x1=r,this._y1=i;break;case 2:this._point=3;default:ay(this,r,i)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var O7=function r(i){function a(l){return new Yx(l,i)}return a.tension=function(l){return r(+l)},a}(0);function Kx(r,i){this._context=r,this._k=(1-i)/6}Kx.prototype={areaStart:Du,areaEnd:Du,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(r,i){switch(r=+r,i=+i,this._point){case 0:this._point=1,this._x3=r,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=r,this._y4=i);break;case 2:this._point=3,this._x5=r,this._y5=i;break;default:ay(this,r,i)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var R7=function r(i){function a(l){return new Kx(l,i)}return a.tension=function(l){return r(+l)},a}(0);function Jx(r,i){this._context=r,this._k=(1-i)/6}Jx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,i){switch(r=+r,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ay(this,r,i)}this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var D7=function r(i){function a(l){return new Jx(l,i)}return a.tension=function(l){return r(+l)},a}(0);function Xx(r,i,a){var l=r._x1,c=r._y1,d=r._x2,p=r._y2;if(r._l01_a>Vi){var m=2*r._l01_2a+3*r._l01_a*r._l12_a+r._l12_2a,v=3*r._l01_a*(r._l01_a+r._l12_a);l=(l*m-r._x0*r._l12_2a+r._x2*r._l01_2a)/v,c=(c*m-r._y0*r._l12_2a+r._y2*r._l01_2a)/v}if(r._l23_a>Vi){var _=2*r._l23_2a+3*r._l23_a*r._l12_a+r._l12_2a,x=3*r._l23_a*(r._l23_a+r._l12_a);d=(d*_+r._x1*r._l23_2a-i*r._l12_2a)/x,p=(p*_+r._y1*r._l23_2a-a*r._l12_2a)/x}r._context.bezierCurveTo(l,c,d,p,r._x2,r._y2)}function Lk(r,i){this._context=r,this._alpha=i}Lk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,i){if(r=+r,i=+i,this._point){var a=this._x2-r,l=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+l*l,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 1:this._point=2;break;case 2:this._point=3;default:Xx(this,r,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var z7=function r(i){function a(l){return i?new Lk(l,i):new Yx(l,0)}return a.alpha=function(l){return r(+l)},a}(.5);function Pk(r,i){this._context=r,this._alpha=i}Pk.prototype={areaStart:Du,areaEnd:Du,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(r,i){if(r=+r,i=+i,this._point){var a=this._x2-r,l=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+l*l,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=r,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=r,this._y4=i);break;case 2:this._point=3,this._x5=r,this._y5=i;break;default:Xx(this,r,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var U7=function r(i){function a(l){return i?new Pk(l,i):new Kx(l,0)}return a.alpha=function(l){return r(+l)},a}(.5);function Ik(r,i){this._context=r,this._alpha=i}Ik.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,i){if(r=+r,i=+i,this._point){var a=this._x2-r,l=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+l*l,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xx(this,r,i)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=r,this._y0=this._y1,this._y1=this._y2,this._y2=i}};var F7=function r(i){function a(l){return i?new Ik(l,i):new Jx(l,0)}return a.alpha=function(l){return r(+l)},a}(.5);function Ok(r){this._context=r}function Rk(r){return r<0?-1:1}function Dk(r,i,a){var l=r._x1-r._x0,c=i-r._x1,d=(r._y1-r._y0)/(l||c<0&&-0),p=(a-r._y1)/(c||l<0&&-0),m=(d*c+p*l)/(l+c);return(Rk(d)+Rk(p))*Math.min(Math.abs(d),Math.abs(p),.5*Math.abs(m))||0}function zk(r,i){var a=r._x1-r._x0;return a?(3*(r._y1-r._y0)/a-i)/2:i}function Qx(r,i,a){var l=r._x0,c=r._y0,d=r._x1,p=r._y1,m=(d-l)/3;r._context.bezierCurveTo(l+m,c+m*i,d-m,p-m*a,d,p)}function sy(r){this._context=r}function Uk(r){this._context=new Fk(r)}function Fk(r){this._context=r}function Bk(r){this._context=r}function $k(r){var i,a,l=r.length-1,c=new Array(l),d=new Array(l),p=new Array(l);for(c[0]=0,d[0]=2,p[0]=r[0]+2*r[1],i=1;i<l-1;++i)c[i]=1,d[i]=4,p[i]=4*r[i]+2*r[i+1];for(c[l-1]=2,d[l-1]=7,p[l-1]=8*r[l-1]+r[l],i=1;i<l;++i)a=c[i]/d[i-1],d[i]-=a,p[i]-=a*p[i-1];for(c[l-1]=p[l-1]/d[l-1],i=l-2;i>=0;--i)c[i]=(p[i]-c[i+1])/d[i];for(d[l-1]=(r[l]+c[l-1])/2,i=0;i<l-1;++i)d[i]=2*r[i+1]-c[i+1];return[c,d]}function ly(r,i){this._context=r,this._t=i}function jh(r,i){if((c=r.length)>1)for(var a,l,c,d=1,p=r[i[0]],m=p.length;d<c;++d)for(l=p,p=r[i[d]],a=0;a<m;++a)p[a][1]+=p[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function Hh(r){for(var i=r.length,a=new Array(i);--i>=0;)a[i]=i;return a}function B7(r,i){return r[i]}function $7(r){const i=[];return i.key=r,i}function jk(r){var i=r.map(j7);return Hh(r).sort(function(a,l){return i[a]-i[l]})}function j7(r){for(var i,a=-1,l=0,c=r.length,d=-1/0;++a<c;)(i=+r[a][1])>d&&(d=i,l=a);return l}function Hk(r){var i=r.map(Wk);return Hh(r).sort(function(a,l){return i[a]-i[l]})}function Wk(r){for(var i,a=0,l=-1,c=r.length;++l<c;)(i=+r[l][1])&&(a+=i);return a}Ok.prototype={areaStart:Du,areaEnd:Du,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,i){r=+r,i=+i,this._point?this._context.lineTo(r,i):(this._point=1,this._context.moveTo(r,i))}},sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qx(this,this._t0,zk(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,i){var a=NaN;if(i=+i,(r=+r)!==this._x1||i!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 1:this._point=2;break;case 2:this._point=3,Qx(this,zk(this,a=Dk(this,r,i)),a);break;default:Qx(this,this._t0,a=Dk(this,r,i))}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=i,this._t0=a}}},(Uk.prototype=Object.create(sy.prototype)).point=function(r,i){sy.prototype.point.call(this,i,r)},Fk.prototype={moveTo:function(r,i){this._context.moveTo(i,r)},closePath:function(){this._context.closePath()},lineTo:function(r,i){this._context.lineTo(i,r)},bezierCurveTo:function(r,i,a,l,c,d){this._context.bezierCurveTo(i,r,l,a,d,c)}},Bk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,i=this._y,a=r.length;if(a)if(this._line?this._context.lineTo(r[0],i[0]):this._context.moveTo(r[0],i[0]),a===2)this._context.lineTo(r[1],i[1]);else for(var l=$k(r),c=$k(i),d=0,p=1;p<a;++d,++p)this._context.bezierCurveTo(l[0][d],c[0][d],l[1][d],c[1][d],r[p],i[p]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,i){this._x.push(+r),this._y.push(+i)}},ly.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,i){switch(r=+r,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(r,i);else{var a=this._x*(1-this._t)+r*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,i)}}this._x=r,this._y=i}};var uy=r=>()=>r;function H7(r,{sourceEvent:i,target:a,transform:l,dispatch:c}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}function Ms(r,i,a){this.k=r,this.x=i,this.y=a}Ms.prototype={constructor:Ms,scale:function(r){return r===1?this:new Ms(this.k*r,this.x,this.y)},translate:function(r,i){return r===0&i===0?this:new Ms(this.k,this.x+this.k*r,this.y+this.k*i)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cy=new Ms(1,0,0);function Vk(r){for(;!r.__zoom;)if(!(r=r.parentNode))return cy;return r.__zoom}function eS(r){r.stopImmediatePropagation()}function rv(r){r.preventDefault(),r.stopImmediatePropagation()}function W7(r){return!(r.ctrlKey&&r.type!=="wheel"||r.button)}function V7(){var r=this;return r instanceof SVGElement?(r=r.ownerSVGElement||r).hasAttribute("viewBox")?[[(r=r.viewBox.baseVal).x,r.y],[r.x+r.width,r.y+r.height]]:[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]:[[0,0],[r.clientWidth,r.clientHeight]]}function Zk(){return this.__zoom||cy}function Z7(r){return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*(r.ctrlKey?10:1)}function q7(){return navigator.maxTouchPoints||"ontouchstart"in this}function G7(r,i,a){var l=r.invertX(i[0][0])-a[0][0],c=r.invertX(i[1][0])-a[1][0],d=r.invertY(i[0][1])-a[0][1],p=r.invertY(i[1][1])-a[1][1];return r.translate(c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c),p>d?(d+p)/2:Math.min(0,d)||Math.max(0,p))}Vk.prototype=Ms.prototype,n.Adder=H,n.Delaunay=zd,n.FormatSpecifier=Wd,n.InternMap=se,n.InternSet=he,n.Node=xl,n.Voronoi=__,n.ZoomTransform=Ms,n.active=function(r,i){var a,l,c=r.__transition;if(c){for(l in i=i==null?null:i+"",c)if((a=c[l]).state>1&&a.name===i)return new ua([[r]],ys,i,+l)}return null},n.arc=function(){var r=h7,i=p7,a=Yt(0),l=null,c=m7,d=g7,p=v7,m=null;function v(){var _,x,C=+r.apply(this,arguments),T=+i.apply(this,arguments),A=c.apply(this,arguments)-X1,U=d.apply(this,arguments)-X1,I=nk(U-A),P=U>A;if(m||(m=_=ja()),T<C&&(x=T,T=C,C=x),T>Vi)if(I>Ru-Vi)m.moveTo(T*Tl(A),T*Lo(A)),m.arc(0,0,T,A,U,!P),C>Vi&&(m.moveTo(C*Tl(U),C*Lo(U)),m.arc(0,0,C,U,A,P));else{var O,q,W=A,j=U,Y=A,Q=U,me=I,Se=I,le=p.apply(this,arguments)/2,ae=le>Vi&&(l?+l.apply(this,arguments):or(C*C+T*T)),ie=$h(nk(T-C)/2,+a.apply(this,arguments)),ue=ie,ee=ie;if(ae>Vi){var re=rk(ae/C*Lo(le)),de=rk(ae/T*Lo(le));(me-=2*re)>Vi?(Y+=re*=P?1:-1,Q-=re):(me=0,Y=Q=(A+U)/2),(Se-=2*de)>Vi?(W+=de*=P?1:-1,j-=de):(Se=0,W=j=(A+U)/2)}var ve=T*Tl(W),Ee=T*Lo(W),De=C*Tl(Q),He=C*Lo(Q);if(ie>Vi){var tt,We=T*Tl(j),Lt=T*Lo(j),It=C*Tl(Y),mt=C*Lo(Y);if(I<Ou&&(tt=_7(ve,Ee,It,mt,We,Lt,De,He))){var Et=ve-tt[0],Tn=Ee-tt[1],nn=We-tt[0],io=Lt-tt[1],zu=1/Lo(d7((Et*nn+Tn*io)/(or(Et*Et+Tn*Tn)*or(nn*nn+io*io)))/2),Xa=or(tt[0]*tt[0]+tt[1]*tt[1]);ue=$h(ie,(C-Xa)/(zu-1)),ee=$h(ie,(T-Xa)/(zu+1))}}Se>Vi?ee>Vi?(O=Q1(It,mt,ve,Ee,T,ee,P),q=Q1(We,Lt,De,He,T,ee,P),m.moveTo(O.cx+O.x01,O.cy+O.y01),ee<ie?m.arc(O.cx,O.cy,ee,Wi(O.y01,O.x01),Wi(q.y01,q.x01),!P):(m.arc(O.cx,O.cy,ee,Wi(O.y01,O.x01),Wi(O.y11,O.x11),!P),m.arc(0,0,T,Wi(O.cy+O.y11,O.cx+O.x11),Wi(q.cy+q.y11,q.cx+q.x11),!P),m.arc(q.cx,q.cy,ee,Wi(q.y11,q.x11),Wi(q.y01,q.x01),!P))):(m.moveTo(ve,Ee),m.arc(0,0,T,W,j,!P)):m.moveTo(ve,Ee),C>Vi&&me>Vi?ue>Vi?(O=Q1(De,He,We,Lt,C,-ue,P),q=Q1(ve,Ee,It,mt,C,-ue,P),m.lineTo(O.cx+O.x01,O.cy+O.y01),ue<ie?m.arc(O.cx,O.cy,ue,Wi(O.y01,O.x01),Wi(q.y01,q.x01),!P):(m.arc(O.cx,O.cy,ue,Wi(O.y01,O.x01),Wi(O.y11,O.x11),!P),m.arc(0,0,C,Wi(O.cy+O.y11,O.cx+O.x11),Wi(q.cy+q.y11,q.cx+q.x11),P),m.arc(q.cx,q.cy,ue,Wi(q.y11,q.x11),Wi(q.y01,q.x01),!P))):m.arc(0,0,C,Q,Y,P):m.lineTo(De,He)}else m.moveTo(0,0);if(m.closePath(),_)return m=null,_+""||null}return v.centroid=function(){var _=(+r.apply(this,arguments)+ +i.apply(this,arguments))/2,x=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2-Ou/2;return[Tl(x)*_,Lo(x)*_]},v.innerRadius=function(_){return arguments.length?(r=typeof _=="function"?_:Yt(+_),v):r},v.outerRadius=function(_){return arguments.length?(i=typeof _=="function"?_:Yt(+_),v):i},v.cornerRadius=function(_){return arguments.length?(a=typeof _=="function"?_:Yt(+_),v):a},v.padRadius=function(_){return arguments.length?(l=_==null?null:typeof _=="function"?_:Yt(+_),v):l},v.startAngle=function(_){return arguments.length?(c=typeof _=="function"?_:Yt(+_),v):c},v.endAngle=function(_){return arguments.length?(d=typeof _=="function"?_:Yt(+_),v):d},v.padAngle=function(_){return arguments.length?(p=typeof _=="function"?_:Yt(+_),v):p},v.context=function(_){return arguments.length?(m=_??null,v):m},v},n.area=ok,n.areaRadial=uk,n.ascending=o,n.autoType=function(r){for(var i in r){var a,l,c=r[i].trim();if(c)if(c==="true")c=!0;else if(c==="false")c=!1;else if(c==="NaN")c=NaN;else if(isNaN(a=+c)){if(!(l=c.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Tb&&l[4]&&!l[7]&&(c=c.replace(/-/g,"/").replace(/T/," ")),c=new Date(c)}else c=a;else c=null;r[i]=c}return r},n.axisBottom=function(r){return we(3,r)},n.axisLeft=function(r){return we(4,r)},n.axisRight=function(r){return we(2,r)},n.axisTop=function(r){return we(1,r)},n.bin=Be,n.bisect=R,n.bisectCenter=N,n.bisectLeft=M,n.bisectRight=E,n.bisector=f,n.blob=function(r,i){return fetch(r,i).then(Za)},n.brush=function(){return Fc(cb)},n.brushSelection=function(r){var i=r.__brush;return i?i.dim.output(i.selection):null},n.brushX=function(){return Fc(jr)},n.brushY=function(){return Fc(nu)},n.buffer=function(r,i){return fetch(r,i).then(Om)},n.chord=function(){return Ld(!1,!1)},n.chordDirected=function(){return Ld(!0,!1)},n.chordTranspose=function(){return Ld(!1,!0)},n.cluster=function(){var r=Jb,i=1,a=1,l=!1;function c(d){var p,m=0;d.eachAfter(function(T){var A=T.children;A?(T.x=function(U){return U.reduce(Xb,0)/U.length}(A),T.y=function(U){return 1+U.reduce(Qb,0)}(A)):(T.x=p?m+=r(T,p):0,T.y=0,p=T)});var v=function(T){for(var A;A=T.children;)T=A[0];return T}(d),_=function(T){for(var A;A=T.children;)T=A[A.length-1];return T}(d),x=v.x-r(v,_)/2,C=_.x+r(_,v)/2;return d.eachAfter(l?function(T){T.x=(T.x-d.x)*i,T.y=(d.y-T.y)*a}:function(T){T.x=(T.x-x)/(C-x)*i,T.y=(1-(d.y?T.y/d.y:1))*a})}return c.separation=function(d){return arguments.length?(r=d,c):r},c.size=function(d){return arguments.length?(l=!1,i=+d[0],a=+d[1],c):l?null:[i,a]},c.nodeSize=function(d){return arguments.length?(l=!0,i=+d[0],a=+d[1],c):l?[i,a]:null},c},n.color=bi,n.contourDensity=function(){var r=km,i=h_,a=Id,l=960,c=500,d=20,p=2,m=3*d,v=l+2*m>>p,_=c+2*m>>p,x=Ss(20);function C(O){var q=new Float32Array(v*_),W=new Float32Array(v*_),j=Math.pow(2,-p);O.forEach(function(me,Se,le){var ae=(r(me,Se,le)+m)*j,ie=(i(me,Se,le)+m)*j,ue=+a(me,Se,le);if(ae>=0&&ae<v&&ie>=0&&ie<_){var ee=Math.floor(ae),re=Math.floor(ie),de=ae-ee-.5,ve=ie-re-.5;q[ee+re*v]+=(1-de)*(1-ve)*ue,q[ee+1+re*v]+=de*(1-ve)*ue,q[ee+1+(re+1)*v]+=de*ve*ue,q[ee+(re+1)*v]+=(1-de)*ve*ue}}),xi({width:v,height:_,data:q},{width:v,height:_,data:W},d>>p),fa({width:v,height:_,data:W},{width:v,height:_,data:q},d>>p),xi({width:v,height:_,data:q},{width:v,height:_,data:W},d>>p),fa({width:v,height:_,data:W},{width:v,height:_,data:q},d>>p),xi({width:v,height:_,data:q},{width:v,height:_,data:W},d>>p),fa({width:v,height:_,data:W},{width:v,height:_,data:q},d>>p);var Y=x(q);if(!Array.isArray(Y)){var Q=at(q);Y=Ve(0,Q,Y),(Y=Ke(0,Math.floor(Q/Y)*Y,Y)).shift()}return Cm().thresholds(Y).size([v,_])(q).map(T)}function T(O){return O.value*=Math.pow(2,-2*p),O.coordinates.forEach(A),O}function A(O){O.forEach(U)}function U(O){O.forEach(I)}function I(O){O[0]=O[0]*Math.pow(2,p)-m,O[1]=O[1]*Math.pow(2,p)-m}function P(){return v=l+2*(m=3*d)>>p,_=c+2*m>>p,C}return C.x=function(O){return arguments.length?(r=typeof O=="function"?O:Ss(+O),C):r},C.y=function(O){return arguments.length?(i=typeof O=="function"?O:Ss(+O),C):i},C.weight=function(O){return arguments.length?(a=typeof O=="function"?O:Ss(+O),C):a},C.size=function(O){if(!arguments.length)return[l,c];var q=+O[0],W=+O[1];if(!(q>=0&&W>=0))throw new Error("invalid size");return l=q,c=W,P()},C.cellSize=function(O){if(!arguments.length)return 1<<p;if(!((O=+O)>=1))throw new Error("invalid cell size");return p=Math.floor(Math.log(O)/Math.LN2),P()},C.thresholds=function(O){return arguments.length?(x=typeof O=="function"?O:Array.isArray(O)?Ss(Em.call(O)):Ss(O),C):x},C.bandwidth=function(O){if(!arguments.length)return Math.sqrt(d*(d+1));if(!((O=+O)>=0))throw new Error("invalid bandwidth");return d=Math.round((Math.sqrt(4*O*O+1)-1)/2),P()},C},n.contours=Cm,n.count=F,n.create=function(r){return di(jt(r).call(document.documentElement))},n.creator=jt,n.cross=function(...r){const i=typeof r[r.length-1]=="function"&&function(p){return m=>p(...m)}(r.pop()),a=(r=r.map(X)).map($),l=r.length-1,c=new Array(l+1).fill(0),d=[];if(l<0||a.some(V))return d;for(;;){d.push(c.map((m,v)=>r[v][m]));let p=l;for(;++c[p]===a[p];){if(p===0)return i?d.map(i):d;c[p--]=0}}},n.csv=fu,n.csvFormat=xb,n.csvFormatBody=x_,n.csvFormatRow=S_,n.csvFormatRows=$d,n.csvFormatValue=Pm,n.csvParse=Fd,n.csvParseRows=Bd,n.cubehelix=jo,n.cumsum=function(r,i){var a=0,l=0;return Float64Array.from(r,i===void 0?c=>a+=+c||0:c=>a+=+i(c,l++,r)||0)},n.curveBasis=function(r){return new oy(r)},n.curveBasisClosed=function(r){return new Ak(r)},n.curveBasisOpen=function(r){return new Mk(r)},n.curveBumpX=fk,n.curveBumpY=dk,n.curveBundle=I7,n.curveCardinal=O7,n.curveCardinalClosed=R7,n.curveCardinalOpen=D7,n.curveCatmullRom=z7,n.curveCatmullRomClosed=U7,n.curveCatmullRomOpen=F7,n.curveLinear=ty,n.curveLinearClosed=function(r){return new Ok(r)},n.curveMonotoneX=function(r){return new sy(r)},n.curveMonotoneY=function(r){return new Uk(r)},n.curveNatural=function(r){return new Bk(r)},n.curveStep=function(r){return new ly(r,.5)},n.curveStepAfter=function(r){return new ly(r,1)},n.curveStepBefore=function(r){return new ly(r,0)},n.descending=s,n.deviation=D,n.difference=function(r,...i){r=new he(r);for(const a of i)for(const l of a)r.delete(l);return r},n.disjoint=function(r,i){const a=i[Symbol.iterator](),l=new he;for(const c of r){if(l.has(c))return!1;let d,p;for(;({value:d,done:p}=a.next())&&!p;){if(Object.is(c,d))return!1;l.add(d)}}return!0},n.dispatch=Ne,n.drag=function(){var r,i,a,l,c=z2,d=ei,p=Vp,m=Ws,v={},_=Ne("start","drag","end"),x=0,C=0;function T(j){j.on("mousedown.drag",A).filter(m).on("touchstart.drag",P).on("touchmove.drag",O,Hn).on("touchend.drag touchcancel.drag",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(j,Y){if(!l&&c.call(this,j,Y)){var Q=W(this,d.call(this,j,Y),j,Y,"mouse");Q&&(di(j.view).on("mousemove.drag",U,yc).on("mouseup.drag",I,yc),td(j.view),Wp(j),a=!1,r=j.clientX,i=j.clientY,Q("start",j))}}function U(j){if(Wl(j),!a){var Y=j.clientX-r,Q=j.clientY-i;a=Y*Y+Q*Q>C}v.mouse("drag",j)}function I(j){di(j.view).on("mousemove.drag mouseup.drag",null),nd(j.view,a),Wl(j),v.mouse("end",j)}function P(j,Y){if(c.call(this,j,Y)){var Q,me,Se=j.changedTouches,le=d.call(this,j,Y),ae=Se.length;for(Q=0;Q<ae;++Q)(me=W(this,le,j,Y,Se[Q].identifier,Se[Q]))&&(Wp(j),me("start",j,Se[Q]))}}function O(j){var Y,Q,me=j.changedTouches,Se=me.length;for(Y=0;Y<Se;++Y)(Q=v[me[Y].identifier])&&(Wl(j),Q("drag",j,me[Y]))}function q(j){var Y,Q,me=j.changedTouches,Se=me.length;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),Y=0;Y<Se;++Y)(Q=v[me[Y].identifier])&&(Wp(j),Q("end",j,me[Y]))}function W(j,Y,Q,me,Se,le){var ae,ie,ue,ee=_.copy(),re=ln(le||Q,Y);if((ue=p.call(j,new id("beforestart",{sourceEvent:Q,target:T,identifier:Se,active:x,x:re[0],y:re[1],dx:0,dy:0,dispatch:ee}),me))!=null)return ae=ue.x-re[0]||0,ie=ue.y-re[1]||0,function de(ve,Ee,De){var He,tt=re;switch(ve){case"start":v[Se]=de,He=x++;break;case"end":delete v[Se],--x;case"drag":re=ln(De||Ee,Y),He=x}ee.call(ve,j,new id(ve,{sourceEvent:Ee,subject:ue,target:T,identifier:Se,active:He,x:re[0]+ae,y:re[1]+ie,dx:re[0]-tt[0],dy:re[1]-tt[1],dispatch:ee}),me)}}return T.filter=function(j){return arguments.length?(c=typeof j=="function"?j:rd(!!j),T):c},T.container=function(j){return arguments.length?(d=typeof j=="function"?j:rd(j),T):d},T.subject=function(j){return arguments.length?(p=typeof j=="function"?j:rd(j),T):p},T.touchable=function(j){return arguments.length?(m=typeof j=="function"?j:rd(!!j),T):m},T.on=function(){var j=_.on.apply(_,arguments);return j===_?T:j},T.clickDistance=function(j){return arguments.length?(C=(j=+j)*j,T):Math.sqrt(C)},T},n.dragDisable=td,n.dragEnable=nd,n.dsv=function(r,i,a,l){arguments.length===3&&typeof a=="function"&&(l=a,a=void 0);var c=Vc(r);return cu(i,a).then(function(d){return c.parse(d,l)})},n.dsvFormat=Vc,n.easeBack=Ed,n.easeBackIn=lb,n.easeBackInOut=Ed,n.easeBackOut=Ba,n.easeBounce=Rc,n.easeBounceIn=function(r){return 1-Rc(1-r)},n.easeBounceInOut=function(r){return((r*=2)<=1?1-Rc(1-r):Rc(r-1)+1)/2},n.easeBounceOut=Rc,n.easeCircle=xd,n.easeCircleIn=function(r){return 1-Math.sqrt(1-r*r)},n.easeCircleInOut=xd,n.easeCircleOut=function(r){return Math.sqrt(1- --r*r)},n.easeCubic=hm,n.easeCubicIn=function(r){return r*r*r},n.easeCubicInOut=hm,n.easeCubicOut=function(r){return--r*r*r+1},n.easeElastic=r_,n.easeElasticIn=ko,n.easeElasticInOut=i_,n.easeElasticOut=r_,n.easeExp=n_,n.easeExpIn=function(r){return _s(1-+r)},n.easeExpInOut=n_,n.easeExpOut=function(r){return 1-_s(r)},n.easeLinear=r=>+r,n.easePoly=e_,n.easePolyIn=ab,n.easePolyInOut=e_,n.easePolyOut=sb,n.easeQuad=To,n.easeQuadIn=function(r){return r*r},n.easeQuadInOut=To,n.easeQuadOut=function(r){return r*(2-r)},n.easeSin=mm,n.easeSinIn=function(r){return+r==1?1:1-Math.cos(r*pm)},n.easeSinInOut=mm,n.easeSinOut=function(r){return Math.sin(r*pm)},n.every=function(r,i){if(typeof i!="function")throw new TypeError("test is not a function");let a=-1;for(const l of r)if(!i(l,++a,r))return!1;return!0},n.extent=z,n.fcumsum=function(r,i){const a=new H;let l=-1;return Float64Array.from(r,i===void 0?c=>a.add(+c||0):c=>a.add(+i(c,++l,r)||0))},n.filter=function(r,i){if(typeof i!="function")throw new TypeError("test is not a function");const a=[];let l=-1;for(const c of r)i(c,++l,r)&&a.push(c);return a},n.flatGroup=function(r,...i){return Te(Xe(r,...i),i)},n.flatRollup=function(r,i,...a){return Te(ot(r,i,...a),a)},n.forceCenter=function(r,i){var a,l=1;function c(){var d,p,m=a.length,v=0,_=0;for(d=0;d<m;++d)v+=(p=a[d]).x,_+=p.y;for(v=(v/m-r)*l,_=(_/m-i)*l,d=0;d<m;++d)(p=a[d]).x-=v,p.y-=_}return r==null&&(r=0),i==null&&(i=0),c.initialize=function(d){a=d},c.x=function(d){return arguments.length?(r=+d,c):r},c.y=function(d){return arguments.length?(i=+d,c):i},c.strength=function(d){return arguments.length?(l=+d,c):l},c},n.forceCollide=function(r){var i,a,l,c=1,d=1;function p(){for(var _,x,C,T,A,U,I,P=i.length,O=0;O<d;++O)for(x=Gc(i,qa,Ci).visitAfter(m),_=0;_<P;++_)C=i[_],U=a[C.index],I=U*U,T=C.x+C.vx,A=C.y+C.vy,x.visit(q);function q(W,j,Y,Q,me){var Se=W.data,le=W.r,ae=U+le;if(!Se)return j>T+ae||Q<T-ae||Y>A+ae||me<A-ae;if(Se.index>C.index){var ie=T-Se.x-Se.vx,ue=A-Se.y-Se.vy,ee=ie*ie+ue*ue;ee<ae*ae&&(ie===0&&(ee+=(ie=Ts(l))*ie),ue===0&&(ee+=(ue=Ts(l))*ue),ee=(ae-(ee=Math.sqrt(ee)))/ee*c,C.vx+=(ie*=ee)*(ae=(le*=le)/(I+le)),C.vy+=(ue*=ee)*ae,Se.vx-=ie*(ae=1-ae),Se.vy-=ue*ae)}}}function m(_){if(_.data)return _.r=a[_.data.index];for(var x=_.r=0;x<4;++x)_[x]&&_[x].r>_.r&&(_.r=_[x].r)}function v(){if(i){var _,x,C=i.length;for(a=new Array(C),_=0;_<C;++_)x=i[_],a[x.index]=+r(x,_,i)}}return typeof r!="function"&&(r=Or(r==null?1:+r)),p.initialize=function(_,x){i=_,l=x,v()},p.iterations=function(_){return arguments.length?(d=+_,p):d},p.strength=function(_){return arguments.length?(c=+_,p):c},p.radius=function(_){return arguments.length?(r=typeof _=="function"?_:Or(+_),v(),p):r},p},n.forceLink=function(r){var i,a,l,c,d,p,m=Bm,v=function(I){return 1/Math.min(c[I.source.index],c[I.target.index])},_=Or(30),x=1;function C(I){for(var P=0,O=r.length;P<x;++P)for(var q,W,j,Y,Q,me,Se,le=0;le<O;++le)W=(q=r[le]).source,Y=(j=q.target).x+j.vx-W.x-W.vx||Ts(p),Q=j.y+j.vy-W.y-W.vy||Ts(p),Y*=me=((me=Math.sqrt(Y*Y+Q*Q))-a[le])/me*I*i[le],Q*=me,j.vx-=Y*(Se=d[le]),j.vy-=Q*Se,W.vx+=Y*(Se=1-Se),W.vy+=Q*Se}function T(){if(l){var I,P,O=l.length,q=r.length,W=new Map(l.map((j,Y)=>[m(j,Y,l),j]));for(I=0,c=new Array(O);I<q;++I)(P=r[I]).index=I,typeof P.source!="object"&&(P.source=k_(W,P.source)),typeof P.target!="object"&&(P.target=k_(W,P.target)),c[P.source.index]=(c[P.source.index]||0)+1,c[P.target.index]=(c[P.target.index]||0)+1;for(I=0,d=new Array(q);I<q;++I)P=r[I],d[I]=c[P.source.index]/(c[P.source.index]+c[P.target.index]);i=new Array(q),A(),a=new Array(q),U()}}function A(){if(l)for(var I=0,P=r.length;I<P;++I)i[I]=+v(r[I],I,r)}function U(){if(l)for(var I=0,P=r.length;I<P;++I)a[I]=+_(r[I],I,r)}return r==null&&(r=[]),C.initialize=function(I,P){l=I,p=P,T()},C.links=function(I){return arguments.length?(r=I,T(),C):r},C.id=function(I){return arguments.length?(m=I,C):m},C.iterations=function(I){return arguments.length?(x=+I,C):x},C.strength=function(I){return arguments.length?(v=typeof I=="function"?I:Or(+I),A(),C):v},C.distance=function(I){return arguments.length?(_=typeof I=="function"?I:Or(+I),U(),C):_},C},n.forceManyBody=function(){var r,i,a,l,c,d=Or(-30),p=1,m=1/0,v=.81;function _(A){var U,I=r.length,P=Gc(r,Mb,Nb).visitAfter(C);for(l=A,U=0;U<I;++U)i=r[U],P.visit(T)}function x(){if(r){var A,U,I=r.length;for(c=new Array(I),A=0;A<I;++A)U=r[A],c[U.index]=+d(U,A,r)}}function C(A){var U,I,P,O,q,W=0,j=0;if(A.length){for(P=O=q=0;q<4;++q)(U=A[q])&&(I=Math.abs(U.value))&&(W+=U.value,j+=I,P+=I*U.x,O+=I*U.y);A.x=P/j,A.y=O/j}else{(U=A).x=U.data.x,U.y=U.data.y;do W+=c[U.data.index];while(U=U.next)}A.value=W}function T(A,U,I,P){if(!A.value)return!0;var O=A.x-i.x,q=A.y-i.y,W=P-U,j=O*O+q*q;if(W*W/v<j)return j<m&&(O===0&&(j+=(O=Ts(a))*O),q===0&&(j+=(q=Ts(a))*q),j<p&&(j=Math.sqrt(p*j)),i.vx+=O*A.value*l/j,i.vy+=q*A.value*l/j),!0;if(!(A.length||j>=m)){(A.data!==i||A.next)&&(O===0&&(j+=(O=Ts(a))*O),q===0&&(j+=(q=Ts(a))*q),j<p&&(j=Math.sqrt(p*j)));do A.data!==i&&(W=c[A.data.index]*l/j,i.vx+=O*W,i.vy+=q*W);while(A=A.next)}}return _.initialize=function(A,U){r=A,a=U,x()},_.strength=function(A){return arguments.length?(d=typeof A=="function"?A:Or(+A),x(),_):d},_.distanceMin=function(A){return arguments.length?(p=A*A,_):Math.sqrt(p)},_.distanceMax=function(A){return arguments.length?(m=A*A,_):Math.sqrt(m)},_.theta=function(A){return arguments.length?(v=A*A,_):Math.sqrt(v)},_},n.forceRadial=function(r,i,a){var l,c,d,p=Or(.1);function m(_){for(var x=0,C=l.length;x<C;++x){var T=l[x],A=T.x-i||1e-6,U=T.y-a||1e-6,I=Math.sqrt(A*A+U*U),P=(d[x]-I)*c[x]*_/I;T.vx+=A*P,T.vy+=U*P}}function v(){if(l){var _,x=l.length;for(c=new Array(x),d=new Array(x),_=0;_<x;++_)d[_]=+r(l[_],_,l),c[_]=isNaN(d[_])?0:+p(l[_],_,l)}}return typeof r!="function"&&(r=Or(+r)),i==null&&(i=0),a==null&&(a=0),m.initialize=function(_){l=_,v()},m.strength=function(_){return arguments.length?(p=typeof _=="function"?_:Or(+_),v(),m):p},m.radius=function(_){return arguments.length?(r=typeof _=="function"?_:Or(+_),v(),m):r},m.x=function(_){return arguments.length?(i=+_,m):i},m.y=function(_){return arguments.length?(a=+_,m):a},m},n.forceSimulation=function(r){var i,a=1,l=.001,c=1-Math.pow(l,1/300),d=0,p=.6,m=new Map,v=gs(C),_=Ne("tick","end"),x=function(){let I=1;return()=>(I=(1664525*I+1013904223)%Hd)/Hd}();function C(){T(),_.call("tick",i),a<l&&(v.stop(),_.call("end",i))}function T(I){var P,O,q=r.length;I===void 0&&(I=1);for(var W=0;W<I;++W)for(a+=(d-a)*c,m.forEach(function(j){j(a)}),P=0;P<q;++P)(O=r[P]).fx==null?O.x+=O.vx*=p:(O.x=O.fx,O.vx=0),O.fy==null?O.y+=O.vy*=p:(O.y=O.fy,O.vy=0);return i}function A(){for(var I,P=0,O=r.length;P<O;++P){if((I=r[P]).index=P,I.fx!=null&&(I.x=I.fx),I.fy!=null&&(I.y=I.fy),isNaN(I.x)||isNaN(I.y)){var q=10*Math.sqrt(.5+P),W=P*Yc;I.x=q*Math.cos(W),I.y=q*Math.sin(W)}(isNaN(I.vx)||isNaN(I.vy))&&(I.vx=I.vy=0)}}function U(I){return I.initialize&&I.initialize(r,x),I}return r==null&&(r=[]),A(),i={tick:T,restart:function(){return v.restart(C),i},stop:function(){return v.stop(),i},nodes:function(I){return arguments.length?(r=I,A(),m.forEach(U),i):r},alpha:function(I){return arguments.length?(a=+I,i):a},alphaMin:function(I){return arguments.length?(l=+I,i):l},alphaDecay:function(I){return arguments.length?(c=+I,i):+c},alphaTarget:function(I){return arguments.length?(d=+I,i):d},velocityDecay:function(I){return arguments.length?(p=1-I,i):1-p},randomSource:function(I){return arguments.length?(x=I,m.forEach(U),i):x},force:function(I,P){return arguments.length>1?(P==null?m.delete(I):m.set(I,U(P)),i):m.get(I)},find:function(I,P,O){var q,W,j,Y,Q,me=0,Se=r.length;for(O==null?O=1/0:O*=O,me=0;me<Se;++me)(j=(q=I-(Y=r[me]).x)*q+(W=P-Y.y)*W)<O&&(Q=Y,O=j);return Q},on:function(I,P){return arguments.length>1?(_.on(I,P),i):_.on(I)}}},n.forceX=function(r){var i,a,l,c=Or(.1);function d(m){for(var v,_=0,x=i.length;_<x;++_)(v=i[_]).vx+=(l[_]-v.x)*a[_]*m}function p(){if(i){var m,v=i.length;for(a=new Array(v),l=new Array(v),m=0;m<v;++m)a[m]=isNaN(l[m]=+r(i[m],m,i))?0:+c(i[m],m,i)}}return typeof r!="function"&&(r=Or(r==null?0:+r)),d.initialize=function(m){i=m,p()},d.strength=function(m){return arguments.length?(c=typeof m=="function"?m:Or(+m),p(),d):c},d.x=function(m){return arguments.length?(r=typeof m=="function"?m:Or(+m),p(),d):r},d},n.forceY=function(r){var i,a,l,c=Or(.1);function d(m){for(var v,_=0,x=i.length;_<x;++_)(v=i[_]).vy+=(l[_]-v.y)*a[_]*m}function p(){if(i){var m,v=i.length;for(a=new Array(v),l=new Array(v),m=0;m<v;++m)a[m]=isNaN(l[m]=+r(i[m],m,i))?0:+c(i[m],m,i)}}return typeof r!="function"&&(r=Or(r==null?0:+r)),d.initialize=function(m){i=m,p()},d.strength=function(m){return arguments.length?(c=typeof m=="function"?m:Or(+m),p(),d):c},d.y=function(m){return arguments.length?(r=typeof m=="function"?m:Or(+m),p(),d):r},d},n.formatDefaultLocale=Wm,n.formatLocale=Vd,n.formatSpecifier=du,n.fsum=function(r,i){const a=new H;if(i===void 0)for(let l of r)(l=+l)&&a.add(l);else{let l=-1;for(let c of r)(c=+i(c,++l,r))&&a.add(c)}return+a},n.geoAlbers=T1,n.geoAlbersUsa=function(){var r,i,a,l,c,d,p=T1(),m=Ah().rotate([154,0]).center([-2,58.5]).parallels([55,65]),v=Ah().rotate([157,0]).center([-3,19.9]).parallels([8,18]),_={point:function(T,A){d=[T,A]}};function x(T){var A=T[0],U=T[1];return d=null,a.point(A,U),d||(l.point(A,U),d)||(c.point(A,U),d)}function C(){return r=i=null,x}return x.invert=function(T){var A=p.scale(),U=p.translate(),I=(T[0]-U[0])/A,P=(T[1]-U[1])/A;return(P>=.12&&P<.234&&I>=-.425&&I<-.214?m:P>=.166&&P<.234&&I>=-.214&&I<-.115?v:p).invert(T)},x.stream=function(T){return r&&i===T?r:(A=[p.stream(i=T),m.stream(T),v.stream(T)],U=A.length,r={point:function(I,P){for(var O=-1;++O<U;)A[O].point(I,P)},sphere:function(){for(var I=-1;++I<U;)A[I].sphere()},lineStart:function(){for(var I=-1;++I<U;)A[I].lineStart()},lineEnd:function(){for(var I=-1;++I<U;)A[I].lineEnd()},polygonStart:function(){for(var I=-1;++I<U;)A[I].polygonStart()},polygonEnd:function(){for(var I=-1;++I<U;)A[I].polygonEnd()}});var A,U},x.precision=function(T){return arguments.length?(p.precision(T),m.precision(T),v.precision(T),C()):p.precision()},x.scale=function(T){return arguments.length?(p.scale(T),m.scale(.35*T),v.scale(T),x.translate(p.translate())):p.scale()},x.translate=function(T){if(!arguments.length)return p.translate();var A=p.scale(),U=+T[0],I=+T[1];return a=p.translate(T).clipExtent([[U-.455*A,I-.238*A],[U+.455*A,I+.238*A]]).stream(_),l=m.translate([U-.307*A,I+.201*A]).clipExtent([[U-.425*A+Mt,I+.12*A+Mt],[U-.214*A-Mt,I+.234*A-Mt]]).stream(_),c=v.translate([U-.205*A,I+.212*A]).clipExtent([[U-.214*A+Mt,I+.166*A+Mt],[U-.115*A-Mt,I+.234*A-Mt]]).stream(_),C()},x.fitExtent=function(T,A){return Ch(x,T,A)},x.fitSize=function(T,A){return xr(x,T,A)},x.fitWidth=function(T,A){return mi(x,T,A)},x.fitHeight=function(T,A){return xg(x,T,A)},x.scale(1070)},n.geoArea=function(r){return Jd=new H,Zo(r,pa),2*Jd},n.geoAzimuthalEqualArea=function(){return va(Tg).scale(124.75).clipAngle(179.999)},n.geoAzimuthalEqualAreaRaw=Tg,n.geoAzimuthalEquidistant=function(){return va(Cg).scale(79.4188).clipAngle(179.999)},n.geoAzimuthalEquidistantRaw=Cg,n.geoBounds=function(r){var i,a,l,c,d,p,m;if(eo=fr=-(rr=pi=1/0),Cs=[],Zo(r,Ya),a=Cs.length){for(Cs.sort(zb),i=1,d=[l=Cs[0]];i<a;++i)rg(l,(c=Cs[i])[0])||rg(l,c[1])?(to(l[0],c[1])>to(l[0],l[1])&&(l[1]=c[1]),to(c[0],l[1])>to(l[0],l[1])&&(l[0]=c[0])):d.push(l=c);for(p=-1/0,i=0,l=d[a=d.length-1];i<=a;l=c,++i)c=d[i],(m=to(l[1],c[0]))>p&&(p=m,rr=c[0],fr=l[1])}return Cs=Ga=null,rr===1/0||pi===1/0?[[NaN,NaN],[NaN,NaN]]:[[rr,pi],[fr,eo]]},n.geoCentroid=function(r){nf=th=nh=rh=ih=oh=ah=rf=0,eg=new H,_u=new H,tg=new H,Zo(r,No);var i=+eg,a=+_u,l=+tg,c=qm(i,a,l);return c<ha&&(i=oh,a=ah,l=rf,th<Mt&&(i=nh,a=rh,l=ih),(c=qm(i,a,l))<ha)?[NaN,NaN]:[Ai(a,i)*$n,Mi(l/c)*$n]},n.geoCircle=function(){var r,i,a=yu([0,0]),l=yu(90),c=yu(6),d={point:function(m,v){r.push(m=i(m,v)),m[0]*=$n,m[1]*=$n}};function p(){var m=a.apply(this,arguments),v=l.apply(this,arguments)*Pt,_=c.apply(this,arguments)*Pt;return r=[],i=sg(-m[0]*Pt,-m[1]*Pt,0).invert,lg(d,v,_,1),m={type:"Polygon",coordinates:[r]},r=i=null,m}return p.center=function(m){return arguments.length?(a=typeof m=="function"?m:yu([+m[0],+m[1]]),p):a},p.radius=function(m){return arguments.length?(l=typeof m=="function"?m:yu(+m),p):l},p.precision=function(m){return arguments.length?(c=typeof m=="function"?m:yu(+m),p):c},p},n.geoClipAntimeridian=hg,n.geoClipCircle=Q_,n.geoClipExtent=function(){var r,i,a,l=0,c=0,d=960,p=500;return a={stream:function(m){return r&&i===m?r:r=mh(l,c,d,p)(i=m)},extent:function(m){return arguments.length?(l=+m[0][0],c=+m[0][1],d=+m[1][0],p=+m[1][1],r=i=null,a):[[l,c],[d,p]]}}},n.geoClipRectangle=mh,n.geoConicConformal=function(){return kh(k1).scale(109.5).parallels([30,30])},n.geoConicConformalRaw=k1,n.geoConicEqualArea=Ah,n.geoConicEqualAreaRaw=E1,n.geoConicEquidistant=function(){return kh(A1).scale(131.154).center([0,13.9389])},n.geoConicEquidistantRaw=A1,n.geoContains=function(r,i){return(r&&t1.hasOwnProperty(r.type)?t1[r.type]:ma)(r,i)},n.geoDistance=Hi,n.geoEqualEarth=function(){return va(kg).scale(177.158)},n.geoEqualEarthRaw=kg,n.geoEquirectangular=function(){return va(_f).scale(152.63)},n.geoEquirectangularRaw=_f,n.geoGnomonic=function(){return va(Ag).scale(144.049).clipAngle(60)},n.geoGnomonicRaw=Ag,n.geoGraticule=a1,n.geoGraticule10=function(){return a1()()},n.geoIdentity=function(){var r,i,a,l,c,d,p,m=1,v=0,_=0,x=1,C=1,T=0,A=null,U=1,I=1,P=bl({point:function(j,Y){var Q=W([j,Y]);this.stream.point(Q[0],Q[1])}}),O=df;function q(){return U=m*x,I=m*C,d=p=null,W}function W(j){var Y=j[0]*U,Q=j[1]*I;if(T){var me=Q*r-Y*i;Y=Y*r+Q*i,Q=me}return[Y+v,Q+_]}return W.invert=function(j){var Y=j[0]-v,Q=j[1]-_;if(T){var me=Q*r+Y*i;Y=Y*r-Q*i,Q=me}return[Y/U,Q/I]},W.stream=function(j){return d&&p===j?d:d=P(O(p=j))},W.postclip=function(j){return arguments.length?(O=j,A=a=l=c=null,q()):O},W.clipExtent=function(j){return arguments.length?(O=j==null?(A=a=l=c=null,df):mh(A=+j[0][0],a=+j[0][1],l=+j[1][0],c=+j[1][1]),q()):A==null?null:[[A,a],[l,c]]},W.scale=function(j){return arguments.length?(m=+j,q()):m},W.translate=function(j){return arguments.length?(v=+j[0],_=+j[1],q()):[v,_]},W.angle=function(j){return arguments.length?(i=lt(T=j%360*Pt),r=wt(T),q()):T*$n},W.reflectX=function(j){return arguments.length?(x=j?-1:1,q()):x<0},W.reflectY=function(j){return arguments.length?(C=j?-1:1,q()):C<0},W.fitExtent=function(j,Y){return Ch(W,j,Y)},W.fitSize=function(j,Y){return xr(W,j,Y)},W.fitWidth=function(j,Y){return mi(W,j,Y)},W.fitHeight=function(j,Y){return xg(W,j,Y)},W},n.geoInterpolate=function(r,i){var a=r[0]*Pt,l=r[1]*Pt,c=i[0]*Pt,d=i[1]*Pt,p=wt(l),m=lt(l),v=wt(d),_=lt(d),x=p*wt(a),C=p*lt(a),T=v*wt(c),A=v*lt(c),U=2*Mi(Hr(L_(d-l)+p*v*L_(c-a))),I=lt(U),P=U?function(O){var q=lt(O*=U)/I,W=lt(U-O)/I,j=W*x+q*T,Y=W*C+q*A,Q=W*m+q*_;return[Ai(Y,j)*$n,Ai(Q,Hr(j*j+Y*Y))*$n]}:function(){return[a*$n,l*$n]};return P.distance=U,P},n.geoLength=e1,n.geoMercator=function(){return C1(vf).scale(961/ki)},n.geoMercatorRaw=vf,n.geoNaturalEarth1=function(){return va(Mg).scale(175.295)},n.geoNaturalEarth1Raw=Mg,n.geoOrthographic=function(){return va(Ng).scale(249.5).clipAngle(90.000001)},n.geoOrthographicRaw=Ng,n.geoPath=function(r,i){var a,l,c=4.5;function d(p){return p&&(typeof c=="function"&&l.pointRadius(+c.apply(this,arguments)),Zo(p,a(l))),l.result()}return d.area=function(p){return Zo(p,a(u1)),u1.result()},d.measure=function(p){return Zo(p,a(y1)),y1.result()},d.bounds=function(p){return Zo(p,a(wl)),wl.result()},d.centroid=function(p){return Zo(p,a(p1)),p1.result()},d.projection=function(p){return arguments.length?(a=p==null?(r=null,df):(r=p).stream,d):r},d.context=function(p){return arguments.length?(l=p==null?(i=null,new Th):new m1(i=p),typeof c!="function"&&l.pointRadius(c),d):i},d.pointRadius=function(p){return arguments.length?(c=typeof p=="function"?p:(l.pointRadius(+p),+p),d):c},d.projection(r).context(i)},n.geoProjection=va,n.geoProjectionMutator=Sg,n.geoRotation=K_,n.geoStereographic=function(){return va(Lg).scale(250).clipAngle(142)},n.geoStereographicRaw=Lg,n.geoStream=Zo,n.geoTransform=function(r){return{stream:bl(r)}},n.geoTransverseMercator=function(){var r=C1(Pg),i=r.center,a=r.rotate;return r.center=function(l){return arguments.length?i([-l[1],l[0]]):[(l=i())[1],-l[0]]},r.rotate=function(l){return arguments.length?a([l[0],l[1],l.length>2?l[2]+90:90]):[(l=a())[0],l[1],l[2]-90]},a([0,0,90]).scale(159.155)},n.geoTransverseMercatorRaw=Pg,n.gray=function(r,i){return new $o(r,0,0,i??1)},n.greatest=function(r,i=o){let a,l=!1;if(i.length===1){let c;for(const d of r){const p=i(d);(l?o(p,c)>0:o(p,p)===0)&&(a=d,c=p,l=!0)}}else for(const c of r)(l?i(c,a)>0:i(c,c)===0)&&(a=c,l=!0);return a},n.greatestIndex=function(r,i=o){if(i.length===1)return Mn(r,i);let a,l=-1,c=-1;for(const d of r)++c,(l<0?i(d,d)===0:i(d,a)>0)&&(a=d,l=c);return l},n.group=it,n.groupSort=function(r,i,a){return(i.length!==2?Ze(Fe(r,i,a),([l,c],[d,p])=>o(c,p)||o(l,d)):Ze(it(r,a),([l,c],[d,p])=>i(c,p)||o(l,d))).map(([l])=>l)},n.groups=Xe,n.hcl=dd,n.hierarchy=Ig,n.histogram=Be,n.hsl=ql,n.html=Cb,n.image=function(r,i){return new Promise(function(a,l){var c=new Image;for(var d in i)c[d]=i[d];c.onerror=l,c.onload=function(){a(c)},c.src=r})},n.index=function(r,...i){return Le(r,Ue,Je,i)},n.indexes=function(r,...i){return Le(r,Array.from,Je,i)},n.interpolate=Ra,n.interpolateArray=function(r,i){return(Qi(i)?am:Ec)(r,i)},n.interpolateBasis=V0,n.interpolateBasisClosed=el,n.interpolateBlues=K8,n.interpolateBrBG=M8,n.interpolateBuGn=U8,n.interpolateBuPu=F8,n.interpolateCividis=function(r){return r=Math.max(0,Math.min(1,r)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-r*(35.34-r*(2381.73-r*(6402.7-r*(7024.72-2710.57*r)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+r*(170.73+r*(52.82-r*(131.46-r*(176.58-67.37*r)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+r*(442.36-r*(2482.43-r*(6167.24-r*(6614.94-2475.67*r)))))))+")"},n.interpolateCool=i7,n.interpolateCubehelix=$2,n.interpolateCubehelixDefault=n7,n.interpolateCubehelixLong=vd,n.interpolateDate=Z0,n.interpolateDiscrete=function(r){var i=r.length;return function(a){return r[Math.max(0,Math.min(i-1,Math.floor(a*i)))]}},n.interpolateGnBu=B8,n.interpolateGreens=J8,n.interpolateGreys=X8,n.interpolateHcl=nl,n.interpolateHclLong=gd,n.interpolateHsl=md,n.interpolateHslLong=G0,n.interpolateHue=function(r,i){var a=Ce(+r,+i);return function(l){var c=a(l);return c-360*Math.floor(c/360)}},n.interpolateInferno=u7,n.interpolateLab=function(r,i){var a=_t((r=fd(r)).l,(i=fd(i)).l),l=_t(r.a,i.a),c=_t(r.b,i.b),d=_t(r.opacity,i.opacity);return function(p){return r.l=a(p),r.a=l(p),r.b=c(p),r.opacity=d(p),r+""}},n.interpolateMagma=l7,n.interpolateNumber=ti,n.interpolateNumberArray=am,n.interpolateObject=Tc,n.interpolateOrRd=$8,n.interpolateOranges=t7,n.interpolatePRGn=N8,n.interpolatePiYG=L8,n.interpolatePlasma=c7,n.interpolatePuBu=H8,n.interpolatePuBuGn=j8,n.interpolatePuOr=P8,n.interpolatePuRd=W8,n.interpolatePurples=Q8,n.interpolateRainbow=function(r){(r<0||r>1)&&(r-=Math.floor(r));var i=Math.abs(r-.5);return Y1.h=360*r-100,Y1.s=1.5-1.5*i,Y1.l=.8-.9*i,Y1+""},n.interpolateRdBu=I8,n.interpolateRdGy=O8,n.interpolateRdPu=V8,n.interpolateRdYlBu=R8,n.interpolateRdYlGn=D8,n.interpolateReds=e7,n.interpolateRgb=pn,n.interpolateRgbBasis=Un,n.interpolateRgbBasisClosed=om,n.interpolateRound=tl,n.interpolateSinebow=function(r){var i;return r=(.5-r)*Math.PI,K1.r=255*(i=Math.sin(r))*i,K1.g=255*(i=Math.sin(r+o7))*i,K1.b=255*(i=Math.sin(r+a7))*i,K1+""},n.interpolateSpectral=z8,n.interpolateString=sm,n.interpolateTransformCss=kc,n.interpolateTransformSvg=um,n.interpolateTurbo=function(r){return r=Math.max(0,Math.min(1,r)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+r*(1172.33-r*(10793.56-r*(33300.12-r*(38394.49-14825.05*r)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+r*(557.33+r*(1225.33-r*(3574.96-r*(1073.77+707.56*r)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+r*(3211.1-r*(15327.97-r*(27814-r*(22569.18-6838.66*r)))))))+")"},n.interpolateViridis=s7,n.interpolateWarm=r7,n.interpolateYlGn=q8,n.interpolateYlGnBu=Z8,n.interpolateYlOrBr=G8,n.interpolateYlOrRd=Y8,n.interpolateZoom=cm,n.interrupt=la,n.intersection=function(r,...i){r=new he(r),i=i.map(Uo);e:for(const a of r)for(const l of i)if(!l.has(a)){r.delete(a);continue e}return r},n.interval=function(r,i,a){var l=new ol,c=i;return i==null?(l.restart(r,i,a),l):(l._restart=l.restart,l.restart=function(d,p,m){p=+p,m=m==null?Ql():+m,l._restart(function v(_){_+=c,l._restart(v,c+=p,m),d(_)},p,m)},l.restart(r,i,a),l)},n.isoFormat=p8,n.isoParse=g8,n.json=function(r,i){return fetch(r,i).then(jd)},n.lab=fd,n.lch=function(r,i,a,l){return arguments.length===1?H0(r):new xo(a,i,r,l??1)},n.least=function(r,i=o){let a,l=!1;if(i.length===1){let c;for(const d of r){const p=i(d);(l?o(p,c)<0:o(p,p)===0)&&(a=d,c=p,l=!0)}}else for(const c of r)(l?i(c,a)<0:i(c,c)===0)&&(a=c,l=!0);return a},n.leastIndex=Nn,n.line=Vx,n.lineRadial=lk,n.link=ny,n.linkHorizontal=function(){return ny(fk)},n.linkRadial=function(){const r=ny(S7);return r.angle=r.x,delete r.x,r.radius=r.y,delete r.y,r},n.linkVertical=function(){return ny(dk)},n.local=z0,n.map=function(r,i){if(typeof r[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof i!="function")throw new TypeError("mapper is not a function");return Array.from(r,(a,l)=>i(a,l,r))},n.matcher=Ie,n.max=at,n.maxIndex=Mn,n.mean=function(r,i){let a=0,l=0;if(i===void 0)for(let c of r)c!=null&&(c=+c)>=c&&(++a,l+=c);else{let c=-1;for(let d of r)(d=i(d,++c,r))!=null&&(d=+d)>=d&&(++a,l+=d)}if(a)return l/a},n.median=function(r,i){return ur(r,.5,i)},n.merge=Bn,n.min=ft,n.minIndex=Vn,n.mode=function(r,i){const a=new se;if(i===void 0)for(let d of r)d!=null&&d>=d&&a.set(d,(a.get(d)||0)+1);else{let d=-1;for(let p of r)(p=i(p,++d,r))!=null&&p>=p&&a.set(p,(a.get(p)||0)+1)}let l,c=0;for(const[d,p]of a)p>c&&(c=p,l=d);return l},n.namespace=Xt,n.namespaces=gt,n.nice=Ct,n.now=Ql,n.pack=function(){var r=null,i=1,a=1,l=Sl;function c(d){const p=Og();return d.x=i/2,d.y=a/2,r?d.eachBefore(D1(r)).eachAfter(zg(l,.5,p)).eachBefore(z1(1)):d.eachBefore(D1(Dg)).eachAfter(zg(Sl,1,p)).eachAfter(zg(l,d.r/Math.min(i,a),p)).eachBefore(z1(Math.min(i,a)/(2*d.r))),d}return c.radius=function(d){return arguments.length?(r=Nh(d),c):r},c.size=function(d){return arguments.length?(i=+d[0],a=+d[1],c):[i,a]},c.padding=function(d){return arguments.length?(l=typeof d=="function"?d:ku(+d),c):l},c},n.packEnclose=function(r){return P1(r,Og())},n.packSiblings=function(r){return Ri(r,Og()),r},n.pairs=function(r,i=Qn){const a=[];let l,c=!1;for(const d of r)c&&a.push(i(l,d)),l=d,c=!0;return a},n.partition=function(){var r=1,i=1,a=0,l=!1;function c(d){var p=d.height+1;return d.x0=d.y0=a,d.x1=r,d.y1=i/p,d.eachBefore(function(m,v){return function(_){_.children&&El(_,_.x0,m*(_.depth+1)/v,_.x1,m*(_.depth+2)/v);var x=_.x0,C=_.y0,T=_.x1-a,A=_.y1-a;T<x&&(x=T=(x+T)/2),A<C&&(C=A=(C+A)/2),_.x0=x,_.y0=C,_.x1=T,_.y1=A}}(i,p)),l&&d.eachBefore(U1),d}return c.round=function(d){return arguments.length?(l=!!d,c):l},c.size=function(d){return arguments.length?(r=+d[0],i=+d[1],c):[r,i]},c.padding=function(d){return arguments.length?(a=+d,c):a},c},n.path=ja,n.permute=Ye,n.pie=function(){var r=b7,i=w7,a=null,l=Yt(0),c=Yt(Ru),d=Yt(0);function p(m){var v,_,x,C,T,A=(m=ey(m)).length,U=0,I=new Array(A),P=new Array(A),O=+l.apply(this,arguments),q=Math.min(Ru,Math.max(-Ru,c.apply(this,arguments)-O)),W=Math.min(Math.abs(q)/A,d.apply(this,arguments)),j=W*(q<0?-1:1);for(v=0;v<A;++v)(T=P[I[v]=v]=+r(m[v],v,m))>0&&(U+=T);for(i!=null?I.sort(function(Y,Q){return i(P[Y],P[Q])}):a!=null&&I.sort(function(Y,Q){return a(m[Y],m[Q])}),v=0,x=U?(q-A*j)/U:0;v<A;++v,O=C)_=I[v],C=O+((T=P[_])>0?T*x:0)+j,P[_]={data:m[_],index:v,value:T,startAngle:O,endAngle:C,padAngle:W};return P}return p.value=function(m){return arguments.length?(r=typeof m=="function"?m:Yt(+m),p):r},p.sortValues=function(m){return arguments.length?(i=m,a=null,p):i},p.sort=function(m){return arguments.length?(a=m,i=null,p):a},p.startAngle=function(m){return arguments.length?(l=typeof m=="function"?m:Yt(+m),p):l},p.endAngle=function(m){return arguments.length?(c=typeof m=="function"?m:Yt(+m),p):c},p.padAngle=function(m){return arguments.length?(d=typeof m=="function"?m:Yt(+m),p):d},p},n.piecewise=Mc,n.pointRadial=nv,n.pointer=ln,n.pointers=function(r,i){return r.target&&(r=U0(r),i===void 0&&(i=r.currentTarget),r=r.touches||[r]),Array.from(r,a=>ln(a,i))},n.polygonArea=function(r){for(var i,a=-1,l=r.length,c=r[l-1],d=0;++a<l;)i=c,c=r[a],d+=i[1]*c[0]-i[0]*c[1];return d/2},n.polygonCentroid=function(r){for(var i,a,l=-1,c=r.length,d=0,p=0,m=r[c-1],v=0;++l<c;)i=m,m=r[l],v+=a=i[0]*m[1]-m[0]*i[1],d+=(i[0]+m[0])*a,p+=(i[1]+m[1])*a;return[d/(v*=3),p/v]},n.polygonContains=function(r,i){for(var a,l,c=r.length,d=r[c-1],p=i[0],m=i[1],v=d[0],_=d[1],x=!1,C=0;C<c;++C)a=(d=r[C])[0],(l=d[1])>m!=_>m&&p<(v-a)*(m-l)/(_-l)+a&&(x=!x),v=a,_=l;return x},n.polygonHull=function(r){if((a=r.length)<3)return null;var i,a,l=new Array(a),c=new Array(a);for(i=0;i<a;++i)l[i]=[+r[i][0],+r[i][1],i];for(l.sort(dx),i=0;i<a;++i)c[i]=[l[i][0],-l[i][1]];var d=H1(l),p=H1(c),m=p[0]===d[0],v=p[p.length-1]===d[d.length-1],_=[];for(i=d.length-1;i>=0;--i)_.push(r[l[d[i]][2]]);for(i=+m;i<p.length-v;++i)_.push(r[l[p[i]][2]]);return _},n.polygonLength=function(r){for(var i,a,l=-1,c=r.length,d=r[c-1],p=d[0],m=d[1],v=0;++l<c;)i=p,a=m,i-=p=(d=r[l])[0],a-=m=d[1],v+=Math.hypot(i,a);return v},n.precisionFixed=Vm,n.precisionPrefix=Jc,n.precisionRound=Zm,n.quadtree=Gc,n.quantile=ur,n.quantileSorted=gr,n.quantize=function(r,i){for(var a=new Array(i),l=0;l<i;++l)a[l]=r(l/(i-1));return a},n.quickselect=An,n.radialArea=uk,n.radialLine=lk,n.randomBates=gx,n.randomBernoulli=yx,n.randomBeta=u,n.randomBinomial=h,n.randomCauchy=k,n.randomExponential=vx,n.randomGamma=Wg,n.randomGeometric=V1,n.randomInt=px,n.randomIrwinHall=W1,n.randomLcg=function(r=Math.random()){let i=0|(0<=r&&r<1?r/ne:Math.abs(r));return()=>(i=1664525*i+1013904223|0,ne*(i>>>0))},n.randomLogNormal=mx,n.randomLogistic=B,n.randomNormal=Hg,n.randomPareto=_x,n.randomPoisson=K,n.randomUniform=hx,n.randomWeibull=b,n.range=Ke,n.rank=function(r,i=o){if(typeof r[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let a=Array.from(r);const l=new Float64Array(a.length);i.length!==2&&(a=a.map(i),i=o);const c=(m,v)=>i(a[m],a[v]);let d,p;return Uint32Array.from(a,(m,v)=>v).sort(i===o?(m,v)=>Qe(a[m],a[v]):ut(c)).forEach((m,v)=>{const _=c(m,d===void 0?m:d);_>=0?((d===void 0||_>0)&&(d=m,p=v),l[m]=p):l[m]=NaN}),l},n.reduce=function(r,i,a){if(typeof i!="function")throw new TypeError("reducer is not a function");const l=r[Symbol.iterator]();let c,d,p=-1;if(arguments.length<3){if({done:c,value:a}=l.next(),c)return;++p}for(;{done:c,value:d}=l.next(),!c;)a=i(a,d,++p,r);return a},n.reverse=function(r){if(typeof r[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(r).reverse()},n.rgb=Zl,n.ribbon=function(){return su()},n.ribbonArrow=function(){return su(vb)},n.rollup=Fe,n.rollups=ot,n.scaleBand=je,n.scaleDiverging=function r(){var i=Vr(G1()(Nt));return i.copy=function(){return Iu(i,r())},ye.apply(i,arguments)},n.scaleDivergingLog=function r(){var i=wx(G1()).domain([.1,1,10]);return i.copy=function(){return Iu(i,r()).base(i.base())},ye.apply(i,arguments)},n.scaleDivergingPow=jx,n.scaleDivergingSqrt=function(){return jx.apply(null,arguments).exponent(.5)},n.scaleDivergingSymlog=function r(){var i=bx(G1());return i.copy=function(){return Iu(i,r()).constant(i.constant())},ye.apply(i,arguments)},n.scaleIdentity=function r(i){var a;function l(c){return c==null||isNaN(c=+c)?a:c}return l.invert=l,l.domain=l.range=function(c){return arguments.length?(i=Array.from(c,pt),l):i.slice()},l.unknown=function(c){return arguments.length?(a=c,l):a},l.copy=function(){return r(i).unknown(a)},i=arguments.length?Array.from(i,pt):[0,1],Vr(l)},n.scaleImplicit=Oe,n.scaleLinear=function r(){var i=Di();return i.copy=function(){return ii(i,r())},fe.apply(i,arguments),Vr(i)},n.scaleLog=function r(){const i=wx(Wr()).domain([1,10]);return i.copy=()=>ii(i,r()).base(i.base()),fe.apply(i,arguments),i},n.scaleOrdinal=Re,n.scalePoint=function(){return nt(je.apply(null,arguments).paddingInner(1))},n.scalePow=Sx,n.scaleQuantile=function r(){var i,a=[],l=[],c=[];function d(){var m=0,v=Math.max(1,l.length);for(c=new Array(v-1);++m<v;)c[m-1]=gr(a,m/v);return p}function p(m){return m==null||isNaN(m=+m)?i:l[R(c,m)]}return p.invertExtent=function(m){var v=l.indexOf(m);return v<0?[NaN,NaN]:[v>0?c[v-1]:a[0],v<c.length?c[v]:a[a.length-1]]},p.domain=function(m){if(!arguments.length)return a.slice();a=[];for(let v of m)v==null||isNaN(v=+v)||a.push(v);return a.sort(o),d()},p.range=function(m){return arguments.length?(l=Array.from(m),d()):l.slice()},p.unknown=function(m){return arguments.length?(i=m,p):i},p.quantiles=function(){return c.slice()},p.copy=function(){return r().domain(a).range(l).unknown(i)},fe.apply(p,arguments)},n.scaleQuantize=function r(){var i,a=0,l=1,c=1,d=[.5],p=[0,1];function m(_){return _!=null&&_<=_?p[R(d,_,0,c)]:i}function v(){var _=-1;for(d=new Array(c);++_<c;)d[_]=((_+1)*l-(_-c)*a)/(c+1);return m}return m.domain=function(_){return arguments.length?([a,l]=_,a=+a,l=+l,v()):[a,l]},m.range=function(_){return arguments.length?(c=(p=Array.from(_)).length-1,v()):p.slice()},m.invertExtent=function(_){var x=p.indexOf(_);return x<0?[NaN,NaN]:x<1?[a,d[0]]:x>=c?[d[c-1],l]:[d[x-1],d[x]]},m.unknown=function(_){return arguments.length&&(i=_),m},m.thresholds=function(){return d.slice()},m.copy=function(){return r().domain([a,l]).range(p).unknown(i)},fe.apply(Vr(m),arguments)},n.scaleRadial=function r(){var i,a=Di(),l=[0,1],c=!1;function d(p){var m=WL(a(p));return isNaN(m)?i:c?Math.round(m):m}return d.invert=function(p){return a.invert(FC(p))},d.domain=function(p){return arguments.length?(a.domain(p),d):a.domain()},d.range=function(p){return arguments.length?(a.range((l=Array.from(p,pt)).map(FC)),d):l.slice()},d.rangeRound=function(p){return d.range(p).round(!0)},d.round=function(p){return arguments.length?(c=!!p,d):c},d.clamp=function(p){return arguments.length?(a.clamp(p),d):a.clamp()},d.unknown=function(p){return arguments.length?(i=p,d):i},d.copy=function(){return r(a.domain(),l).round(c).clamp(a.clamp()).unknown(i)},fe.apply(d,arguments),Vr(d)},n.scaleSequential=function r(){var i=Vr(q1()(Nt));return i.copy=function(){return Iu(i,r())},ye.apply(i,arguments)},n.scaleSequentialLog=function r(){var i=wx(q1()).domain([1,10]);return i.copy=function(){return Iu(i,r()).base(i.base())},ye.apply(i,arguments)},n.scaleSequentialPow=$x,n.scaleSequentialQuantile=function r(){var i=[],a=Nt;function l(c){if(c!=null&&!isNaN(c=+c))return a((R(i,c,1)-1)/(i.length-1))}return l.domain=function(c){if(!arguments.length)return i.slice();i=[];for(let d of c)d==null||isNaN(d=+d)||i.push(d);return i.sort(o),l},l.interpolator=function(c){return arguments.length?(a=c,l):a},l.range=function(){return i.map((c,d)=>a(d/(i.length-1)))},l.quantiles=function(c){return Array.from({length:c+1},(d,p)=>ur(i,p/c))},l.copy=function(){return r(a).domain(i)},ye.apply(l,arguments)},n.scaleSequentialSqrt=function(){return $x.apply(null,arguments).exponent(.5)},n.scaleSequentialSymlog=function r(){var i=bx(q1());return i.copy=function(){return Iu(i,r()).constant(i.constant())},ye.apply(i,arguments)},n.scaleSqrt=function(){return Sx.apply(null,arguments).exponent(.5)},n.scaleSymlog=function r(){var i=bx(Wr());return i.copy=function(){return ii(i,r()).constant(i.constant())},fe.apply(i,arguments)},n.scaleThreshold=function r(){var i,a=[.5],l=[0,1],c=1;function d(p){return p!=null&&p<=p?l[R(a,p,0,c)]:i}return d.domain=function(p){return arguments.length?(a=Array.from(p),c=Math.min(a.length,l.length-1),d):a.slice()},d.range=function(p){return arguments.length?(l=Array.from(p),c=Math.min(a.length,l.length-1),d):l.slice()},d.invertExtent=function(p){var m=l.indexOf(p);return[a[m-1],a[m]]},d.unknown=function(p){return arguments.length?(i=p,d):i},d.copy=function(){return r().domain(a).range(l).unknown(i)},fe.apply(d,arguments)},n.scaleTime=function(){return fe.apply(Bx(c3,f3,Lu,Px,Uh,Gg,Lx,Nx,Nu,n.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},n.scaleUtc=function(){return fe.apply(Bx(l3,u3,Pu,Dx,Fh,Kg,Rx,Ox,Nu,n.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},n.scan=function(r,i){const a=Nn(r,i);return a<0?void 0:a},n.schemeAccent=w8,n.schemeBlues=K3,n.schemeBrBG=M3,n.schemeBuGn=U3,n.schemeBuPu=F3,n.schemeCategory10=y8,n.schemeDark2=b8,n.schemeGnBu=B3,n.schemeGreens=J3,n.schemeGreys=X3,n.schemeOrRd=$3,n.schemeOranges=tk,n.schemePRGn=N3,n.schemePaired=x8,n.schemePastel1=S8,n.schemePastel2=E8,n.schemePiYG=L3,n.schemePuBu=H3,n.schemePuBuGn=j3,n.schemePuOr=P3,n.schemePuRd=W3,n.schemePurples=Q3,n.schemeRdBu=I3,n.schemeRdGy=O3,n.schemeRdPu=V3,n.schemeRdYlBu=R3,n.schemeRdYlGn=D3,n.schemeReds=ek,n.schemeSet1=T8,n.schemeSet2=C8,n.schemeSet3=k8,n.schemeSpectral=z3,n.schemeTableau10=A8,n.schemeYlGn=q3,n.schemeYlGnBu=Z3,n.schemeYlOrBr=G3,n.schemeYlOrRd=Y3,n.select=di,n.selectAll=function(r){return typeof r=="string"?new wi([document.querySelectorAll(r)],[document.documentElement]):new wi([yi(r)],jp)},n.selection=Ia,n.selector=Xr,n.selectorAll=oe,n.shuffle=Zn,n.shuffler=er,n.some=function(r,i){if(typeof i!="function")throw new TypeError("test is not a function");let a=-1;for(const l of r)if(i(l,++a,r))return!0;return!1},n.sort=Ze,n.stack=function(){var r=Yt([]),i=Hh,a=jh,l=B7;function c(d){var p,m,v=Array.from(r.apply(this,arguments),$7),_=v.length,x=-1;for(const C of d)for(p=0,++x;p<_;++p)(v[p][x]=[0,+l(C,v[p].key,x,d)]).data=C;for(p=0,m=ey(i(v));p<_;++p)v[m[p]].index=p;return a(v,m),v}return c.keys=function(d){return arguments.length?(r=typeof d=="function"?d:Yt(Array.from(d)),c):r},c.value=function(d){return arguments.length?(l=typeof d=="function"?d:Yt(+d),c):l},c.order=function(d){return arguments.length?(i=d==null?Hh:typeof d=="function"?d:Yt(Array.from(d)),c):i},c.offset=function(d){return arguments.length?(a=d??jh,c):a},c},n.stackOffsetDiverging=function(r,i){if((m=r.length)>0)for(var a,l,c,d,p,m,v=0,_=r[i[0]].length;v<_;++v)for(d=p=0,a=0;a<m;++a)(c=(l=r[i[a]][v])[1]-l[0])>0?(l[0]=d,l[1]=d+=c):c<0?(l[1]=p,l[0]=p+=c):(l[0]=0,l[1]=c)},n.stackOffsetExpand=function(r,i){if((l=r.length)>0){for(var a,l,c,d=0,p=r[0].length;d<p;++d){for(c=a=0;a<l;++a)c+=r[a][d][1]||0;if(c)for(a=0;a<l;++a)r[a][d][1]/=c}jh(r,i)}},n.stackOffsetNone=jh,n.stackOffsetSilhouette=function(r,i){if((a=r.length)>0){for(var a,l=0,c=r[i[0]],d=c.length;l<d;++l){for(var p=0,m=0;p<a;++p)m+=r[p][l][1]||0;c[l][1]+=c[l][0]=-m/2}jh(r,i)}},n.stackOffsetWiggle=function(r,i){if((c=r.length)>0&&(l=(a=r[i[0]]).length)>0){for(var a,l,c,d=0,p=1;p<l;++p){for(var m=0,v=0,_=0;m<c;++m){for(var x=r[i[m]],C=x[p][1]||0,T=(C-(x[p-1][1]||0))/2,A=0;A<m;++A){var U=r[i[A]];T+=(U[p][1]||0)-(U[p-1][1]||0)}v+=C,_+=T*C}a[p-1][1]+=a[p-1][0]=d,v&&(d-=_/v)}a[p-1][1]+=a[p-1][0]=d,jh(r,i)}},n.stackOrderAppearance=jk,n.stackOrderAscending=Hk,n.stackOrderDescending=function(r){return Hk(r).reverse()},n.stackOrderInsideOut=function(r){var i,a,l=r.length,c=r.map(Wk),d=jk(r),p=0,m=0,v=[],_=[];for(i=0;i<l;++i)a=d[i],p<m?(p+=c[a],v.push(a)):(m+=c[a],_.push(a));return _.reverse().concat(v)},n.stackOrderNone=Hh,n.stackOrderReverse=function(r){return Hh(r).reverse()},n.stratify=function(){var r,i=sx,a=lx;function l(c){var d,p,m,v,_,x,C,T,A=Array.from(c),U=i,I=a,P=new Map;if(r!=null){const O=A.map((j,Y)=>function(Q){let me=(Q=`${Q}`).length;return Rh(Q,me-1)&&!Rh(Q,me-2)&&(Q=Q.slice(0,-1)),Q[0]==="/"?Q:`/${Q}`}(r(j,Y,c))),q=O.map(F1),W=new Set(O).add("");for(const j of q)W.has(j)||(W.add(j),O.push(j),q.push(F1(j)),A.push(Ug));U=(j,Y)=>O[Y],I=(j,Y)=>q[Y]}for(m=0,d=A.length;m<d;++m)p=A[m],x=A[m]=new xl(p),(C=U(p,m,c))!=null&&(C+="")&&(T=x.id=C,P.set(T,P.has(T)?Oh:x)),(C=I(p,m,c))!=null&&(C+="")&&(x.parent=C);for(m=0;m<d;++m)if(C=(x=A[m]).parent){if(!(_=P.get(C)))throw new Error("missing: "+C);if(_===Oh)throw new Error("ambiguous: "+C);_.children?_.children.push(x):_.children=[x],x.parent=_}else{if(v)throw new Error("multiple roots");v=x}if(!v)throw new Error("no root");if(r!=null){for(;v.data===Ug&&v.children.length===1;)v=v.children[0],--d;for(let O=A.length-1;O>=0&&(x=A[O],x.data===Ug);--O)x.data=null}if(v.parent=ax,v.eachBefore(function(O){O.depth=O.parent.depth+1,--d}).eachBefore(M1),v.parent=null,d>0)throw new Error("cycle");return v}return l.id=function(c){return arguments.length?(i=Nh(c),l):i},l.parentId=function(c){return arguments.length?(a=Nh(c),l):a},l.path=function(c){return arguments.length?(r=Nh(c),l):r},l},n.style=ds,n.subset=function(r,i){return ci(i,r)},n.sum=function(r,i){let a=0;if(i===void 0)for(let l of r)(l=+l)&&(a+=l);else{let l=-1;for(let c of r)(c=+i(c,++l,r))&&(a+=c)}return a},n.superset=ci,n.svg=Dm,n.symbol=function(r,i){let a=null;function l(){let c;if(a||(a=c=ja()),r.apply(this,arguments).draw(a,+i.apply(this,arguments)),c)return a=null,c+""||null}return r=typeof r=="function"?r:Yt(r||ry),i=typeof i=="function"?i:Yt(i===void 0?64:+i),l.type=function(c){return arguments.length?(r=typeof c=="function"?c:Yt(c),l):r},l.size=function(c){return arguments.length?(i=typeof c=="function"?c:Yt(+c),l):i},l.context=function(c){return arguments.length?(a=c??null,l):a},l},n.symbolAsterisk=hk,n.symbolCircle=ry,n.symbolCross=pk,n.symbolDiamond=gk,n.symbolDiamond2=vk,n.symbolPlus=_k,n.symbolSquare=yk,n.symbolSquare2=wk,n.symbolStar=xk,n.symbolTriangle=Sk,n.symbolTriangle2=Ek,n.symbolWye=Tk,n.symbolX=Ck,n.symbols=kk,n.symbolsFill=kk,n.symbolsStroke=P7,n.text=cu,n.thresholdFreedmanDiaconis=function(r,i,a){return Math.ceil((a-i)/(2*(ur(r,.75)-ur(r,.25))*Math.pow(F(r),-1/3)))},n.thresholdScott=function(r,i,a){return Math.ceil((a-i)*Math.cbrt(F(r))/(3.49*D(r)))},n.thresholdSturges=Jt,n.tickFormat=hr,n.tickIncrement=ct,n.tickStep=Ve,n.ticks=rt,n.timeDay=Gg,n.timeDays=GL,n.timeFormatDefaultLocale=k3,n.timeFormatLocale=d3,n.timeFriday=GC,n.timeFridays=QL,n.timeHour=Lx,n.timeHours=qL,n.timeInterval=oi,n.timeMillisecond=Cx,n.timeMilliseconds=BC,n.timeMinute=Nx,n.timeMinutes=ZL,n.timeMonday=Yg,n.timeMondays=YL,n.timeMonth=Px,n.timeMonths=tP,n.timeSaturday=YC,n.timeSaturdays=eP,n.timeSecond=Nu,n.timeSeconds=jC,n.timeSunday=Uh,n.timeSundays=KC,n.timeThursday=Sf,n.timeThursdays=XL,n.timeTickInterval=f3,n.timeTicks=c3,n.timeTuesday=ZC,n.timeTuesdays=KL,n.timeWednesday=qC,n.timeWednesdays=JL,n.timeWeek=Uh,n.timeWeeks=KC,n.timeYear=Lu,n.timeYears=nP,n.timeout=eu,n.timer=gs,n.timerFlush=yd,n.transition=vs,n.transpose=Yr,n.tree=function(){var r=ux,i=1,a=1,l=null;function c(v){var _=function(O){for(var q,W,j,Y,Q,me=new Dh(O,0),Se=[me];q=Se.pop();)if(j=q._.children)for(q.children=new Array(Q=j.length),Y=Q-1;Y>=0;--Y)Se.push(W=q.children[Y]=new Dh(j[Y],Y)),W.parent=q;return(me.parent=new Dh(null,0)).children=[me],me}(v);if(_.eachAfter(d),_.parent.m=-_.z,_.eachBefore(p),l)v.eachBefore(m);else{var x=v,C=v,T=v;v.eachBefore(function(O){O.x<x.x&&(x=O),O.x>C.x&&(C=O),O.depth>T.depth&&(T=O)});var A=x===C?1:r(x,C)/2,U=A-x.x,I=i/(C.x+A+U),P=a/(T.depth||1);v.eachBefore(function(O){O.x=(O.x+U)*I,O.y=O.depth*P})}return v}function d(v){var _=v.children,x=v.parent.children,C=v.i?x[v.i-1]:null;if(_){(function(A){for(var U,I=0,P=0,O=A.children,q=O.length;--q>=0;)(U=O[q]).z+=I,U.m+=I,I+=U.s+(P+=U.c)})(v);var T=(_[0].z+_[_.length-1].z)/2;C?(v.z=C.z+r(v._,C._),v.m=v.z-T):v.z=T}else C&&(v.z=C.z+r(v._,C._));v.parent.A=function(A,U,I){if(U){for(var P,O=A,q=A,W=U,j=O.parent.children[0],Y=O.m,Q=q.m,me=W.m,Se=j.m;W=Bg(W),O=Fg(O),W&&O;)j=Fg(j),(q=Bg(q)).a=A,(P=W.z+me-O.z-Y+r(W._,O._))>0&&($g(jg(W,A,I),A,P),Y+=P,Q+=P),me+=W.m,Y+=O.m,Se+=j.m,Q+=q.m;W&&!Bg(q)&&(q.t=W,q.m+=me-Q),O&&!Fg(j)&&(j.t=O,j.m+=Y-Se,I=A)}return I}(v,C,v.parent.A||x[0])}function p(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function m(v){v.x*=i,v.y=v.depth*a}return c.separation=function(v){return arguments.length?(r=v,c):r},c.size=function(v){return arguments.length?(l=!1,i=+v[0],a=+v[1],c):l?null:[i,a]},c.nodeSize=function(v){return arguments.length?(l=!0,i=+v[0],a=+v[1],c):l?[i,a]:null},c},n.treemap=function(){var r=j1,i=!1,a=1,l=1,c=[0],d=Sl,p=Sl,m=Sl,v=Sl,_=Sl;function x(T){return T.x0=T.y0=0,T.x1=a,T.y1=l,T.eachBefore(C),c=[0],i&&T.eachBefore(U1),T}function C(T){var A=c[T.depth],U=T.x0+A,I=T.y0+A,P=T.x1-A,O=T.y1-A;P<U&&(U=P=(U+P)/2),O<I&&(I=O=(I+O)/2),T.x0=U,T.y0=I,T.x1=P,T.y1=O,T.children&&(A=c[T.depth+1]=d(T)/2,U+=_(T)-A,I+=p(T)-A,(P-=m(T)-A)<U&&(U=P=(U+P)/2),(O-=v(T)-A)<I&&(I=O=(I+O)/2),r(T,U,I,P,O))}return x.round=function(T){return arguments.length?(i=!!T,x):i},x.size=function(T){return arguments.length?(a=+T[0],l=+T[1],x):[a,l]},x.tile=function(T){return arguments.length?(r=N1(T),x):r},x.padding=function(T){return arguments.length?x.paddingInner(T).paddingOuter(T):x.paddingInner()},x.paddingInner=function(T){return arguments.length?(d=typeof T=="function"?T:ku(+T),x):d},x.paddingOuter=function(T){return arguments.length?x.paddingTop(T).paddingRight(T).paddingBottom(T).paddingLeft(T):x.paddingTop()},x.paddingTop=function(T){return arguments.length?(p=typeof T=="function"?T:ku(+T),x):p},x.paddingRight=function(T){return arguments.length?(m=typeof T=="function"?T:ku(+T),x):m},x.paddingBottom=function(T){return arguments.length?(v=typeof T=="function"?T:ku(+T),x):v},x.paddingLeft=function(T){return arguments.length?(_=typeof T=="function"?T:ku(+T),x):_},x},n.treemapBinary=function(r,i,a,l,c){var d,p,m=r.children,v=m.length,_=new Array(v+1);for(_[0]=p=d=0;d<v;++d)_[d+1]=p+=m[d].value;(function x(C,T,A,U,I,P,O){if(C>=T-1){var q=m[C];return q.x0=U,q.y0=I,q.x1=P,void(q.y1=O)}for(var W=_[C],j=A/2+W,Y=C+1,Q=T-1;Y<Q;){var me=Y+Q>>>1;_[me]<j?Y=me+1:Q=me}j-_[Y-1]<_[Y]-j&&C+1<Y&&--Y;var Se=_[Y]-W,le=A-Se;if(P-U>O-I){var ae=A?(U*le+P*Se)/A:P;x(C,Y,Se,U,I,ae,O),x(Y,T,le,ae,I,P,O)}else{var ie=A?(I*le+O*Se)/A:O;x(C,Y,Se,U,I,P,ie),x(Y,T,le,U,ie,P,O)}})(0,v,r.value,i,a,l,c)},n.treemapDice=El,n.treemapResquarify=cx,n.treemapSlice=zh,n.treemapSliceDice=function(r,i,a,l,c){(1&r.depth?zh:El)(r,i,a,l,c)},n.treemapSquarify=j1,n.tsv=Ut,n.tsvFormat=E_,n.tsvFormatBody=T_,n.tsvFormatRow=C_,n.tsvFormatRows=Sb,n.tsvFormatValue=Eb,n.tsvParse=Im,n.tsvParseRows=Va,n.union=function(...r){const i=new he;for(const a of r)for(const l of a)i.add(l);return i},n.utcDay=Kg,n.utcDays=oP,n.utcFriday=r3,n.utcFridays=cP,n.utcHour=Rx,n.utcHours=iP,n.utcMillisecond=Cx,n.utcMilliseconds=BC,n.utcMinute=Ox,n.utcMinutes=rP,n.utcMonday=Jg,n.utcMondays=aP,n.utcMonth=Dx,n.utcMonths=dP,n.utcSaturday=i3,n.utcSaturdays=fP,n.utcSecond=Nu,n.utcSeconds=jC,n.utcSunday=Fh,n.utcSundays=o3,n.utcThursday=Tf,n.utcThursdays=uP,n.utcTickInterval=u3,n.utcTicks=l3,n.utcTuesday=t3,n.utcTuesdays=sP,n.utcWednesday=n3,n.utcWednesdays=lP,n.utcWeek=Fh,n.utcWeeks=o3,n.utcYear=Pu,n.utcYears=hP,n.variance=Z,n.version="7.4.4",n.window=Rp,n.xml=gl,n.zip=function(){return Yr(arguments)},n.zoom=function(){var r,i,a,l=W7,c=V7,d=G7,p=Z7,m=q7,v=[0,1/0],_=[[-1/0,-1/0],[1/0,1/0]],x=250,C=cm,T=Ne("start","zoom","end"),A=500,U=0,I=10;function P(ee){ee.property("__zoom",Zk).on("wheel.zoom",me,{passive:!1}).on("mousedown.zoom",Se).on("dblclick.zoom",le).filter(m).on("touchstart.zoom",ae).on("touchmove.zoom",ie).on("touchend.zoom touchcancel.zoom",ue).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function O(ee,re){return(re=Math.max(v[0],Math.min(v[1],re)))===ee.k?ee:new Ms(re,ee.x,ee.y)}function q(ee,re,de){var ve=re[0]-de[0]*ee.k,Ee=re[1]-de[1]*ee.k;return ve===ee.x&&Ee===ee.y?ee:new Ms(ee.k,ve,Ee)}function W(ee){return[(+ee[0][0]+ +ee[1][0])/2,(+ee[0][1]+ +ee[1][1])/2]}function j(ee,re,de,ve){ee.on("start.zoom",function(){Y(this,arguments).event(ve).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(ve).end()}).tween("zoom",function(){var Ee=this,De=arguments,He=Y(Ee,De).event(ve),tt=c.apply(Ee,De),We=de==null?W(tt):typeof de=="function"?de.apply(Ee,De):de,Lt=Math.max(tt[1][0]-tt[0][0],tt[1][1]-tt[0][1]),It=Ee.__zoom,mt=typeof re=="function"?re.apply(Ee,De):re,Et=C(It.invert(We).concat(Lt/It.k),mt.invert(We).concat(Lt/mt.k));return function(Tn){if(Tn===1)Tn=mt;else{var nn=Et(Tn),io=Lt/nn[2];Tn=new Ms(io,We[0]-nn[0]*io,We[1]-nn[1]*io)}He.zoom(null,Tn)}})}function Y(ee,re,de){return!de&&ee.__zooming||new Q(ee,re)}function Q(ee,re){this.that=ee,this.args=re,this.active=0,this.sourceEvent=null,this.extent=c.apply(ee,re),this.taps=0}function me(ee,...re){if(l.apply(this,arguments)){var de=Y(this,re).event(ee),ve=this.__zoom,Ee=Math.max(v[0],Math.min(v[1],ve.k*Math.pow(2,p.apply(this,arguments)))),De=ln(ee);if(de.wheel)de.mouse[0][0]===De[0]&&de.mouse[0][1]===De[1]||(de.mouse[1]=ve.invert(de.mouse[0]=De)),clearTimeout(de.wheel);else{if(ve.k===Ee)return;de.mouse=[De,ve.invert(De)],la(this),de.start()}rv(ee),de.wheel=setTimeout(He,150),de.zoom("mouse",d(q(O(ve,Ee),de.mouse[0],de.mouse[1]),de.extent,_))}function He(){de.wheel=null,de.end()}}function Se(ee,...re){if(!a&&l.apply(this,arguments)){var de=ee.currentTarget,ve=Y(this,re,!0).event(ee),Ee=di(ee.view).on("mousemove.zoom",We,!0).on("mouseup.zoom",Lt,!0),De=ln(ee,de),He=ee.clientX,tt=ee.clientY;td(ee.view),eS(ee),ve.mouse=[De,this.__zoom.invert(De)],la(this),ve.start()}function We(It){if(rv(It),!ve.moved){var mt=It.clientX-He,Et=It.clientY-tt;ve.moved=mt*mt+Et*Et>U}ve.event(It).zoom("mouse",d(q(ve.that.__zoom,ve.mouse[0]=ln(It,de),ve.mouse[1]),ve.extent,_))}function Lt(It){Ee.on("mousemove.zoom mouseup.zoom",null),nd(It.view,ve.moved),rv(It),ve.event(It).end()}}function le(ee,...re){if(l.apply(this,arguments)){var de=this.__zoom,ve=ln(ee.changedTouches?ee.changedTouches[0]:ee,this),Ee=de.invert(ve),De=de.k*(ee.shiftKey?.5:2),He=d(q(O(de,De),ve,Ee),c.apply(this,re),_);rv(ee),x>0?di(this).transition().duration(x).call(j,He,ve,ee):di(this).call(P.transform,He,ve,ee)}}function ae(ee,...re){if(l.apply(this,arguments)){var de,ve,Ee,De,He=ee.touches,tt=He.length,We=Y(this,re,ee.changedTouches.length===tt).event(ee);for(eS(ee),ve=0;ve<tt;++ve)De=[De=ln(Ee=He[ve],this),this.__zoom.invert(De),Ee.identifier],We.touch0?We.touch1||We.touch0[2]===De[2]||(We.touch1=De,We.taps=0):(We.touch0=De,de=!0,We.taps=1+!!r);r&&(r=clearTimeout(r)),de&&(We.taps<2&&(i=De[0],r=setTimeout(function(){r=null},A)),la(this),We.start())}}function ie(ee,...re){if(this.__zooming){var de,ve,Ee,De,He=Y(this,re).event(ee),tt=ee.changedTouches,We=tt.length;for(rv(ee),de=0;de<We;++de)Ee=ln(ve=tt[de],this),He.touch0&&He.touch0[2]===ve.identifier?He.touch0[0]=Ee:He.touch1&&He.touch1[2]===ve.identifier&&(He.touch1[0]=Ee);if(ve=He.that.__zoom,He.touch1){var Lt=He.touch0[0],It=He.touch0[1],mt=He.touch1[0],Et=He.touch1[1],Tn=(Tn=mt[0]-Lt[0])*Tn+(Tn=mt[1]-Lt[1])*Tn,nn=(nn=Et[0]-It[0])*nn+(nn=Et[1]-It[1])*nn;ve=O(ve,Math.sqrt(Tn/nn)),Ee=[(Lt[0]+mt[0])/2,(Lt[1]+mt[1])/2],De=[(It[0]+Et[0])/2,(It[1]+Et[1])/2]}else{if(!He.touch0)return;Ee=He.touch0[0],De=He.touch0[1]}He.zoom("touch",d(q(ve,Ee,De),He.extent,_))}}function ue(ee,...re){if(this.__zooming){var de,ve,Ee=Y(this,re).event(ee),De=ee.changedTouches,He=De.length;for(eS(ee),a&&clearTimeout(a),a=setTimeout(function(){a=null},A),de=0;de<He;++de)ve=De[de],Ee.touch0&&Ee.touch0[2]===ve.identifier?delete Ee.touch0:Ee.touch1&&Ee.touch1[2]===ve.identifier&&delete Ee.touch1;if(Ee.touch1&&!Ee.touch0&&(Ee.touch0=Ee.touch1,delete Ee.touch1),Ee.touch0)Ee.touch0[1]=this.__zoom.invert(Ee.touch0[0]);else if(Ee.end(),Ee.taps===2&&(ve=ln(ve,this),Math.hypot(i[0]-ve[0],i[1]-ve[1])<I)){var tt=di(this).on("dblclick.zoom");tt&&tt.apply(this,arguments)}}}return P.transform=function(ee,re,de,ve){var Ee=ee.selection?ee.selection():ee;Ee.property("__zoom",Zk),ee!==Ee?j(ee,re,de,ve):Ee.interrupt().each(function(){Y(this,arguments).event(ve).start().zoom(null,typeof re=="function"?re.apply(this,arguments):re).end()})},P.scaleBy=function(ee,re,de,ve){P.scaleTo(ee,function(){var Ee=this.__zoom.k,De=typeof re=="function"?re.apply(this,arguments):re;return Ee*De},de,ve)},P.scaleTo=function(ee,re,de,ve){P.transform(ee,function(){var Ee=c.apply(this,arguments),De=this.__zoom,He=de==null?W(Ee):typeof de=="function"?de.apply(this,arguments):de,tt=De.invert(He),We=typeof re=="function"?re.apply(this,arguments):re;return d(q(O(De,We),He,tt),Ee,_)},de,ve)},P.translateBy=function(ee,re,de,ve){P.transform(ee,function(){return d(this.__zoom.translate(typeof re=="function"?re.apply(this,arguments):re,typeof de=="function"?de.apply(this,arguments):de),c.apply(this,arguments),_)},null,ve)},P.translateTo=function(ee,re,de,ve,Ee){P.transform(ee,function(){var De=c.apply(this,arguments),He=this.__zoom,tt=ve==null?W(De):typeof ve=="function"?ve.apply(this,arguments):ve;return d(cy.translate(tt[0],tt[1]).scale(He.k).translate(typeof re=="function"?-re.apply(this,arguments):-re,typeof de=="function"?-de.apply(this,arguments):-de),De,_)},ve,Ee)},Q.prototype={event:function(ee){return ee&&(this.sourceEvent=ee),this},start:function(){return++this.active==1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(ee,re){return this.mouse&&ee!=="mouse"&&(this.mouse[1]=re.invert(this.mouse[0])),this.touch0&&ee!=="touch"&&(this.touch0[1]=re.invert(this.touch0[0])),this.touch1&&ee!=="touch"&&(this.touch1[1]=re.invert(this.touch1[0])),this.that.__zoom=re,this.emit("zoom"),this},end:function(){return--this.active==0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(ee){var re=di(this.that).datum();T.call(ee,this.that,new H7(ee,{sourceEvent:this.sourceEvent,target:P,type:ee,transform:this.that.__zoom,dispatch:T}),re)}},P.wheelDelta=function(ee){return arguments.length?(p=typeof ee=="function"?ee:uy(+ee),P):p},P.filter=function(ee){return arguments.length?(l=typeof ee=="function"?ee:uy(!!ee),P):l},P.touchable=function(ee){return arguments.length?(m=typeof ee=="function"?ee:uy(!!ee),P):m},P.extent=function(ee){return arguments.length?(c=typeof ee=="function"?ee:uy([[+ee[0][0],+ee[0][1]],[+ee[1][0],+ee[1][1]]]),P):c},P.scaleExtent=function(ee){return arguments.length?(v[0]=+ee[0],v[1]=+ee[1],P):[v[0],v[1]]},P.translateExtent=function(ee){return arguments.length?(_[0][0]=+ee[0][0],_[1][0]=+ee[1][0],_[0][1]=+ee[0][1],_[1][1]=+ee[1][1],P):[[_[0][0],_[0][1]],[_[1][0],_[1][1]]]},P.constrain=function(ee){return arguments.length?(d=ee,P):d},P.duration=function(ee){return arguments.length?(x=+ee,P):x},P.interpolate=function(ee){return arguments.length?(C=ee,P):C},P.on=function(){var ee=T.on.apply(T,arguments);return ee===T?P:ee},P.clickDistance=function(ee){return arguments.length?(U=(ee=+ee)*ee,P):Math.sqrt(U)},P.tapDistance=function(ee){return arguments.length?(I=+ee,P):I},P},n.zoomIdentity=cy,n.zoomTransform=Vk,Object.defineProperty(n,"__esModule",{value:!0})})})(qE,qE.exports);var E6=qE.exports;const wU=Kf(E6),T6=b5({__proto__:null,default:wU},[E6]);class gC extends HTMLElement{bindEvents(t){let n=Object.keys(t),o=this;n.forEach(s=>{if(!t[s])throw new Error(`Bad binding supplied for ${s}`);let[f,g]=s.split("@"),w=o.shadow.querySelectorAll(f);w.length<1||w.forEach(y=>{y[g]=function(){t[s].apply(o,arguments)}})})}}const My={choiceAmong:function(e,t){return e.indexOf(t)>=0},boolean:function(e){return choiceAmong(["true",1,"yes","True",!0],e)},string:function(e){return String(e)},number:function(e){return Number(e)},function:function(e){return e}},bU=/\${[^{}]+}/g;function xU(e,t,n=""){return e.split(".").reduce((o,s)=>o[s]||n,t)}function m2(e,t,n){return e.replace(bU,o=>{const s=o.slice(2,-1).trim();return xU(s,t,n)})}const Ml=20,g2=3,Nf={sidebar:"867730",map:"b28582",zoomInBtn:"ad1cfd",zoomOutBtn:"06b943",addEdgeBtn:"d14a0c",addNodeBtn:"f315a9",editEdgeToggleBtn:"fdc230",editNodeToggleBtn:"f8f403"},RA=`
  <svg xmlns="http://www.w3.org/2000/svg"
      role="graphics-symbol"
      aria-labelledby="Rate"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="lucide lucide-gauge"
  >
      <path d="m12 14 4-4"/>
      <path d="M3.34 19a10 10 0 1 1 17.32 0"/>
  </svg>
`,SU=`
  <svg xmlns="http://www.w3.org/2000/svg"
    role="graphics-symbol"
    aria-labelledby="In Volume"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    class="lucide lucide-arrow-right-to-line"
  >
    <path d="M17 12H3"/>
    <path d="m11 18 6-6-6-6"/>
    <path d="M21 5v14"/>
  </svg>`,EU=`
    <svg xmlns="http://www.w3.org/2000/svg"
      role="graphics-symbol"
      aria-labelledby="Out Volume"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="lucide lucide-arrow-left-from-line"
    >
      <path d="m9 6-6 6 6 6"/>
      <path d="M3 12h14"/>
      <path d="M21 19V5"/>
    </svg>
  `,C6=`
  <div class="flow-tooltip">
    <strong>\${name}</strong>
  </div>
  <div class="flow-tooltip">
    <strong>${SU} \${inValue}</strong>
  </div>
  <div class="flow-tooltip">
    <strong>${EU} \${outValue}</strong>
  </div>
`,TU=`
  <div class="flow-tooltip">
    <strong>
      \${forward.from}  \${forward.to}
      <br />
      ${RA} \${forward.dataPoint}
    </strong>
  </div>
  <div class="flow-tooltip">
    <span>
      \${reverse.from}  \${reverse.to}
      <br />
      ${RA} \${reverse.dataPoint}
    </span>
  </div>
`;/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */function sr(e){var t,n,o,s;for(n=1,o=arguments.length;n<o;n++){s=arguments[n];for(t in s)e[t]=s[t]}return e}var GE=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function Cr(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var o=n.call(arguments,2);return function(){return e.apply(t,o.length?o.concat(n.call(arguments)):arguments)}}var CU=0;function Fn(e){return"_leaflet_id"in e||(e._leaflet_id=++CU),e._leaflet_id}function kU(e,t,n){var o,s,f,g;return g=function(){o=!1,s&&(f.apply(n,s),s=!1)},f=function(){o?s=arguments:(e.apply(n,arguments),setTimeout(g,t),o=!0)},f}function Ow(e,t,n){var o=t[1],s=t[0],f=o-s;return e===o&&n?e:((e-s)%f+f)%f+s}function Zr(){return!1}function Nl(e,t){if(t===!1)return e;var n=Math.pow(10,t===void 0?6:t);return Math.round(e*n)/n}function k6(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function pp(e){return k6(e).split(/\s+/)}function Mr(e,t){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?GE(e.options):{});for(var n in t)e.options[n]=t[n];return e.options}function AU(e,t,n){var o=[];for(var s in e)o.push(encodeURIComponent(n?s.toUpperCase():s)+"="+encodeURIComponent(e[s]));return(!t||t.indexOf("?")===-1?"?":"&")+o.join("&")}var MU=/\{ *([\w_ -]+) *\}/g;function NU(e,t){return e.replace(MU,function(n,o){var s=t[o];if(s===void 0)throw new Error("No value provided for variable "+n);return typeof s=="function"&&(s=s(t)),s})}var $s=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function A6(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var IS="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function YE(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var DA=0;function M6(e){var t=+new Date,n=Math.max(0,16-(t-DA));return DA=t+n,window.setTimeout(e,n)}var zA=window.requestAnimationFrame||YE("RequestAnimationFrame")||M6,LU=window.cancelAnimationFrame||YE("CancelAnimationFrame")||YE("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function ea(e,t,n){if(n&&zA===M6)e.call(t);else return zA.call(window,Cr(e,t))}function ls(e){e&&LU.call(window,e)}function pc(){}pc.extend=function(e){var t=function(){Mr(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=t.__super__=this.prototype,o=GE(n);o.constructor=t,t.prototype=o;for(var s in this)Object.prototype.hasOwnProperty.call(this,s)&&s!=="prototype"&&s!=="__super__"&&(t[s]=this[s]);return e.statics&&sr(t,e.statics),e.includes&&(PU(e.includes),sr.apply(null,[o].concat(e.includes))),sr(o,e),delete o.statics,delete o.includes,o.options&&(o.options=n.options?GE(n.options):{},sr(o.options,e.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,g=o._initHooks.length;f<g;f++)o._initHooks[f].call(this)}},t};pc.include=function(e){var t=this.prototype.options;return sr(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this};pc.mergeOptions=function(e){return sr(this.prototype.options,e),this};pc.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n=typeof e=="function"?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function PU(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=$s(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ka={on:function(e,t,n){if(typeof e=="object")for(var o in e)this._on(o,e[o],t);else{e=pp(e);for(var s=0,f=e.length;s<f;s++)this._on(e[s],t,n)}return this},off:function(e,t,n){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var o in e)this._off(o,e[o],t);else{e=pp(e);for(var s=arguments.length===1,f=0,g=e.length;f<g;f++)s?this._off(e[f]):this._off(e[f],t,n)}return this},_on:function(e,t,n,o){if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}if(this._listens(e,t,n)===!1){n===this&&(n=void 0);var s={fn:t,ctx:n};o&&(s.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(s)}},_off:function(e,t,n){var o,s,f;if(this._events&&(o=this._events[e],!!o)){if(arguments.length===1){if(this._firingCount)for(s=0,f=o.length;s<f;s++)o[s].fn=Zr;delete this._events[e];return}if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}var g=this._listens(e,t,n);if(g!==!1){var w=o[g];this._firingCount&&(w.fn=Zr,this._events[e]=o=o.slice()),o.splice(g,1)}}},fire:function(e,t,n){if(!this.listens(e,n))return this;var o=sr({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var s=this._events[e];if(s){this._firingCount=this._firingCount+1||1;for(var f=0,g=s.length;f<g;f++){var w=s[f],y=w.fn;w.once&&this.off(e,y,w.ctx),y.call(w.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(e,t,n,o){typeof e!="string"&&console.warn('"string" type argument expected');var s=t;typeof t!="function"&&(o=!!t,s=void 0,n=void 0);var f=this._events&&this._events[e];if(f&&f.length&&this._listens(e,s,n)!==!1)return!0;if(o){for(var g in this._eventParents)if(this._eventParents[g].listens(e,t,n,o))return!0}return!1},_listens:function(e,t,n){if(!this._events)return!1;var o=this._events[e]||[];if(!t)return!!o.length;n===this&&(n=void 0);for(var s=0,f=o.length;s<f;s++)if(o[s].fn===t&&o[s].ctx===n)return s;return!1},once:function(e,t,n){if(typeof e=="object")for(var o in e)this._on(o,e[o],t,!0);else{e=pp(e);for(var s=0,f=e.length;s<f;s++)this._on(e[s],t,n,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[Fn(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[Fn(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,sr({layer:e.target,propagatedFrom:e.target},e),!0)}};ka.addEventListener=ka.on;ka.removeEventListener=ka.clearAllEventListeners=ka.off;ka.addOneTimeEventListener=ka.once;ka.fireEvent=ka.fire;ka.hasEventListeners=ka.listens;var v2=pc.extend(ka);function rn(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var UA=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};rn.prototype={clone:function(){return new rn(this.x,this.y)},add:function(e){return this.clone()._add(Wt(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(Wt(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new rn(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new rn(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=UA(this.x),this.y=UA(this.y),this},distanceTo:function(e){e=Wt(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e=Wt(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=Wt(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+Nl(this.x)+", "+Nl(this.y)+")"}};function Wt(e,t,n){return e instanceof rn?e:$s(e)?new rn(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new rn(e.x,e.y):new rn(e,t,n)}function Ar(e,t){if(e)for(var n=t?[e,t]:e,o=0,s=n.length;o<s;o++)this.extend(n[o])}Ar.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof rn||typeof e[0]=="number"||"x"in e)t=n=Wt(e);else if(e=Jo(e),t=e.min,n=e.max,!t||!n)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=n.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(e){return Wt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return Wt(this.min.x,this.max.y)},getTopRight:function(){return Wt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return typeof e[0]=="number"||e instanceof rn?e=Wt(e):e=Jo(e),e instanceof Ar?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=Jo(e);var t=this.min,n=this.max,o=e.min,s=e.max,f=s.x>=t.x&&o.x<=n.x,g=s.y>=t.y&&o.y<=n.y;return f&&g},overlaps:function(e){e=Jo(e);var t=this.min,n=this.max,o=e.min,s=e.max,f=s.x>t.x&&o.x<n.x,g=s.y>t.y&&o.y<n.y;return f&&g},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,n=this.max,o=Math.abs(t.x-n.x)*e,s=Math.abs(t.y-n.y)*e;return Jo(Wt(t.x-o,t.y-s),Wt(n.x+o,n.y+s))},equals:function(e){return e?(e=Jo(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function Jo(e,t){return!e||e instanceof Ar?e:new Ar(e,t)}function ta(e,t){if(e)for(var n=t?[e,t]:e,o=0,s=n.length;o<s;o++)this.extend(n[o])}ta.prototype={extend:function(e){var t=this._southWest,n=this._northEast,o,s;if(e instanceof Kn)o=e,s=e;else if(e instanceof ta){if(o=e._southWest,s=e._northEast,!o||!s)return this}else return e?this.extend(Kt(e)||Ur(e)):this;return!t&&!n?(this._southWest=new Kn(o.lat,o.lng),this._northEast=new Kn(s.lat,s.lng)):(t.lat=Math.min(o.lat,t.lat),t.lng=Math.min(o.lng,t.lng),n.lat=Math.max(s.lat,n.lat),n.lng=Math.max(s.lng,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,o=Math.abs(t.lat-n.lat)*e,s=Math.abs(t.lng-n.lng)*e;return new ta(new Kn(t.lat-o,t.lng-s),new Kn(n.lat+o,n.lng+s))},getCenter:function(){return new Kn((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Kn(this.getNorth(),this.getWest())},getSouthEast:function(){return new Kn(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof Kn||"lat"in e?e=Kt(e):e=Ur(e);var t=this._southWest,n=this._northEast,o,s;return e instanceof ta?(o=e.getSouthWest(),s=e.getNorthEast()):o=s=e,o.lat>=t.lat&&s.lat<=n.lat&&o.lng>=t.lng&&s.lng<=n.lng},intersects:function(e){e=Ur(e);var t=this._southWest,n=this._northEast,o=e.getSouthWest(),s=e.getNorthEast(),f=s.lat>=t.lat&&o.lat<=n.lat,g=s.lng>=t.lng&&o.lng<=n.lng;return f&&g},overlaps:function(e){e=Ur(e);var t=this._southWest,n=this._northEast,o=e.getSouthWest(),s=e.getNorthEast(),f=s.lat>t.lat&&o.lat<n.lat,g=s.lng>t.lng&&o.lng<n.lng;return f&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return e?(e=Ur(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ur(e,t){return e instanceof ta?e:new ta(e,t)}function Kn(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,n!==void 0&&(this.alt=+n)}Kn.prototype={equals:function(e,t){if(!e)return!1;e=Kt(e);var n=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return n<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+Nl(this.lat,e)+", "+Nl(this.lng,e)+")"},distanceTo:function(e){return ac.distance(this,Kt(e))},wrap:function(){return ac.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return Ur([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new Kn(this.lat,this.lng,this.alt)}};function Kt(e,t,n){return e instanceof Kn?e:$s(e)&&typeof e[0]!="object"?e.length===3?new Kn(e[0],e[1],e[2]):e.length===2?new Kn(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new Kn(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===void 0?null:new Kn(e,t,n)}var mc={latLngToPoint:function(e,t){var n=this.projection.project(e),o=this.scale(t);return this.transformation._transform(n,o)},pointToLatLng:function(e,t){var n=this.scale(t),o=this.transformation.untransform(e,n);return this.projection.unproject(o)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e),o=this.transformation.transform(t.min,n),s=this.transformation.transform(t.max,n);return new Ar(o,s)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?Ow(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?Ow(e.lat,this.wrapLat,!0):e.lat,o=e.alt;return new Kn(n,t,o)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),o=t.lat-n.lat,s=t.lng-n.lng;if(o===0&&s===0)return e;var f=e.getSouthWest(),g=e.getNorthEast(),w=new Kn(f.lat-o,f.lng-s),y=new Kn(g.lat-o,g.lng-s);return new ta(w,y)}},ac=sr({},mc,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,o=e.lat*n,s=t.lat*n,f=Math.sin((t.lat-e.lat)*n/2),g=Math.sin((t.lng-e.lng)*n/2),w=f*f+Math.cos(o)*Math.cos(s)*g*g,y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return this.R*y}}),FA=6378137,BA={R:FA,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,e.lat),-n),s=Math.sin(o*t);return new rn(this.R*e.lng*t,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(e){var t=180/Math.PI;return new Kn((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=FA*Math.PI;return new Ar([-e,-e],[e,e])}()};function N6(e,t,n,o){if($s(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=n,this._d=o}N6.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new rn((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function _2(e,t,n,o){return new N6(e,t,n,o)}var vC=sr({},ac,{code:"EPSG:3857",projection:BA,transformation:function(){var e=.5/(Math.PI*BA.R);return _2(e,.5,-e,.5)}()}),IU=sr({},vC,{code:"EPSG:900913"});function L6(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function P6(e,t){var n="",o,s,f,g,w,y;for(o=0,f=e.length;o<f;o++){for(w=e[o],s=0,g=w.length;s<g;s++)y=w[s],n+=(s?"L":"M")+y.x+" "+y.y;n+=t?Ot.svg?"z":"x":""}return n||"M0 0"}var _C=document.documentElement.style,y2="ActiveXObject"in window,OU=y2&&!document.addEventListener,I6="msLaunchUri"in navigator&&!("documentMode"in document),yC=Fs("webkit"),O6=Fs("android"),R6=Fs("android 2")||Fs("android 3"),RU=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),DU=O6&&Fs("Google")&&RU<537&&!("AudioNode"in window),wC=!!window.opera,D6=!I6&&Fs("chrome"),z6=Fs("gecko")&&!yC&&!wC&&!y2,zU=!D6&&Fs("safari"),U6=Fs("phantom"),F6="OTransition"in _C,UU=navigator.platform.indexOf("Win")===0,B6=y2&&"transition"in _C,bC="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!R6,$6="MozPerspective"in _C,FU=!window.L_DISABLE_3D&&(B6||bC||$6)&&!F6&&!U6,w0=typeof orientation<"u"||Fs("mobile"),BU=w0&&yC,$U=w0&&bC,j6=!window.PointerEvent&&window.MSPointerEvent,H6=!!(window.PointerEvent||j6),W6="ontouchstart"in window||!!window.TouchEvent,jU=!window.L_NO_TOUCH&&(W6||H6),HU=w0&&wC,WU=w0&&z6,VU=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ZU=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",Zr,t),window.removeEventListener("testPassiveEventSupport",Zr,t)}catch{}return e}(),qU=function(){return!!document.createElement("canvas").getContext}(),xC=!!(document.createElementNS&&L6("svg").createSVGRect),GU=!!xC&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),YU=!xC&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&typeof t.adj=="object"}catch{return!1}}(),KU=navigator.platform.indexOf("Mac")===0,JU=navigator.platform.indexOf("Linux")===0;function Fs(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Ot={ie:y2,ielt9:OU,edge:I6,webkit:yC,android:O6,android23:R6,androidStock:DU,opera:wC,chrome:D6,gecko:z6,safari:zU,phantom:U6,opera12:F6,win:UU,ie3d:B6,webkit3d:bC,gecko3d:$6,any3d:FU,mobile:w0,mobileWebkit:BU,mobileWebkit3d:$U,msPointer:j6,pointer:H6,touch:jU,touchNative:W6,mobileOpera:HU,mobileGecko:WU,retina:VU,passiveEvents:ZU,canvas:qU,svg:xC,vml:YU,inlineSvg:GU,mac:KU,linux:JU},V6=Ot.msPointer?"MSPointerDown":"pointerdown",Z6=Ot.msPointer?"MSPointerMove":"pointermove",q6=Ot.msPointer?"MSPointerUp":"pointerup",G6=Ot.msPointer?"MSPointerCancel":"pointercancel",KE={touchstart:V6,touchmove:Z6,touchend:q6,touchcancel:G6},$A={touchstart:rF,touchmove:Yy,touchend:Yy,touchcancel:Yy},Tp={},jA=!1;function XU(e,t,n){return t==="touchstart"&&nF(),$A[t]?(n=$A[t].bind(this,n),e.addEventListener(KE[t],n,!1),n):(console.warn("wrong event specified:",t),Zr)}function QU(e,t,n){if(!KE[t]){console.warn("wrong event specified:",t);return}e.removeEventListener(KE[t],n,!1)}function eF(e){Tp[e.pointerId]=e}function tF(e){Tp[e.pointerId]&&(Tp[e.pointerId]=e)}function HA(e){delete Tp[e.pointerId]}function nF(){jA||(document.addEventListener(V6,eF,!0),document.addEventListener(Z6,tF,!0),document.addEventListener(q6,HA,!0),document.addEventListener(G6,HA,!0),jA=!0)}function Yy(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){t.touches=[];for(var n in Tp)t.touches.push(Tp[n]);t.changedTouches=[t],e(t)}}function rF(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Yi(t),Yy(e,t)}function iF(e){var t={},n,o;for(o in e)n=e[o],t[o]=n&&n.bind?n.bind(e):n;return e=t,t.type="dblclick",t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var oF=200;function aF(e,t){e.addEventListener("dblclick",t);var n=0,o;function s(f){if(f.detail!==1){o=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var g=dF(f);if(!(g.some(function(y){return y instanceof HTMLLabelElement&&y.attributes.for})&&!g.some(function(y){return y instanceof HTMLInputElement||y instanceof HTMLSelectElement}))){var w=Date.now();w-n<=oF?(o++,o===2&&t(iF(f))):o=1,n=w}}}return e.addEventListener("click",s),{dblclick:t,simDblclick:s}}function sF(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var Y6=EC(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ky=EC(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),lF=Ky==="webkitTransition"||Ky==="OTransition"?Ky+"End":"transitionend";function uF(e){return typeof e=="string"?document.getElementById(e):e}function Rw(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||n==="auto")&&document.defaultView){var o=document.defaultView.getComputedStyle(e,null);n=o?o[t]:null}return n==="auto"?null:n}function zn(e,t,n){var o=document.createElement(e);return o.className=t||"",n&&n.appendChild(o),o}function kr(e){var t=e.parentNode;t&&t.removeChild(e)}function JE(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function b0(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function x0(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function K6(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=SC(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function cn(e,t){if(e.classList!==void 0)for(var n=pp(t),o=0,s=n.length;o<s;o++)e.classList.add(n[o]);else if(!K6(e,t)){var f=SC(e);J6(e,(f?f+" ":"")+t)}}function Gr(e,t){e.classList!==void 0?e.classList.remove(t):J6(e,k6((" "+SC(e)+" ").replace(" "+t+" "," ")))}function J6(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function SC(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function os(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&cF(e,t)}function cF(e,t){var n=!1,o="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(o)}catch{if(t===1)return}t=Math.round(t*100),n?(n.Enabled=t!==100,n.Opacity=t):e.style.filter+=" progid:"+o+"(opacity="+t+")"}function EC(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Cp(e,t,n){var o=t||new rn(0,0);e.style[Y6]=(Ot.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(n?" scale("+n+")":"")}function ui(e,t){e._leaflet_pos=t,Ot.any3d?Cp(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function kp(e){return e._leaflet_pos||new rn(0,0)}var Dw,zw,OS;if("onselectstart"in document)Dw=function(){an(window,"selectstart",Yi)},zw=function(){mr(window,"selectstart",Yi)};else{var vv=EC(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Dw=function(){if(vv){var e=document.documentElement.style;OS=e[vv],e[vv]="none"}},zw=function(){vv&&(document.documentElement.style[vv]=OS,OS=void 0)}}function X6(){an(window,"dragstart",Yi)}function Q6(){mr(window,"dragstart",Yi)}var Jy,XE;function eL(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(QE(),Jy=e,XE=e.style.outlineStyle,e.style.outlineStyle="none",an(window,"keydown",QE))}function QE(){Jy&&(Jy.style.outlineStyle=XE,Jy=void 0,XE=void 0,mr(window,"keydown",QE))}function fF(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function tL(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}function an(e,t,n,o){if(t&&typeof t=="object")for(var s in t)tT(e,s,t[s],n);else{t=pp(t);for(var f=0,g=t.length;f<g;f++)tT(e,t[f],n,o)}return this}var Rs="_leaflet_events";function mr(e,t,n,o){if(arguments.length===1)WA(e),delete e[Rs];else if(t&&typeof t=="object")for(var s in t)nT(e,s,t[s],n);else if(t=pp(t),arguments.length===2)WA(e,function(w){return A6(t,w)!==-1});else for(var f=0,g=t.length;f<g;f++)nT(e,t[f],n,o);return this}function WA(e,t){for(var n in e[Rs]){var o=n.split(/\d/)[0];(!t||t(o))&&nT(e,o,null,null,n)}}var eT={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function tT(e,t,n,o){var s=t+Fn(n)+(o?"_"+Fn(o):"");if(e[Rs]&&e[Rs][s])return this;var f=function(w){return n.call(o||e,w||window.event)},g=f;!Ot.touchNative&&Ot.pointer&&t.indexOf("touch")===0?f=XU(e,t,f):Ot.touch&&t==="dblclick"?f=aF(e,f):"addEventListener"in e?t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"?e.addEventListener(eT[t]||t,f,Ot.passiveEvents?{passive:!1}:!1):t==="mouseenter"||t==="mouseleave"?(f=function(w){w=w||window.event,rL(e,w)&&g(w)},e.addEventListener(eT[t],f,!1)):e.addEventListener(t,g,!1):e.attachEvent("on"+t,f),e[Rs]=e[Rs]||{},e[Rs][s]=f}function nT(e,t,n,o,s){s=s||t+Fn(n)+(o?"_"+Fn(o):"");var f=e[Rs]&&e[Rs][s];if(!f)return this;!Ot.touchNative&&Ot.pointer&&t.indexOf("touch")===0?QU(e,t,f):Ot.touch&&t==="dblclick"?sF(e,f):"removeEventListener"in e?e.removeEventListener(eT[t]||t,f,!1):e.detachEvent("on"+t,f),e[Rs][s]=null}function mp(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function nL(e){return tT(e,"wheel",mp),this}function w2(e){return an(e,"mousedown touchstart dblclick contextmenu",mp),e._leaflet_disable_click=!0,this}function Yi(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Ap(e){return Yi(e),mp(e),this}function dF(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function hF(e,t){if(!t)return new rn(e.clientX,e.clientY);var n=tL(t),o=n.boundingClientRect;return new rn((e.clientX-o.left)/n.x-t.clientLeft,(e.clientY-o.top)/n.y-t.clientTop)}var pF=Ot.linux&&Ot.chrome?window.devicePixelRatio:Ot.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mF(e){return Ot.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/pF:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function rL(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch{return!1}return n!==e}var gF=v2.extend({run:function(e,t,n,o){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=kp(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ea(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=this._duration*1e3;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),ui(this._el,n),this.fire("step")},_complete:function(){ls(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),kn=v2.extend({options:{crs:vC,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=Mr(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=Cr(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(Kt(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ky&&Ot.any3d&&!Ot.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),an(this._proxy,lF,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,n){if(t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(Kt(e),t,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=sr({animate:n.animate},n.zoom),n.pan=sr({animate:n.animate,duration:n.duration},n.pan));var o=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t,n.pan&&n.pan.noMoveStart),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Ot.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var o=this.getZoomScale(t),s=this.getSize().divideBy(2),f=e instanceof rn?e:this.latLngToContainerPoint(e),g=f.subtract(s).multiplyBy(1-1/o),w=this.containerPointToLatLng(s.add(g));return this.setView(w,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():Ur(e);var n=Wt(t.paddingTopLeft||t.padding||[0,0]),o=Wt(t.paddingBottomRight||t.padding||[0,0]),s=this.getBoundsZoom(e,!1,n.add(o));if(s=typeof t.maxZoom=="number"?Math.min(t.maxZoom,s):s,s===1/0)return{center:e.getCenter(),zoom:s};var f=o.subtract(n).divideBy(2),g=this.project(e.getSouthWest(),s),w=this.project(e.getNorthEast(),s),y=this.unproject(g.add(w).divideBy(2).add(f),s);return{center:y,zoom:s}},fitBounds:function(e,t){if(e=Ur(e),!e.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=Wt(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gF,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){cn(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(n=n||{},n.animate===!1||!Ot.any3d)return this.setView(e,t,n);this._stop();var o=this.project(this.getCenter()),s=this.project(e),f=this.getSize(),g=this._zoom;e=Kt(e),t=t===void 0?g:t;var w=Math.max(f.x,f.y),y=w*this.getZoomScale(g,t),E=s.distanceTo(o)||1,M=1.42,N=M*M;function R(ge){var ke=ge?-1:1,be=ge?y:w,Ue=y*y-w*w+ke*N*N*E*E,it=2*be*N*E,Xe=Ue/it,Te=Math.sqrt(Xe*Xe+1)-Xe,Fe=Te<1e-9?-18:Math.log(Te);return Fe}function F(ge){return(Math.exp(ge)-Math.exp(-ge))/2}function $(ge){return(Math.exp(ge)+Math.exp(-ge))/2}function V(ge){return F(ge)/$(ge)}var X=R(0);function Z(ge){return w*($(X)/$(X+M*ge))}function D(ge){return w*($(X)*V(X+M*ge)-F(X))/N}function z(ge){return 1-Math.pow(1-ge,1.5)}var H=Date.now(),se=(R(1)-X)/M,he=n.duration?1e3*n.duration:1e3*se*.8;function pe(){var ge=(Date.now()-H)/he,ke=z(ge)*se;ge<=1?(this._flyToFrame=ea(pe,this),this._move(this.unproject(o.add(s.subtract(o).multiplyBy(D(ke)/E)),g),this.getScaleZoom(w/Z(ke),g),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),pe.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=Ur(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),o=this._limitCenter(n,this._zoom,Ur(e));return n.equals(o)||this.panTo(o,t),this._enforcingBounds=!1,this},panInside:function(e,t){t=t||{};var n=Wt(t.paddingTopLeft||t.padding||[0,0]),o=Wt(t.paddingBottomRight||t.padding||[0,0]),s=this.project(this.getCenter()),f=this.project(e),g=this.getPixelBounds(),w=Jo([g.min.add(n),g.max.subtract(o)]),y=w.getSize();if(!w.contains(f)){this._enforcingBounds=!0;var E=f.subtract(w.getCenter()),M=w.extend(f).getSize().subtract(y);s.x+=E.x<0?-M.x:M.x,s.y+=E.y<0?-M.y:M.y,this.panTo(this.unproject(s),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=sr({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),o=t.divideBy(2).round(),s=n.divideBy(2).round(),f=o.subtract(s);return!f.x&&!f.y?this:(e.animate&&e.pan?this.panBy(f):(e.pan&&this._rawPanBy(f),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Cr(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=sr({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=Cr(this._handleGeolocationResponse,this),n=Cr(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=e.coords.latitude,n=e.coords.longitude,o=new Kn(t,n),s=o.toBounds(e.coords.accuracy*2),f=this._locateOptions;if(f.setView){var g=this.getBoundsZoom(s);this.setView(o,f.maxZoom?Math.min(g,f.maxZoom):g)}var w={latlng:o,bounds:s,timestamp:e.timestamp};for(var y in e.coords)typeof e.coords[y]=="number"&&(w[y]=e.coords[y]);this.fire("locationfound",w)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),kr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ls(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)kr(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),o=zn("div",n,t||this._mapPane);return e&&(this._panes[e]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new ta(t,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=Ur(e),n=Wt(n||[0,0]);var o=this.getZoom()||0,s=this.getMinZoom(),f=this.getMaxZoom(),g=e.getNorthWest(),w=e.getSouthEast(),y=this.getSize().subtract(n),E=Jo(this.project(w,o),this.project(g,o)).getSize(),M=Ot.any3d?this.options.zoomSnap:1,N=y.x/E.x,R=y.y/E.y,F=t?Math.max(N,R):Math.min(N,R);return o=this.getScaleZoom(F,o),M&&(o=Math.round(o/(M/100))*(M/100),o=t?Math.ceil(o/M)*M:Math.floor(o/M)*M),Math.max(s,Math.min(f,o))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new rn(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new Ar(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=t===void 0?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=t===void 0?this._zoom:t;var o=n.zoom(e*n.scale(t));return isNaN(o)?1/0:o},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(Kt(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(Wt(e),t)},layerPointToLatLng:function(e){var t=Wt(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(Kt(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(Kt(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(Ur(e))},distance:function(e,t){return this.options.crs.distance(Kt(e),Kt(t))},containerPointToLayerPoint:function(e){return Wt(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return Wt(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(Wt(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Kt(e)))},mouseEventToContainerPoint:function(e){return hF(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=uF(e);if(t){if(t._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");an(t,"scroll",this._onScroll,this),this._containerId=Fn(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ot.any3d,cn(e,"leaflet-container"+(Ot.touch?" leaflet-touch":"")+(Ot.retina?" leaflet-retina":"")+(Ot.ielt9?" leaflet-oldie":"")+(Ot.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=Rw(e,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&t!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ui(this._mapPane,new rn(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(cn(e.markerPane,"leaflet-zoom-hide"),cn(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){ui(this._mapPane,new rn(0,0));var o=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var s=this._zoom!==t;this._moveStart(s,n)._move(e,t)._moveEnd(s),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,o){t===void 0&&(t=this._zoom);var s=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),o?n&&n.pinch&&this.fire("zoom",n):((s||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ls(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){ui(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[Fn(this._container)]=this;var t=e?mr:an;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Ot.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ls(this._resizeRequest),this._resizeRequest=ea(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n=[],o,s=t==="mouseout"||t==="mouseover",f=e.target||e.srcElement,g=!1;f;){if(o=this._targets[Fn(f)],o&&(t==="click"||t==="preclick")&&this._draggableMoved(o)){g=!0;break}if(o&&o.listens(t,!0)&&(s&&!rL(f,e)||(n.push(o),s))||f===this._container)break;f=f.parentNode}return!n.length&&!g&&!s&&this.listens(t,!0)&&(n=[this]),n},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(t))){var n=e.type;n==="mousedown"&&eL(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,n){if(e.type==="click"){var o=sr({},e);o.type="preclick",this._fireDOMEvent(o,o.type,n)}var s=this._findEventTargets(e,t);if(n){for(var f=[],g=0;g<n.length;g++)n[g].listens(t,!0)&&f.push(n[g]);s=f.concat(s)}if(s.length){t==="contextmenu"&&Yi(e);var w=s[0],y={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var E=w.getLatLng&&(!w._radius||w._radius<=10);y.containerPoint=E?this.latLngToContainerPoint(w.getLatLng()):this.mouseEventToContainerPoint(e),y.layerPoint=this.containerPointToLayerPoint(y.containerPoint),y.latlng=E?w.getLatLng():this.layerPointToLatLng(y.layerPoint)}for(g=0;g<s.length;g++)if(s[g].fire(t,y,!0),y.originalEvent._stopped||s[g].options.bubblingMouseEvents===!1&&A6(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return kp(this._mapPane)||new rn(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var n=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var o=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(o)},_latLngBoundsToNewLayerBounds:function(e,t,n){var o=this._getNewPixelOrigin(n,t);return Jo([this.project(e.getSouthWest(),t)._subtract(o),this.project(e.getNorthWest(),t)._subtract(o),this.project(e.getSouthEast(),t)._subtract(o),this.project(e.getNorthEast(),t)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var o=this.project(e,t),s=this.getSize().divideBy(2),f=new Ar(o.subtract(s),o.add(s)),g=this._getBoundsOffset(f,n,t);return Math.abs(g.x)<=1&&Math.abs(g.y)<=1?e:this.unproject(o.add(g),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),o=new Ar(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(o,t))},_getBoundsOffset:function(e,t,n){var o=Jo(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),s=o.min.subtract(e.min),f=o.max.subtract(e.max),g=this._rebound(s.x,-f.x),w=this._rebound(s.y,-f.y);return new rn(g,w)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),o=Ot.any3d?this.options.zoomSnap:1;return o&&(e=Math.round(e/o)*o),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Gr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=zn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var n=Y6,o=this._proxy.style[n];Cp(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),o===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){kr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Cp(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(t),s=this._getCenterOffset(e)._divideBy(1-1/o);return n.animate!==!0&&!this.getSize().contains(s)?!1:(ea(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,o){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,cn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:o}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(Cr(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Gr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function vF(e,t){return new kn(e,t)}var Fl=pc.extend({options:{position:"topright"},initialize:function(e){Mr(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),o=e._controlCorners[n];return cn(t,"leaflet-control"),n.indexOf("bottom")!==-1?o.insertBefore(t,o.firstChild):o.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(kr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}});kn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=zn("div",t+"control-container",this._container);function o(s,f){var g=t+s+" "+t+f;e[s+f]=zn("div",g,n)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)kr(this._controlCorners[e]);kr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _F=Fl.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,o){return n<o?-1:o<n?1:0}},initialize:function(e,t,n){Mr(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var o in e)this._addLayer(e[o],o);for(o in t)this._addLayer(t[o],o,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Fl.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(Fn(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){cn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(cn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):Gr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Gr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=zn("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),w2(t),nL(t);var o=this._section=zn("section",e+"-list");n&&(this._map.on("click",this.collapse,this),an(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var s=this._layersLink=zn("a",e+"-toggle",t);s.href="#",s.title="Layers",s.setAttribute("role","button"),an(s,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){Yi(f),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=zn("div",e+"-base",o),this._separator=zn("div",e+"-separator",o),this._overlaysList=zn("div",e+"-overlays",o),t.appendChild(o)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&Fn(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(Cr(function(o,s){return this.options.sortFunction(o.layer,s.layer,o.name,s.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;JE(this._baseLayersList),JE(this._overlaysList),this._layerControlInputs=[];var e,t,n,o,s=0;for(n=0;n<this._layers.length;n++)o=this._layers[n],this._addItem(o),t=t||o.overlay,e=e||!o.overlay,s+=o.overlay?0:1;return this.options.hideSingleBase&&(e=e&&s>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(Fn(e.target)),n=t.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(e){var t=document.createElement("label"),n=this._map.hasLayer(e.layer),o;e.overlay?(o=document.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=n):o=this._createRadioElement("leaflet-base-layers_"+Fn(this),n),this._layerControlInputs.push(o),o.layerId=Fn(e.layer),an(o,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+e.name;var f=document.createElement("span");t.appendChild(f),f.appendChild(o),f.appendChild(s);var g=e.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,t,n,o=[],s=[];this._handlingClick=!0;for(var f=e.length-1;f>=0;f--)t=e[f],n=this._getLayer(t.layerId).layer,t.checked?o.push(n):t.checked||s.push(n);for(f=0;f<s.length;f++)this._map.hasLayer(s[f])&&this._map.removeLayer(s[f]);for(f=0;f<o.length;f++)this._map.hasLayer(o[f])||this._map.addLayer(o[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,n,o=this._map.getZoom(),s=e.length-1;s>=0;s--)t=e[s],n=this._getLayer(t.layerId).layer,t.disabled=n.options.minZoom!==void 0&&o<n.options.minZoom||n.options.maxZoom!==void 0&&o>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,an(e,"click",Yi),this.expand();var t=this;setTimeout(function(){mr(e,"click",Yi),t._preventClick=!1})}}),iL=Fl.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=zn("div",t+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,o,s){var f=zn("a",n,o);return f.innerHTML=e,f.href="#",f.title=t,f.setAttribute("role","button"),f.setAttribute("aria-label",t),w2(f),an(f,"click",Ap),an(f,"click",s,this),an(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";Gr(this._zoomInButton,t),Gr(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(cn(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(cn(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});kn.mergeOptions({zoomControl:!0});kn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new iL,this.addControl(this.zoomControl))});var yF=Fl.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=zn("div",t),o=this.options;return this._addScales(o,t+"-line",n),e.on(o.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=zn("div",t,n)),e.imperial&&(this._iScale=zn("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t=e*3.2808399,n,o,s;t>5280?(n=t/5280,o=this._getRoundNum(n),this._updateScale(this._iScale,o+" mi",o/n)):(s=this._getRoundNum(t),this._updateScale(this._iScale,s+" ft",s/t))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),wF='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oL=Fl.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ot.inlineSvg?wF+" ":"")+"Leaflet</a>"},initialize:function(e){Mr(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=zn("div","leaflet-control-attribution"),w2(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});kn.mergeOptions({attributionControl:!0});kn.addInitHook(function(){this.options.attributionControl&&new oL().addTo(this)});Fl.Layers=_F;Fl.Zoom=iL;Fl.Scale=yF;Fl.Attribution=oL;var jl=pc.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});jl.addTo=function(e,t){return e.addHandler(t,this),this};var VA=Ot.touch?"touchstart mousedown":"mousedown",Lf=v2.extend({options:{clickTolerance:3},initialize:function(e,t,n,o){Mr(this,o),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(an(this._dragStartTarget,VA,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Lf._dragging===this&&this.finishDrag(!0),mr(this._dragStartTarget,VA,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!K6(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Lf._dragging===this&&this.finishDrag();return}if(!(Lf._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Lf._dragging=this,this._preventOutline&&eL(this._element),X6(),Dw(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=fF(this._element);this._startPoint=new rn(t.clientX,t.clientY),this._startPos=kp(this._element),this._parentScale=tL(n);var o=e.type==="mousedown";an(document,o?"mousemove":"touchmove",this._onMove,this),an(document,o?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,n=new rn(t.clientX,t.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Yi(e),this._moved||(this.fire("dragstart"),this._moved=!0,cn(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),cn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),ui(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Gr(document.body,"leaflet-dragging"),this._lastTarget&&(Gr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),mr(document,"mousemove touchmove",this._onMove,this),mr(document,"mouseup touchend touchcancel",this._onUp,this),Q6(),zw();var t=this._moved&&this._moving;this._moving=!1,Lf._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function bF(e,t,n){var o,s=[1,4,2,8],f,g,w,y,E,M,N,R;for(f=0,M=e.length;f<M;f++)e[f]._code=gp(e[f],t);for(w=0;w<4;w++){for(N=s[w],o=[],f=0,M=e.length,g=M-1;f<M;g=f++)y=e[f],E=e[g],y._code&N?E._code&N||(R=iT(E,y,N,t,n),R._code=gp(R,t),o.push(R)):(E._code&N&&(R=iT(E,y,N,t,n),R._code=gp(R,t),o.push(R)),o.push(y));e=o}return e}function xF(e,t){var n,o,s,f,g,w,y,E,M;if(!e||e.length===0)throw new Error("latlngs not passed");cs(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var N=Kt([0,0]),R=Ur(e),F=R.getNorthWest().distanceTo(R.getSouthWest())*R.getNorthEast().distanceTo(R.getNorthWest());F<1700&&(N=aL(e));var $=e.length,V=[];for(n=0;n<$;n++){var X=Kt(e[n]);V.push(t.project(Kt([X.lat-N.lat,X.lng-N.lng])))}for(w=y=E=0,n=0,o=$-1;n<$;o=n++)s=V[n],f=V[o],g=s.y*f.x-f.y*s.x,y+=(s.x+f.x)*g,E+=(s.y+f.y)*g,w+=g*3;w===0?M=V[0]:M=[y/w,E/w];var Z=t.unproject(Wt(M));return Kt([Z.lat+N.lat,Z.lng+N.lng])}function aL(e){for(var t=0,n=0,o=0,s=0;s<e.length;s++){var f=Kt(e[s]);t+=f.lat,n+=f.lng,o++}return Kt([t/o,n/o])}function SF(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=CF(e,n),e=TF(e,n),e}function EF(e,t,n){return Math.sqrt(TC(e,t,n,!0))}function TF(e,t){var n=e.length,o=typeof Uint8Array!=void 0+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,rT(e,s,t,0,n-1);var f,g=[];for(f=0;f<n;f++)s[f]&&g.push(e[f]);return g}function rT(e,t,n,o,s){var f=0,g,w,y;for(w=o+1;w<=s-1;w++)y=TC(e[w],e[o],e[s],!0),y>f&&(g=w,f=y);f>n&&(t[g]=1,rT(e,t,n,o,g),rT(e,t,n,g,s))}function CF(e,t){for(var n=[e[0]],o=1,s=0,f=e.length;o<f;o++)AF(e[o],e[s])>t&&(n.push(e[o]),s=o);return s<f-1&&n.push(e[f-1]),n}var ZA;function kF(e,t,n,o,s){var f=o?ZA:gp(e,n),g=gp(t,n),w,y,E;for(ZA=g;;){if(!(f|g))return[e,t];if(f&g)return!1;w=f||g,y=iT(e,t,w,n,s),E=gp(y,n),w===f?(e=y,f=E):(t=y,g=E)}}function iT(e,t,n,o,s){var f=t.x-e.x,g=t.y-e.y,w=o.min,y=o.max,E,M;return n&8?(E=e.x+f*(y.y-e.y)/g,M=y.y):n&4?(E=e.x+f*(w.y-e.y)/g,M=w.y):n&2?(E=y.x,M=e.y+g*(y.x-e.x)/f):n&1&&(E=w.x,M=e.y+g*(w.x-e.x)/f),new rn(E,M,s)}function gp(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function AF(e,t){var n=t.x-e.x,o=t.y-e.y;return n*n+o*o}function TC(e,t,n,o){var s=t.x,f=t.y,g=n.x-s,w=n.y-f,y=g*g+w*w,E;return y>0&&(E=((e.x-s)*g+(e.y-f)*w)/y,E>1?(s=n.x,f=n.y):E>0&&(s+=g*E,f+=w*E)),g=e.x-s,w=e.y-f,o?g*g+w*w:new rn(s,f)}function cs(e){return!$s(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function MF(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),cs(e)}function NF(e,t){var n,o,s,f,g,w,y,E;if(!e||e.length===0)throw new Error("latlngs not passed");cs(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var M=Kt([0,0]),N=Ur(e),R=N.getNorthWest().distanceTo(N.getSouthWest())*N.getNorthEast().distanceTo(N.getNorthWest());R<1700&&(M=aL(e));var F=e.length,$=[];for(n=0;n<F;n++){var V=Kt(e[n]);$.push(t.project(Kt([V.lat-M.lat,V.lng-M.lng])))}for(n=0,o=0;n<F-1;n++)o+=$[n].distanceTo($[n+1])/2;if(o===0)E=$[0];else for(n=0,f=0;n<F-1;n++)if(g=$[n],w=$[n+1],s=g.distanceTo(w),f+=s,f>o){y=(f-o)/s,E=[w.x-y*(w.x-g.x),w.y-y*(w.y-g.y)];break}var X=t.unproject(Wt(E));return Kt([X.lat+M.lat,X.lng+M.lng])}var sL={project:function(e){return new rn(e.lng,e.lat)},unproject:function(e){return new Kn(e.y,e.x)},bounds:new Ar([-180,-90],[180,90])},qA={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ar([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var t=Math.PI/180,n=this.R,o=e.lat*t,s=this.R_MINOR/n,f=Math.sqrt(1-s*s),g=f*Math.sin(o),w=Math.tan(Math.PI/4-o/2)/Math.pow((1-g)/(1+g),f/2);return o=-n*Math.log(Math.max(w,1e-10)),new rn(e.lng*t*n,o)},unproject:function(e){for(var t=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),f=Math.exp(-e.y/n),g=Math.PI/2-2*Math.atan(f),w=0,y=.1,E;w<15&&Math.abs(y)>1e-7;w++)E=s*Math.sin(g),E=Math.pow((1-E)/(1+E),s/2),y=Math.PI/2-2*Math.atan(f*E)-g,g+=y;return new Kn(g*t,e.x*t/n)}},LF=sr({},ac,{code:"EPSG:3395",projection:qA,transformation:function(){var e=.5/(Math.PI*qA.R);return _2(e,.5,-e,.5)}()}),lL=sr({},ac,{code:"EPSG:4326",projection:sL,transformation:_2(1/180,1,-1/180,.5)}),PF=sr({},mc,{projection:sL,transformation:_2(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,o=t.lat-e.lat;return Math.sqrt(n*n+o*o)},infinite:!0});mc.Earth=ac;mc.EPSG3395=LF;mc.EPSG3857=vC;mc.EPSG900913=IU;mc.EPSG4326=lL;mc.Simple=PF;var js=v2.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[Fn(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[Fn(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});kn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=Fn(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=Fn(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return Fn(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?$s(e)?e:[e]:[];for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[Fn(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=Fn(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var s=this._zoomBoundLayers[o].options;e=s.minZoom===void 0?e:Math.min(e,s.minZoom),t=s.maxZoom===void 0?t:Math.max(t,s.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Xy=js.extend({initialize:function(e,t){Mr(this,t),this._layers={};var n,o;if(e)for(n=0,o=e.length;n<o;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){var t=typeof e=="number"?e:this.getLayerId(e);return t in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),n,o;for(n in this._layers)o=this._layers[n],o[e]&&o[e].apply(o,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return Fn(e)}}),Bf=Xy.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Xy.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Xy.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new ta;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Uw=pc.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){Mr(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(n,t&&t.tagName==="IMG"?t:null);return this._setIconStyles(o,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),o},_setIconStyles:function(e,t){var n=this.options,o=n[t+"Size"];typeof o=="number"&&(o=[o,o]);var s=Wt(o),f=Wt(t==="shadow"&&n.shadowAnchor||n.iconAnchor||s&&s.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),f&&(e.style.marginLeft=-f.x+"px",e.style.marginTop=-f.y+"px"),s&&(e.style.width=s.x+"px",e.style.height=s.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return Ot.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),Wv=Uw.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Wv.imagePath!="string"&&(Wv.imagePath=this._detectIconPath()),(this.options.imagePath||Wv.imagePath)+Uw.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(n,o,s){var f=o.exec(n);return f&&f[s]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=zn("div","leaflet-default-icon-path",document.body),t=Rw(e,"background-image")||Rw(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),GA=jl.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Lf(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),cn(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Gr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,o=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,f=kp(t._icon),g=n.getPixelBounds(),w=n.getPixelOrigin(),y=Jo(g.min._subtract(w).add(s),g.max._subtract(w).subtract(s));if(!y.contains(f)){var E=Wt((Math.max(y.max.x,f.x)-y.max.x)/(g.max.x-y.max.x)-(Math.min(y.min.x,f.x)-y.min.x)/(g.min.x-y.min.x),(Math.max(y.max.y,f.y)-y.max.y)/(g.max.y-y.max.y)-(Math.min(y.min.y,f.y)-y.min.y)/(g.min.y-y.min.y)).multiplyBy(o);n.panBy(E,{animate:!1}),this._draggable._newPos._add(E),this._draggable._startPos._add(E),ui(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=ea(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(ls(this._panRequest),this._panRequest=ea(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,o=kp(t._icon),s=t._map.layerPointToLatLng(o);n&&ui(n,o),t._latlng=s,e.latlng=s,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){ls(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),uL=js.extend({options:{icon:new Wv,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){Mr(this,t),this._latlng=Kt(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=Kt(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),o=!1;n!==this._icon&&(this._icon&&this._removeIcon(),o=!0,e.title&&(n.title=e.title),n.tagName==="IMG"&&(n.alt=e.alt||"")),cn(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&an(n,"focus",this._panOnFocus,this);var s=e.icon.createShadow(this._shadow),f=!1;s!==this._shadow&&(this._removeShadow(),f=!0),s&&(cn(s,t),s.alt=""),this._shadow=s,e.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&f&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mr(this._icon,"focus",this._panOnFocus,this),kr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&kr(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&ui(this._icon,e),this._shadow&&ui(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(cn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),GA)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new GA(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&os(this._icon,e),this._shadow&&os(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?Wt(t.iconSize):Wt(0,0),o=t.iconAnchor?Wt(t.iconAnchor):Wt(0,0);e.panInside(this._latlng,{paddingTopLeft:o,paddingBottomRight:n.subtract(o)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Gf=js.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return Mr(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),cL=Gf.extend({options:{fill:!0,radius:10},initialize:function(e,t){Mr(this,t),this._latlng=Kt(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=Kt(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Gf.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),o=[e+n,t+n];this._pxBounds=new Ar(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),IF=cL.extend({initialize:function(e,t,n){if(typeof t=="number"&&(t=sr({},n,{radius:t})),Mr(this,t),this._latlng=Kt(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new ta(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Gf.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,o=n.options.crs;if(o.distance===ac.distance){var s=Math.PI/180,f=this._mRadius/ac.R/s,g=n.project([t+f,e]),w=n.project([t-f,e]),y=g.add(w).divideBy(2),E=n.unproject(y).lat,M=Math.acos((Math.cos(f*s)-Math.sin(t*s)*Math.sin(E*s))/(Math.cos(t*s)*Math.cos(E*s)))/s;(isNaN(M)||M===0)&&(M=f/Math.cos(Math.PI/180*t)),this._point=y.subtract(n.getPixelOrigin()),this._radius=isNaN(M)?0:y.x-n.project([E,e-M]).x,this._radiusY=y.y-g.y}else{var N=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(N).x}this._updateBounds()}}),zf=Gf.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){Mr(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,n=null,o=TC,s,f,g=0,w=this._parts.length;g<w;g++)for(var y=this._parts[g],E=1,M=y.length;E<M;E++){s=y[E-1],f=y[E];var N=o(e,s,f,!0);N<t&&(t=N,n=o(e,s,f))}return n&&(n.distance=Math.sqrt(t)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return NF(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=Kt(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new ta,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return cs(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=cs(e),o=0,s=e.length;o<s;o++)n?(t[o]=Kt(e[o]),this._bounds.extend(t[o])):t[o]=this._convertLatLngs(e[o]);return t},_project:function(){var e=new Ar;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new rn(e,e);this._rawPxBounds&&(this._pxBounds=new Ar([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var o=e[0]instanceof Kn,s=e.length,f,g;if(o){for(g=[],f=0;f<s;f++)g[f]=this._map.latLngToLayerPoint(e[f]),n.extend(g[f]);t.push(g)}else for(f=0;f<s;f++)this._projectLatlngs(e[f],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,n,o,s,f,g,w,y;for(n=0,s=0,f=this._rings.length;n<f;n++)for(y=this._rings[n],o=0,g=y.length;o<g-1;o++)w=kF(y[o],y[o+1],e,o,!0),w&&(t[s]=t[s]||[],t[s].push(w[0]),(w[1]!==y[o+1]||o===g-2)&&(t[s].push(w[1]),s++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,o=e.length;n<o;n++)e[n]=SF(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,o,s,f,g,w,y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,f=this._parts.length;n<f;n++)for(w=this._parts[n],o=0,g=w.length,s=g-1;o<g;s=o++)if(!(!t&&o===0)&&EF(e,w[s],w[o])<=y)return!0;return!1}});zf._flat=MF;var Fw=zf.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xF(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=zf.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof Kn&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){zf.prototype._setLatLngs.call(this,e),cs(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return cs(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new rn(t,t);if(e=new Ar(e.min.subtract(n),e.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var o=0,s=this._rings.length,f;o<s;o++)f=bF(this._rings[o],e,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,n,o,s,f,g,w,y,E;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(f=0,y=this._parts.length;f<y;f++)for(n=this._parts[f],g=0,E=n.length,w=E-1;g<E;w=g++)o=n[g],s=n[w],o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(t=!t);return t||zf.prototype._containsPoint.call(this,e,!0)}}),Qf=Bf.extend({initialize:function(e,t){Mr(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=$s(e)?e:e.features,n,o,s;if(t){for(n=0,o=t.length;n<o;n++)s=t[n],(s.geometries||s.geometry||s.features||s.coordinates)&&this.addData(s);return this}var f=this.options;if(f.filter&&!f.filter(e))return this;var g=Bw(e,f);return g?(g.feature=x2(e),g.defaultOptions=g.options,this.resetStyle(g),f.onEachFeature&&f.onEachFeature(e,g),this.addLayer(g)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=sr({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t=="function"&&(t=t(e.feature)),e.setStyle(t))}});function Bw(e,t){var n=e.type==="Feature"?e.geometry:e,o=n?n.coordinates:null,s=[],f=t&&t.pointToLayer,g=t&&t.coordsToLatLng||CC,w,y,E,M;if(!o&&!n)return null;switch(n.type){case"Point":return w=g(o),YA(f,e,w,t);case"MultiPoint":for(E=0,M=o.length;E<M;E++)w=g(o[E]),s.push(YA(f,e,w,t));return new Bf(s);case"LineString":case"MultiLineString":return y=$w(o,n.type==="LineString"?0:1,g),new zf(y,t);case"Polygon":case"MultiPolygon":return y=$w(o,n.type==="Polygon"?1:2,g),new Fw(y,t);case"GeometryCollection":for(E=0,M=n.geometries.length;E<M;E++){var N=Bw({geometry:n.geometries[E],type:"Feature",properties:e.properties},t);N&&s.push(N)}return new Bf(s);case"FeatureCollection":for(E=0,M=n.features.length;E<M;E++){var R=Bw(n.features[E],t);R&&s.push(R)}return new Bf(s);default:throw new Error("Invalid GeoJSON object.")}}function YA(e,t,n,o){return e?e(t,n):new uL(n,o&&o.markersInheritOptions&&o)}function CC(e){return new Kn(e[1],e[0],e[2])}function $w(e,t,n){for(var o=[],s=0,f=e.length,g;s<f;s++)g=t?$w(e[s],t-1,n):(n||CC)(e[s]),o.push(g);return o}function kC(e,t){return e=Kt(e),e.alt!==void 0?[Nl(e.lng,t),Nl(e.lat,t),Nl(e.alt,t)]:[Nl(e.lng,t),Nl(e.lat,t)]}function b2(e,t,n,o){for(var s=[],f=0,g=e.length;f<g;f++)s.push(t?b2(e[f],cs(e[f])?0:t-1,n,o):kC(e[f],o));return!t&&n&&s.length>0&&s.push(s[0].slice()),s}function Mp(e,t){return e.feature?sr({},e.feature,{geometry:t}):x2(t)}function x2(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var AC={toGeoJSON:function(e){return Mp(this,{type:"Point",coordinates:kC(this.getLatLng(),e)})}};uL.include(AC);IF.include(AC);cL.include(AC);zf.include({toGeoJSON:function(e){var t=!cs(this._latlngs),n=b2(this._latlngs,t?1:0,!1,e);return Mp(this,{type:(t?"Multi":"")+"LineString",coordinates:n})}});Fw.include({toGeoJSON:function(e){var t=!cs(this._latlngs),n=t&&!cs(this._latlngs[0]),o=b2(this._latlngs,n?2:t?1:0,!0,e);return t||(o=[o]),Mp(this,{type:(n?"Multi":"")+"Polygon",coordinates:o})}});Xy.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),Mp(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint")return this.toMultiPoint(e);var n=t==="GeometryCollection",o=[];return this.eachLayer(function(s){if(s.toGeoJSON){var f=s.toGeoJSON(e);if(n)o.push(f.geometry);else{var g=x2(f);g.type==="FeatureCollection"?o.push.apply(o,g.features):o.push(g)}}}),n?Mp(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});var fL=js.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=Ur(t),Mr(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(cn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){kr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&b0(this._image),this},bringToBack:function(){return this._map&&x0(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=Ur(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",t=this._image=e?this._url:zn("img");if(cn(t,"leaflet-image-layer"),this._zoomAnimated&&cn(t,"leaflet-zoom-animated"),this.options.className&&cn(t,this.options.className),t.onselectstart=Zr,t.onmousemove=Zr,t.onload=Cr(this.fire,this,"load"),t.onerror=Cr(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(t.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Cp(this._image,n,t)},_reset:function(){var e=this._image,t=new Ar(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();ui(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){os(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}});fL.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",t=this._image=e?this._url:zn("video");if(cn(t,"leaflet-image-layer"),this._zoomAnimated&&cn(t,"leaflet-zoom-animated"),this.options.className&&cn(t,this.options.className),t.onselectstart=Zr,t.onmousemove=Zr,t.onloadeddata=Cr(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),o=[],s=0;s<n.length;s++)o.push(n[s].src);this._url=n.length>0?o:[t.src];return}$s(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var g=zn("source");g.src=this._url[f],t.appendChild(g)}}});fL.extend({_initImage:function(){var e=this._image=this._url;cn(e,"leaflet-image-layer"),this._zoomAnimated&&cn(e,"leaflet-zoom-animated"),this.options.className&&cn(e,this.options.className),e.onselectstart=Zr,e.onmousemove=Zr}});var Ll=js.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof Kn||$s(e))?(this._latlng=Kt(e),Mr(this,t)):(Mr(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&os(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&os(this._container,1),this.bringToFront(),this.options.interactive&&(cn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(os(this._container,0),this._removeTimeout=setTimeout(Cr(kr,void 0,this._container),200)):kr(this._container),this.options.interactive&&(Gr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=Kt(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&b0(this._container),this},bringToBack:function(){return this._map&&x0(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Bf){t=null;var n=this._source._layers;for(var o in n)if(n[o]._map){t=n[o];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof t=="string")e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=Wt(this.options.offset),n=this._getAnchor();this._zoomAnimated?ui(this._container,e.add(n)):t=t.add(e).add(n);var o=this._containerBottom=-t.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=o+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}});kn.include({_initOverlay:function(e,t,n,o){var s=t;return s instanceof e||(s=new e(o).setContent(t)),n&&s.setLatLng(n),s}});js.include({_initOverlay:function(e,t,n,o){var s=n;return s instanceof e?(Mr(s,o),s._source=this):(s=t&&!o?t:new e(o,this),s.setContent(n)),s}});var dL=Ll.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Ll.prototype.openOn.call(this,e)},onAdd:function(e){Ll.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gf||this._source.on("preclick",mp))},onRemove:function(e){Ll.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gf||this._source.off("preclick",mp))},getEvents:function(){var e=Ll.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=zn("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=zn("div",e+"-content-wrapper",t);if(this._contentNode=zn("div",e+"-content",n),w2(t),nL(this._contentNode),an(t,"contextmenu",mp),this._tipContainer=zn("div",e+"-tip-container",t),this._tip=zn("div",e+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=zn("a",e+"-close-button",t);o.setAttribute("role","button"),o.setAttribute("aria-label","Close popup"),o.href="#close",o.innerHTML='<span aria-hidden="true">&#215;</span>',an(o,"click",function(s){Yi(s),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var o=e.offsetHeight,s=this.options.maxHeight,f="leaflet-popup-scrolled";s&&o>s?(t.height=s+"px",cn(e,f)):Gr(e,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();ui(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,t=parseInt(Rw(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,o=this._containerWidth,s=new rn(this._containerLeft,-n-this._containerBottom);s._add(kp(this._container));var f=e.layerPointToContainerPoint(s),g=Wt(this.options.autoPanPadding),w=Wt(this.options.autoPanPaddingTopLeft||g),y=Wt(this.options.autoPanPaddingBottomRight||g),E=e.getSize(),M=0,N=0;f.x+o+y.x>E.x&&(M=f.x+o-E.x+y.x),f.x-M-w.x<0&&(M=f.x-w.x),f.y+n+y.y>E.y&&(N=f.y+n-E.y+y.y),f.y-N-w.y<0&&(N=f.y-w.y),(M||N)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([M,N]))}},_getAnchor:function(){return Wt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});kn.mergeOptions({closePopupOnClick:!0});kn.include({openPopup:function(e,t,n){return this._initOverlay(dL,e,t,n).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}});js.include({bindPopup:function(e,t){return this._popup=this._initOverlay(dL,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Bf||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){Ap(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof Gf)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var hL=Ll.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Ll.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Ll.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Ll.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=zn("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Fn(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,o=this._map,s=this._container,f=o.latLngToContainerPoint(o.getCenter()),g=o.layerPointToContainerPoint(e),w=this.options.direction,y=s.offsetWidth,E=s.offsetHeight,M=Wt(this.options.offset),N=this._getAnchor();w==="top"?(t=y/2,n=E):w==="bottom"?(t=y/2,n=0):w==="center"?(t=y/2,n=E/2):w==="right"?(t=0,n=E/2):w==="left"?(t=y,n=E/2):g.x<f.x?(w="right",t=0,n=E/2):(w="left",t=y+(M.x+N.x)*2,n=E/2),e=e.subtract(Wt(t,n,!0)).add(M).add(N),Gr(s,"leaflet-tooltip-right"),Gr(s,"leaflet-tooltip-left"),Gr(s,"leaflet-tooltip-top"),Gr(s,"leaflet-tooltip-bottom"),cn(s,"leaflet-tooltip-"+w),ui(s,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&os(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return Wt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});kn.include({openTooltip:function(e,t,n){return this._initOverlay(hL,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}});js.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(hL,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Bf||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&(an(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),an(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var t=e.latlng,n,o;this._tooltip.options.sticky&&e.originalEvent&&(n=this._map.mouseEventToContainerPoint(e.originalEvent),o=this._map.containerPointToLayerPoint(n),t=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(t)}});Uw.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&e.tagName==="DIV"?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(JE(t),t.appendChild(n.html)):t.innerHTML=n.html!==!1?n.html:"",n.bgPos){var o=Wt(n.bgPos);t.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});Uw.Default=Wv;var Vv=js.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ot.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){Mr(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),kr(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(b0(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(x0(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=kU(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof rn?e:new rn(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,n=-e(-1/0,1/0),o=0,s=t.length,f;o<s;o++)f=t[o].style.zIndex,t[o]!==this._container&&f&&(n=e(n,+f));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ot.ielt9){os(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var o in this._tiles){var s=this._tiles[o];if(!(!s.current||!s.loaded)){var f=Math.min(1,(e-s.loaded)/200);os(s.el,f),f<1?t=!0:(s.active?n=!0:this._onOpaqueTile(s),s.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(ls(this._fadeFrame),this._fadeFrame=ea(this._updateOpacity,this))}},_onOpaqueTile:Zr,_initContainer:function(){this._container||(this._container=zn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(kr(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var o=this._levels[e],s=this._map;return o||(o=this._levels[e]={},o.el=zn("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=t,o.origin=s.project(s.unproject(s.getPixelOrigin()),e).round(),o.zoom=e,this._setZoomTransform(o,s.getCenter(),s.getZoom()),Zr(o.el.offsetWidth),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:Zr,_onRemoveLevel:Zr,_onCreateLevel:Zr,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var o=t.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)kr(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,o){var s=Math.floor(e/2),f=Math.floor(t/2),g=n-1,w=new rn(+s,+f);w.z=+g;var y=this._tileCoordsToKey(w),E=this._tiles[y];return E&&E.active?(E.retain=!0,!0):(E&&E.loaded&&(E.retain=!0),g>o?this._retainParent(s,f,g,o):!1)},_retainChildren:function(e,t,n,o){for(var s=2*e;s<2*e+2;s++)for(var f=2*t;f<2*t+2;f++){var g=new rn(s,f);g.z=n+1;var w=this._tileCoordsToKey(g),y=this._tiles[w];if(y&&y.active){y.retain=!0;continue}else y&&y.loaded&&(y.retain=!0);n+1<o&&this._retainChildren(s,f,n+1,o)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,o){var s=Math.round(t);this.options.maxZoom!==void 0&&s>this.options.maxZoom||this.options.minZoom!==void 0&&s<this.options.minZoom?s=void 0:s=this._clampZoom(s);var f=this.options.updateWhenZooming&&s!==this._tileZoom;(!o||f)&&(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),s!==void 0&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var o=this._map.getZoomScale(n,e.zoom),s=e.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(t,n)).round();Ot.any3d?Cp(e.el,s,o):ui(e.el,s)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),o=this._tileZoom,s=this._map.getPixelWorldBounds(this._tileZoom);s&&(this._globalTileRange=this._pxBoundsToTileRange(s)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],o).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],o).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],o).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],o).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),o=t.getZoomScale(n,this._tileZoom),s=t.project(e,this._tileZoom).floor(),f=t.getSize().divideBy(o*2);return new Ar(s.subtract(f),s.add(f))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var o=this._getTiledPixelBounds(e),s=this._pxBoundsToTileRange(o),f=s.getCenter(),g=[],w=this.options.keepBuffer,y=new Ar(s.getBottomLeft().subtract([w,-w]),s.getTopRight().add([w,-w]));if(!(isFinite(s.min.x)&&isFinite(s.min.y)&&isFinite(s.max.x)&&isFinite(s.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var E in this._tiles){var M=this._tiles[E].coords;(M.z!==this._tileZoom||!y.contains(new rn(M.x,M.y)))&&(this._tiles[E].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(e,n);return}for(var N=s.min.y;N<=s.max.y;N++)for(var R=s.min.x;R<=s.max.x;R++){var F=new rn(R,N);if(F.z=this._tileZoom,!!this._isValidTile(F)){var $=this._tiles[this._tileCoordsToKey(F)];$?$.current=!0:g.push(F)}}if(g.sort(function(X,Z){return X.distanceTo(f)-Z.distanceTo(f)}),g.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var V=document.createDocumentFragment();for(R=0;R<g.length;R++)this._addTile(g[R],V);this._level.el.appendChild(V)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(e);return Ur(this.options.bounds).overlaps(o)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),o=e.scaleBy(n),s=o.add(n),f=t.unproject(o,e.z),g=t.unproject(s,e.z);return[f,g]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new ta(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new rn(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(kr(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){cn(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=Zr,e.onmousemove=Zr,Ot.ielt9&&this.options.opacity<1&&os(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),o=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),Cr(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&ea(Cr(this._tileReady,this,e,null,s)),ui(s,n),this._tiles[o]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var o=this._tileCoordsToKey(e);n=this._tiles[o],n&&(n.loaded=+new Date,this._map._fadeAnimated?(os(n.el,0),ls(this._fadeFrame),this._fadeFrame=ea(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(cn(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ot.ielt9||!this._map._fadeAnimated?ea(this._pruneTiles,this):setTimeout(Cr(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new rn(this._wrapX?Ow(e.x,this._wrapX):e.x,this._wrapY?Ow(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new Ar(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),Zv=Vv.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=Mr(this,t),t.detectRetina&&Ot.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains=="string"&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return an(n,"load",Cr(this._tileOnLoad,this,t,n)),an(n,"error",Cr(this._tileOnError,this,t,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Ot.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=n),t["-y"]=n}return NU(this._url,sr(t,this.options))},_tileOnLoad:function(e,t){Ot.ielt9?setTimeout(Cr(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var o=this.options.errorTileUrl;o&&t.getAttribute("src")!==o&&(t.src=o),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,o=this.options.zoomOffset;return n&&(e=t-e),e+o},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=Zr,t.onerror=Zr,!t.complete)){t.src=IS;var n=this._tiles[e].coords;kr(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",IS),Vv.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(!(!this._map||n&&n.getAttribute("src")===IS))return Vv.prototype._tileReady.call(this,e,t,n)}});function Qy(e,t){return new Zv(e,t)}var pL=Zv.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var n=sr({},this.defaultWmsParams);for(var o in t)o in this.options||(n[o]=t[o]);t=Mr(this,t);var s=t.detectRetina&&Ot.retina?2:1,f=this.getTileSize();n.width=f.x*s,n.height=f.y*s,this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Zv.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,o=Jo(n.project(t[0]),n.project(t[1])),s=o.min,f=o.max,g=(this._wmsVersion>=1.3&&this._crs===lL?[s.y,s.x,f.y,f.x]:[s.x,s.y,f.x,f.y]).join(","),w=Zv.prototype.getTileUrl.call(this,e);return w+AU(this.wmsParams,w,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(e,t){return sr(this.wmsParams,e),t||this.redraw(),this}});function OF(e,t){return new pL(e,t)}Zv.WMS=pL;Qy.wms=OF;var Zu=js.extend({options:{padding:.1},initialize:function(e){Mr(this,e),Fn(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),cn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,t),f=o.multiplyBy(-n).add(s).subtract(this._map._getNewPixelOrigin(e,t));Ot.any3d?Cp(this._container,f,n):ui(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new Ar(n,n.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),RF=Zu.extend({options:{tolerance:0},getEvents:function(){var e=Zu.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zu.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");an(e,"mousemove",this._onMouseMove,this),an(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),an(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){ls(this._redrawRequest),delete this._ctx,kr(this._container),mr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var t in this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zu.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),o=Ot.retina?2:1;ui(t,e.min),t.width=o*n.x,t.height=o*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Ot.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Zu.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[Fn(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,o=t.prev;n?n.prev=o:this._drawLast=o,o?o.next=n:this._drawFirst=n,delete e._order,delete this._layers[Fn(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var t=e.options.dashArray.split(/[, ]+/),n=[],o,s;for(s=0;s<t.length;s++){if(o=Number(t[s]),isNaN(o))return;n.push(o)}e.options._dashArray=n}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||ea(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ar,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)e=o.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,o,s,f,g=e._parts,w=g.length,y=this._ctx;if(w){for(y.beginPath(),n=0;n<w;n++){for(o=0,s=g[n].length;o<s;o++)f=g[n][o],y[o?"lineTo":"moveTo"](f.x,f.y);t&&y.closePath()}this._fillStroke(y,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,n=this._ctx,o=Math.max(Math.round(e._radius),1),s=(Math.max(Math.round(e._radiusY),1)||o)/o;s!==1&&(n.save(),n.scale(1,s)),n.beginPath(),n.arc(t.x,t.y/s,o,0,Math.PI*2,!1),s!==1&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),n,o,s=this._drawFirst;s;s=s.next)n=s.layer,n.options.interactive&&n._containsPoint(t)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(n))&&(o=n);this._fireEvent(o?[o]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(Gr(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,o,s=this._drawFirst;s;s=s.next)n=s.layer,n.options.interactive&&n._containsPoint(t)&&(o=n);o!==this._hoveredLayer&&(this._handleMouseOut(e),o&&(cn(this._container,"leaflet-interactive"),this._fireEvent([o],e,"mouseover"),this._hoveredLayer=o)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(Cr(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,o=t.prev;if(n)n.prev=o;else return;o?o.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,o=t.prev;if(o)o.next=n;else return;n?n.prev=o:o&&(this._drawLast=o),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function DF(e){return Ot.canvas?new RF(e):null}var Mv=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),zF={_initContainer:function(){this._container=zn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zu.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Mv("shape");cn(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Mv("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[Fn(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;kr(t),e.removeInteractiveTarget(t),delete this._layers[Fn(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,o=e.options,s=e._container;s.stroked=!!o.stroke,s.filled=!!o.fill,o.stroke?(t||(t=e._stroke=Mv("stroke")),s.appendChild(t),t.weight=o.weight+"px",t.color=o.color,t.opacity=o.opacity,o.dashArray?t.dashStyle=$s(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=o.lineCap.replace("butt","flat"),t.joinstyle=o.lineJoin):t&&(s.removeChild(t),e._stroke=null),o.fill?(n||(n=e._fill=Mv("fill")),s.appendChild(n),n.color=o.fillColor||o.color,n.opacity=o.fillOpacity):n&&(s.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),o=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+o+" 0,"+65535*360)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){b0(e._container)},_bringToBack:function(e){x0(e._container)}},ew=Ot.vml?Mv:L6,S2=Zu.extend({_initContainer:function(){this._container=ew("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ew("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){kr(this._container),mr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zu.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),ui(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=ew("path");e.options.className&&cn(t,e.options.className),e.options.interactive&&cn(t,"leaflet-interactive"),this._updateStyle(e),this._layers[Fn(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){kr(e._path),e.removeInteractiveTarget(e._path),delete this._layers[Fn(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,P6(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),o=Math.max(Math.round(e._radiusY),1)||n,s="a"+n+","+o+" 0 1,0 ",f=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+s+n*2+",0 "+s+-n*2+",0 ";this._setPath(e,f)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){b0(e._path)},_bringToBack:function(e){x0(e._path)}});Ot.vml&&S2.include(zF);function mL(e){return Ot.svg||Ot.vml?new S2(e):null}kn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&DF(e)||mL(e)}});Fw.extend({initialize:function(e,t){Fw.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=Ur(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});S2.create=ew;S2.pointsToPath=P6;Qf.geometryToLayer=Bw;Qf.coordsToLatLng=CC;Qf.coordsToLatLngs=$w;Qf.latLngToCoords=kC;Qf.latLngsToCoords=b2;Qf.getFeature=Mp;Qf.asFeature=x2;kn.mergeOptions({boxZoom:!0});var gL=jl.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){an(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){mr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){kr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Dw(),X6(),this._startPoint=this._map.mouseEventToContainerPoint(e),an(document,{contextmenu:Ap,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=zn("div","leaflet-zoom-box",this._container),cn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new Ar(this._point,this._startPoint),n=t.getSize();ui(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(kr(this._box),Gr(this._container,"leaflet-crosshair")),zw(),Q6(),mr(document,{contextmenu:Ap,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Cr(this._resetState,this),0);var t=new ta(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});kn.addInitHook("addHandler","boxZoom",gL);kn.mergeOptions({doubleClickZoom:!0});var vL=jl.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),o=t.options.zoomDelta,s=e.originalEvent.shiftKey?n-o:n+o;t.options.doubleClickZoom==="center"?t.setZoom(s):t.setZoomAround(e.containerPoint,s)}});kn.addInitHook("addHandler","doubleClickZoom",vL);kn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _L=jl.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Lf(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}cn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Gr(this._map._container,"leaflet-grab"),Gr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=Ur(this._map.options.maxBounds);this._offsetLimit=Jo(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,o=this._draggable._newPos.x,s=(o-t+n)%e+t-n,f=(o+t+n)%e-t-n,g=Math.abs(s+n)<Math.abs(f+n)?s:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(e){var t=this._map,n=t.options,o=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),o)t.fire("moveend");else{this._prunePositions(+new Date);var s=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,g=n.easeLinearity,w=s.multiplyBy(g/f),y=w.distanceTo([0,0]),E=Math.min(n.inertiaMaxSpeed,y),M=w.multiplyBy(E/y),N=E/(n.inertiaDeceleration*g),R=M.multiplyBy(-N/2).round();!R.x&&!R.y?t.fire("moveend"):(R=t._limitOffset(R,t.options.maxBounds),ea(function(){t.panBy(R,{duration:N,easeLinearity:g,noMoveStart:!0,animate:!0})}))}}});kn.addInitHook("addHandler","dragging",_L);kn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yL=jl.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),an(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),mr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,o=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(o,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},n=this.keyCodes,o,s;for(o=0,s=n.left.length;o<s;o++)t[n.left[o]]=[-1*e,0];for(o=0,s=n.right.length;o<s;o++)t[n.right[o]]=[e,0];for(o=0,s=n.down.length;o<s;o++)t[n.down[o]]=[0,e];for(o=0,s=n.up.length;o<s;o++)t[n.up[o]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},n=this.keyCodes,o,s;for(o=0,s=n.zoomIn.length;o<s;o++)t[n.zoomIn[o]]=e;for(o=0,s=n.zoomOut.length;o<s;o++)t[n.zoomOut[o]]=-e},_addHooks:function(){an(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){mr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,n=this._map,o;if(t in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(o=this._panKeys[t],e.shiftKey&&(o=Wt(o).multiplyBy(3)),n.options.maxBounds&&(o=n._limitOffset(Wt(o),n.options.maxBounds)),n.options.worldCopyJump){var s=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(o)));n.panTo(s)}else n.panBy(o)}else if(t in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;Ap(e)}}});kn.addInitHook("addHandler","keyboard",yL);kn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wL=jl.extend({addHooks:function(){an(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){mr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=mF(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(Cr(this._performZoom,this),o),Ap(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var o=this._delta/(this._map.options.wheelPxPerZoomLevel*4),s=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,f=n?Math.ceil(s/n)*n:s,g=e._limitZoom(t+(this._delta>0?f:-f))-t;this._delta=0,this._startTime=null,g&&(e.options.scrollWheelZoom==="center"?e.setZoom(t+g):e.setZoomAround(this._lastMousePos,t+g))}});kn.addInitHook("addHandler","scrollWheelZoom",wL);var UF=600;kn.mergeOptions({tapHold:Ot.touchNative&&Ot.safari&&Ot.mobile,tapTolerance:15});var bL=jl.extend({addHooks:function(){an(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){mr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new rn(t.clientX,t.clientY),this._holdTimeout=setTimeout(Cr(function(){this._cancel(),this._isTapValid()&&(an(document,"touchend",Yi),an(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),UF),an(document,"touchend touchcancel contextmenu",this._cancel,this),an(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){mr(document,"touchend",Yi),mr(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),mr(document,"touchend touchcancel contextmenu",this._cancel,this),mr(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new rn(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});kn.addInitHook("addHandler","tapHold",bL);kn.mergeOptions({touchZoom:Ot.touch,bounceAtZoomLimits:!0});var xL=jl.extend({addHooks:function(){cn(this._map._container,"leaflet-touch-zoom"),an(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Gr(this._map._container,"leaflet-touch-zoom"),mr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var n=t.mouseEventToContainerPoint(e.touches[0]),o=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!=="center"&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(o)._divideBy(2))),this._startDist=n.distanceTo(o),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),an(document,"touchmove",this._onTouchMove,this),an(document,"touchend touchcancel",this._onTouchEnd,this),Yi(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),o=t.mouseEventToContainerPoint(e.touches[1]),s=n.distanceTo(o)/this._startDist;if(this._zoom=t.getScaleZoom(s,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&s<1||this._zoom>t.getMaxZoom()&&s>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom==="center"){if(this._center=this._startLatLng,s===1)return}else{var f=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(s===1&&f.x===0&&f.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),ls(this._animRequest);var g=Cr(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ea(g,this,!0),Yi(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ls(this._animRequest),mr(document,"touchmove",this._onTouchMove,this),mr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});kn.addInitHook("addHandler","touchZoom",xL);kn.BoxZoom=gL;kn.DoubleClickZoom=vL;kn.Drag=_L;kn.Keyboard=yL;kn.ScrollWheelZoom=wL;kn.TapHold=bL;kn.TouchZoom=xL;const ze={TOPOLOGY_UPDATED:"topology updated",OPTIONS_UPDATED:"options updated",TRAFFIC_UPDATED:"traffic updated",TOPOLOGY_LOAD_SUCCESS:"topology load success",TOPOLOGY_LOAD_FAILURE:"topology load failure",LAYER_LOAD_SUCCESS:"layer load success",LAYER_LOAD_FAILURE:"layer load failure",NODE_CREATED:"node created",NODE_UPDATED:"node updated",NODE_DELETED:"node deleted",NODE_SELECTED:"node selected",EDGE_CREATED:"edge created",EDGE_UPDATED:"edge updated",EDGE_DELETED:"edge deleted",EDGE_SELECTED:"edge selected",DESELECTED:"deselected",MAP_DESTROYED:"map destroyed",MAP_CREATED:"map created",SCROLLING_TOGGLED:"scrolling toggled",SELECTION_SET:"selection set",SELECTION_CLEARED:"selection cleared",VARIABLES_SET:"variables set",EDITING_SET:"editing set",LAYER_TOGGLED:"layer toggled",DRAG_STARTED:"drag started",DRAG_ENDED:"drag ended",EDGE_SNAP:"edge snap",TOOLTIP_VISIBLE:"tooltip visible",TOOLTIP_HIDDEN:"tooltip hidden",REQUEST_MAP_CENTER_AND_ZOOM:"request map center and zoom",RETURN_MAP_CENTER_AND_ZOOM:"return map center and zoom",REQUEST_VIEWPORT:"request viewport",RETURN_VIEWPORT:"return viewport",private:{EDIT_NODE_DIALOG_VISIBLE:"edit node dialog visible",EDIT_EDGE_DIALOG_VISIBLE:"edge edge dialog visible",EDIT_SELECTION_SET:"edit selection set",EDIT_EDGE_TOGGLED:"edit edge toggled",EDIT_NODE_TOGGLED:"edit node toggled",EDIT_MODE_SET:"edit mode set",DRAG_STARTED:"drag started"}},KA=S6,Rn=window.d3||T6;function JA(e,t,n,o){if(e)for(var s="http://www.w3.org/2000/svg",f=12,g=0;g<Math.floor(e.getTotalLength()/f);g++){e.getAttribute("d");var w=o*1.2,y=document.createElementNS(s,"g");y.setAttributeNS(null,"class",t);var E=document.createElementNS(s,"polygon");E.setAttributeNS(null,"points",`
        ${f/5*3-w/3*2},${w}
        -${w/3*2},${w}
        0,0
        -${w/3*2},-${w}
        ${f/5*3-w/3*2},-${w}
        ${f/5*3},0`),E.setAttributeNS(null,"fill",n);var M=g*f,N=(g+1)*f>e.getTotalLength()?e.getTotalLength():(g+1)*f,R=e.getPointAtLength(M),F=e.getPointAtLength(N),$={dx:F.x-R.x,dy:F.y-R.y},V=Math.atan2($.dy,$.dx),X=V*(180/Math.PI);y.setAttributeNS(null,"transform",`translate(${R.x} ${R.y}) rotate(${X})`),y.appendChild(E),e.parentElement.insertBefore(y,e)}}function Ui(e){const t="S_S_E_E_P_P_A_A_R_R_A_A_T_T_O_O_R_R";var n=e.replaceAll("--",t);return n=n.replaceAll(/[ \-\/\\]+/g,"-"),n=n.replaceAll(/[^\w-]/g,""),n=n.replaceAll(t,"--"),n}function FF(e,t,n,o){n.div;const s=n.mapCanvas.options.layers[o].edgeWidth,f=n.mapCanvas.options.layers[o].endpointId,g=n.mapCanvas.options.layers[o].color;var w=e.selectAll("path.edge-az").data(t.edges);const y=(F,$)=>{var V=Rn.select(F.target);const X=V.classed("edge-az");var Z=$.azColor?$.azColor:g;X||(Z=$.zaColor?$.zaColor:g),V.classed("animated-edge")||(JA(F.target,"dash-over",Z,s),V.classed("animated-edge",!0)),n.mapCanvas.hideTooltip();var D=n.mapCanvas.options.enableCustomEdgeTooltip?n.mapCanvas.options.customEdgeTooltip:TU;const z={from:$.nodeA,to:$.nodeZ,dataPoint:$.azDisplayValue},H={from:$.nodeZ,to:$.nodeA,dataPoint:$.zaDisplayValue};var he=m2(D,{forward:X?z:H,reverse:X?H:z});n.mapCanvas.showTooltip(F,he)},E=(F,$)=>{n.mapCanvas.hideTooltip();const V=Rn.select(F.target);var X=$.azColor?$.azColor:g;V.classed("edge-za")&&(X=$.zaColor?$.zaColor:g),V.attr("stroke",X);for(var Z=document.querySelectorAll(".dash-over"),D=0;D<Z.length;D++)Z[D].remove();V.classed("selected")||V.classed("animated-edge",!1)};w.enter().append("path").merge(w).attr("d",function(F){return F.azPath.indexOf("NaN")>-1?null:F.azPath}).attr("stroke",function(F){return F.azColor?F.azColor:g}).attr("stroke-width",s).attr("class",function(F){var $=Ui(F.name),V=" cnxn-"+$.split("--").join(" cnxn-"),X=" l"+o;return"edge edge-az edge-az-"+$+V+X}).attr("text",function(F){return F.AZname}).attr("pointer-events","stroke").on("mousedown",function(F,$){F.stopPropagation(),n.mapCanvas.clearSelection();const V={selection:$,event:F,layer:o,type:"edge",instance:n.mapCanvas.id};n.mapCanvas.emit(ze.VARIABLES_SET,$),n.mapCanvas.setSelection(V),KA.global.publish(ze.SELECTION_SET,V)}).on("mouseover",y).on("mouseout",E),w.exit().remove();var M=e.selectAll("path.edge-za").data(t.edges);M.enter().append("path").merge(M).attr("d",function(F){return F.zaPath.indexOf("NaN")>-1?null:F.zaPath}).attr("stroke",function(F){return F.zaColor?F.zaColor:g}).attr("stroke-width",s).attr("class",function(F){var Z,D,z;var $=Ui(F.name),V=" cnxn-"+$.split("--").join(" cnxn-");(D=(Z=F.meta)==null?void 0:Z.endpoint_identifiers)!=null&&D[f]&&((z=F.meta.endpoint_identifiers[f])!=null&&z.length)&&(V+=" cnxn-"+F.meta.endpoint_identifiers[f].join(" cnxn-"));var X=" l"+o;return"edge edge-za edge-za-"+$+V+X}).attr("text",function(F){return F.ZAname}).attr("pointer-events","stroke").on("mousedown",function(F,$){F.stopPropagation(),n.mapCanvas.clearSelection();const V={selection:$,event:F,layer:o,type:"edge"};n.mapCanvas.emit(ze.VARIABLES_SET,$),n.mapCanvas.setSelection(V),KA.global.publish(ze.SELECTION_SET,V)}).on("mouseover",y).on("mouseout",E),M.exit().remove();function N(F){return $=>{if(!(!$||$.type!="edge"||$.layer!=o)){for(var V=document.querySelectorAll(".dash-selected, .dash-over"),X=0;X<V.length;X++)V[X].remove();Rn.selectAll(".selected").classed("selected",!1).classed("animated-edge",!1);var Z=Ui($.selection.name),D="map-"+n.mapCanvas.instanceId,z={az:{selector:`#${D} .l${$.layer}.edge-az-${Z}`,color:$.selection.azColor},za:{selector:`#${D} .l${$.layer}.edge-za-${Z}`,color:$.selection.zaColor}};Object.keys(z).forEach(H=>{var se=g,he=z[H].color,pe=z[H].selector;he&&(se=he);var ge=Rn.select(pe);JA(ge.node(),"dash-selected",se,s),ge.classed("selected",!0).classed("animated-edge",!0)})}}}n.mapCanvas.listen(ze.SELECTION_SET,N());var R=n.mapCanvas.lastValue(ze.SELECTION_SET);N()(R)}function BF(e,t,n,o,s){for(var f=0;f<n.coordinates.length;f++)if(n.coordinates[f]==t){var g=JSON.parse(JSON.stringify(n));n.coordinates.splice(f,1),o.mapCanvas.emit(ze.EDGE_UPDATED,{layer:s,edge:n,oldEdge:g}),o.mapCanvas.setTopology(o.data),o.mapCanvas.render();break}}function $F(e,t,n,o){var s=n.leafletMap.getContainer(),f=n.leafletMap.containerPointToLatLng(Wt(Rn.pointer(e,s))),g=JSON.parse(JSON.stringify(t.__data__)),w=t.__data__.coordinates,y=[f.lat,f.lng],E=0,M=0,N=0,R=1e3;for(E=0;E<w.length-1;E++){var F=Math.abs(Math.atan((w[E][1]-y[1])/(w[E][0]-y[0]))),$=Math.abs(Math.atan((w[E][1]-w[E+1][1])/(w[E][0]-w[E+1][0]))),V=Math.abs(F-$);V<.1&&V<R&&(R=V,M=E+1,N=1)}if(N==1){var X=w.slice(0,M);X.push(y),w=X.concat(w.slice(M)),t.__data__.coordinates=w,n.update(),n.mapCanvas.emit(ze.EDGE_UPDATED,{layer:o,edge:t.__data__,oldEdge:g}),n.mapCanvas.emit(ze.TOPOLOGY_UPDATED,JSON.parse(JSON.stringify(n.mapCanvas.topology)))}}function XA(e,t,n,o){var E,M;let s="map-"+n.instanceId;n.options.multiLayerNodeSnap||`${t}`;let f=n.lastValue(ze.private.DRAG_STARTED);e.coordinate[0],e.coordinate[1];let g=".node-child-of-"+Ui(e.name),w=`#${s} ${g}`,y=[e.coordinate[0]-((E=f==null?void 0:f.node)==null?void 0:E.coordinate[0]),e.coordinate[1]-((M=f==null?void 0:f.node)==null?void 0:M.coordinate[1])];Rn.selectAll(w).attr("d",function(N){let R=null;o&&(R=JSON.parse(JSON.stringify(N))),f&&(N.coordinate[0]+=y[0],N.coordinate[1]+=y[1],jw(N,t,n,o)),o&&n.emit(ze.NODE_UPDATED,{layer:t,node:N,oldNode:R})})}function jw(e,t,n,o){var s="map-"+n.instanceId,f=n.options.multiLayerNodeSnap?"":`.l${t}`,g={};g.lat=e.coordinate[0],g.lng=e.coordinate[1];var w=`#${s} ${f}.cnxn-${Ui(e.name)}`;Rn.selectAll(w).attr("d",function(y){var E=null;o&&(E=JSON.parse(JSON.stringify(y)));var M=0,N=1,R=y.coordinates.length-1;y.nodeZ==e.name&&(M=y.coordinates.length-1,N=-1,R=0),y.coordinates[M][0]=g.lat,y.coordinates[M][1]=g.lng;for(var F=y.coordinates.length-1,$=(g.lat-y.coordinates[R][0])/F,V=(g.lng-y.coordinates[R][1])/F,X=M+N;X!=R;X+=N)R>0?(y.coordinates[X][0]=g.lat-$*X,y.coordinates[X][1]=g.lng-V*X):(y.coordinates[X][0]=y.coordinates[R][0]+$*X,y.coordinates[X][1]=y.coordinates[R][1]+V*X);o&&n.emit(ze.EDGE_UPDATED,{layer:t,edge:y,oldEdge:E})})}function jF(e,t,n,o){var s=e.selectAll("circle").data(t.nodes);const f=y=>{if(y&&y.type=="nodes"){Rn.selectAll(".control-selected").classed("control-selected",!1);var E=`.controlPoint.control-point-layer${y.layer}.control-point-for-node-${Ui(y.object.name)}`;Rn.select(E).classed("control-selected",!0)}};function g(y,E){var M=n.leafletMap.getContainer();n.mapCanvas.emit(ze.private.DRAG_STARTED,{event:y,node:JSON.parse(JSON.stringify(E))});var N=n.leafletMap.containerPointToLatLng(Wt(Rn.pointer(y,M)));E.coordinate[0]=N.lat,E.coordinate[1]=N.lng,jw(E,o,n.mapCanvas,!1),XA(E,o,n.mapCanvas,!1),n.update(),f(n.mapCanvas.lastValue(ze.private.EDIT_SELECTION_SET))}function w(y,E){if(n.mapCanvas.lastValue(ze.private.DRAG_STARTED)){var M=n.mapCanvas.lastValue(ze.private.DRAG_STARTED);jw(E,o,n.mapCanvas,!0),XA(E,o,n.mapCanvas,!0),n.update(),n.mapCanvas.emit(ze.NODE_UPDATED,{layer:o,node:E,oldNode:M.node}),n.mapCanvas.clearLast(ze.private.DRAG_STARTED),n.mapCanvas.setTopology([...n.data]),Rn.select(`.control-point-layer${o}.control-point-for-node-${Ui(E.name)}`).classed("control-selected",!0)}}s.enter().append("circle").attr("r",6).attr("class",function(y){return`control controlPoint control-point-layer${o} control-point-for-node-${Ui(y.name)}`}).attr("data-layer",o).attr("data-index",function(y,E){return E}).merge(s).on("dblclick",function(y,E){E.layer=o;var M=0,N=null;y.currentTarget.parentElement.childNodes.forEach(function(R){R==y.currentTarget&&(N=M),M++}),n.mapCanvas.showEditNodeDialog(E,N,E.layer)}).on("mouseover",function(y,E){let M;const N=n.mapCanvas.options.enableCustomNodeTooltip?n.mapCanvas.options.customNodeTooltip:C6;M=m2(N,{...E,self:E}),n.mapCanvas.showTooltip(y,M)}).on("mouseleave",function(){n.mapCanvas.hideTooltip()}).on("mouseenter",function(){n.mapCanvas.options.enableScrolling&&n.leafletMap.dragging.disable()}).on("mouseout",function(){n.mapCanvas.options.enableScrolling&&n.leafletMap.dragging.enable()}).on("mousedown",function(y,E){y.stopPropagation(),n.mapCanvas.emit(ze.private.EDIT_SELECTION_SET,{object:E,index:Number(y.target.getAttribute("data-index")),layer:Number(y.target.getAttribute("data-layer")),type:"nodes"})}).call(Rn.drag().on("drag",g).on("end",w)),f(n.mapCanvas.lastValue(ze.private.EDIT_SELECTION_SET)),n.mapCanvas.listen(ze.private.EDIT_SELECTION_SET,f),e.selectAll("circle").attr("transform",function(y){var E=Kt(y.coordinate),M=n.leafletMap.latLngToLayerPoint(E);return"translate("+M.x+","+M.y+")"}),s.exit().remove()}function HF(e,t,n,o){var s=e.selectAll("path").data(t.edges);s.enter().append("path").merge(s).attr("d",function(y){return y.controlPointPath}).attr("data-layer",o).attr("data-index",function(y,E){return E}).attr("class",function(y){var E=Ui(y.name),M=" control-for-"+E.split("--").join(" control-for-"),N=" l"+o;return"control controlEdge edge-az-"+E+M+N}).on("dblclick",function(y){$F(y,this,n,o)}).on("mousedown",function(y,E){y.stopPropagation();var M=Number(y.target.getAttribute("data-index")),N=Number(y.target.getAttribute("data-layer"));let R={object:E,type:"edges",index:M,layer:N};n.mapCanvas.emit(ze.private.EDIT_SELECTION_SET,R)}).on("mouseenter",function(){n.mapCanvas.options.enableScrolling&&n.leafletMap.dragging.disable()}).on("mouseout",function(){n.mapCanvas.options.enableScrolling&&n.leafletMap.dragging.enable()});const f=y=>{y&&y.type=="edges"&&(Rn.selectAll(".control-selected").classed("control-selected",!1),Rn.select(`.controlEdge.l${y.layer}.edge-az-${Ui(y.object.name)}`).classed("control-selected",!0))};f(n.mapCanvas.lastValue(ze.private.EDIT_SELECTION_SET)),n.mapCanvas.listen(ze.private.EDIT_SELECTION_SET,f),s.exit().remove(),e.selectAll("g").remove();function g(y,E,M,N,R){n.mapCanvas.emit(ze.private.DRAG_STARTED,{event:y,edge:{...M}}),n.mapCanvas.emit(ze.private.EDIT_SELECTION_SET,{object:M,type:"edges",index:N,layer:R});var F=n.leafletMap.getContainer(),$=n.leafletMap.containerPointToLatLng(Wt(Rn.pointer(y,F)));E[0]=$.lat,E[1]=$.lng,n.update(),Rn.select(`.controlEdge.l${R}.edge-az-${Ui(M.name)}`).classed("control-selected",!0)}function w(y,E){if(n.mapCanvas.lastValue(ze.private.DRAG_STARTED)){var M=n.mapCanvas.lastValue(ze.private.DRAG_STARTED);n.mapCanvas.clearLast(ze.private.DRAG_STARTED),n.leafletMap.getZoom(),Kt(n.leafletMap.getCenter()),n.mapCanvas.emit(ze.EDGE_UPDATED,{layer:o,edge:E,oldEdge:M.edge}),n.mapCanvas.setTopology([...n.data]),Rn.select(`.controlEdge.l${o}.edge-az-${Ui(E.name)}`).classed("control-selected",!0)}}t.edges.forEach(function(y,E){var M=e.append("g"),N=M.selectAll("circle").data(y.coordinates);N.enter().append("circle").attr("r",4).attr("class",function(R){return"control controlPoint control-point-for-edge-"+Ui(y.name)}).merge(N).on("mousedown",function(R,F){R.stopPropagation();let $={object:y,index:E,layer:o,type:"edges"};n.mapCanvas.emit(ze.private.EDIT_SELECTION_SET,$)}).call(Rn.drag().on("drag",function(R,F){g(R,F,y,E,o)}).on("end",function(R,F){w(R,y)})),M.selectAll("circle").attr("transform",function(R){var F=Kt(R),$=n.leafletMap.latLngToLayerPoint(F);return"translate("+$.x+","+$.y+")"}).on("mouseenter",function(){n.mapCanvas.options.enableScrolling&&n.leafletMap.dragging.disable()}).on("mouseout",function(){n.mapCanvas.options.enableScrolling&&n.leafletMap.dragging.enable()}).on("dblclick",function(R,F){BF(R,F,y,n,o)}),N.exit().remove()})}function WF(e,t,n,o){const s=n.mapCanvas.options.layers[o].color;var f=e.selectAll("g.node").data(t.nodes);n.div,f.enter().append("g").attr("class",function(y){var R;var E=(R=y.parents)==null?void 0:R.map(F=>"node-child-of-"+Ui(F)).join(" "),M=Ui(y.name),N=` l${o}`;return`node node-${M} ${N} ${E}`}).attr("stroke-width",.25).attr("stroke","black").append("g").attr("class","scale-container").attr("transform","scale(1.0, 1.0)").html(function(y){var E=`<circle r='${n.mapCanvas.options.layers[o].nodeWidth}' />`;return y.meta.svg||E}).attr("text",function(y){return y.name}).attr("fill",function(y){return y.color?y.color:s}).on("mouseover",function(y,E){Rn.select(y.target.parentElement).attr("transform","scale(1.5, 1.5)");const M=n.mapCanvas.options.enableCustomNodeTooltip?n.mapCanvas.options.customNodeTooltip:C6;let N=m2(M,{...E,self:E});n.mapCanvas.showTooltip(y,N)}).on("mouseout",function(y,E){Rn.select(y.target.parentElement).attr("transform","scale(1.0, 1.0)"),n.mapCanvas.hideTooltip()}).on("mousedown",function(y,E){n.mapCanvas.clearSelection();const M={selection:E,event:y,layer:o,type:"node"};n.mapCanvas.setSelection(M),n.mapCanvas.emit(ze.VARIABLES_SET,M)}).select(function(y){return this.childNodes[0]}).attr("height",function(y){return n.mapCanvas.options.layers[o].nodeWidth*2}).attr("width",function(y){return n.mapCanvas.options.layers[o].nodeWidth*2}).attr("x",function(y){return n.mapCanvas.options.layers[o].nodeWidth*-1}).attr("y",function(y){return n.mapCanvas.options.layers[o].nodeWidth*-1});function g(y){y&&y.type=="node"&&(Rn.selectAll(".selected").classed("selected",!1).classed("animated-node",!1),Rn.select(`.l${y.layer}.node-${Ui(y.selection.name)} .scale-container`).classed("selected",!0).classed("animated-node",!0))}n.mapCanvas.listen(ze.SELECTION_SET,g);var w=n.mapCanvas.lastValue(ze.SELECTION_SET,n.svg.node());g(w),e.selectAll("g.node").attr("transform",function(y){var E=Kt(y.coordinate),M=n.leafletMap.latLngToLayerPoint(E);return"translate("+M.x+","+M.y+")"}),f.exit().remove()}const VF=10;function SL(e,t,n){if(n>VF)throw new Error("Maximum depth exceeeded");if(parent=t[e],!parent)return[];let o=parent;return n++,o=SL(parent[0],t,n).concat(o),o}function EL(e,t,n){var s;let o=(s=e[t])==null?void 0:s.children;if(o&&o.length>0){let f=o.map(w=>EL(e,w,n+1));return Math.max.apply(Math,f)}return n}function ZF(e){let t={},n={};return e.forEach(o=>{o.children&&o.children.forEach(s=>{t[s]?t[s]=t[s].concat([o.name]):t[s]=[o.name]}),o.sort=0,n[o.name]=o}),e.forEach(o=>{try{o.parents=SL(o.name,t)}catch{throw new Error(`Error while tracing Parents for Node ${o.name}. A Node can't be its own parent or its parent's parent. Children were: [${o.children}]. Please check them for loops.`)}o.sort=EL(n,o.name,0)*2}),e.sort((o,s)=>{if(o.sort<s.sort)return 1;if(o.sort==s.sort)return 0;if(o.sort>s.sort)return-1}),e}function qF(e,t,n){let o={};return t.forEach(s=>{o[s.name]=s}),e.forEach(s=>{var w,y,E,M,N;let f=[500];(y=(w=s==null?void 0:s.meta)==null?void 0:w.endpoint_identifiers)!=null&&y[n]&&(f=(N=(M=(E=s==null?void 0:s.meta)==null?void 0:E.endpoint_identifiers)==null?void 0:M[n])==null?void 0:N.map(R=>{var F;return((F=o[R])==null?void 0:F.sort)||0}));let g=Math.max.apply(Math,f);s.sort=g+1}),e.sort((s,f)=>{if(s.sort<f.sort)return 1;if(s.sort==f.sort)return 0;if(s.sort>f.sort)return-1}),e}function GF(e,t){let n=ZF(e.nodes);qF(e.edges,n,t)}function QA(e,t,n,o){var s=Math.atan2(o[1]-n[1],o[0]-n[0]);return[t[0]+Math.sin(s)*e,t[1]+-Math.cos(s)*e]}function e5(e,t,n,o){var s=o-t,f=n-e,g=Math.atan2(s,f);return g*=180/Math.PI,g}function YF(e,t,n){var o=e5(...t,...e),s=e5(...t,...n),f=o-s;let g=o-f*.5;return o>s&&(g+=180),g}function KF(e,t,n,o,s,f=!1){if(s==0)return[parseFloat(n),parseFloat(o)];if(f)var g=Math.PI/180*s;else var g=Math.PI/-180*s;var w=Math.cos(g),y=Math.sin(g),E=w*(n-e)+y*(o-t)+e,M=w*(o-t)-y*(n-e)+t;return[E,M]}function t5(e,t){var n=e.slice();let o=0;for(n[0]=QA(t,n[0],n[0],n[1]),o=n.length-1,n[o]=QA(-t,n[o],n[o],n[o-1]),o=1;o<n.length-1;o++){var s=YF(n[o-1],n[o],n[o+1]);n[o]=KF(...n[o],n[o][0]+t,n[o][1],s)}return n}class JF{constructor(t,n,o,s){var w,y,E,M;this.mapCanvas=t,this.leafletMap=this.mapCanvas.getCurrentLeafletMap(),this.svg=n,this.data=[],this.mapLayers=[],this.curves=[],this.lineGen=Rn.line().curve(s),this.editEdges=(y=(w=this.mapCanvas)==null?void 0:w.editingInterface)==null?void 0:y.editEdgeMode,this.editNodes=(M=(E=this.mapCanvas)==null?void 0:E.editingInterface)==null?void 0:M.editNodeMode,this.div=o,this.lastInteractedObject=null,this.lastInteractedType=null,this.showTooltipSubscription=null,this.update=this.update.bind(this),this.mapCanvas.listen(ze.EDGE_SNAP,N=>{jw(N.node,N.layer,this.mapCanvas,!1)}),this.mapCanvas.options.showSidebar||(this.mapCanvas.listen(ze.TOOLTIP_VISIBLE,N=>{if(!this.mapCanvas.options.showSidebar){var R="#map-"+t.instanceId,F=t.getBoundingClientRect(),$=N.event.clientY-F.top,V=N.event.clientX-F.left;document.querySelectorAll(".tooltip-hover").forEach(se=>{se.remove()});var X=document.createElement("div");X.setAttribute("id","tooltip-hover"),X.setAttribute("class","tight-form-func tooltip-hover"),X.innerHTML=N.text,t.querySelector(R).appendChild(X);var Z=X.getBoundingClientRect(),D="left";V+Z.right>F.right&&(D="right",V=F.right-N.event.clientX);var z="top";$+Z.bottom>F.bottom&&(z="bottom",$=F.bottom-N.event.clientY);var H=`${z}:${$}px; ${D}:${V}px;`;X.setAttribute("style",H)}}),this.mapCanvas.listen(ze.TOOLTIP_HIDDEN,function(){var N=document.querySelectorAll("#tooltip-hover");N.forEach(R=>{R.remove()})})),this.leafletMap.on("moveend",()=>{this.update()}),this.leafletMap.on("viewreset",()=>{this.update()});function f(){for(var N=document.querySelectorAll(".dash-selected, .dash-over"),R=0;R<N.length;R++)N[R].remove();Rn.selectAll(".selected").classed("selected",!1),Rn.selectAll(".animated-edge").classed("animated-edge",!1),Rn.selectAll(".animated-node").classed("animated-node",!1)}this.mapCanvas.listen(ze.SELECTION_CLEARED,f);const g=(N,R)=>{if(!(this.lastInteractedType===null||this.lastInteractedObject===null)&&this.lastInteractedType==="nodes"){var F=0;N=="longitude"&&(F=1),this.lastInteractedObject.coordinate[F]+=R;let $=this.lastInteractedObject.coordinate;Rn.selectAll(".cnxn-"+Ui(this.lastInteractedObject.name)).attr("d",function(V){var X=0;V.nodeZ===this.lastInteractedObject.name&&(X=V.coordinates.length-1),V.coordinates[X]=$}),this.update()}};Rn.select("body").on("keydown",(N,R)=>{switch(N.key){case"ArrowLeft":g("longitude",-.05);break;case"ArrowRight":g("longitude",.05);break;case"ArrowUp":g("latitude",.05);break;case"ArrowDown":g("latitude",-.05);break}})}destroy(){this.mapLayers.forEach(t=>{t.select("g.topology").remove()})}editEdgeMode(t){return t==null?this.editEdges:(t>0?(this.editEdges=1,this.editNodes=0):this.editEdges=0,this.update(),this.editEdges)}editNodeMode(t){return t==null?this.editNodes:(t>0?(this.editNodes=1,this.editEdges=0):this.editNodes=0,this.update(),this.editNodes)}updateCoordinates(t,n){var o=this,s=[];t.edges.forEach(function(f){var g=0;if(f.points=[],f.rejected=0,typeof f.coordinates>"u"||f.coordinates===null){f.rejected=1;return}if(f.coordinates.forEach(function(w){if(!Array.isArray(w)){g=1;return}var y=Kt(w),E=o.leafletMap.latLngToLayerPoint(y);f.points.push([E.x,E.y])}),f.points.length<2&&(g=1),g){t.edges.indexOf(f),f.rejected=1;return}s.push(f),f.controlPointPath=Rn.line()(f.points),f.azPath=o.curves[n](t5(f.points,o.mapCanvas.options.layers[n].pathOffset)),f.zaPath=o.curves[n](t5(f.points.reverse(),o.mapCanvas.options.layers[n].pathOffset))}),t.edges=s}update(){var n,o,s,f;this.mapCanvas.options.enableScrolling&&this.leafletMap.dragging.enable(),this.editEdges=(o=(n=this.mapCanvas)==null?void 0:n.editingInterface)==null?void 0:o.edgeEditMode,this.editNodes=(f=(s=this.mapCanvas)==null?void 0:s.editingInterface)==null?void 0:f.nodeEditMode;var t=0;this.data.forEach(g=>{this.updateCoordinates(g,t),t++});var t=0;this.mapLayers.forEach(g=>{var N,R,F,$,V,X;if(!((F=(R=(N=this==null?void 0:this.mapCanvas.options)==null?void 0:N.layers)==null?void 0:R[t])!=null&&F.visible)){t++;return}let w=g.select("g.topology");var y=g.select("g.cp"),E=this.data[t];y.selectAll("*").remove(),this.editNodes?jF(y,E,this,t):y.selectAll(".controlPoint").remove(),this.editEdges?HF(y,E,this,t):y.selectAll(".controlEdge").remove(),!this.editEdges&&!this.editNodes&&y.selectAll("*").remove(),GF(E,(X=(V=($=this==null?void 0:this.mapCanvas.options)==null?void 0:$.layers)==null?void 0:V[t])==null?void 0:X.endpointId),WF(w,E,this,t),FF(w,E,this,t),w.selectAll("g.node, path.edge").sort((Z,D)=>D.sort-Z.sort),t++})}addNetLayer(t,n){var g,w;var o=this;o.data[t]=n;let s=o.lineGen;if((g=n==null?void 0:n.pathLayout)!=null&&g.type&&Rn.hasOwnProperty((w=n==null?void 0:n.pathLayout)==null?void 0:w.type)){let y=Rn[n.pathLayout.type];s=Rn.line().curve(y)}o.curves[t]=s;var f=this.svg.append("g").attr("class","esmap");return o.mapLayers[t]=f,f.append("g").attr("class","topology"),f.append("g").attr("class","cp"),this.update(),f}}const RS=window.d3||T6;class XF{constructor(t){this.mapCanvas=t,this.groups=[],this.leafletMap=this.mapCanvas.getCurrentLeafletMap();var n=this.leafletMap.getPanes().overlayPane;const o=RS.select(n);this.svgLayer=o.select("svg").attr("pointer-events","all"),this.sideBar=RS.selectAll("#sidebar-tooltip"),this.esmap=new JF(this.mapCanvas,this.svgLayer,this.sideBar,RS.curveNatural)}destroy(){this.esmap.destroy(),this.esmap=null}renderMapLayers(){var n,o;if(this.mapCanvas.topology){let s=function(g,w){var y=g;return w.forEach(E=>{E.name==g&&E.meta.display_name&&(y=E.meta.display_name)}),y},f=0;this.mapCanvas.topology.forEach(g=>{var E,M;if(!(!g||typeof g=="string")){for(var w=0;w<g.edges.length;w++){var y=g.edges[w];y.nodeA||(y.nodeA=s((E=y.meta.endpoint_identifiers[this.mapCanvas.options.layers[f].endpointId])==null?void 0:E[0],g.nodes)),y.nodeZ||(y.nodeZ=s((M=y.meta.endpoint_identifiers[this.mapCanvas.options.layers[f].endpointId])==null?void 0:M[1],g.nodes))}f++}})}this.groups.forEach(s=>s.remove());let t={nodes:[],edges:[]};for(let s=0;s<(((o=(n=this.mapCanvas)==null?void 0:n.options)==null?void 0:o.layerLimit)||g2);s++){let f=t;this.mapCanvas.topology[s]&&typeof this.mapCanvas.topology[s]!="string"&&(f=this.mapCanvas.topology[s]),this.groups.push(this.esmap.addNetLayer(s,f))}}renderMap(){if(!(!this.mapCanvas.options||!this.mapCanvas.topology))return this.renderMapLayers(),this.map}}const QF=`/* required styles */

.leaflet-pane,
.leaflet-tile,
.leaflet-marker-icon,
.leaflet-marker-shadow,
.leaflet-tile-container,
.leaflet-pane > svg,
.leaflet-pane > canvas,
.leaflet-zoom-box,
.leaflet-image-layer,
.leaflet-layer {
    position: absolute;
    left: 0;
    top: 0;
    }
.leaflet-container {
    overflow: hidden;
    }
.leaflet-tile,
.leaflet-marker-icon,
.leaflet-marker-shadow {
    -webkit-user-select: none;
       -moz-user-select: none;
            user-select: none;
      -webkit-user-drag: none;
    }
/* Prevents IE11 from highlighting tiles in blue */
.leaflet-tile::selection {
    background: transparent;
}
/* Safari renders non-retina tile on retina better with this, but Chrome is worse */
.leaflet-safari .leaflet-tile {
    image-rendering: -webkit-optimize-contrast;
    }
/* hack that prevents hw layers "stretching" when loading new tiles */
.leaflet-safari .leaflet-tile-container {
    width: 1600px;
    height: 1600px;
    -webkit-transform-origin: 0 0;
    }
.leaflet-marker-icon,
.leaflet-marker-shadow {
    display: block;
    }
/* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */
/* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */
.leaflet-container .leaflet-overlay-pane svg,
.leaflet-container .leaflet-marker-pane img,
.leaflet-container .leaflet-shadow-pane img,
.leaflet-container .leaflet-tile-pane img,
.leaflet-container img.leaflet-image-layer,
.leaflet-container .leaflet-tile {
    max-width: none !important;
    max-height: none !important;
    }

.leaflet-container.leaflet-touch-zoom {
    -ms-touch-action: pan-x pan-y;
    touch-action: pan-x pan-y;
    }
.leaflet-container.leaflet-touch-drag {
    -ms-touch-action: pinch-zoom;
    /* Fallback for FF which doesn't support pinch-zoom */
    touch-action: none;
    touch-action: pinch-zoom;
}
.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {
    -ms-touch-action: none;
    touch-action: none;
}
.leaflet-container {
    -webkit-tap-highlight-color: transparent;
}
.leaflet-container a {
    -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);
}
.leaflet-tile {
    filter: inherit;
    visibility: hidden;
    }
.leaflet-tile-loaded {
    visibility: inherit;
    }
.leaflet-zoom-box {
    width: 0;
    height: 0;
    -moz-box-sizing: border-box;
         box-sizing: border-box;
    }
/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */
.leaflet-overlay-pane svg {
    -moz-user-select: none;
    }

.leaflet-vml-shape {
    width: 1px;
    height: 1px;
    }
.lvml {
    behavior: url(#default#VML);
    display: inline-block;
    position: absolute;
    }


/* control positioning */

.leaflet-control {
    position: relative;
    pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
    pointer-events: auto;
    }
.leaflet-top,
.leaflet-bottom {
    position: absolute;
    pointer-events: none;
    }
.leaflet-top {
    top: 0;
    }
.leaflet-right {
    right: 0;
    }
.leaflet-bottom {
    bottom: 0;
    }
.leaflet-left {
    left: 0;
    }
.leaflet-control {
    float: left;
    clear: both;
    }
.leaflet-right .leaflet-control {
    float: right;
    }
.leaflet-top .leaflet-control {
    margin-top: 10px;
    }
.leaflet-bottom .leaflet-control {
    margin-bottom: 10px;
    }
.leaflet-left .leaflet-control {
    margin-left: 10px;
    }
.leaflet-right .leaflet-control {
    margin-right: 10px;
    }


/* zoom and fade animations */

.leaflet-fade-anim .leaflet-tile {
    will-change: opacity;
    }
.leaflet-fade-anim .leaflet-popup {
    opacity: 0;
    -webkit-transition: opacity 0.2s linear;
       -moz-transition: opacity 0.2s linear;
            transition: opacity 0.2s linear;
    }
.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {
    opacity: 1;
    }
.leaflet-zoom-animated {
    -webkit-transform-origin: 0 0;
        -ms-transform-origin: 0 0;
            transform-origin: 0 0;
    }
.leaflet-zoom-anim .leaflet-zoom-animated {
    will-change: transform;
    }
.leaflet-zoom-anim .leaflet-zoom-animated {
    -webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);
       -moz-transition:    -moz-transform 0.25s cubic-bezier(0,0,0.25,1);
            transition:         transform 0.25s cubic-bezier(0,0,0.25,1);
    }
.leaflet-zoom-anim .leaflet-tile,
.leaflet-pan-anim .leaflet-tile {
    -webkit-transition: none;
       -moz-transition: none;
            transition: none;
    }

.leaflet-zoom-anim .leaflet-zoom-hide {
    visibility: hidden;
    }


/* cursors */

.leaflet-interactive {
    cursor: pointer;
    }
.leaflet-grab {
    cursor: -webkit-grab;
    cursor:    -moz-grab;
    cursor:         grab;
    }
.leaflet-crosshair,
.leaflet-crosshair .leaflet-interactive {
    cursor: crosshair;
    }
.leaflet-popup-pane,
.leaflet-control {
    cursor: auto;
    }
.leaflet-dragging .leaflet-grab,
.leaflet-dragging .leaflet-grab .leaflet-interactive,
.leaflet-dragging .leaflet-marker-draggable {
    cursor: move;
    cursor: -webkit-grabbing;
    cursor:    -moz-grabbing;
    cursor:         grabbing;
    }

/* marker & overlays interactivity */
.leaflet-marker-icon,
.leaflet-marker-shadow,
.leaflet-image-layer,
.leaflet-pane > svg path,
.leaflet-tile-container {
    pointer-events: all;
    }

.leaflet-marker-icon.leaflet-interactive,
.leaflet-image-layer.leaflet-interactive,
.leaflet-pane > svg path.leaflet-interactive,
svg.leaflet-image-layer.leaflet-interactive path {
    pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
    pointer-events: auto;
    }

/* visual tweaks */

.leaflet-container {
    background: #ddd;
    outline: 0;
    }
.leaflet-container a {
    color: #0078A8;
    }
.leaflet-container a.leaflet-active {
    outline: 2px solid orange;
    }
.leaflet-zoom-box {
    border: 2px dotted #38f;
    background: rgba(255,255,255,0.5);
    }


/* general typography */
.leaflet-container {
    font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
    }


/* general toolbar styles */

.leaflet-bar {
    box-shadow: 0 1px 5px rgba(0,0,0,0.65);
    border-radius: 4px;
    }
.leaflet-bar a,
.leaflet-bar a:hover {
    border-bottom: 1px solid rgba(128,128,128,0.3);
    width: 26px;
    height: 26px;
    line-height: 26px;
    display: block;
    text-align: center;
    text-decoration: none;
    }
.leaflet-bar a,
.leaflet-control-layers-toggle {
    background-position: 50% 50%;
    background-repeat: no-repeat;
    display: block;
    }
.leaflet-bar a:hover {
    background-color: #f4f4f4;
    }
.leaflet-bar a:first-child {
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    }
.leaflet-bar a:last-child {
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
    border-bottom: none;
    }
.leaflet-bar a.leaflet-disabled {
    cursor: default;
    background-color: #f4f4f4;
    color: #bbb;
    }

.leaflet-touch .leaflet-bar a {
    width: 30px;
    height: 30px;
    line-height: 30px;
    }
.leaflet-touch .leaflet-bar a:first-child {
    border-top-left-radius: 2px;
    border-top-right-radius: 2px;
    }
.leaflet-touch .leaflet-bar a:last-child {
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
    }

/* zoom control */

.leaflet-control-zoom-in,
.leaflet-control-zoom-out {
    font: bold 18px 'Lucida Console', Monaco, monospace;
    text-indent: 1px;
    }

.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {
    font-size: 22px;
    }


/* layers control */

.leaflet-control-layers {
    box-shadow: 0 1px 5px rgba(0,0,0,0.4);
    background: #fff;
    border-radius: 5px;
    }
.leaflet-control-layers-toggle {
    /* background-image: url(../images/layers.png); */
    width: 36px;
    height: 36px;
    }
.leaflet-retina .leaflet-control-layers-toggle {
    /* background-image: url(../images/layers-2x.png); */
    background-size: 26px 26px;
    }
.leaflet-touch .leaflet-control-layers-toggle {
    width: 44px;
    height: 44px;
    }
.leaflet-control-layers .leaflet-control-layers-list,
.leaflet-control-layers-expanded .leaflet-control-layers-toggle {
    display: none;
    }
.leaflet-control-layers-expanded .leaflet-control-layers-list {
    display: block;
    position: relative;
    }
.leaflet-control-layers-expanded {
    padding: 6px 10px 6px 6px;
    color: #333;
    background: #fff;
    }
.leaflet-control-layers-scrollbar {
    overflow-y: scroll;
    overflow-x: hidden;
    padding-right: 5px;
    }
.leaflet-control-layers-selector {
    margin-top: 2px;
    position: relative;
    top: 1px;
    }
.leaflet-control-layers label {
    display: block;
    }
.leaflet-control-layers-separator {
    height: 0;
    border-top: 1px solid #ddd;
    margin: 5px -10px 5px -6px;
    }

/* Default icon URLs */
/* .leaflet-default-icon-path {
    background-image: url(images/marker-icon.png); 
    } */


/* attribution and scale controls */

.leaflet-container .leaflet-control-attribution {
    background: #fff;
    background: rgba(255, 255, 255, 0.7);
    margin: 0;
    }
.leaflet-control-attribution,
.leaflet-control-scale-line {
    padding: 0 5px;
    color: #333;
    }
.leaflet-control-attribution a {
    text-decoration: none;
    }
.leaflet-control-attribution a:hover {
    text-decoration: underline;
    }
.leaflet-container .leaflet-control-attribution,
.leaflet-container .leaflet-control-scale {
    font-size: 11px;
    }
.leaflet-left .leaflet-control-scale {
    margin-left: 5px;
    }
.leaflet-bottom .leaflet-control-scale {
    margin-bottom: 5px;
    }
.leaflet-control-scale-line {
    border: 2px solid #777;
    border-top: none;
    line-height: 1.1;
    padding: 2px 5px 1px;
    font-size: 11px;
    white-space: nowrap;
    overflow: hidden;
    -moz-box-sizing: border-box;
         box-sizing: border-box;

    background: #fff;
    background: rgba(255, 255, 255, 0.5);
    }
.leaflet-control-scale-line:not(:first-child) {
    border-top: 2px solid #777;
    border-bottom: none;
    margin-top: -2px;
    }
.leaflet-control-scale-line:not(:first-child):not(:last-child) {
    border-bottom: 2px solid #777;
    }

.leaflet-touch .leaflet-control-attribution,
.leaflet-touch .leaflet-control-layers,
.leaflet-touch .leaflet-bar {
    box-shadow: none;
    }
.leaflet-touch .leaflet-control-layers,
.leaflet-touch .leaflet-bar {
    border: 2px solid rgba(0,0,0,0.2);
    background-clip: padding-box;
    }


/* popup */

.leaflet-popup {
    position: absolute;
    text-align: center;
    margin-bottom: 20px;
    }
.leaflet-popup-content-wrapper {
    padding: 1px;
    text-align: left;
    border-radius: 12px;
    }
.leaflet-popup-content {
    margin: 13px 19px;
    line-height: 1.4;
    }
.leaflet-popup-content p {
    margin: 18px 0;
    }
.leaflet-popup-tip-container {
    width: 40px;
    height: 20px;
    position: absolute;
    left: 50%;
    margin-left: -20px;
    overflow: hidden;
    pointer-events: none;
    }
.leaflet-popup-tip {
    width: 17px;
    height: 17px;
    padding: 1px;

    margin: -10px auto 0;

    -webkit-transform: rotate(45deg);
       -moz-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
            transform: rotate(45deg);
    }
.leaflet-popup-content-wrapper,
.leaflet-popup-tip {
    background: white;
    color: #333;
    box-shadow: 0 3px 14px rgba(0,0,0,0.4);
    }
.leaflet-container a.leaflet-popup-close-button {
    position: absolute;
    top: 0;
    right: 0;
    padding: 4px 4px 0 0;
    border: none;
    text-align: center;
    width: 18px;
    height: 14px;
    font: 16px/14px Tahoma, Verdana, sans-serif;
    color: #c3c3c3;
    text-decoration: none;
    font-weight: bold;
    background: transparent;
    }
.leaflet-container a.leaflet-popup-close-button:hover {
    color: #999;
    }
.leaflet-popup-scrolled {
    overflow: auto;
    border-bottom: 1px solid #ddd;
    border-top: 1px solid #ddd;
    }

.leaflet-oldie .leaflet-popup-content-wrapper {
    -ms-zoom: 1;
    }
.leaflet-oldie .leaflet-popup-tip {
    width: 24px;
    margin: 0 auto;

    -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";
    filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);
    }
.leaflet-oldie .leaflet-popup-tip-container {
    margin-top: -1px;
    }

.leaflet-oldie .leaflet-control-zoom,
.leaflet-oldie .leaflet-control-layers,
.leaflet-oldie .leaflet-popup-content-wrapper,
.leaflet-oldie .leaflet-popup-tip {
    border: 1px solid #999;
    }


/* div icon */

.leaflet-div-icon {
    background: #fff;
    border: 1px solid #666;
    }


/* Tooltip */
/* Base styles for the element that has a tooltip */
.leaflet-tooltip {
    position: absolute;
    padding: 6px;
    background-color: #fff;
    border: 1px solid #fff;
    border-radius: 3px;
    color: #222;
    white-space: nowrap;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    pointer-events: none;
    box-shadow: 0 1px 3px rgba(0,0,0,0.4);
    }
.leaflet-tooltip.leaflet-clickable {
    cursor: pointer;
    pointer-events: auto;
    }
.leaflet-tooltip-top:before,
.leaflet-tooltip-bottom:before,
.leaflet-tooltip-left:before,
.leaflet-tooltip-right:before {
    position: absolute;
    pointer-events: none;
    border: 6px solid transparent;
    background: transparent;
    content: "";
    }

/* Directions */

.leaflet-tooltip-bottom {
    margin-top: 6px;
}
.leaflet-tooltip-top {
    margin-top: -6px;
}
.leaflet-tooltip-bottom:before,
.leaflet-tooltip-top:before {
    left: 50%;
    margin-left: -6px;
    }
.leaflet-tooltip-top:before {
    bottom: 0;
    margin-bottom: -12px;
    border-top-color: #fff;
    }
.leaflet-tooltip-bottom:before {
    top: 0;
    margin-top: -12px;
    margin-left: -6px;
    border-bottom-color: #fff;
    }
.leaflet-tooltip-left {
    margin-left: -6px;
}
.leaflet-tooltip-right {
    margin-left: 6px;
}
.leaflet-tooltip-left:before,
.leaflet-tooltip-right:before {
    top: 50%;
    margin-top: -6px;
    }
.leaflet-tooltip-left:before {
    right: 0;
    margin-right: -12px;
    border-left-color: #fff;
    }
.leaflet-tooltip-right:before {
    left: 0;
    margin-left: -12px;
    border-right-color: #fff;
    }
.leaflet-tile-container img { will-change: transform; outline: 1px solid transparent; }

`,eB=`
#\${instanceId} .leaflet-pane svg path.edge {
    pointer-events: stroke;
}
#\${instanceId} .leaflet-pane svg path.control {
    pointer-events: stroke;
}

#\${instanceId} .map-panel {
  position: relative;
}

#\${instanceId} svg path.edge-az {
  marker-start: url("#arrow");
}

#\${instanceId} svg path.edge-za {
  marker-start: url("#arrow");
}

#\${instanceId} svg circle.node {
        /* fill: #999; */
        stroke: #777;
        stroke-width: 1;
        pointer-events: all;
}

#\${instanceId} svg path.edge {
        stroke-linecap: butt;
        fill:  none;
        pointer-events: visiblePainted !important;
}

#\${instanceId} svg path.animated-edge.edge-az {
        stroke: transparent;
        stroke-linecap: butt;
        fill:  none;
        cursor: crosshair;
}

#\${instanceId} svg path.animated-edge.edge-za {
        stroke: transparent;
        stroke-linecap: butt;
        fill:  none;
        cursor: crosshair;
}

#\${instanceId} svg path.animated-edge.edge-az.selected {
}

#\${instanceId} svg path.animated-edge.edge-za.selected {
}

@keyframes dash {
  to {
    stroke-dashoffset: 0;
  }
}


#\${instanceId} svg path.control {
        stroke-dasharray: 8 1;
        stroke-width: 6;
        stroke: #f808;
        fill:  none;
    cursor: crosshair;
}

#\${instanceId} svg circle.controlPoint {
    stroke: black;
    stroke-width: 1;
        fill: #f80;
        cursor: move;
}

#\${instanceId} div.tooltip-hover {
  position:absolute;
  border-radius:4px;
  padding:10px;
  margin:10px;
  max-width:250px;
  box-shadow: 3px 3px 4px rgba(0, 0, 0, 0.2);
  font-family: sans-serif;
  z-index: 300;
}

#\${instanceId} div.tooltip-hover svg {
  height: 12px;
  width: 12px;
  stroke-width: 2px;
}

#\${instanceId} div.tooltip-hover p:first-of-type {
  margin-top:0;
}

#\${instanceId} div.tooltip-hover p {
  margin-top: 6px;
  margin-bottom:0;
}

#\${instanceId} .legend-text {
  padding-left: 5px;
  vertical-align: middle;
}



#\${instanceId} .home-overlay {
    position: absolute;
    margin-top: 12px;
    margin-left: 57px;
}
#\${instanceId} .home-overlay > .button {
   border-radius: 4px;
   padding: 5px 10px;
   margin-right: 5px;
   box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.5);
   display: inline-block;
   cursor: pointer;
}

#\${instanceId} .legend {
    position: absolute;
    padding: 1em 1em 0.3em 1em;
    margin: 0.8em;
    box-shadow: 0px 0px 2px rgb(0 0 0 / 50%);
    border-radius: 3px;
}

#\${instanceId} .legend.topright {
  top: 0;
  right: 0;
}

#\${instanceId} .legend.bottomright {
  bottom: 0;
  right: 0;
  margin: 0.8em 0.8em 1.8em 0.8em;
}

#\${instanceId} .legend.bottomleft {
  bottom: 0;
  left: 0;
}

#\${instanceId} .color-sample {
  height:1.5em;
  width:1.5em;
  margin-right:0.5em;
  border:1px solid rgba(0,0,0,0.2);
  display: inline-block;
  vertical-align: middle;
  border-radius: 2px;
}

#\${instanceId} .legend p {
    vertical-align: text-top;
    margin-bottom: 0.6em;
}

#\${instanceId} .legend h4 {
  font-weight:600;
  font-size:1.1em;
  padding: 0;
  margin: 0 0.4em 0.4em 0;
  display: inline-block;
}

#\${instanceId} .legend .minimize {
  float:right;
}

#\${instanceId} .legend .minimize .circle-background {
  fill: rgba(128,128,128,0.3); cursor: pointer;
}

#\${instanceId} .legend .minimize .circle-background:hover {
  fill: rgba(128,128,128,0.5);
}

#\${instanceId} .legend-column {
    display: inline-block;
    vertical-align: top;
    margin-right: 10px;
}

#\${instanceId} .legend-column:last-child {
  margin-right:0;
}

/* a 0-specificity class selector. Allows override for background elements by grafana's version of this class */
div:where(.tight-form-func) { background: #FFF; }
a:where(.tight-form-func) { background: #FFF; }

#\${instanceId} .animated-node { 
  transform: scale(1.5, 1.5);
}

#\${instanceId} svg .control.control-selected { 
  animation-name: pulse;
  animation-duration: 1s;
  animation-iteration-count: infinite;
  animation-timing-function: step-end;
}

@keyframes pulse {
  0% { opacity:1.0 }
  80% { opacity:0.0 }
  100% { opacity:1.0 }
}

#\${instanceId} .loading-overlay, .error-overlay { background-color:rgba(0,0,0,0.7); position:absolute; height:100%; width: 100%; color:white; font-weight: bold; justify-content: center; align-items: center; z-index:20000; }

`;function TL(){const t=window.location.search.substring(1).split("&");let n={};for(const o of t){const s=o.split("=");if(s.length>1){const f=decodeURIComponent(s[0]),g=decodeURIComponent(s[1]);f in n?n[f]=[...n[f],g]:n[f]=[g]}else if(s.length===1){const f=decodeURIComponent(s[0]);n[f]=!0}}return n}const CL={type:"object",properties:{edges:{type:"array",items:{type:"object",properties:{name:{type:"string"},coordinates:{type:"array",items:{type:"array",items:{type:"number"}}},meta:{type:"object",properties:{endpoint_identifiers:{type:"object"}}}},required:["name","coordinates","meta"]}},nodes:{type:"array",items:{type:"object",properties:{name:{type:"string"},coordinate:{type:"array",items:{type:"number"}}},required:["name","coordinate"]}}},required:["edges","nodes"],additionalProperties:!0},kL=function(e,t){for(var n={valid:!0,errorDetails:{}},o=0;o<t.length;o++){var{valid:s,errorDetails:f}=E2(e.items,t[o]);if(n.valid=s&&n.valid,n.errorDetails=f,!s)return n}return n},E2=function(e,t){var n={valid:!0,errorDetails:""};if(!{object:w=>typeof w=="object",number:w=>typeof w=="number",string:w=>typeof w=="string"||w instanceof String,boolean:w=>typeof w=="boolean",null:w=>w===null,array:Array.isArray}[e.type](t))return n.valid=!1,n.errorDetails+="Type check failed.<br>",n;for(var s=e.properties?Object.keys(e.properties):[],f=0;f<s.length;f++){var g=s[f];if(!t[g]&&e.required.indexOf(g)>=0)return n.valid=!1,n.errorDetails="required property '"+g+"' is not set<br>",n}return s.forEach(w=>{var y=!0,E="";switch(e.properties[w].type){case"array":var M=kL(e.properties[w],t[w]);y=M.valid,E=M.errorDetails;break;default:var M=E2(e.properties[w],t[w]);y=M.valid,E=M.errorDetails}n.valid=!!(y&&n.valid),Object.keys(E).forEach(N=>{n.errorDetails+=E[N]})}),n};function oT(e){const{valid:t,errorDetails:n}=E2(CL,e);return t?[t,"valid"]:[t,n]}function qv(e,t,n=null){return t.split(/[\.\[\]\'\"]/).filter(o=>o).reduce((o,s)=>o?o[s]:n,e)}function AL(e,t,n){let o=t.split(/[\.\[\]\'\"]/).filter(g=>g),s=e,f=o.pop();o.forEach(g=>{s=s[g]}),s[f]=n}try{const e={getUrlSearchParams:TL,schema:CL,validateArray:kL,validate:E2,testJsonSchema:oT,resolvePath:qv,setPath:AL};IC.exports.Utils=e,PC.Utils=e}catch{}function tB(e,t=2){if(!+e)return"0 Bytes";const n=1e3,o=t<0?0:t,s=["b/s","Kb/s","Mb/s","Gb/s","Tb/s","Pb/s","Eb/s","Zb/s","Yb/s"],f=Math.floor(Math.log(e)/Math.log(n));return`${parseFloat((e/Math.pow(n,f)).toFixed(o))} ${s[f]}`}/*! @license DOMPurify 3.1.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.5/LICENSE */const{entries:ML,setPrototypeOf:n5,isFrozen:nB,getPrototypeOf:rB,getOwnPropertyDescriptor:iB}=Object;let{freeze:ho,seal:Na,create:NL}=Object,{apply:aT,construct:sT}=typeof Reflect<"u"&&Reflect;ho||(ho=function(t){return t});Na||(Na=function(t){return t});aT||(aT=function(t,n,o){return t.apply(n,o)});sT||(sT=function(t,n){return new t(...n)});const Ny=ia(Array.prototype.forEach),r5=ia(Array.prototype.pop),_v=ia(Array.prototype.push),tw=ia(String.prototype.toLowerCase),DS=ia(String.prototype.toString),i5=ia(String.prototype.match),yv=ia(String.prototype.replace),oB=ia(String.prototype.indexOf),aB=ia(String.prototype.trim),es=ia(Object.prototype.hasOwnProperty),oo=ia(RegExp.prototype.test),wv=sB(TypeError);function ia(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return aT(e,t,o)}}function sB(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return sT(e,n)}}function vn(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tw;n5&&n5(e,null);let o=t.length;for(;o--;){let s=t[o];if(typeof s=="string"){const f=n(s);f!==s&&(nB(t)||(t[o]=f),s=f)}e[s]=!0}return e}function lB(e){for(let t=0;t<e.length;t++)es(e,t)||(e[t]=null);return e}function Mf(e){const t=NL(null);for(const[n,o]of ML(e))es(e,n)&&(Array.isArray(o)?t[n]=lB(o):o&&typeof o=="object"&&o.constructor===Object?t[n]=Mf(o):t[n]=o);return t}function Ly(e,t){for(;e!==null;){const o=iB(e,t);if(o){if(o.get)return ia(o.get);if(typeof o.value=="function")return ia(o.value)}e=rB(e)}function n(){return null}return n}const o5=ho(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zS=ho(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),US=ho(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uB=ho(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),FS=ho(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),cB=ho(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),a5=ho(["#text"]),s5=ho(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),BS=ho(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),l5=ho(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Py=ho(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fB=Na(/\{\{[\w\W]*|[\w\W]*\}\}/gm),dB=Na(/<%[\w\W]*|[\w\W]*%>/gm),hB=Na(/\${[\w\W]*}/gm),pB=Na(/^data-[\-\w.\u00B7-\uFFFF]/),mB=Na(/^aria-[\-\w]+$/),LL=Na(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),gB=Na(/^(?:\w+script|data):/i),vB=Na(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PL=Na(/^html$/i),_B=Na(/^[a-z][.\w]*(-[.\w]+)+$/i);var u5=Object.freeze({__proto__:null,MUSTACHE_EXPR:fB,ERB_EXPR:dB,TMPLIT_EXPR:hB,DATA_ATTR:pB,ARIA_ATTR:mB,IS_ALLOWED_URI:LL,IS_SCRIPT_OR_DATA:gB,ATTR_WHITESPACE:vB,DOCTYPE_NAME:PL,CUSTOM_ELEMENT:_B});const bv={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},yB=function(){return typeof window>"u"?null:window},wB=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let o=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(o=n.getAttribute(s));const f="dompurify"+(o?"#"+o:"");try{return t.createPolicy(f,{createHTML(g){return g},createScriptURL(g){return g}})}catch{return console.warn("TrustedTypes policy "+f+" could not be created."),null}};function IL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yB();const t=Me=>IL(Me);if(t.version="3.1.5",t.removed=[],!e||!e.document||e.document.nodeType!==bv.document)return t.isSupported=!1,t;let{document:n}=e;const o=n,s=o.currentScript,{DocumentFragment:f,HTMLTemplateElement:g,Node:w,Element:y,NodeFilter:E,NamedNodeMap:M=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:N,DOMParser:R,trustedTypes:F}=e,$=y.prototype,V=Ly($,"cloneNode"),X=Ly($,"nextSibling"),Z=Ly($,"childNodes"),D=Ly($,"parentNode");if(typeof g=="function"){const Me=n.createElement("template");Me.content&&Me.content.ownerDocument&&(n=Me.content.ownerDocument)}let z,H="";const{implementation:se,createNodeIterator:he,createDocumentFragment:pe,getElementsByTagName:ge}=n,{importNode:ke}=o;let be={};t.isSupported=typeof ML=="function"&&typeof D=="function"&&se&&se.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ue,ERB_EXPR:it,TMPLIT_EXPR:Xe,DATA_ATTR:Te,ARIA_ATTR:Fe,IS_SCRIPT_OR_DATA:ot,ATTR_WHITESPACE:Je,CUSTOM_ELEMENT:Le}=u5;let{IS_ALLOWED_URI:Ye}=u5,Ze=null;const ut=vn({},[...o5,...zS,...US,...FS,...a5]);let Qe=null;const bn=vn({},[...s5,...BS,...l5,...Py]);let At=Object.seal(NL(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),hn=null,vt=null,xt=!0,rt=!0,ct=!1,Ve=!0,Ct=!1,Jt=!0,Be=!1,at=!1,ft=!1,An=!1,_n=!1,ur=!1,gr=!0,Mn=!1;const Bn="user-content-";let Vn=!0,Qn=!1,Ke={},Nn=null;const Zn=vn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let er=null;const Yr=vn({},["audio","video","img","source","image","track"]);let Kr=null;const Uo=vn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ci="http://www.w3.org/1998/Math/MathML",fi="http://www.w3.org/2000/svg",Fr="http://www.w3.org/1999/xhtml";let Jr=Fr,Fo=!1,go=null;const La=vn({},[ci,fi,Fr],DS);let vo=null;const Pa=["application/xhtml+xml","text/html"],we="text/html";let xe=null,Ne=null;const et=n.createElement("form"),yt=function(ce){return ce instanceof RegExp||ce instanceof Function},St=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ne&&Ne===ce)){if((!ce||typeof ce!="object")&&(ce={}),ce=Mf(ce),vo=Pa.indexOf(ce.PARSER_MEDIA_TYPE)===-1?we:ce.PARSER_MEDIA_TYPE,xe=vo==="application/xhtml+xml"?DS:tw,Ze=es(ce,"ALLOWED_TAGS")?vn({},ce.ALLOWED_TAGS,xe):ut,Qe=es(ce,"ALLOWED_ATTR")?vn({},ce.ALLOWED_ATTR,xe):bn,go=es(ce,"ALLOWED_NAMESPACES")?vn({},ce.ALLOWED_NAMESPACES,DS):La,Kr=es(ce,"ADD_URI_SAFE_ATTR")?vn(Mf(Uo),ce.ADD_URI_SAFE_ATTR,xe):Uo,er=es(ce,"ADD_DATA_URI_TAGS")?vn(Mf(Yr),ce.ADD_DATA_URI_TAGS,xe):Yr,Nn=es(ce,"FORBID_CONTENTS")?vn({},ce.FORBID_CONTENTS,xe):Zn,hn=es(ce,"FORBID_TAGS")?vn({},ce.FORBID_TAGS,xe):{},vt=es(ce,"FORBID_ATTR")?vn({},ce.FORBID_ATTR,xe):{},Ke=es(ce,"USE_PROFILES")?ce.USE_PROFILES:!1,xt=ce.ALLOW_ARIA_ATTR!==!1,rt=ce.ALLOW_DATA_ATTR!==!1,ct=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,Ve=ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ct=ce.SAFE_FOR_TEMPLATES||!1,Jt=ce.SAFE_FOR_XML!==!1,Be=ce.WHOLE_DOCUMENT||!1,An=ce.RETURN_DOM||!1,_n=ce.RETURN_DOM_FRAGMENT||!1,ur=ce.RETURN_TRUSTED_TYPE||!1,ft=ce.FORCE_BODY||!1,gr=ce.SANITIZE_DOM!==!1,Mn=ce.SANITIZE_NAMED_PROPS||!1,Vn=ce.KEEP_CONTENT!==!1,Qn=ce.IN_PLACE||!1,Ye=ce.ALLOWED_URI_REGEXP||LL,Jr=ce.NAMESPACE||Fr,At=ce.CUSTOM_ELEMENT_HANDLING||{},ce.CUSTOM_ELEMENT_HANDLING&&yt(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(At.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&yt(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(At.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(At.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ct&&(rt=!1),_n&&(An=!0),Ke&&(Ze=vn({},a5),Qe=[],Ke.html===!0&&(vn(Ze,o5),vn(Qe,s5)),Ke.svg===!0&&(vn(Ze,zS),vn(Qe,BS),vn(Qe,Py)),Ke.svgFilters===!0&&(vn(Ze,US),vn(Qe,BS),vn(Qe,Py)),Ke.mathMl===!0&&(vn(Ze,FS),vn(Qe,l5),vn(Qe,Py))),ce.ADD_TAGS&&(Ze===ut&&(Ze=Mf(Ze)),vn(Ze,ce.ADD_TAGS,xe)),ce.ADD_ATTR&&(Qe===bn&&(Qe=Mf(Qe)),vn(Qe,ce.ADD_ATTR,xe)),ce.ADD_URI_SAFE_ATTR&&vn(Kr,ce.ADD_URI_SAFE_ATTR,xe),ce.FORBID_CONTENTS&&(Nn===Zn&&(Nn=Mf(Nn)),vn(Nn,ce.FORBID_CONTENTS,xe)),Vn&&(Ze["#text"]=!0),Be&&vn(Ze,["html","head","body"]),Ze.table&&(vn(Ze,["tbody"]),delete hn.tbody),ce.TRUSTED_TYPES_POLICY){if(typeof ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw wv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw wv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');z=ce.TRUSTED_TYPES_POLICY,H=z.createHTML("")}else z===void 0&&(z=wB(F,s)),z!==null&&typeof H=="string"&&(H=z.createHTML(""));ho&&ho(ce),Ne=ce}},zt=vn({},["mi","mo","mn","ms","mtext"]),bt=vn({},["foreignobject","annotation-xml"]),gt=vn({},["title","style","font","a","script"]),Xt=vn({},[...zS,...US,...uB]),Ln=vn({},[...FS,...cB]),Vt=function(ce){let Pe=D(ce);(!Pe||!Pe.tagName)&&(Pe={namespaceURI:Jr,tagName:"template"});const $e=tw(ce.tagName),$t=tw(Pe.tagName);return go[ce.namespaceURI]?ce.namespaceURI===fi?Pe.namespaceURI===Fr?$e==="svg":Pe.namespaceURI===ci?$e==="svg"&&($t==="annotation-xml"||zt[$t]):!!Xt[$e]:ce.namespaceURI===ci?Pe.namespaceURI===Fr?$e==="math":Pe.namespaceURI===fi?$e==="math"&&bt[$t]:!!Ln[$e]:ce.namespaceURI===Fr?Pe.namespaceURI===fi&&!bt[$t]||Pe.namespaceURI===ci&&!zt[$t]?!1:!Ln[$e]&&(gt[$e]||!Xt[$e]):!!(vo==="application/xhtml+xml"&&go[ce.namespaceURI]):!1},jt=function(ce){_v(t.removed,{element:ce});try{ce.parentNode.removeChild(ce)}catch{ce.remove()}},Pn=function(ce,Pe){try{_v(t.removed,{attribute:Pe.getAttributeNode(ce),from:Pe})}catch{_v(t.removed,{attribute:null,from:Pe})}if(Pe.removeAttribute(ce),ce==="is"&&!Qe[ce])if(An||_n)try{jt(Pe)}catch{}else try{Pe.setAttribute(ce,"")}catch{}},Xr=function(ce){let Pe=null,$e=null;if(ft)ce="<remove></remove>"+ce;else{const Jn=i5(ce,/^[\r\n\t ]+/);$e=Jn&&Jn[0]}vo==="application/xhtml+xml"&&Jr===Fr&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");const $t=z?z.createHTML(ce):ce;if(Jr===Fr)try{Pe=new R().parseFromString($t,vo)}catch{}if(!Pe||!Pe.documentElement){Pe=se.createDocument(Jr,"template",null);try{Pe.documentElement.innerHTML=Fo?H:$t}catch{}}const xn=Pe.body||Pe.documentElement;return ce&&$e&&xn.insertBefore(n.createTextNode($e),xn.childNodes[0]||null),Jr===Fr?ge.call(Pe,Be?"html":"body")[0]:Be?Pe.documentElement:xn},yi=function(ce){return he.call(ce.ownerDocument||ce,ce,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},_o=function(ce){return ce instanceof N&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof M)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function"||typeof ce.hasChildNodes!="function")},oe=function(ce){return typeof w=="function"&&ce instanceof w},Ie=function(ce,Pe,$e){be[ce]&&Ny(be[ce],$t=>{$t.call(t,Pe,$e,Ne)})},Ge=function(ce){let Pe=null;if(Ie("beforeSanitizeElements",ce,null),_o(ce))return jt(ce),!0;const $e=xe(ce.nodeName);if(Ie("uponSanitizeElement",ce,{tagName:$e,allowedTags:Ze}),ce.hasChildNodes()&&!oe(ce.firstElementChild)&&oo(/<[/\w]/g,ce.innerHTML)&&oo(/<[/\w]/g,ce.textContent)||ce.nodeType===bv.progressingInstruction||Jt&&ce.nodeType===bv.comment&&oo(/<[/\w]/g,ce.data))return jt(ce),!0;if(!Ze[$e]||hn[$e]){if(!hn[$e]&&Gt($e)&&(At.tagNameCheck instanceof RegExp&&oo(At.tagNameCheck,$e)||At.tagNameCheck instanceof Function&&At.tagNameCheck($e)))return!1;if(Vn&&!Nn[$e]){const $t=D(ce)||ce.parentNode,xn=Z(ce)||ce.childNodes;if(xn&&$t){const Jn=xn.length;for(let Dn=Jn-1;Dn>=0;--Dn){const yo=V(xn[Dn],!0);yo.__removalCount=(ce.__removalCount||0)+1,$t.insertBefore(yo,X(ce))}}}return jt(ce),!0}return ce instanceof y&&!Vt(ce)||($e==="noscript"||$e==="noembed"||$e==="noframes")&&oo(/<\/no(script|embed|frames)/i,ce.innerHTML)?(jt(ce),!0):(Ct&&ce.nodeType===bv.text&&(Pe=ce.textContent,Ny([Ue,it,Xe],$t=>{Pe=yv(Pe,$t," ")}),ce.textContent!==Pe&&(_v(t.removed,{element:ce.cloneNode()}),ce.textContent=Pe)),Ie("afterSanitizeElements",ce,null),!1)},kt=function(ce,Pe,$e){if(gr&&(Pe==="id"||Pe==="name")&&($e in n||$e in et))return!1;if(!(rt&&!vt[Pe]&&oo(Te,Pe))){if(!(xt&&oo(Fe,Pe))){if(!Qe[Pe]||vt[Pe]){if(!(Gt(ce)&&(At.tagNameCheck instanceof RegExp&&oo(At.tagNameCheck,ce)||At.tagNameCheck instanceof Function&&At.tagNameCheck(ce))&&(At.attributeNameCheck instanceof RegExp&&oo(At.attributeNameCheck,Pe)||At.attributeNameCheck instanceof Function&&At.attributeNameCheck(Pe))||Pe==="is"&&At.allowCustomizedBuiltInElements&&(At.tagNameCheck instanceof RegExp&&oo(At.tagNameCheck,$e)||At.tagNameCheck instanceof Function&&At.tagNameCheck($e))))return!1}else if(!Kr[Pe]){if(!oo(Ye,yv($e,Je,""))){if(!((Pe==="src"||Pe==="xlink:href"||Pe==="href")&&ce!=="script"&&oB($e,"data:")===0&&er[ce])){if(!(ct&&!oo(ot,yv($e,Je,"")))){if($e)return!1}}}}}}return!0},Gt=function(ce){return ce!=="annotation-xml"&&i5(ce,Le)},sn=function(ce){Ie("beforeSanitizeAttributes",ce,null);const{attributes:Pe}=ce;if(!Pe)return;const $e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Qe};let $t=Pe.length;for(;$t--;){const xn=Pe[$t],{name:Jn,namespaceURI:Dn,value:yo}=xn,Hs=xe(Jn);let Qr=Jn==="value"?yo:aB(yo);if($e.attrName=Hs,$e.attrValue=Qr,$e.keepAttr=!0,$e.forceKeepAttr=void 0,Ie("uponSanitizeAttribute",ce,$e),Qr=$e.attrValue,$e.forceKeepAttr||(Pn(Jn,ce),!$e.keepAttr))continue;if(!Ve&&oo(/\/>/i,Qr)){Pn(Jn,ce);continue}if(Jt&&oo(/((--!?|])>)|<\/(style|title)/i,Qr)){Pn(Jn,ce);continue}Ct&&Ny([Ue,it,Xe],vc=>{Qr=yv(Qr,vc," ")});const gc=xe(ce.nodeName);if(kt(gc,Hs,Qr)){if(Mn&&(Hs==="id"||Hs==="name")&&(Pn(Jn,ce),Qr=Bn+Qr),z&&typeof F=="object"&&typeof F.getAttributeType=="function"&&!Dn)switch(F.getAttributeType(gc,Hs)){case"TrustedHTML":{Qr=z.createHTML(Qr);break}case"TrustedScriptURL":{Qr=z.createScriptURL(Qr);break}}try{Dn?ce.setAttributeNS(Dn,Jn,Qr):ce.setAttribute(Jn,Qr),_o(ce)?jt(ce):r5(t.removed)}catch{}}}Ie("afterSanitizeAttributes",ce,null)},Zt=function Me(ce){let Pe=null;const $e=yi(ce);for(Ie("beforeSanitizeShadowDOM",ce,null);Pe=$e.nextNode();)Ie("uponSanitizeShadowNode",Pe,null),!Ge(Pe)&&(Pe.content instanceof f&&Me(Pe.content),sn(Pe));Ie("afterSanitizeShadowDOM",ce,null)};return t.sanitize=function(Me){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe=null,$e=null,$t=null,xn=null;if(Fo=!Me,Fo&&(Me="<!-->"),typeof Me!="string"&&!oe(Me))if(typeof Me.toString=="function"){if(Me=Me.toString(),typeof Me!="string")throw wv("dirty is not a string, aborting")}else throw wv("toString is not a function");if(!t.isSupported)return Me;if(at||St(ce),t.removed=[],typeof Me=="string"&&(Qn=!1),Qn){if(Me.nodeName){const yo=xe(Me.nodeName);if(!Ze[yo]||hn[yo])throw wv("root node is forbidden and cannot be sanitized in-place")}}else if(Me instanceof w)Pe=Xr("<!---->"),$e=Pe.ownerDocument.importNode(Me,!0),$e.nodeType===bv.element&&$e.nodeName==="BODY"||$e.nodeName==="HTML"?Pe=$e:Pe.appendChild($e);else{if(!An&&!Ct&&!Be&&Me.indexOf("<")===-1)return z&&ur?z.createHTML(Me):Me;if(Pe=Xr(Me),!Pe)return An?null:ur?H:""}Pe&&ft&&jt(Pe.firstChild);const Jn=yi(Qn?Me:Pe);for(;$t=Jn.nextNode();)Ge($t)||($t.content instanceof f&&Zt($t.content),sn($t));if(Qn)return Me;if(An){if(_n)for(xn=pe.call(Pe.ownerDocument);Pe.firstChild;)xn.appendChild(Pe.firstChild);else xn=Pe;return(Qe.shadowroot||Qe.shadowrootmode)&&(xn=ke.call(o,xn,!0)),xn}let Dn=Be?Pe.outerHTML:Pe.innerHTML;return Be&&Ze["!doctype"]&&Pe.ownerDocument&&Pe.ownerDocument.doctype&&Pe.ownerDocument.doctype.name&&oo(PL,Pe.ownerDocument.doctype.name)&&(Dn="<!DOCTYPE "+Pe.ownerDocument.doctype.name+`>
`+Dn),Ct&&Ny([Ue,it,Xe],yo=>{Dn=yv(Dn,yo," ")}),z&&ur?z.createHTML(Dn):Dn},t.setConfig=function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};St(Me),at=!0},t.clearConfig=function(){Ne=null,at=!1},t.isValidAttribute=function(Me,ce,Pe){Ne||St({});const $e=xe(Me),$t=xe(ce);return kt($e,$t,Pe)},t.addHook=function(Me,ce){typeof ce=="function"&&(be[Me]=be[Me]||[],_v(be[Me],ce))},t.removeHook=function(Me){if(be[Me])return r5(be[Me])},t.removeHooks=function(Me){be[Me]&&(be[Me]=[])},t.removeAllHooks=function(){be={}},t}var bB=IL();const $S="rgb(202, 149, 229)";class xB extends gC{constructor(t){super(),this.srcDstOptions=[],this._editMode=null,this._edgeEditMode=!1,this._nodeEditMode=!1,this._selection=!1,this._dialog=!1,this._selectedLayer=0,this._spliceIndex=null,this._formTouched=!1}connectedCallback(){this.render()}setMapCanvas(t){this.mapCanvas=t,this.setEditMode(this.mapCanvas.lastValue(ze.private.EDIT)),this.setEditNodeData(this.mapCanvas.lastValue(ze.private.EDIT_NODE_DIALOG_VISIBLE)),this.mapCanvas.listen(ze.private.EDIT_NODE_DIALOG_VISIBLE,n=>{this.setEditNodeData(n),this.render()}),this.setEditSelection(this.mapCanvas.lastValue(ze.private.EDIT_SELECTION_SET)),this.mapCanvas.listen(ze.private.EDIT_SELECTION_SET,n=>{this.setEditSelection(n),this.render()}),this.setEditing(this.mapCanvas.lastValue(ze.EDITING_SET)),this.mapCanvas.listen(ze.EDITING_SET,n=>{this.setEditing(n),this.render()})}setEditMode(t){var o,s,f,g,w,y;t==null&&(this._edgeEditMode=!1,this._nodeEditMode=!1,this._selectedObject=null,this._selectedLayer=null,this._dialog=null,this._spliceIndex=null);let n=this.mapCanvas.lastValue(ze.private.EDIT_SELECTION_SET);t&&t.mode==="edge"&&(this._edgeEditMode=t.value,this._nodeEditMode=!1,(n==null?void 0:n.type)=="edges"&&this.setEditSelection(n)),t&&t.mode==="node"&&(this._edgeEditMode=!1,this._nodeEditMode=t.value,(n==null?void 0:n.type)=="nodes"&&this.setEditSelection(n)),t&&t.mode==="off"&&(this._edgeEditMode=!1,this._nodeEditMode=!1),(f=(s=(o=this.mapCanvas)==null?void 0:o.map)==null?void 0:s.esmap)==null||f.editEdgeMode(this._edgeEditMode),(y=(w=(g=this.mapCanvas)==null?void 0:g.map)==null?void 0:w.esmap)==null||y.editNodeMode(this._nodeEditMode)}setEditing(t){t?(this._editMode=!0,this.setEditMode({mode:t,value:!0})):(this._editMode=!1,this.setEditMode(null)),this.render()}setEditNodeData(t){t?(this._selectedObject=t.object,this._selectedType=t.type,this._spliceIndex=t.index,this.selectedLayer=t.layer,this._dialog="node"):this._dialog=!1}setEditSelection(t){if(!t){this._formTouched=!1,this._selectedObject=null,this._spliceIndex=null,this._selectedLayer=0,this._selectedType=null;return}this._formTouched=!1,this._selectedObject=t.object,this._spliceIndex=t.index,this._selectedLayer=t.layer,this._selectedType=t.type}set editMode(t){this.render()}get editMode(){return this._editMode}set edgeEditMode(t){this._edgeEditMode=t,this.render()}get edgeEditMode(){return this._edgeEditMode}set nodeEditMode(t){this._nodeEditMode=t,this.render()}get nodeEditMode(){return this._nodeEditMode}set dialog(t){this._dialog=t,this.render()}get dialog(){return this._dialog}set selectedLayer(t){this._selectedLayer=t,this.setSrcDstOptions()}get selectedLayer(){return this._selectedLayer}toggleNodeEdit(t){t.stopPropagation(),this.mapCanvas.emit(ze.private.EDIT_SELECTION_SET,null);const n=this.mapCanvas.lastValue(ze.EDITING_SET);this.mapCanvas.setEditMode(n==="node"?"off":"node")}toggleEdgeEdit(t){t.stopPropagation(),this.mapCanvas.emit(ze.private.EDIT_SELECTION_SET,null);const n=this.mapCanvas.lastValue(ze.EDITING_SET);this.mapCanvas.setEditMode(n==="edge"?"off":"edge")}showAddNodeDialog(t){t.stopPropagation(),this.dialog!="edge"&&(this._selectedLayer=0),this._selectedObject=null,this._spliceIndex=null,this.mapCanvas.emit(ze.private.EDIT_NODE_DIALOG_VISIBLE,{object:null,index:null,layer:this._selectedLayer,type:"nodes"}),this.dialog="node"}showAddEdgeDialog(t){t.stopPropagation(),this._selectedLayer=0,this._selectedObject=null,this._spliceIndex=null,this.setSrcDstOptions(),this.mapCanvas.emit(ze.private.EDIT_EDGE_DIALOG_VISIBLE,{object:null,index:null,layer:this._selectedLayer,type:"edges"}),this.dialog="edge"}hideDialogs(t){t==null||t.stopPropagation(),this.mapCanvas.emit(ze.private.EDIT_NODE_DIALOG_VISIBLE,null),this.mapCanvas.emit(ze.private.EDIT_EDGE_DIALOG_VISIBLE,null)}showSrcDst(t){this.selectedLayer=t.target.value}updateMapNodes(t){var F,$,V;t.preventDefault();var n=this.shadow.querySelector("#node_layer").value,o=this.shadow.querySelector("#node_name").value,s=this.shadow.querySelector("#node_display_name").value,f=this.shadow.querySelector("#node_svg").value,g=this.shadow.querySelector("#node_tooltip").value,w=this.shadow.querySelector("#node_lat").value,y=this.shadow.querySelector("#node_lng").value;const E=document.querySelectorAll("#node_children option:checked"),M=Array.from(E).map(X=>X.value);f=`<svg>${f}</svg>`;var N=bB.sanitize(f,{ADD_TAGS:["foreignobject"]});N=N.replace(/^<svg>/,"").replace(/<\/svg>$/,"");var R={name:o,color:((V=($=(F=this.mapCanvas.options)==null?void 0:F.layers)==null?void 0:$[n])==null?void 0:V.color)||$S,meta:{display_name:s,svg:N,template:g},coordinate:[parseFloat(w),parseFloat(y)],children:M};this.updateLayerNodes(n,R,this._spliceIndex),this._formTouched=!1}updateLayerNodes(t,n,o){var g,w;const s=[];var f={nodes:[],edges:[]};for(let y=0;y<Ml;y++)s.push(JSON.parse(JSON.stringify(((w=(g=this.mapCanvas)==null?void 0:g._topology)==null?void 0:w[y])||f)));if(t=+t,o===null)s[t].nodes.push(n),this.mapCanvas.emit(ze.NODE_CREATED,{layer:t,node:n});else{let y=s[t].nodes.splice(o,1,n);this.mapCanvas.emit(ze.NODE_UPDATED,{layer:t,node:n,oldNode:y})}this.mapCanvas.setTopology(s),this.hideDialogs(),setTimeout(()=>{var y,E;this.mapCanvas.emit(ze.EDGE_SNAP,{node:n,layer:t}),(E=(y=this.mapCanvas)==null?void 0:y.map)==null||E.renderMap()},10)}createMapEdge(t){var M,N,R,F,$,V,X,Z,D,z,H;t.stopPropagation();var n=this.shadow.querySelector("#edge_layer").value,o=this.shadow.querySelector("#node_source").value,s=this.shadow.querySelector("#node_destination").value;const f=[];var g={nodes:[],edges:[]};for(let se=0;se<Ml;se++)f.push(JSON.parse(JSON.stringify(((N=(M=this.mapCanvas)==null?void 0:M._topology)==null?void 0:N[se])||g)));var w=[null,null];for(let se=0;se<f[n].nodes.length;se++)f[n].nodes[se].name===o&&(w[0]=f[n].nodes[se].coordinate),f[n].nodes[se].name===s&&(w[1]=f[n].nodes[se].coordinate);let y={name:o+"--"+s,meta:{endpoint_identifiers:{}},layer:n,azColor:(($=(F=(R=this.mapCanvas.options)==null?void 0:R.layers)==null?void 0:F[n])==null?void 0:$.color)||$S,zaColor:((Z=(X=(V=this.mapCanvas.options)==null?void 0:V.layers)==null?void 0:X[n])==null?void 0:Z.color)||$S,coordinates:w,children:[]},E=(H=(z=(D=this.mapCanvas.options)==null?void 0:D.layers)==null?void 0:z[n])==null?void 0:H.endpointId;y.meta.endpoint_identifiers[E]=[o,s],f[n].edges.push(y),this.mapCanvas.emit(ze.EDGE_CREATED,{layer:n,source:o,destination:s,edge:y}),this.mapCanvas.setTopology(f),this.hideDialogs(),setTimeout(function(){var se,he;(he=(se=this.mapCanvas)==null?void 0:se.map)==null||he.renderMap()},100)}deleteSelection(t){t.stopPropagation();var n=this.mapCanvas.topology,o=n[this._selectedLayer][this._selectedType].splice(this._spliceIndex,1);this._selectedType=="edges"&&this.mapCanvas.emit(ze.EDGE_DELETED,{edge:o[0],layer:this._selectedLayer}),this._selectedType=="nodes"&&this.mapCanvas.emit(ze.NODE_DELETED,{node:o[0],layer:this._selectedLayer}),this.mapCanvas.setTopology(n),this.mapCanvas.refresh(),this._selectedLayer=null,this._selectedType=null,this._spliceIndex=null,this._selectedObject=null,this.render()}disableScrolling(t){t.stopPropagation(),this.mapCanvas.disableScrolling()}enableScrolling(t){t.stopPropagation(),this.mapCanvas.enableScrolling()}setSrcDstOptions(){let t={nodes:[]};try{t=this.mapCanvas._topology[this._selectedLayer]}catch{this.srcDstOptions=[];return}if(this.srcDstOptions=[],!t||!t.nodes){this.render();return}for(let n=0;n<t.nodes.length;n++){let o={name:null};o=t.nodes[n],o.name&&this.srcDstOptions.push(o.name)}this.render()}renderSrcDstOptions(t){if(this.srcDstOptions.length===0)return`<div class="no-node-message">
              The Layer You&apos;ve Selected has no Nodes.
              <div class="add_node_link">
                Add Node
              </div>
            </div>`;var n=this.srcDstOptions.map((o,s)=>`<option key=${s} value=${o}>${o}</option>`);return`<select id="${t}">${n}</select>`}toString(t){return typeof t=="number"&&!Number.isInteger(t)?t.toFixed(3):t||""}getFieldValue(t,n){let o=null;return this._selectedType==t&&this._selectedObject&&(o=this._selectedObject),this.toString(qv(o,n))}markFormTouched(){this._formTouched=!0}renderChildNodeOptions(t,n){var f,g,w;let o="",s=((w=(g=(f=this==null?void 0:this.mapCanvas)==null?void 0:f.topology)==null?void 0:g[this._selectedLayer])==null?void 0:w.nodes)||[];for(let y=0;y<s.length;y++)if(s[y].name!=t){let E="";n.indexOf(s[y].name)>=0&&(E="selected"),o+=`<option value=${s[y].name} ${E}>${s[y].name}</option>`}return o}render(){var f,g,w,y,E,M;this.shadow||(this.shadow=document.createElement("div"),this.append(this.shadow));let t=this._editMode&&"inline-block"||"none",n=this._editMode&&"inline-block"||"none";if(this._formTouched)var o=this.shadow.querySelector("#add_node_form");let s="";for(let N=0;N<(((g=(f=this.mapCanvas)==null?void 0:f.options)==null?void 0:g.layerLimit)||g2);N++)s+=`<option value='${N}' ${parseInt(this._selectedLayer)===N&&"selected"||""}>
                ${((M=(E=(y=(w=this==null?void 0:this.mapCanvas)==null?void 0:w._options)==null?void 0:y.layers)==null?void 0:E[N])==null?void 0:M.name)||"Layer "+(N+1)}
            </option>`;this.shadow.innerHTML=`
            <style>
                .button-overlay { 
                    position: absolute;
                    z-index: 600;
                    margin-top: 12px;
                    margin-right: 12px;
                    right: 0;
                }
                .button-overlay > .button {
                   border-radius: 4px;
                   padding: 5px 10px;
                   margin-right: 5px;
                   box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.5);
                   display: inline-block;
                   cursor: pointer;
                }
                .tools-overlay { 
                    position: absolute;
                    z-index: 600;
                    margin-top: 84px;
                    margin-left: 10px;
                    max-width:120px;
                }
                .tools-overlay > .button {
                    border-radius: 4px;
                    padding: 5px 10px;
                    margin-bottom: 10px;
                    box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.5);
                    display: inline-block;
                    cursor: pointer;
                    width: max-content;
                }
                .button-overlay > .button.edit-mode-only {
                    display: ${t}
                }
                .tools-overlay > .button.edit-mode-only {
                    display: ${n}
                }
                .dialog {
                  position: absolute;
                  z-index: 10000;
                  width: 100%;
                  background: rgba(0,0,0,0.2);
                  height:100%;
                  display: ${this._dialog?"block":"none"}
                }

                .dialog .dialog-form {
                  border-radius: 5px;
                  padding:20px;
                  margin: 20px auto;
                  max-width:560px;
                  box-shadow: 3px 3px 13px black;
                  display: none;
                }

                #add_edge_dialog { 
                    display: ${this._dialog=="edge"?"block":"none"}
                }

                #add_node_dialog { 
                    display: ${this._dialog=="node"?"block":"none"}
                }

                .dialog .dialog-form div {
                  margin: 0.5em 0;
                }

                .dialog .dialog-form .no-node-message {
                  padding-left:10px;
                }
                .dialog .dialog-form .add_node_link {
                  color: blue;
                  text-decoration: underline;
                }
                .dialog .dialog-form input,
                .dialog .dialog-form select {
                  height:30px;
                  border:1px solid #b5b5b5;
                }
                .dialog .dialog-form textarea {
                  border:1px solid #b5b5b5;
                }
                .dialog .dialog-form #edge_layer,
                .dialog .dialog-form #node_layer {
                    width: 100px;
                    margin-right:0.5em;
                }
                .dialog .dialog-form #node_source,
                .dialog .dialog-form #node_destination,
                .dialog .dialog-form #node_name,
                .dialog .dialog-form #node_display_name {
                    width:125px;
                    margin-right:0.5em;
                }
                .dialog .dialog-form #node_lat,
                .dialog .dialog-form #node_lng {
                    width:70px;
                    margin-right:0.5em;
                }
                .dialog .dialog-form table {
                    margin-bottom:10px;
                    width:100%;
                }
                .dialog .dialog-form #node_children {
                    width:150px;
                    height:80px;
                    margin-right:0.5em;
                }
                .dialog .dialog-form #node_svg {
                    width:175px;
                    min-height:80px;
                    margin-right:0.5em;
                    font-family: monospace;
                    font-size:11px;
                }
                .dialog .dialog-form #node_tooltip {
                    width:175px;
                    min-height:80px;
                    margin-right:0.5em;
                    font-family: monospace;
                    font-size:11px;
                }
                .dialog .dialog-form .text-input {
                }

                .dialog .dialog-form input.button {
                  background: rgba(200, 200, 200, 0.5);
                  margin: 0 0.5em 0 0;
                }
                .dialog .dialog-form input.button#create_edge, 
                .dialog .dialog-form input.button#create_node {
                  background: rgb(56, 113, 220);
                  font-weight: bold;
                  color: white;
                  border: 1px solid rgb(26, 73, 120)
                }

                .dialog .dialog-form table td {
                  padding-bottom:0px;
                }

                .dialog .dialog-form .heading-container {
                    width: 300px;
                }
                .dialog .dialog-form .right-aligned {
                    text-align:right;
                }
            </style>
            <div id="dialog" class="dialog">
                <!-- add node dialog -->
                <div class="dialog-form tight-form-func" id="add_node_dialog" data-testid="${Nf.map}">
                  <form id='add_node_form'>
                    <table>
                      <tr>
                        <td class="heading-container" colspan="4">
                        <h2>${this._selectedType=="nodes"&&this._selectedObject?"Edit Node":"Add a Node"}</h2>
                        </td>
                        <td class="right-aligned">
                          <input class='button' type='button' id='create_node_cancel' value='Cancel' />
                          <input class='button' type='submit' id='create_node' value='${this._selectedType=="nodes"&&this._selectedObject?"Update Node":"Add Node"}' />
                        </td>
                      </tr>
                    </table>
                    <table>
                      <tr>
                        <td>
                          <label for='node_layer'>Layer</label>
                        </td>
                        <td>
                          <label for='node_name'>Name / ID</label>
                        </td>
                        <td>
                          <label for='node_display_name'>Display Name</label>
                        </td>
                        <td>
                          <label for="node_lat">Latitude</label>
                        </td>
                        <td>
                          <label for="node_lng">Longitude</label>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <select id="node_layer">
                            ${s}
                          </select>
                        </td>
                        <td>
                          <input class='text-input' id='node_name' type='text' required='required' value='${this.getFieldValue("nodes","name")}'></input>
                        </td>
                        <td>
                          <input class='text-input' id='node_display_name' type='text' value='${this.getFieldValue("nodes","display_name")}'></input>
                        </td>
                        <td>
                          <input class='text-input' id='node_lat' type='number' step='0.001' required='required' value='${this.getFieldValue("nodes","coordinate.0")}'></input>
                        </td>
                        <td>
                          <input class='text-input' id='node_lng' type='number' step='0.001' required='required' value='${this.getFieldValue("nodes","coordinate.1")}'></input>
                        </td>
                      </tr>
                    </table>
                    <table>
                      <tr>
                        <td>
                          <label for="node_children">Child Nodes</label>
                        </td>
                        <td>
                          <label for="node_svg">SVG Icon</label>
                        </td>
                        <td>
                          <label for="node_tooltip">Custom Tooltip</label>
                        </td>
                      </tr>
                      <tr>
                        <td><select id='node_children' multiple>${this.renderChildNodeOptions(this.getFieldValue("nodes","name"),this.getFieldValue("nodes","children"))}</select></td>
                        <td>
                          <textarea class='text-input' id='node_svg'>${this.getFieldValue("nodes","meta.svg")}</textarea>
                        </td>
                        <td>
                          <textarea class='text-input' id='node_tooltip'>${this.getFieldValue("nodes","meta.template")}</textarea>
                        </td>
                      </tr>
                    </table>
                  </form>
                </div>
                <!-- add edge dialog -->
                <div class='dialog-form tight-form-func' id="add_edge_dialog">
                  <form>
                    <table>
                        <tr>
                            <td class='heading-container'>
                            <h2>Add an Edge</h2>
                            </td>
                            <td class="right-aligned">
                              <input class="button" type="button" id="create_edge_cancel" value="Cancel" />
                              <input class="button" type="button" id="create_edge" value="Create Edge" />
                            </td>
                        </tr>
                    </table>
                    <table>
                      <tr>
                        <td>
                          <label for="edge_layer">Layer:</label>
                        </td>
                        <td>
                          <label for="node_source">Source:</label>
                        </td>
                        <td>
                          <label for="node_destination">Destination:</label>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <select id="edge_layer">
                            ${s}
                          </select>
                        </td>
                        <td>${this.renderSrcDstOptions("node_source")}</td>
                        <td>${this.renderSrcDstOptions("node_destination")}</td>
                      </tr>
                    </table>
                  </form>
                </div>
            </div>
            <div class="button-overlay">
              <div role='button' aria-label='Edit Edges: ${this._edgeEditMode?"On":"Off"}' class='button edit-mode-only tight-form-func' id='edge_edit_mode' data-testid='${Nf.editEdgeToggleBtn}'>
                Edit Edges: ${this._edgeEditMode?"On":"Off"}
              </div>
              <div role='button' aria-label='Edit Nodes: ${this._nodeEditMode?"On":"Off"}' class='button edit-mode-only tight-form-func' id='node_edit_mode' data-testid='${Nf.editNodeToggleBtn}'>
                Edit Nodes: ${this._nodeEditMode?"On":"Off"}
              </div>
            </div>
            <div class="tools-overlay">
              <div class='button edit-mode-only tight-form-func' id='add_node' data-testid='${Nf.addNodeBtn}'>
                +&nbsp;Node
              </div>
              <div class='button edit-mode-only tight-form-func' id='add_edge' data-testid='${Nf.addEdgeBtn}'>
                +&nbsp;Edge
              </div>
              <div class='button edit-mode-only tight-form-func' id='delete_selection' style='${this._selectedObject&&this._selectedLayer!==null&&this._selectedType?"display: block":"display: none"}'>
                Delete<br>
                ${this._selectedObject&&this._selectedObject.name}
              </div>
            </div>
            `,this._formTouched&&this.shadow.querySelector("#add_node_form").replaceWith(o),this.bindEvents({"#dialog@onmousedown":this.disableScrolling,"#dialog@onmouseup":this.enableScrolling,"#edge_edit_mode@onclick":this.toggleEdgeEdit,"#node_edit_mode@onclick":this.toggleNodeEdit,".add_node_link@onclick":this.showAddNodeDialog,"#add_node@onclick":this.showAddNodeDialog,"#add_node_form@onsubmit":this.updateMapNodes,"#create_node_cancel@onclick":this.hideDialogs,"#node_layer@onchange":this.showSrcDst,"#add_edge@onclick":this.showAddEdgeDialog,"#create_edge@onclick":this.createMapEdge,"#create_edge_cancel@onclick":this.hideDialogs,"#edge_layer@onchange":this.showSrcDst,"#delete_selection@onclick":this.deleteSelection,"input.text-input@onkeyup":this.markFormTouched})}}customElements.get("esnet-map-editing-interface")||customElements.define("esnet-map-editing-interface",xB);class SB extends gC{constructor(){super(),this.instanceId=Math.random().toString(16).substr(2,8),this._mapCanvas={options:{},editingInterface:{}}}setMapCanvas(t){this._mapCanvas=t,this._mapCanvas.listen(ze.TOOLTIP_VISIBLE,this.showTooltip),this._mapCanvas.listen(ze.TOOLTIP_HIDDEN,this.hideTooltip),this._mapCanvas.listen(ze.EDITING_SET,()=>{this.render()}),this.render()}get mapCanvas(){return this._mapCanvas}toggleLayer(t){var n=t.target,o=n.id.split("-")[2],s=n.checked;const f={layer:o,visible:s};this.mapCanvas.emit(ze.LAYER_TOGGLED,f),this.mapCanvas.toggleLayer(o,s)}showTooltip(t){var n=t.text,o=this.shadow.querySelector("#sidebar-tooltip");o&&(o.style.opacity=1,o.innerHTML=n)}hideTooltip(){var t=this.shadow.querySelector("#sidebar-tooltip");t&&(t.innerHTML="")}renderValidityMessage(t){var n,o,s,f,g,w;return this.mapCanvas.options.topologySource=="json"?(s=(o=(n=this.mapCanvas)==null?void 0:n.jsonResults)==null?void 0:o[t])!=null&&s[0]?"JSON Schema valid":`JSON Schema invalid${(g=(f=this.mapCanvas.jsonResults)==null?void 0:f[t])!=null&&g[1]?": "+this.mapCanvas.jsonResults[t][1]:""}`:this.mapCanvas.options.topologySource=="layerurls"&&(w=this.mapCanvas)!=null&&w._remoteLayerErrors[t]?`${this.mapCanvas._remoteLayerErrorMessages[t]}`:""}render(){var o,s;this.shadow||(this.shadow=document.createElement("div"),this.shadow.setAttribute("class","tight-form-func esmap-sidebar"),this.shadow.id="sidebar-"+this.instanceId,this.append(this.shadow));let t="";for(let f=0;f<(((s=(o=this.mapCanvas)==null?void 0:o.options)==null?void 0:s.layerLimit)||g2);f++)!this.mapCanvas.options.layers||!this.mapCanvas.options.layers[f]||!this.mapCanvas.jsonResults||(t+=`<div class='toggle container' ${!this.mapCanvas.options.layers[f].legend&&"style='display: none;'"}>
        <label class="switch">
          <input type="checkbox" ${this.mapCanvas.options.layers[f].visible&&"checked"} id="sidebar-layer-${f}">
          <span class="slider round"></span>
        </label>
        <text class="legend-text">${this.mapCanvas.options.layers[f].name||"Layer "+(f+1)}</text>
        <div class="legend-text small" style="${this.mapCanvas.editingInterface&&!this.mapCanvas.editingInterface.editMode?"display: none":""}">
          ${this.renderValidityMessage(f)}
        </div>
      </div>`);this.shadow.innerHTML=`
      <style>
        #sidebar-${this.instanceId} .flow-tooltip {
          display: flex;
          align-items: center;
          grid-gap: 8px;
        }
        #sidebar-${this.instanceId} .flow-tooltip strong {
          font-weight: bold;
        }
        #sidebar-${this.instanceId} .flow-tooltip svg {
          height: 12px;
          width: 12px;
          stroke-width: 2px;
        }

        #sidebar-${this.instanceId} div.sidebar-tooltip {
            position: absolute;
            text-align: left;
            height: auto;
            font: sans-serif;
            pointer-events: none;
        }

         /* The switch - the box around the slider */
        #sidebar-${this.instanceId} .switch {
          position: relative;
          display: inline-block;
          width: 45px;
          height: 26px;
        }

        /* Hide default HTML checkbox */
        #sidebar-${this.instanceId} .switch input {
          opacity: 0;
          width: 0;
          height: 0;
          margin-top: 5px;
        }

        /* The slider */
        #sidebar-${this.instanceId} .slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: #ccc;
          -webkit-transition: .4s;
          transition: .4s;
          border-radius: 25px;
        }

        #sidebar-${this.instanceId} .slider:before {
          position: absolute;
          content: "";
          height: 20px;
          width: 20px;
          left: 4px;
          bottom: 3px;
          background-color: white;
          -webkit-transition: .4s;
          transition: .4s;
          border-radius: 50%;
        }

        #sidebar-${this.instanceId} input:checked + .slider {
          background-color: #4EC1E0;
        }

        #sidebar-${this.instanceId} input:focus + .slider {
          box-shadow: 0 0 1px #4EC1E0;
        }

        #sidebar-${this.instanceId} input:checked + .slider:before {
          -webkit-transform: translateX(18px);
          -ms-transform: translateX(18px);
          transform: translateX(18px);
        }

        #sidebar-${this.instanceId} {
          font-family: sans-serif;
          padding: 0 1em;
          vertical-align: top;
          display: inline-block;
          ${this.mapCanvas.height&&"height: "+this.mapCanvas.height+"px;"}
          ${this.mapCanvas&&this.mapCanvas.width?`width: ${this.mapCanvas.width*.2}px;`:"width: 19%;"}
        }
        .toggle.container {
          display: block;
          margin-bottom: 8px;
          margin-top:8px;
          padding: 0 5px;
        }
        #sidebar-${this.instanceId} .legend-text {
          vertical-align: bottom;
          margin-bottom:3px;
          line-height: 27px;
          font-size: 14px;
        }
        #sidebar-${this.instanceId} .legend-text.small {
          vertical-align: bottom;
          color: #888;
          line-height: 12px;
          font-size: 12px;
          margin-top:3px;
        }
        #sidebar-${this.instanceId} h2 {
          margin-bottom: 5px;
          margin-top: 10px;
          font-size:20px;
        }
        #sidebar-tooltip p {
          margin: 0;
        }
      </style>
      <h2>Map Layers</h2>

      ${t}

      <h2>Tooltip</h2>
      <div class="sidebar-tooltip" id="sidebar-tooltip">
      </div>
    `;var n={};for(let f=0;f<Ml;f++){if(!this.mapCanvas.options.layers||!this.mapCanvas.options.layers[f])continue;let g=`#sidebar-layer-${f}@onchange`;n[g]=this.toggleLayer}this.bindEvents(n)}connectedCallback(){this.render()}}customElements.get("esnet-map-side-bar")||customElements.define("esnet-map-side-bar",SB);const c5={arcgis:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",attributes:{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",minZoom:2,maxZoom:10,ext:"png"}},usgs:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",attributes:{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'}},"esri.shaded":{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",attributes:{attribution:"Tiles &copy; Esri &mdash; Source: Esri",maxZoom:13}},geoportail:{url:"https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE={style}&TILEMATRIXSET=PM&FORMAT={format}&LAYER=ORTHOIMAGERY.ORTHOPHOTOS&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",attributes:{attribution:'<a target="_blank" href="https://www.geoportail.gouv.fr/">Geoportail France</a>',bounds:[[-75,-180],[81,180]],minZoom:2,maxZoom:19,apikey:"choisirgeoportail",format:"image/jpeg",style:"normal"}},"cartodb.labeled":{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attributes:{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}},"cartodb.unlabeled":{url:"https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png",attributes:{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}},opentopomap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attributes:{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}}},f5={"toner.boundaries":{url:"https://tiles.stadiamaps.com/tiles/stamen_toner_lines/{z}/{x}/{y}{r}.{ext}",attributes:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}}},d5={"toner.labels":{url:"https://tiles.stadiamaps.com/tiles/stamen_toner_labels/{z}/{x}/{y}{r}.{ext}",attributes:{attribution:'&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> &copy; <a href="https://www.stamen.com/" target="_blank">Stamen Design</a> &copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}}},xv=S6,EB=Bs,Iy="--";(function(){var e=Vv.prototype._initTile;Vv.include({_initTile:function(t){e.call(this,t);var n=this.getTileSize();t.style.width=n.x+.5+"px",t.style.height=n.y+.5+"px"}})})();const h5={height:My.number,width:My.number,startlat:My.number,startlng:My.number};class TB extends gC{constructor(){super(),this.instanceId=Math.random().toString(16).substr(2,8),this._topology=null,this._options=null,this._selection=!1,this._remoteLoaded=!1,this._data=null,this.map=null,this.leafletMap=null,this.jsonResults=[!1,!1,!1],this.legendMinimized=!1,this.userChangedMapFrame=!1,this.optionsCache={},this._layerTopologyCache={},this.pubsub=new EB(this),this._trafficFormat=tB,this._remoteLayerLoaded=[],this._remoteLayerErrors=[],this._remoteLayerErrorMessages=[],this._optionsToWatch=["background","tileset.geographic","tileset.boundaries","tileset.labels","showSidebar","showViewControls","showLegend","customLegend","customLegendValue","layerLimit","legendColumnLength","legendPosition","legendDefaultBehavior","thresholds","enableScrolling","enableEditing","enableNodeAnimation","enableEdgeAnimation","enableCustomNodeTooltip","enableCustomEdgeTooltip","customNodeTooltip","customEdgeTooltip","topologySource","configurationUrl","resolvedLat","resolvedLng","multiLayerNodeSnap"];for(let t=0;t<Ml;t++)this._optionsToWatch=this._optionsToWatch.concat([`layers[${t}].visible`,`layers[${t}].color`,`layers[${t}].endpointId`,`layers[${t}].nodeHighlight`,`layers[${t}].nodeWidth`,`layers[${t}].mapjson`,`layers[${t}].edgeWidth`,`layers[${t}].pathOffset`,`layers[${t}].name`,`layers[${t}].legend`,`layers[${t}].remoteUrl`,`layers[${t}].dstFieldLabel`,`layers[${t}].srcFieldLabel`,`layers[${t}].dataFieldLabel`,`layers[${t}].nodeThresholds`,`layers[${t}].autodetect.dstNameColumn`,`layers[${t}].autodetect.dstLatitudeColumn`,`layers[${t}].autodetect.dstLongitudeColumn`,`layers[${t}].autodetect.srcNameColumn`,`layers[${t}].autodetect.srcLatitudeColumn`,`layers[${t}].autodetect.srcLongitudeColumn`]);this._urlMaskedOptions={showLegend:"masked",legendColumnLength:"masked",legendPosition:"masked",legendDefaultBehavior:"masked",customEdgeTooltip:"masked",customNodeTooltip:"masked",enableCustomEdgeTooltip:"masked",enableCustomNodeTooltip:"masked",enableEdgeAnimation:"masked",enableNodeAnimation:"masked",enableScrolling:"masked",showViewControls:"masked",showSidebar:"masked",thresholds:"masked",multiLayerNodeSnap:"masked",configurationUrl:"masked"},this._urlMaskedLayerOptions={nodeThresholds:"masked",nodeNameMatchField:"masked",nodeValueField:"masked",srcField:"masked",dstField:"masked",inboundValueField:"masked",outboundValueField:"masked",dashboardNodeVar:"masked",dashboardEdgeSrcVar:"masked",dashboardEdgeDstVar:"masked",endpointId:"masked"}}setSelection(t){this.selection=!0,this.emit(ze.SELECTION_SET,t)}showTooltip(t,n){this.emit(ze.TOOLTIP_VISIBLE,{event:t,text:n})}hideTooltip(){this.emit(ze.TOOLTIP_HIDDEN)}showEditNodeDialog(t,n,o){this.emit(ze.private.EDIT_NODE_DIALOG_VISIBLE,{object:t,index:n,layer:o,type:"nodes"})}connectedCallback(){var s;this.pubsub.setID(this.id,this);let t=this;const n=()=>{let f={center:t.map.leafletMap.getCenter(),zoom:t.map.leafletMap.getZoom()};xv.global.publish(ze.RETURN_MAP_CENTER_AND_ZOOM,f),t.emit(ze.RETURN_MAP_CENTER_AND_ZOOM,f)},o=()=>{let f={coordinates:t.map.leafletMap.getBounds()};xv.publish(ze.RETURN_VIEWPORT,f),t.emit(ze.RETURN_VIEWPORT,f)};xv.global.subscribe(ze.REQUEST_MAP_CENTER_AND_ZOOM,(()=>n)()),this.listen(ze.REQUEST_MAP_CENTER_AND_ZOOM,n),xv.global.subscribe(ze.REQUEST_VIEWPORT,(()=>o)()),this.listen(ze.REQUEST_VIEWPORT,o),window.addEventListener("resize",()=>{this.recalculateMapZoom()}),!this.topology&&this.getAttribute("topology")&&(this.topology=JSON.parse(this.getAttribute("topology"))),!this.options&&this.getAttribute("options")&&(this.options=JSON.parse(this.getAttribute("options"))),(s=this.options)!=null&&s.legendDefaultBehavior&&(this.legendMinimized=this.options.legendDefaultBehavior==="minimized"),this.maybeFetchOptionsAndTopology(),this.setEditModeFromUrl(),this.render()}get topology(){return this._topology}setTopology(t){let n=!!this._topology;return this._topology=t,n&&this.render(),this.emit(ze.TOPOLOGY_UPDATED,t),t}get options(){return this._options?this._options:{}}setOptions(t){var s;let n=t;((s=this._options)==null?void 0:s.topologySource)==="url"&&t.topologySource==="url"&&(n={...this._options},Object.keys(t).forEach(f=>{if(f=="layers"){for(let g=0;g<Ml;g++)t.layers[g]&&Object.keys(t.layers[g]).forEach(w=>{this._urlMaskedLayerOptions[w]&&(n.layers[g][w]=t.layers[g][w])});return}this._urlMaskedOptions[f]&&(n[f]=t[f])}));let o=this.calculateOptionsChanges(n);if(o.length)return this._options=n,this.updateMapOptions({options:n,changed:o}),this.matchTraffic(),this.setEditModeFromUrl(),this.emit(ze.OPTIONS_UPDATED,JSON.parse(JSON.stringify(this._options))),n}setEditModeFromUrl(){const t=TL();t.editPanel===null||t.editPanel===void 0||!this.options.enableEditing?this.setEditMode(null):this.setEditMode(this.lastValue(ze.EDITING_SET)||"edge")}calculateOptionsChanges(t){let n=[];return this._optionsToWatch.forEach(o=>{let s=qv(this._options,o),f=qv(t,o);s!==f&&n.push(o)}),n}get jsonResults(){return this._jsonResults}set jsonResults(t){this._jsonResults=t}get updateOptions(){return this._updateOptions}set updateOptions(t){return this._updateOptions=t,t}get height(){return this._height}set height(t){return this._height=t,t}get width(){return this._width}set width(t){return this._width=t,t}get startlat(){return this._startlat}set startlat(t){return this._startlat=t,this.refresh(),t}get startlng(){return this._startlng}set startlng(t){return this._startlng=t,this.refresh(),t}set selection(t){this._selection=t,this.renderStyle()}get selection(){return this._selection}filterTraffic(t){var s,f;let n=[],o={};return(f=(s=this._options)==null?void 0:s.layers)==null||f.forEach((g,w)=>{g&&t.forEach(y=>{if(!(g!=null&&g.srcField)&&!(g!=null&&g.dstField))return;let E=null;g!=null&&g.srcField&&(g!=null&&g.dstField)&&(E=`${y[g.srcField]}${Iy}${y[g.dstField]}`),E||(E=`${y[g.srcField]}`),E||(E=`${y[g.dstField]}`),o[E]||(o[E]=y)})}),Object.keys(o).forEach(g=>{n.push(o[g])}),n.length<1?t:n}get traffic(){return this._traffic}setTraffic(t){var n,o,s;if(this._traffic=this.filterTraffic(t),((n=this._options)==null?void 0:n.topologySource)=="autodetect"){for(let f=0;f<Ml;f++)(s=(o=this._topology)==null?void 0:o[f])!=null&&s.autodetected&&delete this._topology[f].autodetected;this.render()}return this.matchTraffic(),this.render(),this.emit(ze.TRAFFIC_UPDATED,JSON.parse(JSON.stringify(this._traffic))),this._traffic}matchTraffic(){var t,n;(n=(t=this._options)==null?void 0:t.layers)==null||n.forEach((o,s)=>{var y,E,M,N,R;let f=(y=this._topology)==null?void 0:y[s];if(!f||!this._traffic||!this._traffic.length||!o.visible)return;let g={};if((E=f==null?void 0:f.edges)==null||E.forEach((F,$)=>{var Z;let V=o.endpointId;((Z=this._options)==null?void 0:Z.topologySource)==="autodetect"&&(V="names");let X=F.meta.endpoint_identifiers[V];(X==null?void 0:X.length)>1?(F.nodeA=X[0],F.nodeZ=X[1],F._matchname=`${F.nodeA}${Iy}${F.nodeZ}`):F._matchname=`${X==null?void 0:X[0]}`,g[F._matchname]=$}),!o.srcField&&!o.dstField)return;let w={};(M=f==null?void 0:f.nodes)==null||M.forEach((F,$)=>{F.inTraffic=0,F.outTraffic=0,F.color=o.color,w[F.name]=$}),(N=this._traffic)==null||N.forEach(F=>{let $=`${F[o.srcField]}${Iy}${F[o.dstField]}`,V=`${F[o.dstField]}${Iy}${F[o.srcField]}`,X=`${F[o.srcField]}`,Z=f.edges[g[$]],D={in:o.inboundValueField,out:o.outboundValueField};Z||(Z=f.edges[g[V]],D={in:o.outboundValueField,out:o.inboundValueField}),Z||(Z=f.edges[g[X]]),!Z&&w.hasOwnProperty(X)&&(Z={nodeA:X}),Z&&(Z.azValue=F[D.in],Z.azDisplayValue=this._trafficFormat(F[D.in]),Z.azColor=this._trafficColor(F[D.in],this._options.thresholds,o.color),Z.zaValue=F[D.out],Z.zaDisplayValue=this._trafficFormat(F[D.out]),Z.zaColor=this._trafficColor(F[D.out],this._options.thresholds,o.color),Z&&Z.nodeA&&w.hasOwnProperty(Z.nodeA)&&(f.nodes[w[Z.nodeA]].inTraffic+=F[D.in],f.nodes[w[Z.nodeA]].outTraffic+=F[D.out]),Z&&Z.nodeZ&&w.hasOwnProperty(Z.nodeZ)&&(f.nodes[w[Z.nodeZ]].outTraffic+=F[D.in],f.nodes[w[Z.nodeZ]].inTraffic+=F[D.out]))}),(R=f==null?void 0:f.nodes)==null||R.forEach((F,$)=>{let V=Math.max.apply(Math,[F.inTraffic,F.outTraffic]);F.inValue=this._trafficFormat(F.inTraffic),F.outValue=this._trafficFormat(F.outTraffic),F.color=this._trafficColor(V,o.nodeThresholds,o.color)})})}setTrafficFormat(t){this._trafficFormat=t,this.matchTraffic()}get trafficFormat(){return this._trafficFormat}_trafficColor(t,n,o){let s=o;return n!=null&&n.steps&&(n=n.steps),n==null||n.forEach(f=>{t>=f.value&&(s=f.color)}),s}setTrafficColor(t){this._trafficColor=t}get trafficColor(){return this._trafficColor}listen(t,n){this.pubsub.subscribe(t,n,this)}emit(t,n){this.pubsub.publish(t,n,this)}lastValue(t){return this.pubsub.last(t,this)}clearLast(t){return this.pubsub.clearLast(t,this)}static get observedAttributes(){return Object.keys(h5)}attributeChangedCallback(t,n,o){n!=o&&o!=this[t]&&(this[t]=h5[t](o))}clearSelection(){this.selection=!1,this.clearLast(ze.SELECTION_SET),this.emit(ze.VARIABLES_SET,null),this.emit(ze.SELECTION_CLEARED,null),xv.global.clearLast(ze.SELECTION_SET)}setEditMode(t){if(["node","edge","off",null].indexOf(t)<0)throw new Error("Edit mode must be 'edge', 'node', 'off' or null");this.emit(ze.EDITING_SET,t)}enableScrolling(){this.leafletMap&&this.leafletMap.dragging.enable(),this.emit(ze.SCROLLING_TOGGLED,!0)}disableScrolling(){this.leafletMap&&this.leafletMap.dragging.disable(),this.emit(ze.SCROLLING_TOGGLED,!1)}fetchAndCacheConfigurationUrl(){this._remoteLoaded=!0,this._remoteLoadError=!1,this._remoteLoadErrorMessage="";let t=this;function n(){let o={...t._options,...t.optionsCache[t.options.configurationUrl]};Object.keys(o).forEach(g=>{if(g=="layers"){for(let w=0;w<Ml;w++)o.layers[w]&&Object.keys(o.layers[w]).forEach(y=>{t._urlMaskedLayerOptions[y]||(t._options.layers[w][y]=o.layers[w][y])});return}t._urlMaskedOptions[g]||(t._options[g]=o[g])}),t._options.enableEditing=!1,t.setEditMode("edge");let s=[];for(var f=0;f<o.layers.length;f++)s.push(JSON.parse(o.layers[f].mapjson));t._topology=s,t.emit(ze.TOPOLOGY_LOAD_SUCCESS,t._topology),t._remoteLoaded=!0,t.shadow.remove(),t.shadow=null,t.matchTraffic(),t.render(),t.refresh(),t.sideBar&&t.sideBar.render()}if(t.optionsCache[t.options.configurationUrl]){n();return}fetch(this.options.configurationUrl).then(o=>{o.json().then(s=>{t.optionsCache[t.options.configurationUrl]=s,n()})}).catch(o=>{t._remoteLoaded=!0,t._remoteLoadError=!0,t._remoteLoadErrorMessage=`Remote URL:
${this.options.configurationUrl}

Error Message:
${o}`,t.emit(ze.TOPOLOGY_LOAD_FAILURE,this.options.configurationUrl),t.shadow.remove(),t.shadow=null,t.render()})}fetchAndCacheLayerTopologyUrls(){var s;this._remoteLayerLoaded=[],this._remoteLayerErrors=[],this._remoteLayerErrorMessages=[];let t=[],n=[];const o=(f,g,w)=>{n.push(g),this.emit(ze.LAYER_LOAD_SUCCESS,{layer:f,topology:g,url:w}),this._topology=n,this._remoteLayerLoaded[f]=!0,this.shadow.remove(),this.shadow=null,this.matchTraffic(),this.render(),this.refresh(),this.sideBar&&this.sideBar.render()};for(let f=0;f<(((s=this._options)==null?void 0:s.layerLimit)||g2);f++){let g=this._options.layers[f];if(t[f]=g==null?void 0:g.remoteUrl,!t[f]){this._remoteLayerLoaded[f]=!0,this._remoteLayerErrors[f]=!0,this._remoteLayerErrorMessages[f]=`Malformed Topology URL: '${t[f]}'`,this.emit(ze.LAYER_LOAD_FAILURE,{layer:f,url:t[f]});continue}if(this._layerTopologyCache.hasOwnProperty(t[f])){let w=JSON.parse(this._layerTopologyCache[t[f]]);o(f,w,t[f]);continue}fetch(t[f]).then(w=>{w.json().then(y=>{this._layerTopologyCache[t[f]]=JSON.stringify(y),o(f,y,t[f])}).catch(y=>{this._remoteLayerLoaded[f]=!0,this._remoteLayerErrors[f]=!0,this._remoteLayerErrorMessages[f]=`Invalid JSON from '${t[f]}'`,this.emit(ze.LAYER_LOAD_FAILURE,{layer:f,url:t[f]}),this.sideBar&&this.sideBar.render()})}).catch(w=>{this._remoteLayerLoaded[f]=!0,this._remoteLayerErrors[f]=!0,this._remoteLayerErrorMessages[f]=`Failed to load '${t[f]}'`,this.emit(ze.LAYER_LOAD_FAILURE,{layer:f,url:t[f]}),this.sideBar&&this.sideBar.render()})}}maybeFetchOptionsAndTopology(){var t,n;((t=this.options)==null?void 0:t.topologySource)=="url"&&this.fetchAndCacheConfigurationUrl(),((n=this.options)==null?void 0:n.topologySource)=="layerurls"&&this.fetchAndCacheLayerTopologyUrls()}updateMapOptions(t){var f;var{options:n,changed:o}=t;function s(g,w){return w.map(E=>E.replace(/\[\d+\]/,"[]")).indexOf(g)>=0}s("topologySource",o)&&(this._options.topologySource=n.topologySource),s("configurationUrl",o)&&(this._options.configurationUrl=n.configurationUrl,this._remoteLoaded=!1),(s("topologySource",o)||s("configurationUrl",o)||s("layers[].remoteUrl",o))&&((f=this.shadow)==null||f.remove(),this.shadow=null,this.render(),this.maybeFetchOptionsAndTopology()),o.forEach(g=>{AL(this._options,g,qv(n,g))}),(s("showLegend",o)||s("customLegend",o)||s("customLegendValue",o)||s("thresholds",o)||s("legendColumnLength",o)||s("legendPosition",o))&&this.renderLegend(),s("legendDefaultBehavior",o)&&(this.legendMinimized=n.legendDefaultBehavior==="minimized",this.renderLegend()),s("enableEditing",o)&&(n.enableEditing?this.setEditMode(this.lastValue(ze.EDITING_SET)||"edge"):this.setEditMode(null),this.shadow.remove(),this.shadow=null,this.render(),this.refresh()),(s("showSidebar",o)||s("showViewControls",o)||s("enableScrolling",o)||s("resolveLat",o)||s("resolveLng",o))&&(this.shadow.remove(),this.shadow=null,this.render(),this.refresh()),s("tileset.geographic",o)||s("tileset.boundaries",o)||s("tileset.labels",o)||s("layerLimit",o)?this.refresh():this.map&&this.map.renderMap(),(s("background",o)||s("enableNodeAnimation",o)||s("enableEdgeAnimation",o))&&this.renderStyle(),this.sideBar&&this.sideBar.render()}updateMapTopology(t){if(this._topology=t,this.editingInterface&&(this.editingInterface._topology=t),this.topology)this.jsonResults=this.topology.map(n=>oT(n));else{this.jsonResults=[];for(let n=0;n<Ml;n++)this.jsonResults.push([!1,"No Topology data available."])}this.sideBar&&this.sideBar.render(),this.map&&this.map.renderMap()}updateMapDimensions(t){this.width=t.width,this.height=t.height,this.recalculateMapZoom()}recalculateMapZoom(){if(this.leafletMap&&this.leafletMap.invalidateSize(),this.leafletMap&&!this.userChangedMapFrame&&this._options.initialViewStrategy==="viewport"){var t=Ur(Kt(this._options.viewport.top,this._options.viewport.left),Kt(this._options.viewport.bottom,this._options.viewport.right));this.leafletMap.fitBounds(t)}this.render(),this.sideBar&&this.sideBar.render()}updateCenter(t){var n=this._options;n.viewport={...n.viewport,zoom:t.zoom,center:{lat:t.center.lat.toFixed(2),lng:t.center.lng.toFixed(2)}},this._updateOptions&&this._updateOptions(n)}toggleLayer(t,n){var o=this._options;o.layers&&o.layers[t]?o.layers[t].visible=n:o.layers[t]={visible:n},this.map.renderMap(),this._updateOptions&&this._updateOptions(o)}autodetectTopology(){var t,n,o,s;if(this._traffic&&((t=this._options)==null?void 0:t.topologySource)=="autodetect"){this.options.enableEditing=!1,this._topology=[];for(let f=0;f<((n=this._options)==null?void 0:n.layers.length);f++){if((s=(o=this._topology)==null?void 0:o[f])!=null&&s.autodetected)continue;let g={nodes:[],edges:[],nodeHash:{},pathLayout:{type:"curveBasis"},autodetected:!0};this._traffic.forEach(w=>{var he;this._options.layers[f].endpointId="names";let y=(he=this._options)==null?void 0:he.layers[f].autodetect;if(!y)return;let E=y.srcNameColumn,M=y.srcLatitudeColumn,N=y.srcLongitudeColumn,R=y.dstNameColumn,F=y.dstLatitudeColumn,$=y.dstLongitudeColumn,V={name:E&&w[E]?w[E]:`${w[M]}:${w[N]}`,coordinate:[parseFloat(w[M]),parseFloat(w[N])],meta:{}},X={name:R&&w[R]?w[R]:`${w[F]}:${w[$]}`,coordinate:[parseFloat(w[F]),parseFloat(w[$])],meta:{}};g.nodeHash[V.name]=V,g.nodeHash[X.name]=X;let Z=V.coordinate[0]-X.coordinate[0],D=V.coordinate[1]-X.coordinate[1],z=Math.sqrt(D**2+Z**2),H=[X.coordinate[0]+(Z/2+.12*z),X.coordinate[1]+D/2],se={name:`${V.name}--${X.name}`,coordinates:[V.coordinate,H,X.coordinate],meta:{endpoint_identifiers:{names:[V.name,X.name]}}};g.edges.push(se)}),g.nodes=Object.values(g.nodeHash),this._topology[f]=g}}}getCurrentLeafletMap(){var f,g,w,y,E,M,N,R,F,$;if(!this.leafletMap){var t=[this.startlat||((w=(g=(f=this._options)==null?void 0:f.viewport)==null?void 0:g.center)==null?void 0:w.lat),this.startlng||((M=(E=(y=this._options)==null?void 0:y.viewport)==null?void 0:E.center)==null?void 0:M.lng)],n=((R=(N=this._options)==null?void 0:N.viewport)==null?void 0:R.zoom)||3;window[this.id+"mapPosition"]&&window[this.id+"mapPosition"].center&&(t=window[this.id+"mapPosition"].center),window[this.id+"mapPosition"]&&window[this.id+"mapPosition"].zoom&&(n=window[this.id+"mapPosition"].zoom),this.leafletMap=vF(this.mapContainer,{zoomAnimation:!1,fadeAnimation:!1,zoomSnap:.125,zoomDelta:.125,scrollWheelZoom:!1,doubleClickZoom:!1,keyboard:!1,dragging:(F=this._options)==null?void 0:F.enableScrolling,zoomControl:($=this._options)==null?void 0:$.showViewControls}).setView(t,n),this._options.tileset.geographic&&Qy(c5[this._options.tileset.geographic].url,c5[this._options.tileset.geographic].attributes).addTo(this.leafletMap),this._options.tileset.boundaries&&Qy(f5[this._options.tileset.boundaries].url,f5[this._options.tileset.boundaries].attributes).addTo(this.leafletMap),this._options.tileset.labels&&Qy(d5[this._options.tileset.labels].url,d5[this._options.tileset.labels].attributes).addTo(this.leafletMap),!window[this.id+"mapPosition"]&&this._options.initialViewStrategy==="viewport"&&this.leafletMap.fitBounds(Ur(Kt(this._options.viewport.top,this._options.viewport.left),Kt(this._options.viewport.bottom,this._options.viewport.right))),mL({clickable:!0}).addTo(this.leafletMap)}let o=this.querySelector(".leaflet-control-zoom-in");o==null||o.classList.add("tight-form-func"),o==null||o.setAttribute("data-testid",Nf.zoomInBtn),o==null||o.addEventListener("click",()=>{this.userChangedMapFrame=!0});let s=this.querySelector(".leaflet-control-zoom-out");return s==null||s.classList.add("tight-form-func"),s==null||s.setAttribute("data-testid",Nf.zoomOutBtn),s==null||s.addEventListener("click",()=>{this.userChangedMapFrame=!0}),this.leafletMap.on("zoomend",V=>{window[this.id+"mapPosition"]||(window[this.id+"mapPosition"]={}),window[this.id+"mapPosition"].zoom=this.leafletMap.getZoom()}),this.leafletMap.on("move",V=>{V.originalEvent&&(this.userChangedMapFrame=!0)}),this.leafletMap.on("moveend",()=>{window[this.id+"mapPosition"]||(window[this.id+"mapPosition"]={}),window[this.id+"mapPosition"].center=this.leafletMap.getCenter()}),this.leafletMap}destroyMap(){this.leafletMap&&(this.leafletMap.off(),this.leafletMap.remove(),this.leafletMap=null),this.map&&(this.map.destroy(),this.map=null),this.emit(ze.MAP_DESTROYED)}homeMap(){window[this.id+"mapPosition"]=null,this.refresh()}refresh(){if(this.topology)this.jsonResults=this.topology.map(n=>oT(n));else{this.jsonResults=[];for(let n=0;n<Ml;n++)this.jsonResults[n]=[!1,"No Topology data available."];return}this.sideBar&&this.sideBar.render(),this.destroyMap&&this.destroyMap(),this.map=new XF(this),this.emit(ze.MAP_CREATED),this.map.renderMap();var t=this.lastValue(ze.private.EDIT_MODE_SET);this.emit(ze.private.EDIT_MODE_SET,t)}renderStyle(){let t=this.shadow.querySelector("#mapstyle"),n=this._selection&&"inline-block"||"none",o=this.options.zIndexBase?this.options.zIndexBase:50,s=[];for(let f=0;f<=10;f++)s.push(o+f*10);t.innerHTML=`
      <style>

        .home-overlay { z-index: ${s[8]}; }
        .legend {  z-index: ${s[8]}; }
        .leaflet-zoom-box { z-index: ${s[8]}; }
        .leaflet-pane         { z-index: ${s[4]}; }

        .leaflet-tile-pane    { z-index: ${s[1]}; }
        .leaflet-overlay-pane { z-index: ${s[3]}; }
        .leaflet-shadow-pane  { z-index: ${s[4]}; }
        .leaflet-marker-pane  { z-index: ${s[5]}; }
        .leaflet-tooltip-pane   { z-index: ${s[6]}; }
        .leaflet-popup-pane   { z-index: ${s[7]}; }

        .leaflet-map-pane canvas { z-index: ${s[0]}; }
        .leaflet-map-pane svg    { z-index: ${s[1]}; }
        .leaflet-control { z-index: ${s[8]}; }
        .leaflet-bottom { z-index: ${s[9]}; }

          #map-${this.instanceId} {
            font-family: sans-serif;
            position:relative;
            background: ${this.options.background};
            display: inline-block;
          }
          #map-${this.instanceId} > .home-overlay > .button.selected-only {
              display: ${n}
          }
          #map-${this.instanceId} td {
            padding-left: 0;
            padding-right: 0;
          }

          ${this.options.enableNodeAnimation?`
          .animated-node {
            animation-name: throb;
            animation-duration: 1.5s;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
          }

          @keyframes throb {
            0% {transform:scale(1.5, 1.5);}
            50% {transform:scale(1.0, 1.0); }
            100% {transform:scale(1.5, 1.5); }
          }
          `:""}
          ${this.options.enableEdgeAnimation?`
          g.dash-over polygon {
            animation-name: crawl;
            animation-duration: 0.5s;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
          }

          g.dash-selected polygon {
            animation-name: crawl;
            animation-duration: 0.5s;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
          }

          @keyframes crawl {
            0% {transform:translate(0,0);}
            100% {transform:translate(12px,0); }
          }`:""}
      </style>
    `}valueFormat(t,n){if(n==null&&(n="b"),t=parseInt(t,10),t===0)return"0";let o=Math.floor(Math.log(t)/Math.log(1024)),f=["","K","M","G","T","P","E","Z","Y"][o];return{text:(t/Math.pow(1024,o)).toFixed(2),suffix:f+n}}legendFormatter(t,n){t===-1/0&&(t=null);var o=this.valueFormat(t||n);return t?` ${o.text} ${o.suffix}`:`${o.text} ${o.suffix} or below`}toggleMinimizeLegend(){this.legendMinimized=!this.legendMinimized,this.renderLegend()}renderLegend(){let t=this.shadow.querySelector("#legend-container"),n="";if(!this.options.showLegend){t.innerHTML=n;return}let o=[],s=this.options.legendColumnLength?this.options.legendColumnLength:3,f=this.options.thresholds;if(n=`<div class='tight-form-func legend ${this.options.legendPosition}'>
      <div class='heading'>
        <h4>Legend</h4>
        <svg class='minimize' version="1.1" xmlns="http://www.w3.org/2000/svg" height="16" width="16">
          <g transform='scale(1.4) translate(0 0.5)'>
          <circle class='circle-background' cx="5" cy="5" r="5" />
          <polyline points="${this.legendMinimized?"3,6.5 5,3.5 7,6.5":"3,3.5 5,6.5 7,3.5"}" fill="#FFFFFF" stroke="#FFFFFF" />
          </g>
        </svg>
      </div>`,this.legendMinimized){n+="</div>",t.innerHTML=n,this.bindEvents({".minimize@onclick":this.toggleMinimizeLegend});return}if(this.options.customLegend)n+=this.options.customLegendValue;else{for(let E=0;E<f.length;E++){E%s==0&&o.push([]);var g=o.length-1,w=f[E].value,y=f[E+1]?f[E+1].value:null;o[g].push(`<div class='legend-entry'>
          <p>
            <span class='color-sample' style='background-color: ${f[E].color}'></span>
            ${this.legendFormatter(w,y)}
          </p>
        </div>`)}o.forEach(E=>{n+="<div class='legend-column'>",E.forEach(M=>{n+=M}),n+="</div>"})}n+="</div>",t.innerHTML=n,this.bindEvents({".minimize@onclick":this.toggleMinimizeLegend})}render(){if(this.autodetectTopology(),!this.shadow){this._selection=!!this.lastValue(ze.SELECTION_SET),this.shadow=document.createElement("div"),this.append(this.shadow);let t=m2(eB,{instanceId:`map-${this.instanceId}`});this.shadow.innerHTML=`
      <style>
        ${t}
      </style>
      <style>
        ${QF}
      </style>
      <div id='mapstyle'>
      </div>


      <div id='map-${this.instanceId}'>
        <div class="loading-overlay" style="display: ${this.options.topologySource!="url"||this._remoteLoaded?"none":"flex"}">
          Loading Topology Data...
        </div>
        <div class="error-overlay" style="display: ${this.options.topologySource==="url"&&this._remoteLoadError?"flex":"none"}">
          <div style='width:50%; margin:auto; padding-top:10px;'>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style='margin: 0 3px -7px 0'>
          <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"/><path d="M12 9v4"/><path d="M12 17h.01"/>
          </svg>
          An error occured while loading Topology Data<br /><br />
          Check your network connection.<br /><br />

          Error details:<br />
          <pre>${this._remoteLoadErrorMessage}</pre>
          </div>
        </div>
        <div class='home-overlay'>
            <div class="button tight-form-func" id="home_map" ${this.options.showViewControls?"":"style='display:none;'"}>
              
            </div>
            <div class='button selected-only tight-form-func' id='clear_selection'">
              &times; Clear Selection
            </div>
        </div>
        <div class='legend-overlay'>
          <div id='legend-container'>
          </div>
        </div>
        ${this.options.enableEditing&&this.options.topologySource=="json"?"<esnet-map-editing-interface></esnet-map-editing-interface>":""}
      </div>
      ${this.options.showSidebar?"<esnet-map-side-bar></esnet-map-side-bar>":""}`,this.mapContainer=this.shadow.querySelector(`#map-${this.instanceId}`),this.editingInterface=this.shadow.querySelector("esnet-map-editing-interface"),this.editingInterface&&(this.editingInterface.setMapCanvas(this),this.editingInterface.topology=this.topology),this.sideBar=this.shadow.querySelector("esnet-map-side-bar"),this.sideBar&&this.sideBar.setMapCanvas(this),typeof ResizeObserver<"u"&&new ResizeObserver(()=>{this.recalculateMapZoom()}).observe(this.shadow)}this.renderStyle(),this.renderLegend(),this.height&&(this.mapContainer.style.height=this.height+"px"),this.width?this.options.showSidebar?this.mapContainer.style.width=this.width*.8-5+"px":this.mapContainer.style.width=this.width+"px":this.options.showSidebar?this.mapContainer.style.width="77%":this.mapContainer.style.width="100%",!this.map&&this._options&&this.topology&&this.refresh(),this.map&&this.map.renderMap(),this.bindEvents({"#home_map@onclick":this.homeMap,"#clear_selection@onclick":this.clearSelection})}}customElements.get("esnet-map-canvas")||customElements.define("esnet-map-canvas",TB);const Yf=e=>e.visible?S("div",{className:"modal-background",onClick:t=>{e.dismiss()},children:te("div",{className:e.className||"modal-dialog",onClick:t=>{t.stopPropagation()},children:[S("div",{className:"panel-header compound justify",children:te("div",{className:"compound w-full",children:[e.header,S("div",{onClick:e.dismiss,children:S(st,{name:"x-circle",className:"icon btn p-1 stroke-esnetblue-100"})})]})}),S("div",{className:"panel-body",children:S("div",{className:"w-full",children:e.children})}),S("div",{className:"panel-footer",children:S("div",{className:"flex flex-row w-full justify-between",children:e.footer})})]})}):S(Wn,{}),CB=e=>{let t="Map Output",n=te(Wn,{children:[S("span",{}),te("div",{className:"compound hover:bg-mauve-200 cursor-pointer rounded-lg",onClick:e.dismiss,children:[S(st,{name:"check-square",className:"icon btn small p-1 stroke-esnetblack-700"}),S("div",{className:"py-1 pr-3 text-esnetblack-700",children:"Done"})]})]}),[o,s]=J.useState(IA[0].value),[f,g]=J.useState(""),[w,y]=J.useState("");const E=R=>{switch(R){case"grafana":return`${Dt}/public/output/map/${e.map.mapId}/`;case"svg":return`${Dt}/output/map/${e.map.mapId}/svg/`;case"html-svg":return`<img src='${Dt}/output/map/${e.map.mapId}/svg/' />`;case"iframe":return`<iframe src="${Dt}/output/map/${e.map.mapId}/iframe/" />`;case"html-script":return`<script src="${Dt}/output/map/${e.map.mapId}/javascript/"><\/script>
<script>
document.appendChild(terranova.maps["${e.map.mapId}"]);
<\/script>`;case"html-component":return`<script src="${Dt}/output/bootstrap/"><\/script>
<esnet-networkmap-panel configuration="${Dt}/output/map/${e.map.mapId}/json/" />`;case"react":return`import { NetworkMapPanel } from "esnet-networkmap-panel";

function ExampleWrapperComponent(){
    return <NetworkMapPanel configuration="${Dt}">
}`;case"web-component":return`import "esnet-networkmap-panel";

let elem = document.createElement("esnet-networkmap-panel");
elem.setProperty("configuration", "${Dt}")

// you'll probably want to append this to a target element instead
document.appendChild(elem);`}},M=async()=>{let R={"Content-type":"application/json"};R=Tr(R);let F=null;try{let V=await fetch(`${Dt}/output/map/${e.map.mapId}/svg/`,{headers:R});V.ok&&(F=await V.text())}catch{console.error("Error fetching SVG for map")}let $=window.URL.createObjectURL(new Blob([F]));y($),g(F)};J.useEffect(()=>{o=="svg"&&M()},[o]),J.useEffect(()=>{s("grafana"),g("")},[e.visible]);const N=R=>{switch(R){case"grafana":case"html-svg":case"html-script":case"html-component":case"react":case"web-component":return te("div",{children:[S("textarea",{className:"output-preview",defaultValue:E(R)}),S("button",{className:"secondary",children:"Copy to Clipboard"})]});case"iframe":return te("div",{children:[S("textarea",{className:"output-preview",defaultValue:E(R)}),S("button",{className:"secondary mr-2",children:"Copy to Clipboard"}),S("button",{className:"primary",children:"Preview"})]});case"svg":return te("div",{children:[S("p",{className:"text-black my-2",children:"SVG Output"}),S("div",{className:"svg-target h-48 my-2",dangerouslySetInnerHTML:{__html:`${f}`}}),S("button",{className:"secondary mr-2",children:"Copy to Clipboard"}),S("a",{href:w,className:"btn primary text-esnetblack-400 hover:text-white focus:text-esnetblack-400",download:"Map_Output.svg",children:"Download"},`svgo-${w}`)]})}};return e.map.mapId?S(Yf,{visible:e.visible,dismiss:e.dismiss,header:t,footer:n,children:te("div",{className:"flex flex-row",children:[te("fieldset",{className:"w-5/12 mr-2",children:[S("p",{className:"tn-bold my-2 text-black",children:"Intended Output"}),S("select",{value:o,onChange:R=>{s(R.target.value)},children:IA.map(R=>S("option",{value:R.value,children:R.label}))}),S("p",{className:"my-2 tn-bold text-black",children:"Instructions"}),S("p",{children:fU[o]})]}),S("fieldset",{className:"w-6/12",children:N(o)},o)]})}):te(Yf,{header:t,footer:n,visible:e.visible,dismiss:e.dismiss,children:[S("h5",{children:"This map has not yet been saved."}),S("p",{children:"To get API map output, you must first save your map."})]})},kB=e=>{let t=pC(),[n,o]=J.useState(!1),[s,f]=J.useState(""),[g,w]=J.useState("confirmation");J.useEffect(()=>{o(!1),w("confirmation")},[e.visible]);const y=async()=>{var D;if(n)return;let V={"Content-type":"application/json"};if(t.user){const z=(D=t.user)==null?void 0:D.access_token;V.Authorization=`Bearer ${z}`}let X=null;o(!0);let Z=`${Dt}/map/id/${e.map.mapId}/publish/`;try{let z=await fetch(Z,{method:"post",headers:V});z.ok?(X=await z.text(),o(!1),w("success")):(w("error"),f(`Error during HTTP POST to to 
${Z}`))}catch{w("error"),f(`Network error during HTTP POST to to 
${Z}`)}};let E=S(Wn,{children:te("span",{children:[S(st,{name:"alert-triangle",className:"inline-block"})," Publish Map"]})}),M=te(Wn,{children:[te("div",{className:"compound btn cursor-pointer rounded-lg",onClick:e.dismiss,children:[S(st,{name:"x-square",className:"icon btn small p-1 stroke-esnetblack-500"}),S("div",{className:"py-1 pr-3",children:"Cancel"})]}),te("div",{className:"compound hover:bg-mauve-200 btn warning cursor-pointer rounded-lg",onClick:y,children:[S(st,{name:"check-square",className:"icon btn small p-1 stroke-white"}),S("div",{className:"py-1 pr-3 text-white",children:"Publish"})]})]});if((g=="success"||g=="error")&&(M=S(Wn,{children:te("div",{className:"compound hover:bg-mauve-200 cursor-pointer rounded-lg p-1",onClick:e.dismiss,children:[S(st,{name:"check-square"}),"Done"]})})),!e.map.mapId)return te(Yf,{header:E,footer:M,visible:e.visible,dismiss:e.dismiss,className:"w-3/12",children:[S("h5",{children:"This map has not yet been saved."}),S("p",{children:"To publish a map, you must first save it."})]});let N=S("div",{className:"mr-2 p-6",children:"Map Published."}),R=te("div",{className:"mr-2 p-6",children:["Please confirm that you'd like to publish this map.",S("br",{}),S("br",{}),"This action will make:",te("ul",{className:"list-disc ml-6 block",children:[S("li",{children:"the current saved version of the map"}),S("li",{children:"coordinates of all visible objects"}),S("li",{children:"the results of dataset(s) used in the map"})]}),S("span",{className:"text-red-500",children:"visible to the public internet with no password protection."}),S("br",{}),S("br",{}),"Click ",S("strong",{className:"text-black",children:"Publish"})," below to proceed, or"," ",S("strong",{className:"text-black",children:"Cancel"})," to cancel."]}),F=te("div",{className:"mr-2 p-6",children:["An error occurred while publishing the map.",S("br",{}),S("br",{}),S("pre",{children:s})]});function $(V){switch(V){case"error":return F;case"success":return N;case"confirmation":default:return R}}return S(Yf,{visible:e.visible,dismiss:e.dismiss,header:E,footer:M,className:"w-3/12",children:S("div",{className:"flex flex-row place-content-center",children:$(g)})})},AB=[{label:"Map Tiles",value:"tiles"},{label:"Solid Color",value:"solid"}],p5=[{label:"Specify Static Center, No zoom on resize",value:"static"},{label:"Specify Lat/Lng Viewport, Zoom to fit on resize",value:"viewport"},{label:"Set Map Center from Variables, No Zoom on resize",value:"variables"}],m5=[{label:"[Blank Tileset]",value:null},{label:"ArcGIS Default Set",value:"arcgis"},{label:"Open Topography Map",value:"opentopomap"},{label:"USGS Satellite Imagery",value:"usgs"},{label:"ESRI World Shaded Relief",value:"esri.shaded"},{label:"Geoportail France",value:"geoportail"},{label:"CartoDB DarkMatter (Labeled)",value:"cartodb.labeled"},{label:"CartoDB DarkMatter (No Labels)",value:"cartodb.unlabeled"}],MB=e=>{var H,se,he,pe,ge,ke,be,Ue,it,Xe,Te,Fe,ot,Je,Le,Ye,Ze,ut,Qe,bn,At,hn,vt,xt,rt,ct,Ve,Ct,Jt,Be,at,ft,An,_n,ur,gr,Mn,Bn,Vn,Qn;let t=!1,n=fc();(H=n==null?void 0:n.user)!=null&&H.scope&&n.user.scope.indexOf(nw)>=0&&(t=!0);const{controller:o,instance:s}=J.useContext(MC),[f,g]=J.useState(!1),[w,y]=J.useState(!1),[E,M]=J.useState(!1),[N,R]=J.useState(0),[F,$]=J.useState("tiles"),[V,X]=J.useState(s.configuration.tileset),Z=Ke=>{$(Ke.target.value),Ke.target.value=="solid"?(X({...s.configuration.tileset}),z("tileset.geographic",null),z("tileset.political",null),z("tileset.boundaries",null)):V?(z("tileset.geographic",V.geographic||ap.configuration.tileset.geographic),z("tileset.political",V.political),z("tileset.boundaries",V.boundaries)):(z("tileset.geographic",ap.configuration.tileset.geographic),z("tileset.political",ap.configuration.tileset.political),z("tileset.boundaries",ap.configuration.tileset.boundaries))};J.useEffect(()=>{var Nn,Zn;let Ke=(Zn=(Nn=s==null?void 0:s.configuration)==null?void 0:Nn.tileset)!=null&&Zn.geographic?"tiles":"solid";$(Ke)},[s.configuration]);const D=(Ke,Nn)=>{let Zn=Nn.find(er=>er.value===Ke);return Zn===void 0?null:Zn.value};J.useEffect(()=>{e.mapCanvasRef.current&&!E&&(e.mapCanvasRef.current.listen(ze.RETURN_VIEWPORT,Ke=>{z("viewport.top",Ke.coordinates.getNorth().toFixed(3)),z("viewport.left",Ke.coordinates.getWest().toFixed(3)),z("viewport.bottom",Ke.coordinates.getSouth().toFixed(3)),z("viewport.right",Ke.coordinates.getEast().toFixed(3))}),e.mapCanvasRef.current.listen(ze.RETURN_MAP_CENTER_AND_ZOOM,Ke=>{z("viewport.center.lat",Ke.center.lat.toFixed(3)),z("viewport.center.lng",Ke.center.lng.toFixed(3)),z("viewport.zoom",Ke.zoom),R(Math.random())}),M(!0))},[e.mapCanvasRef.current]);const z=(Ke,Nn,Zn=null)=>{let er=Nn;Zn!==null&&(er=D(Nn,Zn)),o.setProperty(`configuration.${Ke}`,er);let Yr=e.mapCanvasRef.current.lastValue(ze.EDITING_SET),Kr=JSON.parse(JSON.stringify(s.configuration));Kr.enableEditing=!0,Kr.topologySource="json",e.mapCanvasRef.current.setOptions(Kr),e.mapCanvasRef.current.setEditMode(Yr)};return te("div",{id:"dataset-editor-sidebar",className:"w-4/12 2xl:w-2/12 p-2 pb-4",children:[S(CB,{map:o.instance,visible:f,dismiss:()=>{g(!1)}}),S(kB,{map:o.instance,visible:w,dismiss:()=>{y(!1)}}),t?te("button",{className:"w-full mt-2 tn-bold text-black",onClick:Ke=>{y(!0)},children:[S(st,{name:"arrow-up-to-line",className:"inline-block icon sm stroke-esnetblack-700"})," ","Publish Map"]}):null,S("button",{className:"w-full primary mt-2",onClick:Ke=>{g(!0)},children:"Get Map Output"}),S("div",{className:"relative opacity-50 h-4",children:te("label",{className:"absolute right-0",children:["Current Version: ",(se=o==null?void 0:o.instance)==null?void 0:se.version]},(he=o==null?void 0:o.instance)==null?void 0:he.version)}),S("label",{htmlFor:"map-background",children:"Background"}),S("div",{children:S("select",{id:"map-background",onChange:Z,className:"w-full",role:"listbox",value:F,children:AB.map(Ke=>S("option",{role:"option",value:Ke.value,children:Ke.label},`map-background-option-${Ke.value}`))})}),F==="tiles"?te("div",{children:[S("label",{htmlFor:"map-background-tiles",children:"Geographic Tileset"}),S("div",{children:S("select",{id:"map-background-tiles",onChange:Ke=>z("tileset.geographic",Ke.target.value,m5),className:"w-full",role:"listbox",defaultValue:MA(o.instance.configuration,"tileset.geographic"),children:m5.map(Ke=>S("option",{role:"option",value:String(Ke.value),children:Ke.label},`map-background-option-${String(Ke.value)}`))})})]}):te("div",{children:[S("label",{htmlFor:"map-background-tiles",children:"Background Color"}),S("div",{className:"color-chooser",children:S("input",{id:"color-select",type:"color",name:"color",className:"w-full",onChange:Ke=>z("background",Ke.target.value,null),defaultValue:s.configuration.background})})]}),S("label",{htmlFor:"map-viewstrat",children:"Map Initial Position"}),S("div",{children:S("select",{id:"map-viewstrat",onChange:Ke=>z("initialViewStrategy",Ke.target.value,p5),className:"w-full min-w-full",defaultValue:MA(o.instance.configuration,"initialViewStrategy"),children:p5.map(Ke=>S("option",{role:"option",value:String(Ke.value),children:Ke.label},`map-background-option-${String(Ke.value)}`))})}),s.configuration.initialViewStrategy==="viewport"?te("div",{children:[S("button",{className:"w-full secondary mt-2",onClick:Ke=>{e.mapCanvasRef.current.emit(ze.REQUEST_VIEWPORT)},children:"Set Viewport from Map State"}),te("div",{className:"flex flex-wrap items-stretch",children:[S("div",{className:"w-6/12 pr-1",children:te("fieldset",{className:"flex flex-wrap items-stretch",children:[S("legend",{className:"text-sm",children:"Top-left"}),te("div",{className:"w-6/12 pr-2 -mt-3",children:[S("label",{htmlFor:"viewport.top",children:"Latitude"}),S("div",{children:S("input",{type:"number",step:"0.01",name:"viewport.top",className:"w-full",onChange:Ke=>z("viewport.top",Ke.target.valueAsNumber,null),defaultValue:(ge=(pe=s.configuration)==null?void 0:pe.viewport)==null?void 0:ge.top})},`vpt-${(be=(ke=s.configuration)==null?void 0:ke.viewport)==null?void 0:be.top}`)]}),te("div",{className:"w-6/12 pl-2 -mt-3",children:[S("label",{htmlFor:"viewport.left",children:"Longitude"}),S("div",{children:S("input",{type:"number",step:"0.01",name:"viewport.left",className:"w-full",onChange:Ke=>z("viewport.left",Ke.target.valueAsNumber,null),defaultValue:(it=(Ue=s.configuration)==null?void 0:Ue.viewport)==null?void 0:it.left})},`vpl-${(Te=(Xe=s.configuration)==null?void 0:Xe.viewport)==null?void 0:Te.left}`)]})]})}),S("div",{className:"w-6/12 pl-1",children:te("fieldset",{className:"flex flex-wrap items-stretch",children:[S("legend",{className:"text-sm",children:"Bottom-Right"}),te("div",{className:"w-6/12 pr-2 -mt-3",children:[S("label",{htmlFor:"viewport.bottom",children:"Latitude"}),S("div",{children:S("input",{type:"number",step:"0.01",name:"viewport.bottom",className:"w-full",onChange:Ke=>z("viewport.bottom",Ke.target.valueAsNumber,null),defaultValue:(ot=(Fe=s.configuration)==null?void 0:Fe.viewport)==null?void 0:ot.bottom})},`vpb-${(Le=(Je=s.configuration)==null?void 0:Je.viewport)==null?void 0:Le.bottom}`)]}),te("div",{className:"w-6/12 pl-2 -mt-3",children:[S("label",{htmlFor:"viewport.right",children:"Longitude"}),S("div",{children:S("input",{type:"number",step:"0.01",name:"viewport.right",className:"w-full",onChange:Ke=>z("viewport.right",Ke.target.valueAsNumber,null),defaultValue:(Ze=(Ye=s.configuration)==null?void 0:Ye.viewport)==null?void 0:Ze.right})},`vpr-${(Qe=(ut=s.configuration)==null?void 0:ut.viewport)==null?void 0:Qe.right}`)]})]})})]})]},(bn=s.configuration)==null?void 0:bn.viewport):S(Wn,{}),s.configuration.initialViewStrategy==="static"?te("div",{children:[S("button",{className:"w-full secondary mt-2",onClick:Ke=>{e.mapCanvasRef.current.emit(ze.REQUEST_MAP_CENTER_AND_ZOOM)},children:"Set Center & Zoom From Map State"}),te("div",{className:"flex flex-wrap items-stretch",children:[te("div",{className:"w-6/12 pr-1",children:[S("label",{htmlFor:"start-lat",children:"Start Latitude"}),S("div",{children:S("input",{type:"number",step:"0.01",name:"viewport.center.lat",className:"w-full",onChange:Ke=>z("viewport.center.lat",Ke.target.valueAsNumber,null),defaultValue:(vt=(hn=(At=s.configuration)==null?void 0:At.viewport)==null?void 0:hn.center)==null?void 0:vt.lat})})]},`slat-${(ct=(rt=(xt=s.configuration)==null?void 0:xt.viewport)==null?void 0:rt.center)==null?void 0:ct.lat}`),te("div",{className:"w-6/12 pl-1",children:[S("label",{htmlFor:"start-lng",children:"Start Longitude"}),S("div",{children:S("input",{type:"number",step:"0.01",name:"startlng",className:"w-full",onChange:Ke=>z("viewport.center.lng",Ke.target.valueAsNumber,null),defaultValue:(Jt=(Ct=(Ve=s.configuration)==null?void 0:Ve.viewport)==null?void 0:Ct.center)==null?void 0:Jt.lng})})]},`slng-${(ft=(at=(Be=s.configuration)==null?void 0:Be.viewport)==null?void 0:at.center)==null?void 0:ft.lng}`)]}),S("label",{htmlFor:"start-zoom",children:"Start Zoom"}),S("div",{children:S(Hv,{name:"viewport.zoom",min:"1",max:"15",step:"0.25",onChange:Ke=>z("viewport.zoom",Ke.target.valueAsNumber,null),defaultValue:(_n=(An=s.configuration)==null?void 0:An.viewport)==null?void 0:_n.zoom})},N)]},(ur=s.configuration)==null?void 0:ur.viewport):S(Wn,{}),s.configuration.initialViewStrategy==="variables"?te("div",{children:[S("label",{htmlFor:"start-lat",children:"Latitude Variable"}),S("div",{children:S("input",{type:"text",name:"latitudeVar",onChange:Ke=>z("latitudeVar",Ke.target.value,null),defaultValue:(gr=s.configuration)==null?void 0:gr.latitudeVar})}),S("label",{htmlFor:"start-lng",children:"Longitude Variable"}),S("div",{children:S("input",{type:"text",name:"longitudeVar",onChange:Ke=>z("longitudeVar",Ke.target.value,null),defaultValue:(Mn=s.configuration)==null?void 0:Mn.longitudeVar})}),S("label",{htmlFor:"start-zoom",children:"Initial Zoom"}),S("div",{children:S(Hv,{name:"viewport.zoom",min:"1",max:"15",step:"0.25",onChange:Ke=>z("viewport.zoom",Ke.target.valueAsNumber,null),defaultValue:(Vn=(Bn=s.configuration)==null?void 0:Bn.viewport)==null?void 0:Vn.zoom})})]},(Qn=s.configuration)==null?void 0:Qn.viewport):S("div",{})]})};function T2(e){const[t,n]=J.useState(e.hasOwnProperty("isOpen")?e.isOpen:!0),[o,s]=J.useState(t?"chevron-down":"chevron-right"),[f,g]=J.useState(e.visibility?"eye":"eye-off");let w;e.showEye?w=S("div",{className:"icon btn sm p-1 float-right",onClick:E,children:S(st,{name:f,className:"stroke-esnetblue-100 -mt-1 -ml-1"})}):w=null;function y(){o=="chevron-down"?(s("chevron-right"),n(!1)):(s("chevron-down"),n(!0))}function E(){f=="eye"?(g("eye-off"),e.setVisibilityToggle&&(e==null||e.setVisibilityToggle(!1))):(g("eye"),e.setVisibilityToggle&&(e==null||e.setVisibilityToggle(!0)))}return te("div",{children:[te("div",{className:t?"panel-header compound justify":"panel-header compound justify rounded-b-xl",children:[te("div",{className:"compound",children:[S("div",{onClick:y,children:S(st,{name:o,className:"icon btn sm p-1 mr-2 stroke-esnetblue-100"})}),e.header]}),w]}),S("div",{className:"panel-body",hidden:!t,children:S("div",{className:"w-full",children:e.children})}),S("div",{className:"panel-footer",hidden:!t,children:S("div",{className:"flex flex-row w-full justify-between",children:e.footer})})]})}function NB(e){var Ue,it,Xe,Te,Fe,ot,Je,Le,Ye,Ze,ut,Qe,bn,At,hn,vt,xt,rt,ct;const{controller:t,instance:n}=J.useContext(MC);let o=(it=(Ue=t==null?void 0:t.instance)==null?void 0:Ue.configuration)==null?void 0:it.layers[e.layerId],s=J.useContext(NC),f=J.useContext(OL),[g,w]=J.useState(void 0),[y,E]=J.useState(PA[0].value),[M,N]=J.useState("live"),[R,F]=J.useState("latest"),[$,V]=J.useState(void 0),X=t.instance.configuration.layers[e.layerId].name,[Z,D]=J.useState(X.indexOf(`Layer ${e.layerId+1}`)<0&&""||X);const z=Ve=>{t.setProperty(`configuration.layers[${e.layerId}].name`,Ve),D(Ve)},H=Ve=>{if(e!=null&&e.setSelectedDatasets){let Ct=(e==null?void 0:e.selectedDatasets)||[];Ct[e.layerId]=Ve,e.setSelectedDatasets([...Ct])}},se=()=>{if(!o||!(o!=null&&o.mapjsonUrl))return;let Ct=(o==null?void 0:o.mapjsonUrl).split("/output/dataset/")[1],Jt=Ct.split("?")[1],Be=Jt==null?void 0:Jt.split("&").reduce((gr,Mn)=>{let[Bn,Vn]=Mn.split("=");return gr[Bn]=Vn,gr},{}),[at,ft,An]=Ct.split("/"),_n=Be!=null&&Be.template?Be.template:void 0,ur=Be!=null&&Be.version?Be.version:"latest";w(at),E(ft),V(_n),N(An),F(ur),H(at)},he=()=>{let Ve=`${Dt}/output/dataset/${g}/${y}/${M}/`,Ct=[];M=="static"&&R!="latest"&&Ct.push(`version=${R}`),$&&Ct.push(`template=${$}`),Ct.length&&(Ve+="?"+Ct.join("&")),M&&g&&y&&t.setProperty(`configuration.layers[${e.layerId}].mapjsonUrl`,Ve)},pe=()=>{var Be,at;let Ve={};if((at=(Be=s==null?void 0:s.controller)==null?void 0:Be.instance)==null||at.forEach(ft=>{Ve[ft.datasetId]=ft.version}),!g)return;let Ct=Ve[g];var Jt=[];Xz.forEach(ft=>{Jt.push(S("option",{value:`${ft.value}`,children:ft.label},`${ft.value}`))}),Jt.push();for(let ft=Ct;ft>=1;ft--)Jt.push(te("option",{value:`static-${ft}`,children:["Static  Version ",ft]},`static-${ft}`));return Jt};J.useEffect(()=>{var Ve,Ct,Jt,Be;if((Ve=s==null?void 0:s.controller)!=null&&Ve.instance&&!g){let at=(Be=(Jt=(Ct=s==null?void 0:s.controller)==null?void 0:Ct.instance)==null?void 0:Jt[0])==null?void 0:Be.datasetId;w(at),H(at)}},[(Xe=s==null?void 0:s.controller)==null?void 0:Xe.instance]),J.useEffect(()=>{var Ve,Ct,Jt,Be;(Ve=f==null?void 0:f.controller)!=null&&Ve.instance&&!$&&V((Be=(Jt=(Ct=f==null?void 0:f.controller)==null?void 0:Ct.instance)==null?void 0:Jt[0])==null?void 0:Be.templateId)},[(Te=f==null?void 0:f.controller)==null?void 0:Te.instance]),J.useEffect(()=>{t.instance&&se()},[t==null?void 0:t.instance]),J.useEffect(()=>{he()},[g,y,M,R,$]);const ge=(Ve,Ct,Jt=null)=>{let Be=Ct,at=e.mapCanvasRef.current.lastValue(ze.EDITING_SET);t.setProperty(`configuration.${Ve}`,Be);let ft=JSON.parse(JSON.stringify(t.instance.configuration));ft.enableEditing=!0,ft.topologySource="json",e.mapCanvasRef.current.setOptions(ft),e.mapCanvasRef.current.setEditMode(at)};let ke=te("span",{children:[te("strong",{children:["Layer ",e.layerId+1]})," ",t.instance.configuration.layers[e.layerId].name||((Je=(ot=(Fe=s==null?void 0:s.controller)==null?void 0:Fe.instance)==null?void 0:ot.filter(Ve=>Ve.datasetId==g)[0])==null?void 0:Je.name)]}),be=te(Wn,{children:[S("span",{}),te("div",{className:"compound hover:bg-mauve-200 cursor-pointer rounded-lg",onClick:e.deleteLayer,children:[S("p",{className:"py-1 pl-3 text-esnetblack-700",children:"Delete Layer"}),S(st,{className:"icon btn small p-1 stroke-esnetblack-700",name:"trash"})]})]});return S(Wn,{children:S(T2,{header:ke,footer:be,visibility:(ut=(Ze=(Ye=(Le=t==null?void 0:t.instance)==null?void 0:Le.configuration)==null?void 0:Ye.layers)==null?void 0:Ze[e.layerId])==null?void 0:ut.visible,showEye:!0,setVisibilityToggle:e.toggleLayer,children:te("div",{className:"lg:flex lg:flex-row w-full",children:[S("div",{className:"w-full lg:w-4/12",children:te("fieldset",{className:"lg:h-full lg:mr-3",children:[S("legend",{children:"Dataset Options"}),S("label",{className:"strong",children:"Import Dataset"}),S("select",{name:"dataset",className:"w-full",value:g,onChange:Ve=>{w(Ve.target.value),H(Ve.target.value)},children:(bn=(Qe=s==null?void 0:s.controller)==null?void 0:Qe.instance)==null?void 0:bn.map(Ve=>S("option",{value:Ve.datasetId,children:Ve.name},Ve.datasetId))},`dataset-selector-${(hn=(At=s==null?void 0:s.controller)==null?void 0:At.instance)==null?void 0:hn.length}-${g}`),S("label",{className:"strong",children:"Dataset View"}),S("select",{name:"version",className:"w-full",value:y,onChange:Ve=>{E(Ve.target.value)},children:PA.map(Ve=>S("option",{value:Ve.value,children:Ve.label},Ve.value))}),te("div",{className:"compound justify-start",children:[S("label",{className:"strong",children:"Dataset Version"}),S("div",{className:"icon sm mt-1 -ml-1",title:'Using the "Dynamic" version will always keep your map up to date with the database, whereas "Static" versions represent a specific point in time. For some maps, stability is more important.',children:S(st,{name:"help-circle",className:"icon tiny stroke-esnetwhite-600"})})]}),S("select",{name:"version",className:"w-full",defaultValue:`${M}-${R}`,onChange:Ve=>{let[Ct,Jt]=Ve.target.value.split("-");N(Ct),F(Jt)},children:pe()},`version-selector-${(xt=(vt=s==null?void 0:s.controller)==null?void 0:vt.instance)==null?void 0:xt.length}`),S("label",{className:"strong",children:"Layer Name"}),S("input",{type:"text",className:"w-full",defaultValue:Z,onChange:Ve=>{z(Ve.target.value)},placeholder:"Override Layer Name"})]})}),S("div",{className:"w-full lg:w-4/12",children:te("fieldset",{className:"lg:h-full lg:mr-3",children:[S("legend",{children:"Node Style"}),S("label",{className:"shape",children:"Shape"}),S("select",{name:"shape",className:"w-full",value:$,onChange:Ve=>{V(Ve.target.value)},children:(ct=(rt=f==null?void 0:f.controller)==null?void 0:rt.instance)==null?void 0:ct.sort((Ve,Ct)=>Ve.name<Ct.name?-1:Ve.name>Ct.name?1:0).map(Ve=>S("option",{value:Ve.templateId,children:Ve.name},Ve.templateId))}),S("div",{children:S("label",{className:"color",children:"Color"})}),te("div",{className:"compound justify-start",children:[S("input",{type:"color",id:"color",defaultValue:o==null?void 0:o.color,onChange:Ve=>ge(`layers[${e.layerId}].color`,Ve.target.value)}),S("label",{htmlFor:"color",children:"Choose Color..."})]}),S("label",{htmlFor:"highlight",children:"Highlight Color"}),te("div",{className:"compound justify-start",children:[S("input",{type:"color",id:"highlight",defaultValue:"#B6B6B6"}),S("label",{htmlFor:"highlight",children:"Choose Color..."})]}),S("label",{className:"size-slider",children:"Size"}),S("div",{className:"compound",children:S(Hv,{name:"layer[props.layerId].nodewidth",min:"1",max:"15",step:"0.25",onChange:Ve=>ge(`layers[${e.layerId}].nodeWidth`,Ve.target.valueAsNumber,null),defaultValue:o==null?void 0:o.nodeWidth})})]})}),S("div",{className:"w-full lg:w-4/12",children:te("fieldset",{className:"lg:h-full",children:[S("legend",{children:"Edge Style"}),S("label",{className:"size-slider",children:"Width"}),S("div",{className:"compound",children:S(Hv,{name:"layer[props.layerId].edgeWidth",min:"0.5",max:"15",step:"0.25",onChange:Ve=>ge(`layers[${e.layerId}].edgeWidth`,Ve.target.valueAsNumber,null),defaultValue:o==null?void 0:o.edgeWidth})}),S("label",{className:"size-slider",children:"Offset"}),S("div",{className:"compound",children:S(Hv,{name:"layer[props.layerId].pathOffset",min:"0",max:"15",step:"0.25",onChange:Ve=>ge(`layers[${e.layerId}].pathOffset`,Ve.target.valueAsNumber,null),defaultValue:o==null?void 0:o.pathOffset})})]})})]})})})}function LB(e){const[t,n]=J.useState(1),[o,s]=J.useState(e.value),[f,g]=J.useState(""),[w,y]=J.useState(null),E=F=>{n(8),w||s(JSON.stringify(JSON.parse(e.value),null,"  "))},M=F=>{n(1),w||s(e.value)},N=F=>{s(F.target.value);try{JSON.parse(F.target.value),g(""),y(null),e.onChange(F)}catch{g(" invalid"),y(e.invalidMessage||"Invalid JSON")}},R=()=>w?S("label",{className:"invalid",children:w}):null;return te(Wn,{children:[S("textarea",{...e,className:e.className+" font-mono py-1 resize-none"+f,rows:t,onBlur:M,onFocus:E,value:o,onChange:N}),R()]})}function PB(e){return te(Wn,{children:[te("tr",{children:[S("td",{className:"controls w-24",children:te("div",{className:"flex flew-row w-24",children:[S(st,{name:e.override.visible?"eye":"eye-off",className:"btn icon bordered h-9 w-9 mr-2",onClick:e.toggleVisibility}),S(st,{name:"trash",className:"btn icon bordered h-9 w-9",onClick:e.delete})]})}),S("td",{className:"operation pl-0",children:S("select",{className:"w-full min-w-[4rem]",defaultValue:e.override.operation,onChange:t=>{e.setOperation(t.target.value)},children:Qz.map(t=>S("option",{value:t.value,children:t.label},t.value))})}),S("td",{className:"datatype pl-0",children:S("select",{className:"w-full min-w-[4rem]",defaultValue:e.override.type,onChange:t=>{e.setType(t.target.value)},children:eU.map(t=>S("option",{value:t.value,children:t.label},t.value))})}),S("td",{className:"where text-center w-12 px-0",children:S("label",{className:"pr-0",children:"named"})}),S("td",{className:"value",children:te("div",{className:"flex flex-row",children:[S("div",{className:"w-6/12",children:S("input",{type:"text",className:"mr-36",value:e.override.name,onChange:t=>{e.setName(t.target.value)}})}),S("div",{className:"w-6/12 text-right",children:te("label",{className:"pr-0",children:['For Dataset "',e.override.datasetName||e.override.datasetId,'"']})})]})})]}),e.override.operation!="delete"?S("tr",{children:S("td",{colSpan:5,children:te("div",{className:"flex flex-row",children:[S("div",{className:"w-4/12 text-right pl-0 pr-2",children:S("label",{className:"pr-0",children:"with contents:"})}),S("div",{className:"w-8/12",children:S(LB,{type:"text",className:"w-full",value:JSON.stringify(e.override.state),onChange:t=>{e.setState(JSON.parse(t.target.value))}})})]})})},"override-${props.override.type}-${props.override.name}-state"):null]})}function IB(e){var F;let[t,n]=so.useState([]),[o,s]=so.useState({}),f=so.useContext(NC);so.useEffect(()=>{var $;($=f==null?void 0:f.controller)!=null&&$.instance&&f.controller.instance.forEach(V=>{o[V.datasetId]=V.name,s({...o})})},[(F=f==null?void 0:f.controller)==null?void 0:F.instance]);const g=($,V,X)=>function(Z){let D={...e.overrides[$][V][X]};delete e.overrides[$][V][X],e.overrides[$][V][Z]=D,e.setOverrides({...e.overrides})},w=($,V,X)=>function(Z){let D={...e.overrides[$][V][X]};delete e.overrides[$][V][X],e.overrides[$][Z][X]=D,e.setOverrides({...e.overrides})},y=($,V,X)=>function(Z){e.overrides[$][V][X].operation=Z,e.setOverrides({...e.overrides})},E=($,V,X)=>function(Z){e.overrides[$][V][X].state=Z,e.setOverrides({...e.overrides})},M=($,V,X)=>function(){delete e.overrides[$][V][X],e.setOverrides({...e.overrides})},N=($,V,X)=>function(){let Z=e.overrides[$][V][X].render;e.overrides[$][V][X].render=!Z,e.setOverrides({...e.overrides})},R=()=>{let $=[];Object.keys(e.overrides).forEach(X=>{Object.keys(e.overrides[X]).forEach(D=>{Object.keys(e.overrides[X][D]).forEach(H=>{$.push({name:H,type:D,datasetId:X,datasetName:o[X],operation:e.overrides[X][D][H].operation,state:e.overrides[X][D][H].state,visible:e.overrides[X][D][H].render})})})}),n($)};return so.useEffect(R,[e.overrides]),S(Wn,{children:te(T2,{header:"Map Overrides",footer:`${t.length} Overrides Applied`,visibility:!0,showEye:!1,children:[S("label",{className:"flew-row -mt-2",children:"Rules"}),S("table",{className:"w-full",children:S("tbody",{children:t.map($=>S(PB,{override:$,setName:g($.datasetId,$.type,$.name),setType:w($.datasetId,$.type,$.name),setOperation:y($.datasetId,$.type,$.name),setState:E($.datasetId,$.type,$.name),delete:M($.datasetId,$.type,$.name),toggleVisibility:N($.datasetId,$.type,$.name)},`override-${$.type}-${$.name}`))})})]})})}var Hw={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Hw.exports;(function(e,t){(function(){var n,o="4.17.21",s=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",g="Expected a function",w="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",E=500,M="__lodash_placeholder__",N=1,R=2,F=4,$=1,V=2,X=1,Z=2,D=4,z=8,H=16,se=32,he=64,pe=128,ge=256,ke=512,be=30,Ue="...",it=800,Xe=16,Te=1,Fe=2,ot=3,Je=1/0,Le=9007199254740991,Ye=17976931348623157e292,Ze=0/0,ut=4294967295,Qe=ut-1,bn=ut>>>1,At=[["ary",pe],["bind",X],["bindKey",Z],["curry",z],["curryRight",H],["flip",ke],["partial",se],["partialRight",he],["rearg",ge]],hn="[object Arguments]",vt="[object Array]",xt="[object AsyncFunction]",rt="[object Boolean]",ct="[object Date]",Ve="[object DOMException]",Ct="[object Error]",Jt="[object Function]",Be="[object GeneratorFunction]",at="[object Map]",ft="[object Number]",An="[object Null]",_n="[object Object]",ur="[object Promise]",gr="[object Proxy]",Mn="[object RegExp]",Bn="[object Set]",Vn="[object String]",Qn="[object Symbol]",Ke="[object Undefined]",Nn="[object WeakMap]",Zn="[object WeakSet]",er="[object ArrayBuffer]",Yr="[object DataView]",Kr="[object Float32Array]",Uo="[object Float64Array]",ci="[object Int8Array]",fi="[object Int16Array]",Fr="[object Int32Array]",Jr="[object Uint8Array]",Fo="[object Uint8ClampedArray]",go="[object Uint16Array]",La="[object Uint32Array]",vo=/\b__p \+= '';/g,Pa=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xe=/&(?:amp|lt|gt|quot|#39);/g,Ne=/[&<>"']/g,et=RegExp(xe.source),yt=RegExp(Ne.source),St=/<%-([\s\S]+?)%>/g,zt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,gt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xt=/^\w*$/,Ln=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vt=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(Vt.source),Pn=/^\s+/,Xr=/\s/,yi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_o=/\{\n\/\* \[wrapped with (.+)\] \*/,oe=/,? & /,Ie=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ge=/[()=,{}\[\]\/\s]/,kt=/\\(\\)?/g,Gt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sn=/\w*$/,Zt=/^[-+]0x[0-9a-f]+$/i,Me=/^0b[01]+$/i,ce=/^\[object .+?Constructor\]$/,Pe=/^0o[0-7]+$/i,$e=/^(?:0|[1-9]\d*)$/,$t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xn=/($^)/,Jn=/['\n\r\u2028\u2029\\]/g,Dn="\\ud800-\\udfff",yo="\\u0300-\\u036f",Hs="\\ufe20-\\ufe2f",Qr="\\u20d0-\\u20ff",gc=yo+Hs+Qr,vc="\\u2700-\\u27bf",S0="a-z\\xdf-\\xf6\\xf8-\\xff",Rp="\\xac\\xb1\\xd7\\xf7",C2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",k2="\\u2000-\\u206f",A2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ds="A-Z\\xc0-\\xd6\\xd8-\\xde",E0="\\ufe0e\\ufe0f",T0=Rp+C2+k2+A2,Dp="[']",C0="["+Dn+"]",ed="["+T0+"]",_c="["+gc+"]",zp="\\d+",k0="["+vc+"]",A0="["+S0+"]",M0="[^"+Dn+T0+zp+vc+S0+ds+"]",Up="\\ud83c[\\udffb-\\udfff]",M2="(?:"+_c+"|"+Up+")",N0="[^"+Dn+"]",Fp="(?:\\ud83c[\\udde6-\\uddff]){2}",Bp="[\\ud800-\\udbff][\\udc00-\\udfff]",Hl="["+ds+"]",L0="\\u200d",P0="(?:"+A0+"|"+M0+")",N2="(?:"+Hl+"|"+M0+")",I0="(?:"+Dp+"(?:d|ll|m|re|s|t|ve))?",O0="(?:"+Dp+"(?:D|LL|M|RE|S|T|VE))?",R0=M2+"?",D0="["+E0+"]?",L2="(?:"+L0+"(?:"+[N0,Fp,Bp].join("|")+")"+D0+R0+")*",P2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",I2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$p=D0+R0+L2,O2="(?:"+[k0,Fp,Bp].join("|")+")"+$p,R2="(?:"+[N0+_c+"?",_c,Fp,Bp,C0].join("|")+")",jp=RegExp(Dp,"g"),wi=RegExp(_c,"g"),Ia=RegExp(Up+"(?="+Up+")|"+R2+$p,"g"),di=RegExp([Hl+"?"+A0+"+"+I0+"(?="+[ed,Hl,"$"].join("|")+")",N2+"+"+O0+"(?="+[ed,Hl+P0,"$"].join("|")+")",Hl+"?"+P0+"+"+I0,Hl+"+"+O0,I2,P2,zp,O2].join("|"),"g"),D2=RegExp("["+L0+Dn+gc+E0+"]"),z0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],U0=-1,ln={};ln[Kr]=ln[Uo]=ln[ci]=ln[fi]=ln[Fr]=ln[Jr]=ln[Fo]=ln[go]=ln[La]=!0,ln[hn]=ln[vt]=ln[er]=ln[rt]=ln[Yr]=ln[ct]=ln[Ct]=ln[Jt]=ln[at]=ln[ft]=ln[_n]=ln[Mn]=ln[Bn]=ln[Vn]=ln[Nn]=!1;var Hn={};Hn[hn]=Hn[vt]=Hn[er]=Hn[Yr]=Hn[rt]=Hn[ct]=Hn[Kr]=Hn[Uo]=Hn[ci]=Hn[fi]=Hn[Fr]=Hn[at]=Hn[ft]=Hn[_n]=Hn[Mn]=Hn[Bn]=Hn[Vn]=Hn[Qn]=Hn[Jr]=Hn[Fo]=Hn[go]=Hn[La]=!0,Hn[Ct]=Hn[Jt]=Hn[Nn]=!1;var yc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Wp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},td={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nd=parseFloat,rd=parseInt,id=typeof Xo=="object"&&Xo&&Xo.Object===Object&&Xo,z2=typeof self=="object"&&self&&self.Object===Object&&self,ei=id||z2||Function("return this")(),Vp=t&&!t.nodeType&&t,Ws=Vp&&!0&&e&&!e.nodeType&&e,Vs=Ws&&Ws.exports===Vp,Zs=Vs&&id.process,Nr=function(){try{var _e=Ws&&Ws.require&&Ws.require("util").types;return _e||Zs&&Zs.binding&&Zs.binding("util")}catch{}}(),hs=Nr&&Nr.isArrayBuffer,qs=Nr&&Nr.isDate,Gs=Nr&&Nr.isMap,Vl=Nr&&Nr.isRegExp,Bo=Nr&&Nr.isSet,F0=Nr&&Nr.isTypedArray;function Ji(_e,Ae,Ce){switch(Ce.length){case 0:return _e.call(Ae);case 1:return _e.call(Ae,Ce[0]);case 2:return _e.call(Ae,Ce[0],Ce[1]);case 3:return _e.call(Ae,Ce[0],Ce[1],Ce[2])}return _e.apply(Ae,Ce)}function U2(_e,Ae,Ce,dt){for(var _t=-1,pn=_e==null?0:_e.length;++_t<pn;){var br=_e[_t];Ae(dt,br,Ce(br),_e)}return dt}function wo(_e,Ae){for(var Ce=-1,dt=_e==null?0:_e.length;++Ce<dt&&Ae(_e[Ce],Ce,_e)!==!1;);return _e}function F2(_e,Ae){for(var Ce=_e==null?0:_e.length;Ce--&&Ae(_e[Ce],Ce,_e)!==!1;);return _e}function B0(_e,Ae){for(var Ce=-1,dt=_e==null?0:_e.length;++Ce<dt;)if(!Ae(_e[Ce],Ce,_e))return!1;return!0}function ps(_e,Ae){for(var Ce=-1,dt=_e==null?0:_e.length,_t=0,pn=[];++Ce<dt;){var br=_e[Ce];Ae(br,Ce,_e)&&(pn[_t++]=br)}return pn}function wc(_e,Ae){var Ce=_e==null?0:_e.length;return!!Ce&&bo(_e,Ae,0)>-1}function od(_e,Ae,Ce){for(var dt=-1,_t=_e==null?0:_e.length;++dt<_t;)if(Ce(Ae,_e[dt]))return!0;return!1}function qn(_e,Ae){for(var Ce=-1,dt=_e==null?0:_e.length,_t=Array(dt);++Ce<dt;)_t[Ce]=Ae(_e[Ce],Ce,_e);return _t}function bi(_e,Ae){for(var Ce=-1,dt=Ae.length,_t=_e.length;++Ce<dt;)_e[_t+Ce]=Ae[Ce];return _e}function ad(_e,Ae,Ce,dt){var _t=-1,pn=_e==null?0:_e.length;for(dt&&pn&&(Ce=_e[++_t]);++_t<pn;)Ce=Ae(Ce,_e[_t],_t,_e);return Ce}function sd(_e,Ae,Ce,dt){var _t=_e==null?0:_e.length;for(dt&&_t&&(Ce=_e[--_t]);_t--;)Ce=Ae(Ce,_e[_t],_t,_e);return Ce}function bc(_e,Ae){for(var Ce=-1,dt=_e==null?0:_e.length;++Ce<dt;)if(Ae(_e[Ce],Ce,_e))return!0;return!1}var Zl=ql("length");function Br(_e){return _e.split("")}function $0(_e){return _e.match(Ie)||[]}function Zp(_e,Ae,Ce){var dt;return Ce(_e,function(_t,pn,br){if(Ae(_t,pn,br))return dt=pn,!1}),dt}function Ys(_e,Ae,Ce,dt){for(var _t=_e.length,pn=Ce+(dt?1:-1);dt?pn--:++pn<_t;)if(Ae(_e[pn],pn,_e))return pn;return-1}function bo(_e,Ae,Ce){return Ae===Ae?hd(_e,Ae,Ce):Ys(_e,qp,Ce)}function Ks(_e,Ae,Ce,dt){for(var _t=Ce-1,pn=_e.length;++_t<pn;)if(dt(_e[_t],Ae))return _t;return-1}function qp(_e){return _e!==_e}function Gp(_e,Ae){var Ce=_e==null?0:_e.length;return Ce?xc(_e,Ae)/Ce:Ze}function ql(_e){return function(Ae){return Ae==null?n:Ae[_e]}}function Xi(_e){return function(Ae){return _e==null?n:_e[Ae]}}function Yp(_e,Ae,Ce,dt,_t){return _t(_e,function(pn,br,Un){Ce=dt?(dt=!1,pn):Ae(Ce,pn,br,Un)}),Ce}function ld(_e,Ae){var Ce=_e.length;for(_e.sort(Ae);Ce--;)_e[Ce]=_e[Ce].value;return _e}function xc(_e,Ae){for(var Ce,dt=-1,_t=_e.length;++dt<_t;){var pn=Ae(_e[dt]);pn!==n&&(Ce=Ce===n?pn:Ce+pn)}return Ce}function ud(_e,Ae){for(var Ce=-1,dt=Array(_e);++Ce<_e;)dt[Ce]=Ae(Ce);return dt}function j0(_e,Ae){return qn(Ae,function(Ce){return[Ce,_e[Ce]]})}function Kp(_e){return _e&&_e.slice(0,im(_e)+1).replace(Pn,"")}function $i(_e){return function(Ae){return _e(Ae)}}function cd(_e,Ae){return qn(Ae,function(Ce){return _e[Ce]})}function Js(_e,Ae){return _e.has(Ae)}function Jp(_e,Ae){for(var Ce=-1,dt=_e.length;++Ce<dt&&bo(Ae,_e[Ce],0)>-1;);return Ce}function Xp(_e,Ae){for(var Ce=_e.length;Ce--&&bo(Ae,_e[Ce],0)>-1;);return Ce}function fd(_e,Ae){for(var Ce=_e.length,dt=0;Ce--;)_e[Ce]===Ae&&++dt;return dt}var $o=Xi(yc),Qp=Xi(Wp);function em(_e){return"\\"+td[_e]}function tm(_e,Ae){return _e==null?n:_e[Ae]}function ms(_e){return D2.test(_e)}function H0(_e){return z0.test(_e)}function dd(_e){for(var Ae,Ce=[];!(Ae=_e.next()).done;)Ce.push(Ae.value);return Ce}function xo(_e){var Ae=-1,Ce=Array(_e.size);return _e.forEach(function(dt,_t){Ce[++Ae]=[_t,dt]}),Ce}function nm(_e,Ae){return function(Ce){return _e(Ae(Ce))}}function Oa(_e,Ae){for(var Ce=-1,dt=_e.length,_t=0,pn=[];++Ce<dt;){var br=_e[Ce];(br===Ae||br===M)&&(_e[Ce]=M,pn[_t++]=Ce)}return pn}function Gl(_e){var Ae=-1,Ce=Array(_e.size);return _e.forEach(function(dt){Ce[++Ae]=dt}),Ce}function rm(_e){var Ae=-1,Ce=Array(_e.size);return _e.forEach(function(dt){Ce[++Ae]=[dt,dt]}),Ce}function hd(_e,Ae,Ce){for(var dt=Ce-1,_t=_e.length;++dt<_t;)if(_e[dt]===Ae)return dt;return-1}function Sc(_e,Ae,Ce){for(var dt=Ce+1;dt--;)if(_e[dt]===Ae)return dt;return dt}function Xs(_e){return ms(_e)?jo(_e):Zl(_e)}function So(_e){return ms(_e)?Qs(_e):Br(_e)}function im(_e){for(var Ae=_e.length;Ae--&&Xr.test(_e.charAt(Ae)););return Ae}var B2=Xi(Wl);function jo(_e){for(var Ae=Ia.lastIndex=0;Ia.test(_e);)++Ae;return Ae}function Qs(_e){return _e.match(Ia)||[]}function W0(_e){return _e.match(di)||[]}var V0=function _e(Ae){Ae=Ae==null?ei:el.defaults(ei.Object(),Ae,el.pick(ei,Hp));var Ce=Ae.Array,dt=Ae.Date,_t=Ae.Error,pn=Ae.Function,br=Ae.Math,Un=Ae.Object,om=Ae.RegExp,am=Ae.String,Qi=Ae.TypeError,Ec=Ce.prototype,Z0=pn.prototype,ti=Un.prototype,Tc=Ae["__core-js_shared__"],Yl=Z0.toString,Sn=ti.hasOwnProperty,sm=0,Ra=function(){var u=/[^.]+$/.exec(Tc&&Tc.keys&&Tc.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),tl=ti.toString,pd=Yl.call(Un),q0=ei._,lm=om("^"+Yl.call(Sn).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cc=Vs?Ae.Buffer:n,Da=Ae.Symbol,kc=Ae.Uint8Array,um=Cc?Cc.allocUnsafe:n,Ac=nm(Un.getPrototypeOf,Un),cm=Un.create,fm=ti.propertyIsEnumerable,md=Ec.splice,G0=Da?Da.isConcatSpreadable:n,Kl=Da?Da.iterator:n,nl=Da?Da.toStringTag:n,gd=function(){try{var u=gl(Un,"defineProperty");return u({},"",{}),u}catch{}}(),Y0=Ae.clearTimeout!==ei.clearTimeout&&Ae.clearTimeout,$2=dt&&dt.now!==ei.Date.now&&dt.now,vd=Ae.setTimeout!==ei.setTimeout&&Ae.setTimeout,Mc=br.ceil,rl=br.floor,il=Un.getOwnPropertySymbols,Jl=Cc?Cc.isBuffer:n,Xl=Ae.isFinite,Nc=Ec.join,_d=nm(Un.keys,Un),Gn=br.max,Lr=br.min,Lc=dt.now,K0=Ae.parseInt,Ql=br.random,j2=Ec.reverse,ol=gl(Ae,"DataView"),gs=gl(Ae,"Map"),yd=gl(Ae,"Promise"),al=gl(Ae,"Set"),Pc=gl(Ae,"WeakMap"),sl=gl(Un,"create"),eu=Pc&&new Pc,tu={},H2=ha(ol),wd=ha(gs),dm=ha(yd),sa=ha(al),Ho=ha(Pc),la=Da?Da.prototype:n,Ic=la?la.valueOf:n,J0=la?la.toString:n;function G(u){if(dr(u)&&!Ht(u)&&!(u instanceof fn)){if(u instanceof Eo)return u;if(Sn.call(u,"__wrapped__"))return tr(u)}return new Eo(u)}var ll=function(){function u(){}return function(h){if(!ir(h))return{};if(cm)return cm(h);u.prototype=h;var b=new u;return u.prototype=n,b}}();function bd(){}function Eo(u,h){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=n}G.templateSettings={escape:St,evaluate:zt,interpolate:bt,variable:"",imports:{_:G}},G.prototype=bd.prototype,G.prototype.constructor=G,Eo.prototype=ll(bd.prototype),Eo.prototype.constructor=Eo;function fn(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ut,this.__views__=[]}function W2(){var u=new fn(this.__wrapped__);return u.__actions__=Si(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Si(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Si(this.__views__),u}function V2(){if(this.__filtered__){var u=new fn(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Z2(){var u=this.__wrapped__.value(),h=this.__dir__,b=Ht(u),k=h<0,B=b?u.length:0,K=kb(0,B,this.__views__),ne=K.start,fe=K.end,ye=fe-ne,Oe=k?fe:ne-1,Re=this.__iteratees__,je=Re.length,nt=0,pt=Lr(ye,this.__takeCount__);if(!b||!k&&B==ye&&pt==ye)return ni(u,this.__actions__);var Bt=[];e:for(;ye--&&nt<pt;){Oe+=h;for(var Nt=-1,Rt=u[Oe];++Nt<je;){var un=Re[Nt],gn=un.iteratee,ii=un.type,Wr=gn(Rt);if(ii==Fe)Rt=Wr;else if(!Wr){if(ii==Te)continue e;break e}}Bt[nt++]=Rt}return Bt}fn.prototype=ll(bd.prototype),fn.prototype.constructor=fn;function ul(u){var h=-1,b=u==null?0:u.length;for(this.clear();++h<b;){var k=u[h];this.set(k[0],k[1])}}function q2(){this.__data__=sl?sl(null):{},this.size=0}function G2(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h}function Y2(u){var h=this.__data__;if(sl){var b=h[u];return b===y?n:b}return Sn.call(h,u)?h[u]:n}function K2(u){var h=this.__data__;return sl?h[u]!==n:Sn.call(h,u)}function J2(u,h){var b=this.__data__;return this.size+=this.has(u)?0:1,b[u]=sl&&h===n?y:h,this}ul.prototype.clear=q2,ul.prototype.delete=G2,ul.prototype.get=Y2,ul.prototype.has=K2,ul.prototype.set=J2;function za(u){var h=-1,b=u==null?0:u.length;for(this.clear();++h<b;){var k=u[h];this.set(k[0],k[1])}}function X2(){this.__data__=[],this.size=0}function Q2(u){var h=this.__data__,b=cl(h,u);if(b<0)return!1;var k=h.length-1;return b==k?h.pop():md.call(h,b,1),--this.size,!0}function eb(u){var h=this.__data__,b=cl(h,u);return b<0?n:h[b][1]}function tb(u){return cl(this.__data__,u)>-1}function X0(u,h){var b=this.__data__,k=cl(b,u);return k<0?(++this.size,b.push([u,h])):b[k][1]=h,this}za.prototype.clear=X2,za.prototype.delete=Q2,za.prototype.get=eb,za.prototype.has=tb,za.prototype.set=X0;function Ua(u){var h=-1,b=u==null?0:u.length;for(this.clear();++h<b;){var k=u[h];this.set(k[0],k[1])}}function nb(){this.size=0,this.__data__={hash:new ul,map:new(gs||za),string:new ul}}function rb(u){var h=jd(this,u).delete(u);return this.size-=h?1:0,h}function ib(u){return jd(this,u).get(u)}function ob(u){return jd(this,u).has(u)}function ua(u,h){var b=jd(this,u),k=b.size;return b.set(u,h),this.size+=b.size==k?0:1,this}Ua.prototype.clear=nb,Ua.prototype.delete=rb,Ua.prototype.get=ib,Ua.prototype.has=ob,Ua.prototype.set=ua;function vs(u){var h=-1,b=u==null?0:u.length;for(this.__data__=new Ua;++h<b;)this.add(u[h])}function Q0(u){return this.__data__.set(u,y),this}function Fa(u){return this.__data__.has(u)}vs.prototype.add=vs.prototype.push=Q0,vs.prototype.has=Fa;function To(u){var h=this.__data__=new za(u);this.size=h.size}function hm(){this.__data__=new za,this.size=0}function ab(u){var h=this.__data__,b=h.delete(u);return this.size=h.size,b}function sb(u){return this.__data__.get(u)}function e_(u){return this.__data__.has(u)}function t_(u,h){var b=this.__data__;if(b instanceof za){var k=b.__data__;if(!gs||k.length<s-1)return k.push([u,h]),this.size=++b.size,this;b=this.__data__=new Ua(k)}return b.set(u,h),this.size=b.size,this}To.prototype.clear=hm,To.prototype.delete=ab,To.prototype.get=sb,To.prototype.has=e_,To.prototype.set=t_;function pm(u,h){var b=Ht(u),k=!b&&ma(u),B=!b&&!k&&Ka(u),K=!b&&!k&&!B&&ks(u),ne=b||k||B||K,fe=ne?ud(u.length,am):[],ye=fe.length;for(var Oe in u)(h||Sn.call(u,Oe))&&!(ne&&(Oe=="length"||B&&(Oe=="offset"||Oe=="parent")||K&&(Oe=="buffer"||Oe=="byteLength"||Oe=="byteOffset")||qa(Oe,ye)))&&fe.push(Oe);return fe}function mm(u){var h=u.length;return h?u[xm(0,h-1)]:n}function _s(u,h){return Jc(Si(u),Co(h,0,u.length))}function n_(u){return Jc(Si(u))}function xd(u,h,b){(b!==n&&!Hi(u[h],b)||b===n&&!(h in u))&&Ba(u,h,b)}function Oc(u,h,b){var k=u[h];(!(Sn.call(u,h)&&Hi(k,b))||b===n&&!(h in u))&&Ba(u,h,b)}function cl(u,h){for(var b=u.length;b--;)if(Hi(u[b][0],h))return b;return-1}function Rc(u,h,b,k){return ys(u,function(B,K,ne){h(k,B,b(B),ne)}),k}function Sd(u,h){return u&&hi(h,xr(h),u)}function lb(u,h){return u&&hi(h,mi(h),u)}function Ba(u,h,b){h=="__proto__"&&gd?gd(u,h,{configurable:!0,enumerable:!0,value:b,writable:!0}):u[h]=b}function Ed(u,h){for(var b=-1,k=h.length,B=Ce(k),K=u==null;++b<k;)B[b]=K?n:Th(u,h[b]);return B}function Co(u,h,b){return u===u&&(b!==n&&(u=u<=b?u:b),h!==n&&(u=u>=h?u:h)),u}function ko(u,h,b,k,B,K){var ne,fe=h&N,ye=h&R,Oe=h&F;if(b&&(ne=B?b(u,k,B,K):b(u)),ne!==n)return ne;if(!ir(u))return u;var Re=Ht(u);if(Re){if(ne=Um(u),!fe)return Si(u,ne)}else{var je=In(u),nt=je==Jt||je==Be;if(Ka(u))return Am(u,fe);if(je==_n||je==hn||nt&&!B){if(ne=ye||nt?{}:Fm(u),!fe)return ye?__(u,lb(ne,u)):Nm(u,Sd(ne,u))}else{if(!Hn[je])return B?u:{};ne=Ti(u,je,fe)}}K||(K=new To);var pt=K.get(u);if(pt)return pt;K.set(u,ne),Yo(u)?u.forEach(function(Rt){ne.add(ko(Rt,h,b,Rt,u,K))}):gg(u)&&u.forEach(function(Rt,un){ne.set(un,ko(Rt,h,b,un,u,K))});var Bt=Oe?ye?Rm:Om:ye?mi:xr,Nt=Re?n:Bt(u);return wo(Nt||u,function(Rt,un){Nt&&(un=Rt,Rt=u[un]),Oc(ne,un,ko(Rt,h,b,un,u,K))}),ne}function r_(u){var h=xr(u);return function(b){return i_(b,u,h)}}function i_(u,h,b){var k=b.length;if(u==null)return!k;for(u=Un(u);k--;){var B=b[k],K=h[B],ne=u[B];if(ne===n&&!(B in u)||!K(ne))return!1}return!0}function o_(u,h,b){if(typeof u!="function")throw new Qi(g);return pu(function(){u.apply(n,b)},h)}function Dc(u,h,b,k){var B=-1,K=wc,ne=!0,fe=u.length,ye=[],Oe=h.length;if(!fe)return ye;b&&(h=qn(h,$i(b))),k?(K=od,ne=!1):h.length>=s&&(K=Js,ne=!1,h=new vs(h));e:for(;++B<fe;){var Re=u[B],je=b==null?Re:b(Re);if(Re=k||Re!==0?Re:0,ne&&je===je){for(var nt=Oe;nt--;)if(h[nt]===je)continue e;ye.push(Re)}else K(h,je,k)||ye.push(Re)}return ye}var ys=y_(Wo),Td=y_($r,!0);function ub(u,h){var b=!0;return ys(u,function(k,B,K){return b=!!h(k,B,K),b}),b}function Cd(u,h,b){for(var k=-1,B=u.length;++k<B;){var K=u[k],ne=h(K);if(ne!=null&&(fe===n?ne===ne&&!Oi(ne):b(ne,fe)))var fe=ne,ye=K}return ye}function gm(u,h,b,k){var B=u.length;for(b=Ft(b),b<0&&(b=-b>B?0:B+b),k=k===n||k>B?B:Ft(k),k<0&&(k+=B),k=b>k?0:As(k);b<k;)u[b++]=h;return u}function vm(u,h){var b=[];return ys(u,function(k,B,K){h(k,B,K)&&b.push(k)}),b}function Pr(u,h,b,k,B){var K=-1,ne=u.length;for(b||(b=Ts),B||(B=[]);++K<ne;){var fe=u[K];h>0&&b(fe)?h>1?Pr(fe,h-1,b,k,B):bi(B,fe):k||(B[B.length]=fe)}return B}var ws=w_(),fl=w_(!0);function Wo(u,h){return u&&ws(u,h,xr)}function $r(u,h){return u&&fl(u,h,xr)}function Ir(u,h){return ps(h,function(b){return qo(u[b])})}function bs(u,h){h=Wa(h,u);for(var b=0,k=h.length;u!=null&&b<k;)u=u[Mt(h[b++])];return b&&b==k?u:n}function kd(u,h,b){var k=h(u);return Ht(u)?k:bi(k,b(u))}function jr(u){return u==null?u===n?Ke:An:nl&&nl in Un(u)?Cb(u):Wd(u)}function nu(u,h){return u>h}function cb(u,h){return u!=null&&Sn.call(u,h)}function $a(u,h){return u!=null&&h in Un(u)}function a_(u,h,b){return u>=Lr(h,b)&&u<Gn(h,b)}function Ad(u,h,b){for(var k=b?od:wc,B=u[0].length,K=u.length,ne=K,fe=Ce(K),ye=1/0,Oe=[];ne--;){var Re=u[ne];ne&&h&&(Re=qn(Re,$i(h))),ye=Lr(Re.length,ye),fe[ne]=!b&&(h||B>=120&&Re.length>=120)?new vs(ne&&Re):n}Re=u[0];var je=-1,nt=fe[0];e:for(;++je<B&&Oe.length<ye;){var pt=Re[je],Bt=h?h(pt):pt;if(pt=b||pt!==0?pt:0,!(nt?Js(nt,Bt):k(Oe,Bt,b))){for(ne=K;--ne;){var Nt=fe[ne];if(!(Nt?Js(Nt,Bt):k(u[ne],Bt,b)))continue e}nt&&nt.push(Bt),Oe.push(pt)}}return Oe}function fb(u,h,b,k){return Wo(u,function(B,K,ne){h(k,b(B),K,ne)}),k}function zc(u,h,b){h=Wa(h,u),u=jm(u,h);var k=u==null?u:u[Mt(ji(h))];return k==null?n:Ji(k,u,b)}function ru(u){return dr(u)&&jr(u)==hn}function db(u){return dr(u)&&jr(u)==er}function hb(u){return dr(u)&&jr(u)==ct}function Uc(u,h,b,k,B){return u===h?!0:u==null||h==null||!dr(u)&&!dr(h)?u!==u&&h!==h:_m(u,h,b,k,Uc,B)}function _m(u,h,b,k,B,K){var ne=Ht(u),fe=Ht(h),ye=ne?vt:In(u),Oe=fe?vt:In(h);ye=ye==hn?_n:ye,Oe=Oe==hn?_n:Oe;var Re=ye==_n,je=Oe==_n,nt=ye==Oe;if(nt&&Ka(u)){if(!Ka(h))return!1;ne=!0,Re=!1}if(nt&&!Re)return K||(K=new To),ne||ks(u)?C_(u,h,b,k,B,K):Eb(u,h,ye,b,k,B,K);if(!(b&$)){var pt=Re&&Sn.call(u,"__wrapped__"),Bt=je&&Sn.call(h,"__wrapped__");if(pt||Bt){var Nt=pt?u.value():u,Rt=Bt?h.value():h;return K||(K=new To),B(Nt,Rt,b,k,K)}}return nt?(K||(K=new To),Tb(u,h,b,k,B,K)):!1}function pb(u){return dr(u)&&In(u)==at}function Fc(u,h,b,k){var B=b.length,K=B,ne=!k;if(u==null)return!K;for(u=Un(u);B--;){var fe=b[B];if(ne&&fe[2]?fe[1]!==u[fe[0]]:!(fe[0]in u))return!1}for(;++B<K;){fe=b[B];var ye=fe[0],Oe=u[ye],Re=fe[1];if(ne&&fe[2]){if(Oe===n&&!(ye in u))return!1}else{var je=new To;if(k)var nt=k(Oe,Re,ye,u,h,je);if(!(nt===n?Uc(Re,Oe,$|V,k,je):nt))return!1}}return!0}function ym(u){if(!ir(u)||Mb(u))return!1;var h=qo(u)?lm:ce;return h.test(ha(u))}function iu(u){return dr(u)&&jr(u)==Mn}function ou(u){return dr(u)&&In(u)==Bn}function s_(u){return dr(u)&&Go(u.length)&&!!ln[jr(u)]}function Bc(u){return typeof u=="function"?u:u==null?Ri:typeof u=="object"?Ht(u)?Ld(u[0],u[1]):u_(u):Rh(u)}function Md(u){if(!Yc(u))return _d(u);var h=[];for(var b in Un(u))Sn.call(u,b)&&b!="constructor"&&h.push(b);return h}function l_(u){if(!ir(u))return du(u);var h=Yc(u),b=[];for(var k in u)k=="constructor"&&(h||!Sn.call(u,k))||b.push(k);return b}function $c(u,h){return u<h}function Nd(u,h){var b=-1,k=Ii(u)?Ce(u.length):[];return ys(u,function(B,K,ne){k[++b]=h(B,K,ne)}),k}function u_(u){var h=qc(u);return h.length==1&&h[0][2]?vl(h[0][0],h[0][1]):function(b){return b===u||Fc(b,u,h)}}function Ld(u,h){return Bm(u)&&Kc(h)?vl(Mt(u),h):function(b){var k=Th(b,u);return k===n&&k===h?bl(b,u):Uc(h,k,$|V)}}function au(u,h,b,k,B){u!==h&&ws(h,function(K,ne){if(B||(B=new To),ir(K))wm(u,h,ne,b,au,k,B);else{var fe=k?k(hu(u,ne),K,ne+"",u,h,B):n;fe===n&&(fe=K),xd(u,ne,fe)}},mi)}function wm(u,h,b,k,B,K,ne){var fe=hu(u,b),ye=hu(h,b),Oe=ne.get(ye);if(Oe){xd(u,b,Oe);return}var Re=K?K(fe,ye,b+"",u,h,ne):n,je=Re===n;if(je){var nt=Ht(ye),pt=!nt&&Ka(ye),Bt=!nt&&!pt&&ks(ye);Re=ye,nt||pt||Bt?Ht(fe)?Re=fe:vr(fe)?Re=Si(fe):pt?(je=!1,Re=Am(ye,!0)):Bt?(je=!1,Re=m_(ye,!0)):Re=[]:xu(ye)||ma(ye)?(Re=fe,ma(fe)?Re=f1(fe):(!ir(fe)||qo(fe))&&(Re=Fm(ye))):je=!1}je&&(ne.set(ye,Re),B(Re,ye,k,K,ne),ne.delete(ye)),xd(u,b,Re)}function xs(u,h){var b=u.length;if(b)return h+=h<0?b:0,qa(h,b)?u[h]:n}function c_(u,h,b){h.length?h=qn(h,function(K){return Ht(K)?function(ne){return bs(ne,K.length===1?K[0]:K)}:K}):h=[Ri];var k=-1;h=qn(h,$i(Ut()));var B=Nd(u,function(K,ne,fe){var ye=qn(h,function(Oe){return Oe(K)});return{criteria:ye,index:++k,value:K}});return ld(B,function(K,ne){return Wc(K,ne,b)})}function bm(u,h){return ja(u,h,function(b,k){return bl(u,k)})}function ja(u,h,b){for(var k=-1,B=h.length,K={};++k<B;){var ne=h[k],fe=bs(u,ne);b(fe,ne)&&su(K,Wa(ne,u),fe)}return K}function mb(u){return function(h){return bs(h,u)}}function Ha(u,h,b,k){var B=k?Ks:bo,K=-1,ne=h.length,fe=u;for(u===h&&(h=Si(h)),b&&(fe=qn(u,$i(b)));++K<ne;)for(var ye=0,Oe=h[K],Re=b?b(Oe):Oe;(ye=B(fe,Re,ye,k))>-1;)fe!==u&&md.call(fe,ye,1),md.call(u,ye,1);return u}function f_(u,h){for(var b=u?h.length:0,k=b-1;b--;){var B=h[b];if(b==k||B!==K){var K=B;qa(B)?md.call(u,B,1):km(u,B)}}return u}function xm(u,h){return u+rl(Ql()*(h-u+1))}function d_(u,h,b,k){for(var B=-1,K=Gn(Mc((h-u)/(b||1)),0),ne=Ce(K);K--;)ne[k?K:++B]=u,u+=b;return ne}function Sm(u,h){var b="";if(!u||h<1||h>Le)return b;do h%2&&(b+=u),h=rl(h/2),h&&(u+=u);while(h);return b}function Qt(u,h){return Vd($m(u,h,Ri),u+"")}function gb(u){return mm(Ja(u))}function vb(u,h){var b=Ja(u);return Jc(b,Co(h,0,b.length))}function su(u,h,b,k){if(!ir(u))return u;h=Wa(h,u);for(var B=-1,K=h.length,ne=K-1,fe=u;fe!=null&&++B<K;){var ye=Mt(h[B]),Oe=b;if(ye==="__proto__"||ye==="constructor"||ye==="prototype")return u;if(B!=ne){var Re=fe[ye];Oe=k?k(Re,ye,fe):n,Oe===n&&(Oe=ir(Re)?Re:qa(h[B+1])?[]:{})}Oc(fe,ye,Oe),fe=fe[ye]}return u}var Em=eu?function(u,h){return eu.set(u,h),u}:Ri,_b=gd?function(u,h){return gd(u,"toString",{configurable:!0,enumerable:!1,value:Ph(h),writable:!0})}:Ri;function Ss(u){return Jc(Ja(u))}function Ao(u,h,b){var k=-1,B=u.length;h<0&&(h=-h>B?0:B+h),b=b>B?B:b,b<0&&(b+=B),B=h>b?0:b-h>>>0,h>>>=0;for(var K=Ce(B);++k<B;)K[k]=u[k+h];return K}function yb(u,h){var b;return ys(u,function(k,B,K){return b=h(k,B,K),!b}),!!b}function Pd(u,h,b){var k=0,B=u==null?k:u.length;if(typeof h=="number"&&h===h&&B<=bn){for(;k<B;){var K=k+B>>>1,ne=u[K];ne!==null&&!Oi(ne)&&(b?ne<=h:ne<h)?k=K+1:B=K}return B}return Tm(u,h,Ri,b)}function Tm(u,h,b,k){var B=0,K=u==null?0:u.length;if(K===0)return 0;h=b(h);for(var ne=h!==h,fe=h===null,ye=Oi(h),Oe=h===n;B<K;){var Re=rl((B+K)/2),je=b(u[Re]),nt=je!==n,pt=je===null,Bt=je===je,Nt=Oi(je);if(ne)var Rt=k||Bt;else Oe?Rt=Bt&&(k||nt):fe?Rt=Bt&&nt&&(k||!pt):ye?Rt=Bt&&nt&&!pt&&(k||!Nt):pt||Nt?Rt=!1:Rt=k?je<=h:je<h;Rt?B=Re+1:K=Re}return Lr(K,Qe)}function ca(u,h){for(var b=-1,k=u.length,B=0,K=[];++b<k;){var ne=u[b],fe=h?h(ne):ne;if(!b||!Hi(fe,ye)){var ye=fe;K[B++]=ne===0?0:ne}}return K}function Cm(u){return typeof u=="number"?u:Oi(u)?Ze:+u}function xi(u){if(typeof u=="string")return u;if(Ht(u))return qn(u,xi)+"";if(Oi(u))return J0?J0.call(u):"";var h=u+"";return h=="0"&&1/u==-Je?"-0":h}function fa(u,h,b){var k=-1,B=wc,K=u.length,ne=!0,fe=[],ye=fe;if(b)ne=!1,B=od;else if(K>=s){var Oe=h?null:ml(u);if(Oe)return Gl(Oe);ne=!1,B=Js,ye=new vs}else ye=h?[]:fe;e:for(;++k<K;){var Re=u[k],je=h?h(Re):Re;if(Re=b||Re!==0?Re:0,ne&&je===je){for(var nt=ye.length;nt--;)if(ye[nt]===je)continue e;h&&ye.push(je),fe.push(Re)}else B(ye,je,b)||(ye!==fe&&ye.push(je),fe.push(Re))}return fe}function km(u,h){return h=Wa(h,u),u=jm(u,h),u==null||delete u[Mt(ji(h))]}function h_(u,h,b,k){return su(u,h,b(bs(u,h)),k)}function Id(u,h,b,k){for(var B=u.length,K=k?B:-1;(k?K--:++K<B)&&h(u[K],K,u););return b?Ao(u,k?0:K,k?K+1:B):Ao(u,k?K+1:0,k?B:K)}function ni(u,h){var b=u;return b instanceof fn&&(b=b.value()),ad(h,function(k,B){return B.func.apply(B.thisArg,bi([k],B.args))},b)}function jc(u,h,b){var k=u.length;if(k<2)return k?fa(u[0]):[];for(var B=-1,K=Ce(k);++B<k;)for(var ne=u[B],fe=-1;++fe<k;)fe!=B&&(K[B]=Dc(K[B]||ne,u[fe],h,b));return fa(Pr(K,1),h,b)}function lu(u,h,b){for(var k=-1,B=u.length,K=h.length,ne={};++k<B;){var fe=k<K?h[k]:n;b(ne,u[k],fe)}return ne}function Es(u){return vr(u)?u:[]}function Od(u){return typeof u=="function"?u:Ri}function Wa(u,h){return Ht(u)?u:Bm(u,h)?[u]:Zm(En(u))}var p_=Qt;function cr(u,h,b){var k=u.length;return b=b===n?k:b,!h&&b>=k?u:Ao(u,h,b)}var Hc=Y0||function(u){return ei.clearTimeout(u)};function Am(u,h){if(h)return u.slice();var b=u.length,k=um?um(b):new u.constructor(b);return u.copy(k),k}function uu(u){var h=new u.constructor(u.byteLength);return new kc(h).set(new kc(u)),h}function Rd(u,h){var b=h?uu(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.byteLength)}function Mm(u){var h=new u.constructor(u.source,sn.exec(u));return h.lastIndex=u.lastIndex,h}function wb(u){return Ic?Un(Ic.call(u)):{}}function m_(u,h){var b=h?uu(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.length)}function dl(u,h){if(u!==h){var b=u!==n,k=u===null,B=u===u,K=Oi(u),ne=h!==n,fe=h===null,ye=h===h,Oe=Oi(h);if(!fe&&!Oe&&!K&&u>h||K&&ne&&ye&&!fe&&!Oe||k&&ne&&ye||!b&&ye||!B)return 1;if(!k&&!K&&!Oe&&u<h||Oe&&b&&B&&!k&&!K||fe&&b&&B||!ne&&B||!ye)return-1}return 0}function Wc(u,h,b){for(var k=-1,B=u.criteria,K=h.criteria,ne=B.length,fe=b.length;++k<ne;){var ye=dl(B[k],K[k]);if(ye){if(k>=fe)return ye;var Oe=b[k];return ye*(Oe=="desc"?-1:1)}}return u.index-h.index}function g_(u,h,b,k){for(var B=-1,K=u.length,ne=b.length,fe=-1,ye=h.length,Oe=Gn(K-ne,0),Re=Ce(ye+Oe),je=!k;++fe<ye;)Re[fe]=h[fe];for(;++B<ne;)(je||B<K)&&(Re[b[B]]=u[B]);for(;Oe--;)Re[fe++]=u[B++];return Re}function v_(u,h,b,k){for(var B=-1,K=u.length,ne=-1,fe=b.length,ye=-1,Oe=h.length,Re=Gn(K-fe,0),je=Ce(Re+Oe),nt=!k;++B<Re;)je[B]=u[B];for(var pt=B;++ye<Oe;)je[pt+ye]=h[ye];for(;++ne<fe;)(nt||B<K)&&(je[pt+b[ne]]=u[B++]);return je}function Si(u,h){var b=-1,k=u.length;for(h||(h=Ce(k));++b<k;)h[b]=u[b];return h}function hi(u,h,b,k){var B=!b;b||(b={});for(var K=-1,ne=h.length;++K<ne;){var fe=h[K],ye=k?k(b[fe],u[fe],fe,b,u):n;ye===n&&(ye=u[fe]),B?Ba(b,fe,ye):Oc(b,fe,ye)}return b}function Nm(u,h){return hi(u,Dm(u),h)}function __(u,h){return hi(u,zm(u),h)}function Dd(u,h){return function(b,k){var B=Ht(b)?U2:Rc,K=h?h():{};return B(b,u,Ut(k,2),K)}}function Vo(u){return Qt(function(h,b){var k=-1,B=b.length,K=B>1?b[B-1]:n,ne=B>2?b[2]:n;for(K=u.length>3&&typeof K=="function"?(B--,K):n,ne&&Ci(b[0],b[1],ne)&&(K=B<3?n:K,B=1),h=Un(h);++k<B;){var fe=b[k];fe&&u(h,fe,k,K)}return h})}function y_(u,h){return function(b,k){if(b==null)return b;if(!Ii(b))return u(b,k);for(var B=b.length,K=h?B:-1,ne=Un(b);(h?K--:++K<B)&&k(ne[K],K,ne)!==!1;);return b}}function w_(u){return function(h,b,k){for(var B=-1,K=Un(h),ne=k(h),fe=ne.length;fe--;){var ye=ne[u?fe:++B];if(b(K[ye],ye,K)===!1)break}return h}}function bb(u,h,b){var k=h&X,B=pl(u);function K(){var ne=this&&this!==ei&&this instanceof K?B:u;return ne.apply(k?b:this,arguments)}return K}function zd(u){return function(h){h=En(h);var b=ms(h)?So(h):n,k=b?b[0]:h.charAt(0),B=b?cr(b,1).join(""):h.slice(1);return k[u]()+B}}function hl(u){return function(h){return ad(Rg(Cu(h).replace(jp,"")),u,"")}}function pl(u){return function(){var h=arguments;switch(h.length){case 0:return new u;case 1:return new u(h[0]);case 2:return new u(h[0],h[1]);case 3:return new u(h[0],h[1],h[2]);case 4:return new u(h[0],h[1],h[2],h[3]);case 5:return new u(h[0],h[1],h[2],h[3],h[4]);case 6:return new u(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new u(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var b=ll(u.prototype),k=u.apply(b,h);return ir(k)?k:b}}function b_(u,h,b){var k=pl(u);function B(){for(var K=arguments.length,ne=Ce(K),fe=K,ye=fu(B);fe--;)ne[fe]=arguments[fe];var Oe=K<3&&ne[0]!==ye&&ne[K-1]!==ye?[]:Oa(ne,ye);if(K-=Oe.length,K<b)return S_(u,h,Ud,B.placeholder,n,ne,Oe,n,n,b-K);var Re=this&&this!==ei&&this instanceof B?k:u;return Ji(Re,this,ne)}return B}function Lm(u){return function(h,b,k){var B=Un(h);if(!Ii(h)){var K=Ut(b,3);h=xr(h),b=function(fe){return K(B[fe],fe,B)}}var ne=u(h,b,k);return ne>-1?B[K?h[ne]:ne]:n}}function Ei(u){return Za(function(h){var b=h.length,k=b,B=Eo.prototype.thru;for(u&&h.reverse();k--;){var K=h[k];if(typeof K!="function")throw new Qi(g);if(B&&!ne&&Zc(K)=="wrapper")var ne=new Eo([],!0)}for(k=ne?k:b;++k<b;){K=h[k];var fe=Zc(K),ye=fe=="wrapper"?cu(K):n;ye&&Hd(ye[0])&&ye[1]==(pe|z|se|ge)&&!ye[4].length&&ye[9]==1?ne=ne[Zc(ye[0])].apply(ne,ye[3]):ne=K.length==1&&Hd(K)?ne[fe]():ne.thru(K)}return function(){var Oe=arguments,Re=Oe[0];if(ne&&Oe.length==1&&Ht(Re))return ne.plant(Re).value();for(var je=0,nt=b?h[je].apply(this,Oe):Re;++je<b;)nt=h[je].call(this,nt);return nt}})}function Ud(u,h,b,k,B,K,ne,fe,ye,Oe){var Re=h&pe,je=h&X,nt=h&Z,pt=h&(z|H),Bt=h&ke,Nt=nt?n:pl(u);function Rt(){for(var un=arguments.length,gn=Ce(un),ii=un;ii--;)gn[ii]=arguments[ii];if(pt)var Wr=fu(Rt),Di=fd(gn,Wr);if(k&&(gn=g_(gn,k,B,pt)),K&&(gn=v_(gn,K,ne,pt)),un-=Di,pt&&un<Oe){var hr=Oa(gn,Wr);return S_(u,h,Ud,Rt.placeholder,b,gn,hr,fe,ye,Oe-un)}var Vr=je?b:this,_a=nt?Vr[u]:u;return un=gn.length,fe?gn=M_(gn,fe):Bt&&un>1&&gn.reverse(),Re&&ye<un&&(gn.length=ye),this&&this!==ei&&this instanceof Rt&&(_a=Nt||pl(_a)),_a.apply(Vr,gn)}return Rt}function Vc(u,h){return function(b,k){return fb(b,u,h(k),{})}}function da(u,h){return function(b,k){var B;if(b===n&&k===n)return h;if(b!==n&&(B=b),k!==n){if(B===n)return k;typeof b=="string"||typeof k=="string"?(b=xi(b),k=xi(k)):(b=Cm(b),k=Cm(k)),B=u(b,k)}return B}}function Fd(u){return Za(function(h){return h=qn(h,$i(Ut())),Qt(function(b){var k=this;return u(h,function(B){return Ji(B,k,b)})})})}function Bd(u,h){h=h===n?" ":xi(h);var b=h.length;if(b<2)return b?Sm(h,u):h;var k=Sm(h,Mc(u/Xs(h)));return ms(h)?cr(So(k),0,u).join(""):k.slice(0,u)}function xb(u,h,b,k){var B=h&X,K=pl(u);function ne(){for(var fe=-1,ye=arguments.length,Oe=-1,Re=k.length,je=Ce(Re+ye),nt=this&&this!==ei&&this instanceof ne?K:u;++Oe<Re;)je[Oe]=k[Oe];for(;ye--;)je[Oe++]=arguments[++fe];return Ji(nt,B?b:this,je)}return ne}function x_(u){return function(h,b,k){return k&&typeof k!="number"&&Ci(h,b,k)&&(b=k=n),h=no(h),b===n?(b=h,h=0):b=no(b),k=k===n?h<b?1:-1:no(k),d_(h,b,k,u)}}function $d(u){return function(h,b){return typeof h=="string"&&typeof b=="string"||(h=ro(h),b=ro(b)),u(h,b)}}function S_(u,h,b,k,B,K,ne,fe,ye,Oe){var Re=h&z,je=Re?ne:n,nt=Re?n:ne,pt=Re?K:n,Bt=Re?n:K;h|=Re?se:he,h&=~(Re?he:se),h&D||(h&=~(X|Z));var Nt=[u,h,B,pt,je,Bt,nt,fe,ye,Oe],Rt=b.apply(n,Nt);return Hd(u)&&Hm(Rt,Nt),Rt.placeholder=k,Wm(Rt,u,h)}function Pm(u){var h=br[u];return function(b,k){if(b=ro(b),k=k==null?0:Lr(Ft(k),292),k&&Xl(b)){var B=(En(b)+"e").split("e"),K=h(B[0]+"e"+(+B[1]+k));return B=(En(K)+"e").split("e"),+(B[0]+"e"+(+B[1]-k))}return h(b)}}var ml=al&&1/Gl(new al([,-0]))[1]==Je?function(u){return new al(u)}:Oh;function Im(u){return function(h){var b=In(h);return b==at?xo(h):b==Bn?rm(h):j0(h,u(h))}}function Va(u,h,b,k,B,K,ne,fe){var ye=h&Z;if(!ye&&typeof u!="function")throw new Qi(g);var Oe=k?k.length:0;if(Oe||(h&=~(se|he),k=B=n),ne=ne===n?ne:Gn(Ft(ne),0),fe=fe===n?fe:Ft(fe),Oe-=B?B.length:0,h&he){var Re=k,je=B;k=B=n}var nt=ye?n:cu(u),pt=[u,h,b,k,B,Re,je,K,ne,fe];if(nt&&Lb(pt,nt),u=pt[0],h=pt[1],b=pt[2],k=pt[3],B=pt[4],fe=pt[9]=pt[9]===n?ye?0:u.length:Gn(pt[9]-Oe,0),!fe&&h&(z|H)&&(h&=~(z|H)),!h||h==X)var Bt=bb(u,h,b);else h==z||h==H?Bt=b_(u,h,fe):(h==se||h==(X|se))&&!B.length?Bt=xb(u,h,b,k):Bt=Ud.apply(n,pt);var Nt=nt?Em:Hm;return Wm(Nt(Bt,pt),u,h)}function E_(u,h,b,k){return u===n||Hi(u,ti[b])&&!Sn.call(k,b)?h:u}function T_(u,h,b,k,B,K){return ir(u)&&ir(h)&&(K.set(h,u),au(u,h,n,T_,K),K.delete(h)),u}function Sb(u){return xu(u)?n:u}function C_(u,h,b,k,B,K){var ne=b&$,fe=u.length,ye=h.length;if(fe!=ye&&!(ne&&ye>fe))return!1;var Oe=K.get(u),Re=K.get(h);if(Oe&&Re)return Oe==h&&Re==u;var je=-1,nt=!0,pt=b&V?new vs:n;for(K.set(u,h),K.set(h,u);++je<fe;){var Bt=u[je],Nt=h[je];if(k)var Rt=ne?k(Nt,Bt,je,h,u,K):k(Bt,Nt,je,u,h,K);if(Rt!==n){if(Rt)continue;nt=!1;break}if(pt){if(!bc(h,function(un,gn){if(!Js(pt,gn)&&(Bt===un||B(Bt,un,b,k,K)))return pt.push(gn)})){nt=!1;break}}else if(!(Bt===Nt||B(Bt,Nt,b,k,K))){nt=!1;break}}return K.delete(u),K.delete(h),nt}function Eb(u,h,b,k,B,K,ne){switch(b){case Yr:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case er:return!(u.byteLength!=h.byteLength||!K(new kc(u),new kc(h)));case rt:case ct:case ft:return Hi(+u,+h);case Ct:return u.name==h.name&&u.message==h.message;case Mn:case Vn:return u==h+"";case at:var fe=xo;case Bn:var ye=k&$;if(fe||(fe=Gl),u.size!=h.size&&!ye)return!1;var Oe=ne.get(u);if(Oe)return Oe==h;k|=V,ne.set(u,h);var Re=C_(fe(u),fe(h),k,B,K,ne);return ne.delete(u),Re;case Qn:if(Ic)return Ic.call(u)==Ic.call(h)}return!1}function Tb(u,h,b,k,B,K){var ne=b&$,fe=Om(u),ye=fe.length,Oe=Om(h),Re=Oe.length;if(ye!=Re&&!ne)return!1;for(var je=ye;je--;){var nt=fe[je];if(!(ne?nt in h:Sn.call(h,nt)))return!1}var pt=K.get(u),Bt=K.get(h);if(pt&&Bt)return pt==h&&Bt==u;var Nt=!0;K.set(u,h),K.set(h,u);for(var Rt=ne;++je<ye;){nt=fe[je];var un=u[nt],gn=h[nt];if(k)var ii=ne?k(gn,un,nt,h,u,K):k(un,gn,nt,u,h,K);if(!(ii===n?un===gn||B(un,gn,b,k,K):ii)){Nt=!1;break}Rt||(Rt=nt=="constructor")}if(Nt&&!Rt){var Wr=u.constructor,Di=h.constructor;Wr!=Di&&"constructor"in u&&"constructor"in h&&!(typeof Wr=="function"&&Wr instanceof Wr&&typeof Di=="function"&&Di instanceof Di)&&(Nt=!1)}return K.delete(u),K.delete(h),Nt}function Za(u){return Vd($m(u,n,lt),u+"")}function Om(u){return kd(u,xr,Dm)}function Rm(u){return kd(u,mi,zm)}var cu=eu?function(u){return eu.get(u)}:Oh;function Zc(u){for(var h=u.name+"",b=tu[h],k=Sn.call(tu,h)?b.length:0;k--;){var B=b[k],K=B.func;if(K==null||K==u)return B.name}return h}function fu(u){var h=Sn.call(G,"placeholder")?G:u;return h.placeholder}function Ut(){var u=G.iteratee||Dg;return u=u===Dg?Bc:u,arguments.length?u(arguments[0],arguments[1]):u}function jd(u,h){var b=u.__data__;return k_(h)?b[typeof h=="string"?"string":"hash"]:b.map}function qc(u){for(var h=xr(u),b=h.length;b--;){var k=h[b],B=u[k];h[b]=[k,B,Kc(B)]}return h}function gl(u,h){var b=tm(u,h);return ym(b)?b:n}function Cb(u){var h=Sn.call(u,nl),b=u[nl];try{u[nl]=n;var k=!0}catch{}var B=tl.call(u);return k&&(h?u[nl]=b:delete u[nl]),B}var Dm=il?function(u){return u==null?[]:(u=Un(u),ps(il(u),function(h){return fm.call(u,h)}))}:$g,zm=il?function(u){for(var h=[];u;)bi(h,Dm(u)),u=Ac(u);return h}:$g,In=jr;(ol&&In(new ol(new ArrayBuffer(1)))!=Yr||gs&&In(new gs)!=at||yd&&In(yd.resolve())!=ur||al&&In(new al)!=Bn||Pc&&In(new Pc)!=Nn)&&(In=function(u){var h=jr(u),b=h==_n?u.constructor:n,k=b?ha(b):"";if(k)switch(k){case H2:return Yr;case wd:return at;case dm:return ur;case sa:return Bn;case Ho:return Nn}return h});function kb(u,h,b){for(var k=-1,B=b.length;++k<B;){var K=b[k],ne=K.size;switch(K.type){case"drop":u+=ne;break;case"dropRight":h-=ne;break;case"take":h=Lr(h,u+ne);break;case"takeRight":u=Gn(u,h-ne);break}}return{start:u,end:h}}function Ab(u){var h=u.match(_o);return h?h[1].split(oe):[]}function Gc(u,h,b){h=Wa(h,u);for(var k=-1,B=h.length,K=!1;++k<B;){var ne=Mt(h[k]);if(!(K=u!=null&&b(u,ne)))break;u=u[ne]}return K||++k!=B?K:(B=u==null?0:u.length,!!B&&Go(B)&&qa(ne,B)&&(Ht(u)||ma(u)))}function Um(u){var h=u.length,b=new u.constructor(h);return h&&typeof u[0]=="string"&&Sn.call(u,"index")&&(b.index=u.index,b.input=u.input),b}function Fm(u){return typeof u.constructor=="function"&&!Yc(u)?ll(Ac(u)):{}}function Ti(u,h,b){var k=u.constructor;switch(h){case er:return uu(u);case rt:case ct:return new k(+u);case Yr:return Rd(u,b);case Kr:case Uo:case ci:case fi:case Fr:case Jr:case Fo:case go:case La:return m_(u,b);case at:return new k;case ft:case Vn:return new k(u);case Mn:return Mm(u);case Bn:return new k;case Qn:return wb(u)}}function Or(u,h){var b=h.length;if(!b)return u;var k=b-1;return h[k]=(b>1?"& ":"")+h[k],h=h.join(b>2?", ":" "),u.replace(yi,`{
/* [wrapped with `+h+`] */
`)}function Ts(u){return Ht(u)||ma(u)||!!(G0&&u&&u[G0])}function qa(u,h){var b=typeof u;return h=h??Le,!!h&&(b=="number"||b!="symbol"&&$e.test(u))&&u>-1&&u%1==0&&u<h}function Ci(u,h,b){if(!ir(b))return!1;var k=typeof h;return(k=="number"?Ii(b)&&qa(h,b.length):k=="string"&&h in b)?Hi(b[h],u):!1}function Bm(u,h){if(Ht(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||Oi(u)?!0:Xt.test(u)||!gt.test(u)||h!=null&&u in Un(h)}function k_(u){var h=typeof u;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?u!=="__proto__":u===null}function Hd(u){var h=Zc(u),b=G[h];if(typeof b!="function"||!(h in fn.prototype))return!1;if(u===b)return!0;var k=cu(b);return!!k&&u===k[0]}function Mb(u){return!!Ra&&Ra in u}var Nb=Tc?qo:jg;function Yc(u){var h=u&&u.constructor,b=typeof h=="function"&&h.prototype||ti;return u===b}function Kc(u){return u===u&&!ir(u)}function vl(u,h){return function(b){return b==null?!1:b[u]===h&&(h!==n||u in Un(b))}}function A_(u){var h=uh(u,function(k){return b.size===E&&b.clear(),k}),b=h.cache;return h}function Lb(u,h){var b=u[1],k=h[1],B=b|k,K=B<(X|Z|pe),ne=k==pe&&b==z||k==pe&&b==ge&&u[7].length<=h[8]||k==(pe|ge)&&h[7].length<=h[8]&&b==z;if(!(K||ne))return u;k&X&&(u[2]=h[2],B|=b&X?0:D);var fe=h[3];if(fe){var ye=u[3];u[3]=ye?g_(ye,fe,h[4]):fe,u[4]=ye?Oa(u[3],M):h[4]}return fe=h[5],fe&&(ye=u[5],u[5]=ye?v_(ye,fe,h[6]):fe,u[6]=ye?Oa(u[5],M):h[6]),fe=h[7],fe&&(u[7]=fe),k&pe&&(u[8]=u[8]==null?h[8]:Lr(u[8],h[8])),u[9]==null&&(u[9]=h[9]),u[0]=h[0],u[1]=B,u}function du(u){var h=[];if(u!=null)for(var b in Un(u))h.push(b);return h}function Wd(u){return tl.call(u)}function $m(u,h,b){return h=Gn(h===n?u.length-1:h,0),function(){for(var k=arguments,B=-1,K=Gn(k.length-h,0),ne=Ce(K);++B<K;)ne[B]=k[h+B];B=-1;for(var fe=Ce(h+1);++B<h;)fe[B]=k[B];return fe[h]=b(ne),Ji(u,this,fe)}}function jm(u,h){return h.length<2?u:bs(u,Ao(h,0,-1))}function M_(u,h){for(var b=u.length,k=Lr(h.length,b),B=Si(u);k--;){var K=h[k];u[k]=qa(K,b)?B[K]:n}return u}function hu(u,h){if(!(h==="constructor"&&typeof u[h]=="function")&&h!="__proto__")return u[h]}var Hm=Vm(Em),pu=vd||function(u,h){return ei.setTimeout(u,h)},Vd=Vm(_b);function Wm(u,h,b){var k=h+"";return Vd(u,Or(k,en(Ab(k),b)))}function Vm(u){var h=0,b=0;return function(){var k=Lc(),B=Xe-(k-b);if(b=k,B>0){if(++h>=it)return arguments[0]}else h=0;return u.apply(n,arguments)}}function Jc(u,h){var b=-1,k=u.length,B=k-1;for(h=h===n?k:h;++b<h;){var K=xm(b,B),ne=u[K];u[K]=u[b],u[b]=ne}return u.length=h,u}var Zm=A_(function(u){var h=[];return u.charCodeAt(0)===46&&h.push(""),u.replace(Ln,function(b,k,B,K){h.push(B?K.replace(kt,"$1"):k||b)}),h});function Mt(u){if(typeof u=="string"||Oi(u))return u;var h=u+"";return h=="0"&&1/u==-Je?"-0":h}function ha(u){if(u!=null){try{return Yl.call(u)}catch{}try{return u+""}catch{}}return""}function en(u,h){return wo(At,function(b){var k="_."+b[0];h&b[1]&&!wc(u,k)&&u.push(k)}),u.sort()}function tr(u){if(u instanceof fn)return u.clone();var h=new Eo(u.__wrapped__,u.__chain__);return h.__actions__=Si(u.__actions__),h.__index__=u.__index__,h.__values__=u.__values__,h}function Zd(u,h,b){(b?Ci(u,h,b):h===n)?h=1:h=Gn(Ft(h),0);var k=u==null?0:u.length;if(!k||h<1)return[];for(var B=0,K=0,ne=Ce(Mc(k/h));B<k;)ne[K++]=Ao(u,B,B+=h);return ne}function ki(u){for(var h=-1,b=u==null?0:u.length,k=0,B=[];++h<b;){var K=u[h];K&&(B[k++]=K)}return B}function $n(){var u=arguments.length;if(!u)return[];for(var h=Ce(u-1),b=arguments[0],k=u;k--;)h[k-1]=arguments[k];return bi(Ht(b)?Si(b):[b],Pr(h,1))}var Pt=Qt(function(u,h){return vr(u)?Dc(u,Pr(h,1,vr,!0)):[]}),mn=Qt(function(u,h){var b=ji(h);return vr(b)&&(b=n),vr(u)?Dc(u,Pr(h,1,vr,!0),Ut(b,2)):[]}),mu=Qt(function(u,h){var b=ji(h);return vr(b)&&(b=n),vr(u)?Dc(u,Pr(h,1,vr,!0),n,b):[]});function Ai(u,h,b){var k=u==null?0:u.length;return k?(h=b||h===n?1:Ft(h),Ao(u,h<0?0:h,k)):[]}function wt(u,h,b){var k=u==null?0:u.length;return k?(h=b||h===n?1:Ft(h),h=k-h,Ao(u,0,h<0?0:h)):[]}function qd(u,h){return u&&u.length?Id(u,Ut(h,3),!0,!0):[]}function N_(u,h){return u&&u.length?Id(u,Ut(h,3),!0):[]}function qm(u,h,b,k){var B=u==null?0:u.length;return B?(b&&typeof b!="number"&&Ci(u,h,b)&&(b=0,k=B),gm(u,h,b,k)):[]}function Xc(u,h,b){var k=u==null?0:u.length;if(!k)return-1;var B=b==null?0:Ft(b);return B<0&&(B=Gn(k+B,0)),Ys(u,Ut(h,3),B)}function Gd(u,h,b){var k=u==null?0:u.length;if(!k)return-1;var B=k-1;return b!==n&&(B=Ft(b),B=b<0?Gn(k+B,0):Lr(B,k-1)),Ys(u,Ut(h,3),B,!0)}function lt(u){var h=u==null?0:u.length;return h?Pr(u,1):[]}function Mo(u){var h=u==null?0:u.length;return h?Pr(u,Je):[]}function Hr(u,h){var b=u==null?0:u.length;return b?(h=h===n?1:Ft(h),Pr(u,h)):[]}function Gm(u){for(var h=-1,b=u==null?0:u.length,k={};++h<b;){var B=u[h];k[B[0]]=B[1]}return k}function Ym(u){return u&&u.length?u[0]:n}function Mi(u,h,b){var k=u==null?0:u.length;if(!k)return-1;var B=b==null?0:Ft(b);return B<0&&(B=Gn(k+B,0)),bo(u,h,B)}function L_(u){var h=u==null?0:u.length;return h?Ao(u,0,-1):[]}var nr=Qt(function(u){var h=qn(u,Es);return h.length&&h[0]===u[0]?Ad(h):[]}),Yd=Qt(function(u){var h=ji(u),b=qn(u,Es);return h===ji(b)?h=n:b.pop(),b.length&&b[0]===u[0]?Ad(b,Ut(h,2)):[]}),P_=Qt(function(u){var h=ji(u),b=qn(u,Es);return h=typeof h=="function"?h:n,h&&b.pop(),b.length&&b[0]===u[0]?Ad(b,n,h):[]});function I_(u,h){return u==null?"":Nc.call(u,h)}function ji(u){var h=u==null?0:u.length;return h?u[h-1]:n}function O_(u,h,b){var k=u==null?0:u.length;if(!k)return-1;var B=k;return b!==n&&(B=Ft(b),B=B<0?Gn(k+B,0):Lr(B,k-1)),h===h?Sc(u,h,B):Ys(u,qp,B,!0)}function Zo(u,h){return u&&u.length?xs(u,Ft(h)):n}var R_=Qt(Km);function Km(u,h){return u&&u.length&&h&&h.length?Ha(u,h):u}function Jm(u,h,b){return u&&u.length&&h&&h.length?Ha(u,h,Ut(b,2)):u}function Xm(u,h,b){return u&&u.length&&h&&h.length?Ha(u,h,n,b):u}var Qm=Za(function(u,h){var b=u==null?0:u.length,k=Ed(u,h);return f_(u,qn(h,function(B){return qa(B,b)?+B:B}).sort(dl)),k});function rr(u,h){var b=[];if(!(u&&u.length))return b;var k=-1,B=[],K=u.length;for(h=Ut(h,3);++k<K;){var ne=u[k];h(ne,k,u)&&(b.push(ne),B.push(k))}return f_(u,B),b}function pi(u){return u==null?u:j2.call(u)}function fr(u,h,b){var k=u==null?0:u.length;return k?(b&&typeof b!="number"&&Ci(u,h,b)?(h=0,b=k):(h=h==null?0:Ft(h),b=b===n?k:Ft(b)),Ao(u,h,b)):[]}function eo(u,h){return Pd(u,h)}function _l(u,h,b){return Tm(u,h,Ut(b,2))}function D_(u,h){var b=u==null?0:u.length;if(b){var k=Pd(u,h);if(k<b&&Hi(u[k],h))return k}return-1}function z_(u,h){return Pd(u,h,!0)}function gu(u,h,b){return Tm(u,h,Ut(b,2),!0)}function Qc(u,h){var b=u==null?0:u.length;if(b){var k=Pd(u,h,!0)-1;if(Hi(u[k],h))return k}return-1}function Cs(u){return u&&u.length?ca(u):[]}function Ga(u,h){return u&&u.length?ca(u,Ut(h,2)):[]}function Kd(u){var h=u==null?0:u.length;return h?Ao(u,1,h):[]}function Jd(u,h,b){return u&&u.length?(h=b||h===n?1:Ft(h),Ao(u,0,h<0?0:h)):[]}function pa(u,h,b){var k=u==null?0:u.length;return k?(h=b||h===n?1:Ft(h),h=k-h,Ao(u,h<0?0:h,k)):[]}function Pb(u,h){return u&&u.length?Id(u,Ut(h,3),!1,!0):[]}function Ib(u,h){return u&&u.length?Id(u,Ut(h,3)):[]}var Ob=Qt(function(u){return fa(Pr(u,1,vr,!0))}),U_=Qt(function(u){var h=ji(u);return vr(h)&&(h=n),fa(Pr(u,1,vr,!0),Ut(h,2))}),Xd=Qt(function(u){var h=ji(u);return h=typeof h=="function"?h:n,fa(Pr(u,1,vr,!0),n,h)});function yl(u){return u&&u.length?fa(u):[]}function Qd(u,h){return u&&u.length?fa(u,Ut(h,2)):[]}function vu(u,h){return h=typeof h=="function"?h:n,u&&u.length?fa(u,n,h):[]}function ef(u){if(!(u&&u.length))return[];var h=0;return u=ps(u,function(b){if(vr(b))return h=Gn(b.length,h),!0}),ud(h,function(b){return qn(u,ql(b))})}function tf(u,h){if(!(u&&u.length))return[];var b=ef(u);return h==null?b:qn(b,function(k){return Ji(h,n,k)})}var eh=Qt(function(u,h){return vr(u)?Dc(u,h):[]}),nf=Qt(function(u){return jc(ps(u,vr))}),th=Qt(function(u){var h=ji(u);return vr(h)&&(h=n),jc(ps(u,vr),Ut(h,2))}),nh=Qt(function(u){var h=ji(u);return h=typeof h=="function"?h:n,jc(ps(u,vr),n,h)}),rh=Qt(ef);function ih(u,h){return lu(u||[],h||[],Oc)}function oh(u,h){return lu(u||[],h||[],su)}var ah=Qt(function(u){var h=u.length,b=h>1?u[h-1]:n;return b=typeof b=="function"?(u.pop(),b):n,tf(u,b)});function rf(u){var h=G(u);return h.__chain__=!0,h}function eg(u,h){return h(u),u}function _u(u,h){return h(u)}var tg=Za(function(u){var h=u.length,b=h?u[0]:0,k=this.__wrapped__,B=function(K){return Ed(K,u)};return h>1||this.__actions__.length||!(k instanceof fn)||!qa(b)?this.thru(B):(k=k.slice(b,+b+(h?1:0)),k.__actions__.push({func:_u,args:[B],thisArg:n}),new Eo(k,this.__chain__).thru(function(K){return h&&!K.length&&K.push(n),K}))});function F_(){return rf(this)}function B_(){return new Eo(this.value(),this.__chain__)}function Ni(){this.__values__===n&&(this.__values__=xh(this.value()));var u=this.__index__>=this.__values__.length,h=u?n:this.__values__[this.__index__++];return{done:u,value:h}}function Li(){return this}function Pi(u){for(var h,b=this;b instanceof bd;){var k=tr(b);k.__index__=0,k.__values__=n,h?B.__wrapped__=k:h=k;var B=k;b=b.__wrapped__}return B.__wrapped__=u,h}function Ya(){var u=this.__wrapped__;if(u instanceof fn){var h=u;return this.__actions__.length&&(h=new fn(this)),h=h.reverse(),h.__actions__.push({func:_u,args:[pi],thisArg:n}),new Eo(h,this.__chain__)}return this.thru(pi)}function ng(){return ni(this.__wrapped__,this.__actions__)}var $_=Dd(function(u,h,b){Sn.call(u,b)?++u[b]:Ba(u,b,1)});function j_(u,h,b){var k=Ht(u)?B0:ub;return b&&Ci(u,h,b)&&(h=n),k(u,Ut(h,3))}function H_(u,h){var b=Ht(u)?ps:vm;return b(u,Ut(h,3))}var W_=Lm(Xc),Rb=Lm(Gd);function Db(u,h){return Pr(sh(u,h),1)}function to(u,h){return Pr(sh(u,h),Je)}function zb(u,h,b){return b=b===n?1:Ft(b),Pr(sh(u,h),b)}function rg(u,h){var b=Ht(u)?wo:ys;return b(u,Ut(h,3))}function No(u,h){var b=Ht(u)?F2:Td;return b(u,Ut(h,3))}var ig=Dd(function(u,h,b){Sn.call(u,b)?u[b].push(h):Ba(u,b,[h])});function of(u,h,b,k){u=Ii(u)?u:Ja(u),b=b&&!k?Ft(b):0;var B=u.length;return b<0&&(b=Gn(B+b,0)),wl(u)?b<=B&&u.indexOf(h,b)>-1:!!B&&bo(u,h,b)>-1}var V_=Qt(function(u,h,b){var k=-1,B=typeof h=="function",K=Ii(u)?Ce(u.length):[];return ys(u,function(ne){K[++k]=B?Ji(h,ne,b):zc(ne,h,b)}),K}),Ub=Dd(function(u,h,b){Ba(u,b,h)});function sh(u,h){var b=Ht(u)?qn:Nd;return b(u,Ut(h,3))}function Z_(u,h,b,k){return u==null?[]:(Ht(h)||(h=h==null?[]:[h]),b=k?n:b,Ht(b)||(b=b==null?[]:[b]),c_(u,h,b))}var Fb=Dd(function(u,h,b){u[b?0:1].push(h)},function(){return[[],[]]});function Bb(u,h,b){var k=Ht(u)?ad:Yp,B=arguments.length<3;return k(u,Ut(h,4),b,B,ys)}function $b(u,h,b){var k=Ht(u)?sd:Yp,B=arguments.length<3;return k(u,Ut(h,4),b,B,Td)}function q_(u,h){var b=Ht(u)?ps:vm;return b(u,ch(Ut(h,3)))}function yu(u){var h=Ht(u)?mm:gb;return h(u)}function og(u,h,b){(b?Ci(u,h,b):h===n)?h=1:h=Ft(h);var k=Ht(u)?_s:vb;return k(u,h)}function ag(u){var h=Ht(u)?n_:Ss;return h(u)}function sg(u){if(u==null)return 0;if(Ii(u))return wl(u)?Xs(u):u.length;var h=In(u);return h==at||h==Bn?u.size:Md(u).length}function G_(u,h,b){var k=Ht(u)?bc:yb;return b&&Ci(u,h,b)&&(h=n),k(u,Ut(h,3))}var Y_=Qt(function(u,h){if(u==null)return[];var b=h.length;return b>1&&Ci(u,h[0],h[1])?h=[]:b>2&&Ci(h[0],h[1],h[2])&&(h=[h[0]]),c_(u,Pr(h,1),[])}),af=$2||function(){return ei.Date.now()};function K_(u,h){if(typeof h!="function")throw new Qi(g);return u=Ft(u),function(){if(--u<1)return h.apply(this,arguments)}}function lg(u,h,b){return h=b?n:h,h=u&&h==null?u.length:h,Va(u,pe,n,n,n,n,h)}function ug(u,h){var b;if(typeof h!="function")throw new Qi(g);return u=Ft(u),function(){return--u>0&&(b=h.apply(this,arguments)),u<=1&&(h=n),b}}var lh=Qt(function(u,h,b){var k=X;if(b.length){var B=Oa(b,fu(lh));k|=se}return Va(u,k,h,b,B)}),sf=Qt(function(u,h,b){var k=X|Z;if(b.length){var B=Oa(b,fu(sf));k|=se}return Va(h,k,u,b,B)});function lf(u,h,b){h=b?n:h;var k=Va(u,z,n,n,n,n,n,h);return k.placeholder=lf.placeholder,k}function cg(u,h,b){h=b?n:h;var k=Va(u,H,n,n,n,n,n,h);return k.placeholder=cg.placeholder,k}function fg(u,h,b){var k,B,K,ne,fe,ye,Oe=0,Re=!1,je=!1,nt=!0;if(typeof u!="function")throw new Qi(g);h=ro(h)||0,ir(b)&&(Re=!!b.leading,je="maxWait"in b,K=je?Gn(ro(b.maxWait)||0,h):K,nt="trailing"in b?!!b.trailing:nt);function pt(hr){var Vr=k,_a=B;return k=B=n,Oe=hr,ne=u.apply(_a,Vr),ne}function Bt(hr){return Oe=hr,fe=pu(un,h),Re?pt(hr):ne}function Nt(hr){var Vr=hr-ye,_a=hr-Oe,Vg=h-Vr;return je?Lr(Vg,K-_a):Vg}function Rt(hr){var Vr=hr-ye,_a=hr-Oe;return ye===n||Vr>=h||Vr<0||je&&_a>=K}function un(){var hr=af();if(Rt(hr))return gn(hr);fe=pu(un,Nt(hr))}function gn(hr){return fe=n,nt&&k?pt(hr):(k=B=n,ne)}function ii(){fe!==n&&Hc(fe),Oe=0,k=ye=B=fe=n}function Wr(){return fe===n?ne:gn(af())}function Di(){var hr=af(),Vr=Rt(hr);if(k=arguments,B=this,ye=hr,Vr){if(fe===n)return Bt(ye);if(je)return Hc(fe),fe=pu(un,h),pt(ye)}return fe===n&&(fe=pu(un,h)),ne}return Di.cancel=ii,Di.flush=Wr,Di}var dg=Qt(function(u,h){return o_(u,1,h)}),J_=Qt(function(u,h,b){return o_(u,ro(h)||0,b)});function X_(u){return Va(u,ke)}function uh(u,h){if(typeof u!="function"||h!=null&&typeof h!="function")throw new Qi(g);var b=function(){var k=arguments,B=h?h.apply(this,k):k[0],K=b.cache;if(K.has(B))return K.get(B);var ne=u.apply(this,k);return b.cache=K.set(B,ne)||K,ne};return b.cache=new(uh.Cache||Ua),b}uh.Cache=Ua;function ch(u){if(typeof u!="function")throw new Qi(g);return function(){var h=arguments;switch(h.length){case 0:return!u.call(this);case 1:return!u.call(this,h[0]);case 2:return!u.call(this,h[0],h[1]);case 3:return!u.call(this,h[0],h[1],h[2])}return!u.apply(this,h)}}function hg(u){return ug(2,u)}var Q_=p_(function(u,h){h=h.length==1&&Ht(h[0])?qn(h[0],$i(Ut())):qn(Pr(h,1),$i(Ut()));var b=h.length;return Qt(function(k){for(var B=-1,K=Lr(k.length,b);++B<K;)k[B]=h[B].call(this,k[B]);return Ji(u,this,k)})}),uf=Qt(function(u,h){var b=Oa(h,fu(uf));return Va(u,se,n,h,b)}),fh=Qt(function(u,h){var b=Oa(h,fu(fh));return Va(u,he,n,h,b)}),dh=Za(function(u,h){return Va(u,ge,n,n,n,h)});function hh(u,h){if(typeof u!="function")throw new Qi(g);return h=h===n?h:Ft(h),Qt(u,h)}function cf(u,h){if(typeof u!="function")throw new Qi(g);return h=h==null?0:Gn(Ft(h),0),Qt(function(b){var k=b[h],B=cr(b,0,h);return k&&bi(B,k),Ji(u,this,B)})}function ph(u,h,b){var k=!0,B=!0;if(typeof u!="function")throw new Qi(g);return ir(b)&&(k="leading"in b?!!b.leading:k,B="trailing"in b?!!b.trailing:B),fg(u,h,{leading:k,maxWait:h,trailing:B})}function mh(u){return lg(u,1)}function wu(u,h){return uf(Od(h),u)}function jb(){if(!arguments.length)return[];var u=arguments[0];return Ht(u)?u:[u]}function Hb(u){return ko(u,F)}function Wb(u,h){return h=typeof h=="function"?h:n,ko(u,F,h)}function e1(u){return ko(u,N|F)}function pg(u,h){return h=typeof h=="function"?h:n,ko(u,N|F,h)}function Vb(u,h){return h==null||i_(u,h,xr(h))}function Hi(u,h){return u===h||u!==u&&h!==h}var t1=$d(nu),n1=$d(function(u,h){return u>=h}),ma=ru(function(){return arguments}())?ru:function(u){return dr(u)&&Sn.call(u,"callee")&&!fm.call(u,"callee")},Ht=Ce.isArray,r1=hs?$i(hs):db;function Ii(u){return u!=null&&Go(u.length)&&!qo(u)}function vr(u){return dr(u)&&Ii(u)}function i1(u){return u===!0||u===!1||dr(u)&&jr(u)==rt}var Ka=Jl||jg,o1=qs?$i(qs):hb;function a1(u){return dr(u)&&u.nodeType===1&&!xu(u)}function s1(u){if(u==null)return!0;if(Ii(u)&&(Ht(u)||typeof u=="string"||typeof u.splice=="function"||Ka(u)||ks(u)||ma(u)))return!u.length;var h=In(u);if(h==at||h==Bn)return!u.size;if(Yc(u))return!Md(u).length;for(var b in u)if(Sn.call(u,b))return!1;return!0}function l1(u,h){return Uc(u,h)}function mg(u,h,b){b=typeof b=="function"?b:n;var k=b?b(u,h):n;return k===n?Uc(u,h,n,b):!!k}function ff(u){if(!dr(u))return!1;var h=jr(u);return h==Ct||h==Ve||typeof u.message=="string"&&typeof u.name=="string"&&!xu(u)}function df(u){return typeof u=="number"&&Xl(u)}function qo(u){if(!ir(u))return!1;var h=jr(u);return h==Jt||h==Be||h==xt||h==gr}function gh(u){return typeof u=="number"&&u==Ft(u)}function Go(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=Le}function ir(u){var h=typeof u;return u!=null&&(h=="object"||h=="function")}function dr(u){return u!=null&&typeof u=="object"}var gg=Gs?$i(Gs):pb;function Zb(u,h){return u===h||Fc(u,h,qc(h))}function u1(u,h,b){return b=typeof b=="function"?b:n,Fc(u,h,qc(h),b)}function bu(u){return c1(u)&&u!=+u}function vh(u){if(Nb(u))throw new _t(f);return ym(u)}function hf(u){return u===null}function _h(u){return u==null}function c1(u){return typeof u=="number"||dr(u)&&jr(u)==ft}function xu(u){if(!dr(u)||jr(u)!=_n)return!1;var h=Ac(u);if(h===null)return!0;var b=Sn.call(h,"constructor")&&h.constructor;return typeof b=="function"&&b instanceof b&&Yl.call(b)==pd}var yh=Vl?$i(Vl):iu;function ga(u){return gh(u)&&u>=-Le&&u<=Le}var Yo=Bo?$i(Bo):ou;function wl(u){return typeof u=="string"||!Ht(u)&&dr(u)&&jr(u)==Vn}function Oi(u){return typeof u=="symbol"||dr(u)&&jr(u)==Qn}var ks=F0?$i(F0):s_;function pf(u){return u===n}function wh(u){return dr(u)&&In(u)==Nn}function bh(u){return dr(u)&&jr(u)==Zn}var Su=$d($c),vg=$d(function(u,h){return u<=h});function xh(u){if(!u)return[];if(Ii(u))return wl(u)?So(u):Si(u);if(Kl&&u[Kl])return dd(u[Kl]());var h=In(u),b=h==at?xo:h==Bn?Gl:Ja;return b(u)}function no(u){if(!u)return u===0?u:0;if(u=ro(u),u===Je||u===-Je){var h=u<0?-1:1;return h*Ye}return u===u?u:0}function Ft(u){var h=no(u),b=h%1;return h===h?b?h-b:h:0}function As(u){return u?Co(Ft(u),0,ut):0}function ro(u){if(typeof u=="number")return u;if(Oi(u))return Ze;if(ir(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=ir(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=Kp(u);var b=Me.test(u);return b||Pe.test(u)?rd(u.slice(2),b?2:8):Zt.test(u)?Ze:+u}function f1(u){return hi(u,mi(u))}function qb(u){return u?Co(Ft(u),-Le,Le):u===0?u:0}function En(u){return u==null?"":xi(u)}var Gb=Vo(function(u,h){if(Yc(h)||Ii(h)){hi(h,xr(h),u);return}for(var b in h)Sn.call(h,b)&&Oc(u,b,h[b])}),d1=Vo(function(u,h){hi(h,mi(h),u)}),Sh=Vo(function(u,h,b,k){hi(h,mi(h),u,k)}),h1=Vo(function(u,h,b,k){hi(h,xr(h),u,k)}),p1=Za(Ed);function m1(u,h){var b=ll(u);return h==null?b:Sd(b,h)}var _g=Qt(function(u,h){u=Un(u);var b=-1,k=h.length,B=k>2?h[2]:n;for(B&&Ci(h[0],h[1],B)&&(k=1);++b<k;)for(var K=h[b],ne=mi(K),fe=-1,ye=ne.length;++fe<ye;){var Oe=ne[fe],Re=u[Oe];(Re===n||Hi(Re,ti[Oe])&&!Sn.call(u,Oe))&&(u[Oe]=K[Oe])}return u}),g1=Qt(function(u){return u.push(n,T_),Ji(x1,n,u)});function v1(u,h){return Zp(u,Ut(h,3),Wo)}function mf(u,h){return Zp(u,Ut(h,3),$r)}function gf(u,h){return u==null?u:ws(u,Ut(h,3),mi)}function yg(u,h){return u==null?u:fl(u,Ut(h,3),mi)}function Eh(u,h){return u&&Wo(u,Ut(h,3))}function Yb(u,h){return u&&$r(u,Ut(h,3))}function _1(u){return u==null?[]:Ir(u,xr(u))}function y1(u){return u==null?[]:Ir(u,mi(u))}function Th(u,h,b){var k=u==null?n:bs(u,h);return k===n?b:k}function w1(u,h){return u!=null&&Gc(u,h,cb)}function bl(u,h){return u!=null&&Gc(u,h,$a)}var wg=Vc(function(u,h,b){h!=null&&typeof h.toString!="function"&&(h=tl.call(h)),u[h]=b},Ph(Ri)),bg=Vc(function(u,h,b){h!=null&&typeof h.toString!="function"&&(h=tl.call(h)),Sn.call(u,h)?u[h].push(b):u[h]=[b]},Ut),Ch=Qt(zc);function xr(u){return Ii(u)?pm(u):Md(u)}function mi(u){return Ii(u)?pm(u,!0):l_(u)}function xg(u,h){var b={};return h=Ut(h,3),Wo(u,function(k,B,K){Ba(b,h(k,B,K),k)}),b}function Kb(u,h){var b={};return h=Ut(h,3),Wo(u,function(k,B,K){Ba(b,B,h(k,B,K))}),b}var b1=Vo(function(u,h,b){au(u,h,b)}),x1=Vo(function(u,h,b,k){au(u,h,b,k)}),S1=Za(function(u,h){var b={};if(u==null)return b;var k=!1;h=qn(h,function(K){return K=Wa(K,u),k||(k=K.length>1),K}),hi(u,Rm(u),b),k&&(b=ko(b,N|R|F,Sb));for(var B=h.length;B--;)km(b,h[B]);return b});function va(u,h){return kh(u,ch(Ut(h)))}var Sg=Za(function(u,h){return u==null?{}:bm(u,h)});function kh(u,h){if(u==null)return{};var b=qn(Rm(u),function(k){return[k]});return h=Ut(h),ja(u,b,function(k,B){return h(k,B[0])})}function E1(u,h,b){h=Wa(h,u);var k=-1,B=h.length;for(B||(B=1,u=n);++k<B;){var K=u==null?n:u[Mt(h[k])];K===n&&(k=B,K=b),u=qo(K)?K.call(u):K}return u}function Ah(u,h,b){return u==null?u:su(u,h,b)}function T1(u,h,b,k){return k=typeof k=="function"?k:n,u==null?u:su(u,h,b,k)}var Eg=Im(xr),Eu=Im(mi);function Tg(u,h,b){var k=Ht(u),B=k||Ka(u)||ks(u);if(h=Ut(h,4),b==null){var K=u&&u.constructor;B?b=k?new K:[]:ir(u)?b=qo(K)?ll(Ac(u)):{}:b={}}return(B?wo:Wo)(u,function(ne,fe,ye){return h(b,ne,fe,ye)}),b}function Cg(u,h){return u==null?!0:km(u,h)}function vf(u,h,b){return u==null?u:h_(u,h,Od(b))}function C1(u,h,b,k){return k=typeof k=="function"?k:n,u==null?u:h_(u,h,Od(b),k)}function Ja(u){return u==null?[]:cd(u,xr(u))}function k1(u){return u==null?[]:cd(u,mi(u))}function _f(u,h,b){return b===n&&(b=h,h=n),b!==n&&(b=ro(b),b=b===b?b:0),h!==n&&(h=ro(h),h=h===h?h:0),Co(ro(u),h,b)}function A1(u,h,b){return h=no(h),b===n?(b=h,h=0):b=no(b),u=ro(u),a_(u,h,b)}function yf(u,h,b){if(b&&typeof b!="boolean"&&Ci(u,h,b)&&(h=b=n),b===n&&(typeof h=="boolean"?(b=h,h=n):typeof u=="boolean"&&(b=u,u=n)),u===n&&h===n?(u=0,h=1):(u=no(u),h===n?(h=u,u=0):h=no(h)),u>h){var k=u;u=h,h=k}if(b||u%1||h%1){var B=Ql();return Lr(u+B*(h-u+nd("1e-"+((B+"").length-1))),h)}return xm(u,h)}var wf=hl(function(u,h,b){return h=h.toLowerCase(),u+(b?Tu(h):h)});function Tu(u){return Au(En(u).toLowerCase())}function Cu(u){return u=En(u),u&&u.replace($t,$o).replace(wi,"")}function Mh(u,h,b){u=En(u),h=xi(h);var k=u.length;b=b===n?k:Co(Ft(b),0,k);var B=b;return b-=h.length,b>=0&&u.slice(b,B)==h}function kg(u){return u=En(u),u&&yt.test(u)?u.replace(Ne,Qp):u}function Ag(u){return u=En(u),u&&jt.test(u)?u.replace(Vt,"\\$&"):u}var Mg=hl(function(u,h,b){return u+(b?"-":"")+h.toLowerCase()}),Ng=hl(function(u,h,b){return u+(b?" ":"")+h.toLowerCase()}),Lg=zd("toLowerCase");function Pg(u,h,b){u=En(u),h=Ft(h);var k=h?Xs(u):0;if(!h||k>=h)return u;var B=(h-k)/2;return Bd(rl(B),b)+u+Bd(Mc(B),b)}function Jb(u,h,b){u=En(u),h=Ft(h);var k=h?Xs(u):0;return h&&k<h?u+Bd(h-k,b):u}function Xb(u,h,b){u=En(u),h=Ft(h);var k=h?Xs(u):0;return h&&k<h?Bd(h-k,b)+u:u}function Qb(u,h,b){return b||h==null?h=0:h&&(h=+h),K0(En(u).replace(Pn,""),h||0)}function ex(u,h,b){return(b?Ci(u,h,b):h===n)?h=1:h=Ft(h),Sm(En(u),h)}function Ig(){var u=arguments,h=En(u[0]);return u.length<3?h:h.replace(u[1],u[2])}var tx=hl(function(u,h,b){return u+(b?"_":"")+h.toLowerCase()});function nx(u,h,b){return b&&typeof b!="number"&&Ci(u,h,b)&&(h=b=n),b=b===n?ut:b>>>0,b?(u=En(u),u&&(typeof h=="string"||h!=null&&!yh(h))&&(h=xi(h),!h&&ms(u))?cr(So(u),0,b):u.split(h,b)):[]}var rx=hl(function(u,h,b){return u+(b?" ":"")+Au(h)});function M1(u,h,b){return u=En(u),b=b==null?0:Co(Ft(b),0,u.length),h=xi(h),u.slice(b,b+h.length)==h}function xl(u,h,b){var k=G.templateSettings;b&&Ci(u,h,b)&&(h=n),u=En(u),h=Sh({},h,k,E_);var B=Sh({},h.imports,k.imports,E_),K=xr(B),ne=cd(B,K),fe,ye,Oe=0,Re=h.interpolate||xn,je="__p += '",nt=om((h.escape||xn).source+"|"+Re.source+"|"+(Re===bt?Gt:xn).source+"|"+(h.evaluate||xn).source+"|$","g"),pt="//# sourceURL="+(Sn.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++U0+"]")+`
`;u.replace(nt,function(Rt,un,gn,ii,Wr,Di){return gn||(gn=ii),je+=u.slice(Oe,Di).replace(Jn,em),un&&(fe=!0,je+=`' +
__e(`+un+`) +
'`),Wr&&(ye=!0,je+=`';
`+Wr+`;
__p += '`),gn&&(je+=`' +
((__t = (`+gn+`)) == null ? '' : __t) +
'`),Oe=Di+Rt.length,Rt}),je+=`';
`;var Bt=Sn.call(h,"variable")&&h.variable;if(!Bt)je=`with (obj) {
`+je+`
}
`;else if(Ge.test(Bt))throw new _t(w);je=(ye?je.replace(vo,""):je).replace(Pa,"$1").replace(we,"$1;"),je="function("+(Bt||"obj")+`) {
`+(Bt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fe?", __e = _.escape":"")+(ye?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+je+`return __p
}`;var Nt=Lh(function(){return pn(K,pt+"return "+je).apply(n,ne)});if(Nt.source=je,ff(Nt))throw Nt;return Nt}function Nh(u){return En(u).toLowerCase()}function N1(u){return En(u).toUpperCase()}function Sl(u,h,b){if(u=En(u),u&&(b||h===n))return Kp(u);if(!u||!(h=xi(h)))return u;var k=So(u),B=So(h),K=Jp(k,B),ne=Xp(k,B)+1;return cr(k,K,ne).join("")}function ku(u,h,b){if(u=En(u),u&&(b||h===n))return u.slice(0,im(u)+1);if(!u||!(h=xi(h)))return u;var k=So(u),B=Xp(k,So(h))+1;return cr(k,0,B).join("")}function L1(u,h,b){if(u=En(u),u&&(b||h===n))return u.replace(Pn,"");if(!u||!(h=xi(h)))return u;var k=So(u),B=Jp(k,So(h));return cr(k,B).join("")}function Og(u,h){var b=be,k=Ue;if(ir(h)){var B="separator"in h?h.separator:B;b="length"in h?Ft(h.length):b,k="omission"in h?xi(h.omission):k}u=En(u);var K=u.length;if(ms(u)){var ne=So(u);K=ne.length}if(b>=K)return u;var fe=b-Xs(k);if(fe<1)return k;var ye=ne?cr(ne,0,fe).join(""):u.slice(0,fe);if(B===n)return ye+k;if(ne&&(fe+=ye.length-fe),yh(B)){if(u.slice(fe).search(B)){var Oe,Re=ye;for(B.global||(B=om(B.source,En(sn.exec(B))+"g")),B.lastIndex=0;Oe=B.exec(Re);)var je=Oe.index;ye=ye.slice(0,je===n?fe:je)}}else if(u.indexOf(xi(B),fe)!=fe){var nt=ye.lastIndexOf(B);nt>-1&&(ye=ye.slice(0,nt))}return ye+k}function P1(u){return u=En(u),u&&et.test(u)?u.replace(xe,B2):u}var ix=hl(function(u,h,b){return u+(b?" ":"")+h.toUpperCase()}),Au=zd("toUpperCase");function Rg(u,h,b){return u=En(u),h=b?n:h,h===n?H0(u)?W0(u):$0(u):u.match(h)||[]}var Lh=Qt(function(u,h){try{return Ji(u,n,h)}catch(b){return ff(b)?b:new _t(b)}}),ox=Za(function(u,h){return wo(h,function(b){b=Mt(b),Ba(u,b,lh(u[b],u))}),u});function bf(u){var h=u==null?0:u.length,b=Ut();return u=h?qn(u,function(k){if(typeof k[1]!="function")throw new Qi(g);return[b(k[0]),k[1]]}):[],Qt(function(k){for(var B=-1;++B<h;){var K=u[B];if(Ji(K[0],this,k))return Ji(K[1],this,k)}})}function I1(u){return r_(ko(u,N))}function Ph(u){return function(){return u}}function O1(u,h){return u==null||u!==u?h:u}var R1=Ei(),Ih=Ei(!0);function Ri(u){return u}function Dg(u){return Bc(typeof u=="function"?u:ko(u,N))}function D1(u){return u_(ko(u,N))}function zg(u,h){return Ld(u,ko(h,N))}var z1=Qt(function(u,h){return function(b){return zc(b,u,h)}}),U1=Qt(function(u,h){return function(b){return zc(u,b,h)}});function El(u,h,b){var k=xr(h),B=Ir(h,k);b==null&&!(ir(h)&&(B.length||!k.length))&&(b=h,h=u,u=this,B=Ir(h,xr(h)));var K=!(ir(b)&&"chain"in b)||!!b.chain,ne=qo(u);return wo(B,function(fe){var ye=h[fe];u[fe]=ye,ne&&(u.prototype[fe]=function(){var Oe=this.__chain__;if(K||Oe){var Re=u(this.__wrapped__),je=Re.__actions__=Si(this.__actions__);return je.push({func:ye,args:arguments,thisArg:u}),Re.__chain__=Oe,Re}return ye.apply(u,bi([this.value()],arguments))})}),u}function ax(){return ei._===this&&(ei._=q0),this}function Oh(){}function Ug(u){return u=Ft(u),Qt(function(h){return xs(h,u)})}var sx=Fd(qn),lx=Fd(B0),F1=Fd(bc);function Rh(u){return Bm(u)?ql(Mt(u)):mb(u)}function ux(u){return function(h){return u==null?n:bs(u,h)}}var Fg=x_(),Bg=x_(!0);function $g(){return[]}function jg(){return!1}function Dh(){return{}}function zh(){return""}function B1(){return!0}function $1(u,h){if(u=Ft(u),u<1||u>Le)return[];var b=ut,k=Lr(u,ut);h=Ut(h),u-=ut;for(var B=ud(k,h);++b<u;)h(b);return B}function j1(u){return Ht(u)?qn(u,Mt):Oi(u)?[u]:Si(Zm(En(u)))}function cx(u){var h=++sm;return En(u)+h}var fx=da(function(u,h){return u+h},0),dx=Pm("ceil"),H1=da(function(u,h){return u/h},1),ri=Pm("floor");function hx(u){return u&&u.length?Cd(u,Ri,nu):n}function px(u,h){return u&&u.length?Cd(u,Ut(h,2),nu):n}function Hg(u){return Gp(u,Ri)}function mx(u,h){return Gp(u,Ut(h,2))}function W1(u){return u&&u.length?Cd(u,Ri,$c):n}function gx(u,h){return u&&u.length?Cd(u,Ut(h,2),$c):n}var vx=da(function(u,h){return u*h},1),_x=Pm("round"),yx=da(function(u,h){return u-h},0);function V1(u){return u&&u.length?xc(u,Ri):0}function Wg(u,h){return u&&u.length?xc(u,Ut(h,2)):0}return G.after=K_,G.ary=lg,G.assign=Gb,G.assignIn=d1,G.assignInWith=Sh,G.assignWith=h1,G.at=p1,G.before=ug,G.bind=lh,G.bindAll=ox,G.bindKey=sf,G.castArray=jb,G.chain=rf,G.chunk=Zd,G.compact=ki,G.concat=$n,G.cond=bf,G.conforms=I1,G.constant=Ph,G.countBy=$_,G.create=m1,G.curry=lf,G.curryRight=cg,G.debounce=fg,G.defaults=_g,G.defaultsDeep=g1,G.defer=dg,G.delay=J_,G.difference=Pt,G.differenceBy=mn,G.differenceWith=mu,G.drop=Ai,G.dropRight=wt,G.dropRightWhile=qd,G.dropWhile=N_,G.fill=qm,G.filter=H_,G.flatMap=Db,G.flatMapDeep=to,G.flatMapDepth=zb,G.flatten=lt,G.flattenDeep=Mo,G.flattenDepth=Hr,G.flip=X_,G.flow=R1,G.flowRight=Ih,G.fromPairs=Gm,G.functions=_1,G.functionsIn=y1,G.groupBy=ig,G.initial=L_,G.intersection=nr,G.intersectionBy=Yd,G.intersectionWith=P_,G.invert=wg,G.invertBy=bg,G.invokeMap=V_,G.iteratee=Dg,G.keyBy=Ub,G.keys=xr,G.keysIn=mi,G.map=sh,G.mapKeys=xg,G.mapValues=Kb,G.matches=D1,G.matchesProperty=zg,G.memoize=uh,G.merge=b1,G.mergeWith=x1,G.method=z1,G.methodOf=U1,G.mixin=El,G.negate=ch,G.nthArg=Ug,G.omit=S1,G.omitBy=va,G.once=hg,G.orderBy=Z_,G.over=sx,G.overArgs=Q_,G.overEvery=lx,G.overSome=F1,G.partial=uf,G.partialRight=fh,G.partition=Fb,G.pick=Sg,G.pickBy=kh,G.property=Rh,G.propertyOf=ux,G.pull=R_,G.pullAll=Km,G.pullAllBy=Jm,G.pullAllWith=Xm,G.pullAt=Qm,G.range=Fg,G.rangeRight=Bg,G.rearg=dh,G.reject=q_,G.remove=rr,G.rest=hh,G.reverse=pi,G.sampleSize=og,G.set=Ah,G.setWith=T1,G.shuffle=ag,G.slice=fr,G.sortBy=Y_,G.sortedUniq=Cs,G.sortedUniqBy=Ga,G.split=nx,G.spread=cf,G.tail=Kd,G.take=Jd,G.takeRight=pa,G.takeRightWhile=Pb,G.takeWhile=Ib,G.tap=eg,G.throttle=ph,G.thru=_u,G.toArray=xh,G.toPairs=Eg,G.toPairsIn=Eu,G.toPath=j1,G.toPlainObject=f1,G.transform=Tg,G.unary=mh,G.union=Ob,G.unionBy=U_,G.unionWith=Xd,G.uniq=yl,G.uniqBy=Qd,G.uniqWith=vu,G.unset=Cg,G.unzip=ef,G.unzipWith=tf,G.update=vf,G.updateWith=C1,G.values=Ja,G.valuesIn=k1,G.without=eh,G.words=Rg,G.wrap=wu,G.xor=nf,G.xorBy=th,G.xorWith=nh,G.zip=rh,G.zipObject=ih,G.zipObjectDeep=oh,G.zipWith=ah,G.entries=Eg,G.entriesIn=Eu,G.extend=d1,G.extendWith=Sh,El(G,G),G.add=fx,G.attempt=Lh,G.camelCase=wf,G.capitalize=Tu,G.ceil=dx,G.clamp=_f,G.clone=Hb,G.cloneDeep=e1,G.cloneDeepWith=pg,G.cloneWith=Wb,G.conformsTo=Vb,G.deburr=Cu,G.defaultTo=O1,G.divide=H1,G.endsWith=Mh,G.eq=Hi,G.escape=kg,G.escapeRegExp=Ag,G.every=j_,G.find=W_,G.findIndex=Xc,G.findKey=v1,G.findLast=Rb,G.findLastIndex=Gd,G.findLastKey=mf,G.floor=ri,G.forEach=rg,G.forEachRight=No,G.forIn=gf,G.forInRight=yg,G.forOwn=Eh,G.forOwnRight=Yb,G.get=Th,G.gt=t1,G.gte=n1,G.has=w1,G.hasIn=bl,G.head=Ym,G.identity=Ri,G.includes=of,G.indexOf=Mi,G.inRange=A1,G.invoke=Ch,G.isArguments=ma,G.isArray=Ht,G.isArrayBuffer=r1,G.isArrayLike=Ii,G.isArrayLikeObject=vr,G.isBoolean=i1,G.isBuffer=Ka,G.isDate=o1,G.isElement=a1,G.isEmpty=s1,G.isEqual=l1,G.isEqualWith=mg,G.isError=ff,G.isFinite=df,G.isFunction=qo,G.isInteger=gh,G.isLength=Go,G.isMap=gg,G.isMatch=Zb,G.isMatchWith=u1,G.isNaN=bu,G.isNative=vh,G.isNil=_h,G.isNull=hf,G.isNumber=c1,G.isObject=ir,G.isObjectLike=dr,G.isPlainObject=xu,G.isRegExp=yh,G.isSafeInteger=ga,G.isSet=Yo,G.isString=wl,G.isSymbol=Oi,G.isTypedArray=ks,G.isUndefined=pf,G.isWeakMap=wh,G.isWeakSet=bh,G.join=I_,G.kebabCase=Mg,G.last=ji,G.lastIndexOf=O_,G.lowerCase=Ng,G.lowerFirst=Lg,G.lt=Su,G.lte=vg,G.max=hx,G.maxBy=px,G.mean=Hg,G.meanBy=mx,G.min=W1,G.minBy=gx,G.stubArray=$g,G.stubFalse=jg,G.stubObject=Dh,G.stubString=zh,G.stubTrue=B1,G.multiply=vx,G.nth=Zo,G.noConflict=ax,G.noop=Oh,G.now=af,G.pad=Pg,G.padEnd=Jb,G.padStart=Xb,G.parseInt=Qb,G.random=yf,G.reduce=Bb,G.reduceRight=$b,G.repeat=ex,G.replace=Ig,G.result=E1,G.round=_x,G.runInContext=_e,G.sample=yu,G.size=sg,G.snakeCase=tx,G.some=G_,G.sortedIndex=eo,G.sortedIndexBy=_l,G.sortedIndexOf=D_,G.sortedLastIndex=z_,G.sortedLastIndexBy=gu,G.sortedLastIndexOf=Qc,G.startCase=rx,G.startsWith=M1,G.subtract=yx,G.sum=V1,G.sumBy=Wg,G.template=xl,G.times=$1,G.toFinite=no,G.toInteger=Ft,G.toLength=As,G.toLower=Nh,G.toNumber=ro,G.toSafeInteger=qb,G.toString=En,G.toUpper=N1,G.trim=Sl,G.trimEnd=ku,G.trimStart=L1,G.truncate=Og,G.unescape=P1,G.uniqueId=cx,G.upperCase=ix,G.upperFirst=Au,G.each=rg,G.eachRight=No,G.first=Ym,El(G,function(){var u={};return Wo(G,function(h,b){Sn.call(G.prototype,b)||(u[b]=h)}),u}(),{chain:!1}),G.VERSION=o,wo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){G[u].placeholder=G}),wo(["drop","take"],function(u,h){fn.prototype[u]=function(b){b=b===n?1:Gn(Ft(b),0);var k=this.__filtered__&&!h?new fn(this):this.clone();return k.__filtered__?k.__takeCount__=Lr(b,k.__takeCount__):k.__views__.push({size:Lr(b,ut),type:u+(k.__dir__<0?"Right":"")}),k},fn.prototype[u+"Right"]=function(b){return this.reverse()[u](b).reverse()}}),wo(["filter","map","takeWhile"],function(u,h){var b=h+1,k=b==Te||b==ot;fn.prototype[u]=function(B){var K=this.clone();return K.__iteratees__.push({iteratee:Ut(B,3),type:b}),K.__filtered__=K.__filtered__||k,K}}),wo(["head","last"],function(u,h){var b="take"+(h?"Right":"");fn.prototype[u]=function(){return this[b](1).value()[0]}}),wo(["initial","tail"],function(u,h){var b="drop"+(h?"":"Right");fn.prototype[u]=function(){return this.__filtered__?new fn(this):this[b](1)}}),fn.prototype.compact=function(){return this.filter(Ri)},fn.prototype.find=function(u){return this.filter(u).head()},fn.prototype.findLast=function(u){return this.reverse().find(u)},fn.prototype.invokeMap=Qt(function(u,h){return typeof u=="function"?new fn(this):this.map(function(b){return zc(b,u,h)})}),fn.prototype.reject=function(u){return this.filter(ch(Ut(u)))},fn.prototype.slice=function(u,h){u=Ft(u);var b=this;return b.__filtered__&&(u>0||h<0)?new fn(b):(u<0?b=b.takeRight(-u):u&&(b=b.drop(u)),h!==n&&(h=Ft(h),b=h<0?b.dropRight(-h):b.take(h-u)),b)},fn.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},fn.prototype.toArray=function(){return this.take(ut)},Wo(fn.prototype,function(u,h){var b=/^(?:filter|find|map|reject)|While$/.test(h),k=/^(?:head|last)$/.test(h),B=G[k?"take"+(h=="last"?"Right":""):h],K=k||/^find/.test(h);B&&(G.prototype[h]=function(){var ne=this.__wrapped__,fe=k?[1]:arguments,ye=ne instanceof fn,Oe=fe[0],Re=ye||Ht(ne),je=function(un){var gn=B.apply(G,bi([un],fe));return k&&nt?gn[0]:gn};Re&&b&&typeof Oe=="function"&&Oe.length!=1&&(ye=Re=!1);var nt=this.__chain__,pt=!!this.__actions__.length,Bt=K&&!nt,Nt=ye&&!pt;if(!K&&Re){ne=Nt?ne:new fn(this);var Rt=u.apply(ne,fe);return Rt.__actions__.push({func:_u,args:[je],thisArg:n}),new Eo(Rt,nt)}return Bt&&Nt?u.apply(this,fe):(Rt=this.thru(je),Bt?k?Rt.value()[0]:Rt.value():Rt)})}),wo(["pop","push","shift","sort","splice","unshift"],function(u){var h=Ec[u],b=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",k=/^(?:pop|shift)$/.test(u);G.prototype[u]=function(){var B=arguments;if(k&&!this.__chain__){var K=this.value();return h.apply(Ht(K)?K:[],B)}return this[b](function(ne){return h.apply(Ht(ne)?ne:[],B)})}}),Wo(fn.prototype,function(u,h){var b=G[h];if(b){var k=b.name+"";Sn.call(tu,k)||(tu[k]=[]),tu[k].push({name:h,func:b})}}),tu[Ud(n,Z).name]=[{name:"wrapper",func:n}],fn.prototype.clone=W2,fn.prototype.reverse=V2,fn.prototype.value=Z2,G.prototype.at=tg,G.prototype.chain=F_,G.prototype.commit=B_,G.prototype.next=Ni,G.prototype.plant=Pi,G.prototype.reverse=Ya,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=ng,G.prototype.first=G.prototype.head,Kl&&(G.prototype[Kl]=Li),G},el=V0();Ws?((Ws.exports=el)._=el,Vp._=el):ei._=el}).call(Xo)})(Hw,Hw.exports);var OB=Hw.exports;const MC=J.createContext(null),NC=J.createContext(null),OL=J.createContext(null);function RB(){var Ct,Jt;const e=J.useRef(null),{mapId:t}=y0(),n=new URLSearchParams(window.location.search),o=n.toString()?`?${n.toString()}`:"";let s=J.useContext(Op),f=J.useContext(dc),{controller:g,instance:w}=J.useContext(fs);const y=`${Dt}/map/id/${t}/${o}`,[E,M]=J.useState(null),[N]=J.useState(new fo(y,E,M)),R=()=>{var at;N.update&&N.update().then(()=>{he(!0),console.log(N.instance),setTimeout(()=>{he(!1)},Zw*1e3)});let Be=(at=s==null?void 0:s.maps)==null?void 0:at.filter(ft=>ft!==t);Be==null||Be.push(t),(Be==null?void 0:Be.length)>3&&(Be==null||Be.shift()),s&&(s.maps=Be),g.setProperty("lastEdited",s),g.update()},F=`${Dt}/datasets/`,[$,V]=J.useState(null),[X]=J.useState(new fo(F,$,V)),Z=`${Dt}/templates/`,[D,z]=J.useState(null),[H]=J.useState(new fo(Z,D,z)),[se,he]=J.useState(!1),[pe,ge]=J.useState(!1);J.useEffect(()=>{(async()=>{await N.fetch(),await X.fetch(),await H.fetch()})()},[]);const[ke,be]=J.useState([]);let[Ue,it]=J.useState(!1);const Xe=Be=>{N.setProperty("overrides",Be)};J.useEffect(()=>{ke.forEach(Be=>{Be in N.instance.overrides||(N.instance.overrides[Be]={nodes:{},edges:{}},Xe(N.instance.overrides))})},[ke]);const Te=Be=>{let at={operation:"add",state:Be.node,render:!0},ft=ke[Be.layer];N.instance.overrides[ft].nodes[Be.node.name]=at,Xe({...N.instance.overrides})},Fe=Be=>{let at={operation:"override",state:Be.node,render:!0},ft=ke[Be.layer];N.instance.overrides[ft].nodes[Be.node.name]=at,Xe({...N.instance.overrides})},ot=Be=>{let at={operation:"delete",render:!0},ft=ke[Be.layer];N.instance.overrides[ft].nodes[Be.node.name]=at,Xe({...N.instance.overrides})},Je=Be=>{let at={operation:"add",state:Be.edge,render:!0},ft=ke[Be.layer];N.instance.overrides[ft].edges[Be.edge.name]=at,Xe({...N.instance.overrides})},Le=Be=>{let at={operation:"override",state:Be.edge,render:!0},ft=ke[Be.layer];N.instance.overrides[ft].edges[Be.edge.name]=at,Xe({...N.instance.overrides})},Ye=Be=>{let at={operation:"delete",render:!0},ft=ke[Be.layer];N.instance.overrides[ft].edges[Be.edge.name]=at,Xe({...N.instance.overrides})},Ze=()=>{let Be=JSON.parse(JSON.stringify(p2)),at=E.configuration.layers.length;N.setProperty(`configuration.layers[${at}]`,Be)},ut=Be=>{N.setProperty("name",Be),ge(!1)},Qe=Be=>{Be.preventDefault(),ut(e.current.value.trim())},bn=()=>{var Be,at,ft,An;if((Be=f==null?void 0:f.maps)!=null&&Be.includes(t)){const _n=(at=f==null?void 0:f.maps)==null?void 0:at.indexOf(t);(ft=f==null?void 0:f.maps)==null||ft.splice(_n,1),g.setProperty("favorites",f),g.update()}else(An=f==null?void 0:f.maps)==null||An.push(t),g.setProperty("favorites",f),g.update()},At=()=>{ge(!0)},hn=()=>{ge(!1)},vt=Be=>at=>{rt.current.toggleLayer(Be,at),N.setProperty(`configuration.layers[${Be}].visible`,at)},xt=Be=>()=>{let at=JSON.parse(JSON.stringify(N.instance.configuration.layers)),ft=JSON.parse(JSON.stringify(rt.current.topology));at.splice(Be,1),ft.splice(Be,1),N.setProperty("configuration.layers",at),rt.current.setTopology(ft)};var rt=J.useRef(null);J.useEffect(()=>{const Be=async()=>{var ft;let at=E.configuration;(ft=rt==null?void 0:rt.current)!=null&&ft.topology||rt.current.setTopology([{nodes:[],edges:[]}]),at.enableEditing=!0,at.topologySource="json",rt.current.setOptions(at),rt.current.setEditMode("node"),rt.current.lastValue(ze.EDITING_SET),rt.current.listen(ze.NODE_CREATED,Te),rt.current.listen(ze.NODE_UPDATED,Fe),rt.current.listen(ze.NODE_DELETED,ot),rt.current.listen(ze.EDGE_CREATED,Je),rt.current.listen(ze.EDGE_UPDATED,Le),rt.current.listen(ze.EDGE_DELETED,Ye)};rt.current&&Be()},[rt,rt.current]);const ct=J.useRef(0),Ve=J.useRef(OB.debounce(async function(at,ft){if(ct.current!=ft){console.debug("Data state is out-of-date. Refusing to fetch out-of-date API data");return}if(!rt.current){console.debug("Map not loaded.");return}if(rt.current.lastValue(ze.DRAG_STARTED)){console.debug("Drag/edit in progress. Discarding.");return}try{let An=`${Dt}/output/map/`,_n={"Content-Type":"application/json"};_n=Tr(_n);let gr=await fetch(An,{method:"PATCH",headers:_n,body:JSON.stringify(at)});if(rt.current.lastValue(ze.DRAG_STARTED)){console.debug("Drag/edit in progress. Discarding.");return}if(gr.ok){if(ct.current!=ft){console.debug("Data state is out-of-date. Refusing to render out-of-date API data");return}let Mn=await gr.json();Mn=JSON.parse(JSON.stringify(Mn));let Bn=Mn.configuration.layers.map((Qn,Ke)=>{let Nn=JSON.parse(Qn.mapjson);return Nn||(Nn={nodes:[],edges:[]}),Mn.configuration.layers[Ke].mapjson=null,Nn});Mn.configuration.enableEditing=!0,Mn.configuration.topologySource="json";let Vn=rt.current.lastValue(ze.EDITING_SET);rt.current.setOptions(Mn.configuration),rt.current.setTopology(Bn),rt.current.setEditMode(Vn)}}catch(An){console.log(An)}},100));return J.useEffect(()=>{E!=null&&E.configuration&&(ct.current=ct.current+1,Ve.current(E,ct.current))},[E]),E?S("main",{className:"min-h-full w-full sm:mx-auto lg:max-w-[130rem] max-w-6xl  p-2 pt-12 sm:pt-2 bg-color-layer-3 border border-color-layer-division",children:S(MC.Provider,{value:{controller:N,instance:E},children:S(NC.Provider,{value:{controller:X,instance:$},children:te(OL.Provider,{value:{controller:H,instance:D},children:[te("div",{className:"main-content-header m-2 compound",children:[te("div",{className:"flex flex-row",children:[(Ct=f==null?void 0:f.maps)!=null&&Ct.includes(t)?S("div",{className:"icon sm mr-2",children:S(st,{name:"lucide-star",fill:"#00a0d6",className:"stroke-esnetblue-400 -mt-[0.125rem] -ml-[0.125rem]",onClick:bn})}):S("div",{className:"icon sm mr-2",children:S(st,{name:"lucide-star",className:"stroke-esnetblue-400 -mt-[0.125rem] -ml-[0.125rem]",onClick:bn})}),S("div",{className:"icon sm mr-2",children:S(st,{name:"lucide-map",className:"stroke-esnetblue-400 -mt-[0.125rem] -ml-[0.125rem]"})}),pe?S("form",{onSubmit:Qe,children:S("input",{ref:e,className:"text-esnetblack-900 pl-2",name:"dataset-name",defaultValue:E.name})}):E.name,pe?te(Wn,{children:[S(st,{name:"check-square",className:"check-square lucide-check-square stroke-esnetblue-400 icon btn sm p-1 ml-2 -ml-[0.125rem]",onClick:Qe}),S(st,{name:"x-square",onClick:hn,className:"x-square lucide-x-square stroke-esnetblue-400 icon btn sm p-1 ml-2 -ml-[0.125rem]"})]}):S(st,{name:"pencil",height:20,width:20,onClick:At,className:"pencil lucide-pencil stroke-esnetblue-400 icon btn sm p-1 ml-2 -ml-[0.125rem]"})]}),te("div",{className:"flex flex-row",children:[S("form",{action:"",children:S("input",{type:"submit",className:"btn text-base -my-1 mr-2",value:"Discard Changes"})}),se?te("span",{className:"tooltip-box animate-fade absolute opacity-0 z-20 pt-[0.125rem] text-sm -top-3 right-16",children:["Saved New Version: ",(Jt=N==null?void 0:N.instance)==null?void 0:Jt.version]}):null,S("input",{type:"button",className:"btn text-base primary -my-1 -mr-2",value:"Save Changes",onClick:R})]})]}),te("div",{className:"flex flex-row w-full mx-auto",children:[S("div",{className:"w-8/12 2xl:w-10/12 p-2",children:S("div",{id:"mapContainer",className:"h-full w-full border",children:S("esnet-map-canvas",{height:"560",ref:rt})},Ue)}),S(MB,{mapCanvasRef:rt})]}),te("div",{className:"p-2 3xl:flex 3xl:flex-row",children:[te("div",{className:"3xl:w-6/12 3xl:pr-4",children:[N.instance.configuration.layers.map((Be,at)=>S("div",{className:"mb-6",children:S(NB,{layerId:at,mapCanvasRef:rt,selectedDatasets:ke,setSelectedDatasets:be,toggleLayer:vt(at),deleteLayer:xt(at)})},`${Be.mapjsonUrl}-${at}`)),N.instance.configuration.layers.length<iI?S("div",{className:`
                                mt-4
                                mb-6
                                border border-dashed
                                rounded-xl
                                p-6
                                flex
                                justify-center
                            `,children:S("button",{className:"primary",onClick:Ze,children:"+ Add Topology Layer"})}):S("div",{})]}),S("div",{className:"3xl:w-6/12",children:S(IB,{overrides:N.instance.overrides,setOverrides:Xe},`${Object.keys(N.instance.overrides).map(Be=>Be+"-"+N.instance.overrides[Be].length).join("-")}`)})]})]})})})}):S("main",{})}function DB(e){var M;const{templateId:t}=y0(),{controller:n,instance:o}=J.useContext(RL);let s=J.useContext(dc),{controller:f,instance:g}=J.useContext(fs);const w=()=>{var N,R,F,$;if((N=s==null?void 0:s.templates)!=null&&N.includes(t)){const V=(R=s==null?void 0:s.templates)==null?void 0:R.indexOf(t);(F=s==null?void 0:s.templates)==null||F.splice(V,1),f.setProperty("favorites",s),f.update()}else($=s==null?void 0:s.templates)==null||$.push(t),f.setProperty("favorites",s),f.update()},y=N=>{n.setProperty("name",N.target.value)},E=N=>{n.setProperty("template",N.target.value)};return te("form",{onSubmit:e.persistTemplate,children:[S("div",{className:"panel-header",children:te("div",{className:"flex flex-row",children:[(M=s==null?void 0:s.templates)!=null&&M.includes(t)?S("div",{className:"icon sm p-1 mr-2",children:S(st,{name:"lucide-star",fill:"#00a0d6",className:"stroke-esnetblue-400 -mt-[0.125rem] -ml-[0.125rem]",onClick:w})}):S("div",{className:"icon sm p-1 mr-2",children:S(st,{name:"lucide-star",className:"stroke-esnetblue-400 -mt-[0.125rem] -ml-[0.125rem]",onClick:w})}),"Node Template Builder"]})}),te("div",{className:"panel-body",children:[te("div",{className:"flex-row flex",children:[te("div",{className:"w-6/12 pr-2",children:[S("div",{children:S("label",{children:"Name"})}),S("div",{children:S("input",{type:"text",className:"w-full",value:e.instance.name,onChange:y,required:!0})})]}),te("div",{className:"w-6/12 pl-2",children:[S("div",{children:S("label",{children:"ID"})}),S("div",{children:S("input",{type:"text",className:"w-full text-esnetwhite-900",defaultValue:e.instance.templateId,disabled:!0,readOnly:!0})})]})]}),S("div",{children:S("label",{children:"SVG Code"})}),S("div",{children:S("textarea",{className:"w-full monospace",rows:18,value:e.instance.template,onChange:E})})]}),te("div",{className:"panel-footer flex-row flex justify-end",children:[S("input",{type:"button",className:"mr-4",value:"Update Preview"}),S("input",{type:"submit",className:"primary",value:"Save"})]})]})}function zB(e){so.useState(0);let t=so.createRef();so.useState("");let n=`<line
        x1="0"
        y1="-25"
        x2="0"
        y2="25"
        stroke-dasharray="1,1"
        stroke="rebeccapurple"
        stroke-width="0.1"
        stroke-opacity="0.5" />
      <line
        x1="-25"
        y1="0"
        x2="25"
        y2="0"
        stroke-dasharray="1,1"
        stroke="rebeccapurple"
        stroke-width="0.1"
        stroke-opacity="0.5" />`;return te("fieldset",{className:"content-sidebar",children:[S("h4",{children:"Node Template Builder"}),te("p",{children:["You can use SVG to style the nodes on your map. Each node is wrapped in a ",S("span",{className:"highlight monospace",children:"<g>"}),' ("group") element and scaled appropriately in the map application.']}),S("h5",{children:"Node Preview"}),S("div",{className:"template-preview",ref:t,children:S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-25 -25 50 50",dangerouslySetInnerHTML:{__html:`${e.instance.template}${n}`}})}),S("h5",{children:"Scaled Node Preview"}),S("div",{className:"w-6 h-6 border bg-white mx-auto",children:S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-6 -6 12 12",dangerouslySetInnerHTML:{__html:`${e.instance.template}`}})}),S("p",{className:"aside text-sm mt-6",children:S("em",{children:"The scaled preview shows the SVG element scaled to the approximate real size of map nodes."})}),S("p",{className:"aside pt-6",children:"Notes on formatting:"}),te("ul",{className:"aside",children:[S("li",{className:"block",children:" A stroke will be applied in the resulting map"}),S("li",{className:"block",children:" A fill applied in the resulting map"}),S("li",{className:"block",children:" Nodes are generally ~10px in width in geographic maps"}),te("li",{className:"block",children:[" Nodes are scaled using: ",S("br",{}),S("span",{className:"highlight monospace",children:"height"}),",",S("span",{className:"highlight monospace",children:"width"}),",",S("span",{className:"highlight monospace",children:"x"}),", and"," ",S("span",{className:"highlight monospace",children:"y"}),". ",S("br",{}),"To scale properly, wrap your element in:",S("br",{}),S("span",{className:"highlight monospace",children:"<svg viewBox>"}),"."]})]})]})}const RL=J.createContext(null);function g5(){const[e,t]=J.useState({name:"",template:""}),{templateId:n}=y0();let o=J.useContext(Op),{controller:s,instance:f}=J.useContext(fs);const[g,w]=J.useState(new fo(null,e,t));n&&(g.link=`${Dt}/template/id/${n}`,J.useEffect(()=>{g.fetch()},[]));function y(E){var $;E.preventDefault();let M=Dt+"/template/",N="create";e.templateId&&(M=Dt+`/template/id/${e.templateId}/`,N="update");let R=new fo(M,e,null);R[N](),g.setInstance(R.instance);let F=($=o==null?void 0:o.templates)==null?void 0:$.filter(V=>V!==n);F==null||F.push(n),(F==null?void 0:F.length)>3&&(F==null||F.shift()),o&&(o.templates=F),s.setProperty("lastEdited",o),s.update()}return S(RL.Provider,{value:{controller:g,instance:e},children:te("main",{className:"main-content md:flex",children:[S("div",{className:"w-full md:w-6/12 mx-auto pt-6 pb-12",children:S(DB,{instance:e,setInstance:t,persistTemplate:y})}),S("div",{className:"md:w-5/12 mx-auto mb-6",children:S(zB,{instance:e})})]})})}function UB(e){function t(w){return function(y){if(e.instanceSetter){var E=y.target.value;e.instance[w]=E,e.instanceSetter({...e.instance})}}}function n(){var w,y,E,M,N;(w=e.instance)!=null&&w.forkMap||(e.instance.forkMap=(E=(y=e==null?void 0:e.mapList)==null?void 0:y[0])==null?void 0:E.mapId,e.instance.forkMapVersion=(N=(M=e==null?void 0:e.mapList)==null?void 0:M[0])==null?void 0:N.version)}function o(w){e.instance.fork=w.target.checked,n(),e.instanceSetter({...e.instance})}function s(){console.log("renderMapListOptions");var w=e.mapList.reduce((E,M)=>(E[M.mapId]=M.name,E),{}),y=[];for(let[E,M]of Object.entries(w))y.push(S("option",{value:E,children:`${M}`},E));return console.log("end renderMapListOptions"),y}function f(){var E;var w=e.mapList.reduce((M,N)=>(M[N.mapId]?M[N.mapId].push(N):M[N.mapId]=[N],M),{});for(let M in w)w.hasOwnProperty(M)&&w[M].sort((N,R)=>N.version>R.version?-1:1);var y=(E=w[e.instance.forkMap])==null?void 0:E.map(M=>te("option",{value:M.version,children:["v",M.version," [",M.lastUpdatedOn.toLocaleString(),"]"]},M.version));return y}function g(){var w,y;return(w=e.instance)!=null&&w.fork?(y=e==null?void 0:e.mapList)!=null&&y.length?(n(),te("fieldset",{className:"subgroup px-6 pb-6",children:[S("legend",{children:"Fork Existing Map Options"}),S("div",{children:S("label",{className:"strong",children:"Map Name"})}),S("div",{children:S("select",{value:e.instance.forkMap,onChange:t("forkMap"),children:s()})}),S("div",{children:S("label",{className:"strong",children:"Version"})}),S("div",{children:S("select",{value:e.instance.forkMapVersion,onChange:t("forkMapVersion"),children:f()})})]})):te("fieldset",{className:"subgroup px-6 pb-6",children:[S("legend",{children:"Fork Existing Map Options"}),S("label",{children:"Loading Map Options..."})]}):null}return te("form",{onSubmit:e.createMap,children:[S("div",{className:"panel-header",children:"Create New Map"}),te("div",{className:"panel-body",children:[S("div",{children:S("label",{children:"Name"})}),S("div",{children:S("input",{type:"text",name:"name",className:"w-fit",value:e.instance.name,onChange:t("name"),required:!0})}),S("div",{children:S("label",{children:"Fork Existing Map"})}),S("div",{children:S("input",{type:"checkbox",name:"fork",className:"switch",onChange:o})}),g()]}),te("div",{className:"panel-footer flex-row flex justify-end",children:[S("a",{href:"/",className:"btn text-black mr-4",children:"Cancel"}),S("input",{type:"submit",className:"primary",value:"Create Map"})]})]})}const FB=J.createContext(null);function BB(){const e=uC(),[t,n]=J.useState({name:"",fork:!1,forkMap:"",forkMapVersion:""}),[o,s]=J.useState([]),f="?fields=mapId&fields=name&fields=version&fields=overrides&fields=configuration&fields=lastUpdatedBy&fields=lastUpdatedOn&version=all",[g,w]=J.useState(new fo(`${Dt}/maps/${f}`,o,s));J.useEffect(()=>{g.fetch()},[]);async function y(E){E.preventDefault();let M=JSON.parse(JSON.stringify(ap));M.name=t.name;let N={...p2};N.name="Layer 1",M.configuration.layers.push(N),t.fork&&o.forEach(F=>{t.forkMap&&F.mapId==t.forkMap&&t.forkMapVersion&&F.version==t.forkMapVersion&&(M.overrides=F.overrides,M.configuration=F.configuration)});let R=new fo(Dt+"/map/",M,null);await R.create(),e(`/map/${R.instance.mapId}`)}return S(FB.Provider,{value:{controller:g,instance:o},children:te("main",{className:"main-content md:flex",children:[S("div",{className:"w-full md:w-6/12 mx-auto pt-6 pb-12",children:S(UB,{instance:t,instanceSetter:n,mapList:o,createMap:y})}),S("div",{className:"md:w-5/12 mx-auto mb-6",children:te("fieldset",{className:"content-sidebar",children:[S("h4",{children:"Create New Map"}),S("p",{children:"A Map is a combination of multiple layers that are plotted on your network map along with styling information. To render a map, we import datasets. Each dataset yields a set of nodes or edges."}),S("p",{className:"my-2 mt-6 block",children:S("strong",{children:"Fork Existing Map"})}),S("p",{children:"One way to create a new map is to make a fork of an existing one  which will copy the previous map with the same styling and make a new map."})]})})]})})}const lT=e=>{const{id:t,buttonProps:n,inputProps:o,label:s}=e,[f,g]=J.useState(!1),w=J.useRef(null);let y=null;s&&(y=te("label",{htmlFor:t,children:[s,":"]}));let E=n==null?void 0:n.onClick;return E||(E=()=>{g6(w.current.value),g(!0),setTimeout(()=>{g(!1)},Zw*1e3)}),te(Wn,{children:[te("div",{className:"compound",children:[y,f?S("span",{className:"tooltip-box copied-tooltip-box animate-fade opacity-0",children:"Copied!"}):null]}),S("div",{className:"clipboard-copy-input",children:te("div",{className:"input-container",children:[S("input",{id:t,type:"url",ref:w,readOnly:!0,...o,value:e.defaultValue}),S("button",{role:"button",className:`
                            action-realtime-dataset-url-btn
                            primary
                        `,...n,onClick:E,children:S(st,{name:e.iconName})})]})})]})},Np=(e,t,n,o)=>{var s,f,g,w;if((s=t==null?void 0:t[n])!=null&&s.includes(o)){const y=(f=t==null?void 0:t[n])==null?void 0:f.indexOf(o);(g=t==null?void 0:t[n])==null||g.splice(y,1),e.setProperty("favorites",t),e.update()}else(w=t==null?void 0:t[n])==null||w.push(o),e.setProperty("favorites",t),e.update()};function $B(){let[e,t]=J.useState([]),[n,o]=J.useState(""),s=J.useContext(dc),{controller:f,instance:g}=J.useContext(fs);function w(F){var X;let $=[];for(const[Z,D]of Object.entries(F)){var V=D.map(z=>te("option",{value:"{value.version}",children:["version ",z.version," (",z.lastUpdatedBy,")"]},`${z.datasetId} + ${z.version}`));if(D.length>0){let z=S("fieldset",{className:"main-page-panel",children:te("div",{className:"flex compound",children:[te("div",{className:"name",children:[(X=s==null?void 0:s.datasets)!=null&&X.includes(D[0].datasetId)?S(st,{name:"star",fill:"#00a0d6",className:"icon md my-auto",onClick:()=>Np(f,s,"datasets",D[0].datasetId)}):S(st,{name:"star",className:"icon md my-auto",onClick:()=>Np(f,s,"datasets",D[0].datasetId)}),S("a",{href:`/dataset/${Z}`,children:D[0].name})]}),te("div",{className:"justify-end mb-2",children:[S("label",{className:"block",children:"Versions:"}),S("select",{id:"versions",name:"versions",children:V})]}),te("div",{className:"flex text-esnetblack-500",children:["Last Updated: ",D[0].lastUpdatedOn]}),te("div",{className:"flex text-esnetblack-500",children:["Last Updated By: ",D[0].lastUpdatedBy]})]})},Z);$.push(z)}}return $}const y="?fields=datasetId&fields=name&fields=version&fields=lastUpdatedBy&fields=lastUpdatedOn&version=all",[E,M]=J.useState(new fo(Dt+"/datasets/"+y,e,t));J.useEffect(()=>{(async()=>{await E.fetch()})()},[]);let N=e;N=e.filter(F=>F.name&&F.name.toLowerCase().includes(n==null?void 0:n.toLowerCase()));let R={};return N.forEach(F=>{let $=F.datasetId;$ in R?R[$].push(F):R[$]=[F]}),te("div",{className:"library-card",children:[S("div",{className:"main-content-header compound",children:S("div",{className:"flex flex-row",children:"Dataset Library"})}),te("div",{className:"compound",children:[S("div",{className:"justify-start compound",children:S("form",{action:"/dataset/new",children:S("input",{type:"submit",className:"btn primary m-4",value:"+ Create New"})})}),S("div",{className:"justify-end compound",children:S("input",{type:"text",className:"m-4",placeholder:"Filter by name...",value:n,onChange:F=>o(F.target.value?F.target.value:"")})})]}),S("div",{className:"grid grid-cols-2",children:Object.keys(R).length>0?w(R):S("div",{className:"text-center",children:S("h4",{children:"Loading..."})})})]})}function jB(){let[e,t]=J.useState([]),[n,o]=J.useState(""),s=J.useContext(dc),{controller:f,instance:g}=J.useContext(fs);function w(F){var V;let $=[];for(const[X,Z]of Object.entries(F))if(Z.length>0){let D=te("fieldset",{className:"main-page-panel",children:[te("div",{className:"name",children:[(V=s==null?void 0:s.maps)!=null&&V.includes(Z[0].mapId)?S(st,{name:"star",fill:"#00a0d6",className:"icon md my-auto",onClick:()=>Np(f,s,"maps",Z[0].mapId)}):S(st,{name:"star",className:"icon md my-auto",onClick:()=>Np(f,s,"maps",Z[0].mapId)}),S("a",{href:`/map/${X}`,children:Z[0].name})]}),S("div",{className:"p-4",children:S(lT,{label:"URL",iconName:"clipboard-copy",defaultValue:`${Dt}/output/map/${X}`})}),te("div",{className:"flex text-esnetblack-500 px-4",children:["Last Updated: ",Z[0].lastUpdatedOn]}),te("div",{className:"flex text-esnetblack-500 px-4",children:["Last Updated By: ",Z[0].lastUpdatedBy]})]},X);$.push(D)}return $}const y="?fields=mapId&fields=name&fields=version&fields=lastUpdatedBy&fields=lastUpdatedOn&version=all",[E,M]=J.useState(new fo(Dt+"/maps/"+y,e,t));J.useEffect(()=>{(async()=>{await E.fetch()})()},[]);let N=e;N=e.filter(F=>F.name&&F.name.toLowerCase().includes(n==null?void 0:n.toLowerCase()));let R={};return N.forEach(F=>{let $=F.mapId;$ in R||(R[$]=[F])}),te("div",{className:"library-card",children:[S("div",{className:"main-content-header compound",children:S("div",{className:"flex flex-row",children:"Map Library"})}),te("div",{className:"compound",children:[S("div",{className:"justify-start compound",children:S("form",{action:"/map/new",children:S("input",{type:"submit",className:"btn primary m-4",value:"+ Create New"})})}),S("div",{className:"justify-end compound",children:S("input",{type:"text",className:"m-4",placeholder:"Filter by name...",value:n,onChange:F=>o(F.target.value?F.target.value:"")})})]}),S("div",{className:"grid grid-cols-2",children:Object.keys(R).length>0?w(R):S("div",{className:"text-center",children:S("h4",{children:"Loading..."})})})]})}function HB(){let[e,t]=J.useState([]),[n,o]=J.useState(""),s=so.createRef(),f=`<line
        x1="0"
        y1="-25"
        x2="0"
        y2="25"
        stroke-dasharray="1,1"
        stroke="rebeccapurple"
        stroke-width="0.1"
        stroke-opacity="0.5" />
      <line
        x1="-25"
        y1="0"
        x2="25"
        y2="0"
        stroke-dasharray="1,1"
        stroke="rebeccapurple"
        stroke-width="0.1"
        stroke-opacity="0.5" />`,g=J.useContext(dc),{controller:w,instance:y}=J.useContext(fs);function E(V){var Z;let X=[];for(const[D,z]of Object.entries(V))if(z.length>0){let H=te("fieldset",{className:"main-page-panel",children:[S("div",{className:"flex compound",children:te("div",{className:"name",children:[(Z=g==null?void 0:g.templates)!=null&&Z.includes(z[0].templateId)?S(st,{name:"star",fill:"#00a0d6",className:"icon md my-auto",onClick:()=>Np(w,g,"templates",z[0].templateId)}):S(st,{name:"star",className:"icon md my-auto",onClick:()=>Np(w,g,"templates",z[0].templateId)}),S("a",{href:`/template/${D}`,children:z[0].name})]})}),S("br",{}),te("div",{className:"flex p-4",children:[S("div",{className:"template-preview w-32 h-32",ref:s,children:S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-25 -25 50 50",dangerouslySetInnerHTML:{__html:`${z[0].template}${f}`}})}),te("div",{className:"px-2",children:[te("div",{className:"flex text-esnetblack-500 px-4",children:["Last Updated On: ",z[0].lastUpdatedOn]}),te("div",{className:"flex text-esnetblack-500 px-4",children:["Last Updated By: ",z[0].lastUpdatedBy]})]})]})]},D);X.push(H)}return X}const M="?fields=templateId&fields=name&fields=version&fields=lastUpdatedBy&fields=lastUpdatedOn&fields=template&version=all",[N,R]=J.useState(new fo(Dt+"/templates/"+M,e,t));J.useEffect(()=>{(async()=>{await N.fetch()})()},[]);let F=e;F=e.filter(V=>V.name&&V.name.toLowerCase().includes(n==null?void 0:n.toLowerCase()));let $={};return F.forEach(V=>{let X=V.templateId;X in $||($[X]=[V])}),te("div",{className:"library-card",children:[S("div",{className:"main-content-header compound",children:S("div",{className:"flex flex-row",children:"Template Library"})}),te("div",{className:"compound",children:[S("div",{className:"justify-start compound",children:S("form",{action:"/template/new",children:S("input",{type:"submit",className:"btn primary m-4",value:"+ Create New"})})}),S("div",{className:"justify-end compound",children:S("input",{type:"text",className:"m-4",placeholder:"Filter by name...",value:n,onChange:V=>o(V.target.value?V.target.value:"")})})]}),S("div",{className:"grid grid-cols-2",children:Object.keys($).length>0?E($):S("div",{className:"text-center",children:S("h4",{children:"Loading..."})})})]})}function WB(){const{datatype:e}=y0();function t(){if(e==="datasets")return S("div",{children:S($B,{})});if(e==="maps")return S("div",{children:S(jB,{})});if(e==="templates")return S("div",{children:S(HB,{})})}return S("main",{className:"main-content w-full",children:S("div",{children:t()})})}function VB(e){function t(g){return function(w){if(e.instanceSetter){var y=w.target.value;e.instance[g]=y,e.instanceSetter({...e.instance})}}}function n(g){var w;e.instance.fork=g.target.checked,(w=e.instance)!=null&&w.forkDataset||(e.instance.forkDataset=e.datasetList[0].datasetId,e.instance.forkDatasetVersion=e.datasetList[0].version),e.instanceSetter({...e.instance})}function o(){var g=e.datasetList.reduce((y,E)=>(y[E.datasetId]=E.name,y),{}),w=[];for(let[y,E]of Object.entries(g))w.push(S("option",{value:y,children:`${E}`},y));return w}function s(){var y;var g=e.datasetList.reduce((E,M)=>(E[M.datasetId]?(E[M.datasetId].push(M),E[M.datasetId].sort((N,R)=>N.version>R.version?-1:1)):E[M.datasetId]=[M],E),{}),w=(y=g[e.instance.forkDataset])==null?void 0:y.map(E=>te("option",{value:E.version,children:["v",E.version," [",E.lastUpdatedOn.toLocaleString(),"]"]},E.version));return w}function f(){var g;return(g=e.instance)!=null&&g.fork?te("fieldset",{className:"subgroup px-6 pb-6",children:[S("legend",{children:"Fork Existing Dataset Options"}),S("div",{children:S("label",{className:"strong",children:"Dataset Name"})}),S("div",{children:S("select",{value:e.instance.forkDataset,onChange:t("forkDataset"),children:o()})}),S("div",{children:S("label",{className:"strong",children:"Version"})}),S("div",{children:S("select",{value:e.instance.forkDatasetVersion,onChange:t("forkDatasetVersion"),children:s()})})]}):null}return te("form",{onSubmit:e.createDataset,children:[S("div",{className:"panel-header",children:"Create New Dataset"}),te("div",{className:"panel-body",children:[S("div",{children:S("label",{children:"Name"})}),S("div",{children:S("input",{type:"text",name:"name",className:"w-fit",id:"dataset-name",value:e.instance.name,onChange:t("name"),required:!0})}),S("div",{children:S("label",{children:"Fork Existing Dataset"})}),S("div",{children:S("input",{type:"checkbox",name:"fork",className:"switch",onChange:n})}),f()]}),te("div",{className:"panel-footer flex-row flex justify-end",children:[S("a",{href:"/",className:"btn text-black mr-4",children:"Cancel"}),S("input",{type:"submit",id:"create-dataset-confirm",className:"primary",value:"Create Dataset"})]})]})}const ZB=J.createContext(null);function qB(){const e=uC(),[t,n]=J.useState({name:"",fork:!1,forkDataset:"",forkDatasetVersion:""}),[o,s]=J.useState([]),f="?fields=datasetId&fields=name&fields=version&fields=query&fields=lastUpdatedBy&fields=lastUpdatedOn&version=all",[g,w]=J.useState(new fo(Dt+"/datasets/"+f,o,s));J.useEffect(()=>{g.fetch()},[]);async function y(E){E.preventDefault();let M=JSON.parse(JSON.stringify(aU));M.name=t.name,t.fork&&o.forEach(R=>{t.forkDataset&&R.datasetId==t.forkDataset&&t.forkDatasetVersion&&R.version==t.forkDatasetVersion&&(M.query=JSON.parse(JSON.stringify(R.query)))});let N=new fo(Dt+"/dataset/",M,null);await N.create(),e(`/dataset/${N.instance.datasetId}`)}return S(ZB.Provider,{value:{controller:g,instance:o},children:te("main",{className:"main-content md:flex",children:[S("div",{className:"w-full md:w-6/12 mx-auto pt-6 pb-12",children:S(VB,{instance:t,instanceSetter:n,datasetList:o,createDataset:y})}),S("div",{className:"md:w-5/12 mx-auto mb-6",children:te("fieldset",{className:"content-sidebar",children:[S("h4",{children:"Create New Dataset"}),S("p",{children:"A Dataset is a set of data to be plotted on your map. To render a dataset, we create a query that yields a set of nodes. Datasets are later used to bundled together into a finished map, which also includes styling information."}),S("p",{className:"my-2 mt-6 block",children:S("strong",{children:"Fork Existing Dataset"})}),S("p",{children:"One way to create a new dataset is to make a fork of an existing one  which will copy the query and make a new dataset."})]})})]})})}const GB=e=>{const{visualizationMode:t,handleOnModeChange:n,dataset:o}=e,s=o,f=`${Dt}/output/dataset/${s.datasetId}/${t}/static`,g=`${Dt}/output/dataset/${s.datasetId}/${t}/live`;return te("div",{id:"dataset-editor-sidebar",className:"w-4/12 p-2 self-start sidebar-form relative",children:[S("div",{className:"absolute right-0 opacity-50",children:te("label",{className:"-mt-2 -mb-4",children:["Current Version: ",o.version]},o.version)}),S("label",{htmlFor:"preview-mode",children:"Preview Mode:"}),S("br",{}),S("select",{id:"preview-mode",onChange:n,className:"w-full",role:"listbox",children:Jz.map(({label:w,value:y})=>S("option",{role:"option",value:y,children:w},`preview-mode-option-${y}`))}),S(lT,{id:"static-dataset-input",label:"Static Dataset URL",iconName:"clipboard-copy",defaultValue:f}),S(lT,{id:"dynamic-dataset-input",label:"Dynamic Dataset URL",iconName:"clipboard-copy",defaultValue:g})]})},YB=e=>{const{data:t,loading:n}=e;if(n)return S("div",{className:"m-2",children:"Loading..."});if(!Array.isArray(t)||t.length<1||!e.datasetVisible)return S("div",{className:"m-2",children:"No Data"});let o=Object.keys(t[0]);return te("table",{className:"data-table overflow-scroll",children:[S("thead",{children:S("tr",{children:o.map(s=>S("th",{children:s},`table-view-header-${s}`))})}),S("tbody",{children:t.map((s,f)=>S("tr",{children:o.map((g,w)=>S("td",{children:JSON.stringify(s[g])},`table-view-cell-${w}`))},`table-view-record-${f}`))})]})};function KB(e){var F,$;let[t,n]=J.useState(""),[o,s]=J.useState(""),[f,g]=J.useState(!1),[w,y]=J.useState(!1);function E(V){return()=>{V=="filter"&&g(!0),V=="select"&&y(!0)}}function M(V){return()=>{V=="filter"&&g(!1),V=="select"&&y(!1)}}function N(){var V;n(((V=e.values)==null?void 0:V.join(" + "))||"")}J.useEffect(()=>{f||w?n(o||""):N()},[f,w,e.values]);function R(V){return t===""||(V==null?void 0:V.toLocaleLowerCase().indexOf(t==null?void 0:t.toLocaleLowerCase()))>=0}return te("div",{className:"searchable-multiselect",children:[S("input",{type:"search",className:"target-search",placeholder:e.placeholder,onChange:V=>{s(V.target.value),n(V.target.value)},onFocus:E("filter"),onBlur:M("filter"),value:t}),S("select",{multiple:!0,className:`
                targets
                border-2-esnetgrey-500
                rounded
                border-esnetgrey-500
                bg-white
            `,role:"listbox",onChange:e.onChange,size:((F=e==null?void 0:e.items)==null?void 0:F.filter(R).length)||0,onFocus:E("select"),onBlur:M("select"),children:($=e==null?void 0:e.items)==null?void 0:$.filter(R).map(V=>{var X;return S("option",{role:"option","aria-multiselectable":!0,value:V,selected:(X=e==null?void 0:e.values)==null?void 0:X.includes(V),children:V},V)})})]})}const JB=e=>{var F,$,V,X,Z;if(!e.criterion)return S(Wn,{});fc();var[t,n]=J.useState(null),[o,s]=J.useState(null);J.useEffect(()=>{var z;let D={};(z=e.filterableFields)!=null&&z.map&&e.filterableFields.map(H=>{D[H.field]=H}),s(D)},[e.filterableFields]);function f(D,z){var H,se;for(let he=0;he<D.length;he++)for(let pe=0;pe<((se=(H=D[he])==null?void 0:H.value)==null?void 0:se.length);pe++){let ge="";D[he].operator&&(ge="_"+D[he].operator),z+=`${D[he].field}${ge}=${D[he].value[pe]}&`}return z}async function g(D){var ke;let z=(Date.now()/1e3/HS).toFixed(0),H=JSON.parse(JSON.stringify(e.prevCriteria));H.push(e.criterion);let se=(ke=e.queryEndpoints[e.endpoint])==null?void 0:ke.distinct_values_endpoint;if(!se)return;let pe=`ColumnMatches.${Pw(se+JSON.stringify(H))}.${z}`,ge=localStorage.getItem(pe);if(ge)t=JSON.parse(ge);else{let be={"Content-Type":"application/json"};be=Tr(be);let Ue=f(e.prevCriteria,"?"),it=`${Dt}${se}/${D}/${Ue}`,Xe=await fetch(it,{headers:be});Xe.ok&&(t=await Xe.json(),localStorage.setItem(pe,JSON.stringify(t)))}n(t)}var[w,y]=J.useState("");async function E(){var ke,be,Ue,it;let D=JSON.parse(JSON.stringify(e.prevCriteria));if(D.push(e.criterion),!((ke=e.criterion)!=null&&ke.value)||!((Ue=(be=e==null?void 0:e.criterion)==null?void 0:be.value)!=null&&Ue.length))return;let z=(it=e.queryEndpoints[e.endpoint])==null?void 0:it.query_endpoint,H=(Date.now()/1e3/HS).toFixed(0),he=`ResultCount.${Pw(z+JSON.stringify(D))}.${H}`,pe=localStorage.getItem(he);if(pe)w=pe;else{let Xe={"Content-Type":"application/json"};Xe=Tr(Xe);let Te=f(D,"?limit=0&");var ge=await fetch(`${Dt}${z}/${Te}`,{headers:Xe});ge.ok&&(w=ge.headers.get("x-result-count")||"",localStorage.setItem(he,w))}y(w)}function M(D,z){e.criterion[D]=z,e.setCriterion(e.criterion)}J.useEffect(()=>{g(e.criterion.field),E()},[]);const[N,R]=J.useState("");return J.useEffect(()=>{const D=setTimeout(()=>{N&&(M("value",[N]),E())},500);return()=>clearTimeout(D)},[N]),te("div",{className:`
                compound-query-criterion
                flex
                justify-left
                items-start
                gap-2
                mb-4
            `,children:[S(st,{name:"trash2",className:"icon btn bordered w-9 h-9",onClick:e.deleteCriterion}),S("select",{defaultValue:e.criterion.field,onChange:D=>{M("field",D.target.value),g(D.target.value),E()},children:((F=e.filterableFields)==null?void 0:F.map)&&(($=e.filterableFields)==null?void 0:$.map(({label:D,field:z})=>S("option",{value:z,children:D},z)))}),S("select",{defaultValue:e.criterion.operator,onChange:D=>{M("operator",D.target.value),E()},children:Kz.map(({label:D,value:z})=>S("option",{value:z,children:D},z))}),e.criterion.operator!==""&&e.criterion.operator!==null&&e.criterion.operator!=="not_equal"?S("input",{type:"text",defaultValue:(X=(V=e.criterion)==null?void 0:V.value)==null?void 0:X[0],onChange:D=>{R(D.target.value)}}):S(KB,{items:t,placeholder:(Z=o==null?void 0:o[e.criterion.field])==null?void 0:Z.placeholder,values:e.criterion.value,onChange:D=>{let z=Array.from(D.target.selectedOptions).map(H=>H.value);M("value",z),E()}}),te("label",{className:"text-pink-500",children:[isNaN(parseFloat(w))&&"..."||parseFloat(w),"",parseFloat(w)===1?"circuit":"circuits"]},"hitcount-${hitCount}")]})},XB=e=>{var D,z,H,se;const{controller:t,instance:n}=J.useContext(LC),o=()=>{var ge;let he=((ge=n.query)==null?void 0:ge.filters)||[],pe={field:R==null?void 0:R[0].field,operator:null,value:null};he.push(JSON.parse(JSON.stringify(pe))),t.setProperty("query.filters",he)};let[s,f]=J.useState(void 0),[g,w]=J.useState(!0),[y,E]=J.useState(void 0),[M,N]=J.useState(!0),[R,F]=J.useState(void 0);const $=he=>{function pe(ge){t.setProperty(`query.filters[${he}]`,ge)}return ge=>{clearTimeout(s),s=setTimeout(pe,lU*1e3,ge),f(s)}},V=he=>function(){t.setProperty(`query.filters[${he}]`,null)},X=he=>{let pe=he.target.value;t.setProperty("query.endpoint",pe),t.setProperty("query.filters",[])};J.useEffect(()=>{w(!0);let he=`${Dt}/datasources/`,pe={"Content-Type":"application/json"};pe=Tr(pe),fetch(he,{headers:pe,method:"GET"}).then(function(ge){ge.ok&&ge.json().then(ke=>{E(ke),w(!1)})})},[]);const Z=()=>{if(N(!0),!y)return;let he=y[t.instance.query.endpoint],pe=he==null?void 0:he.filterable_columns_endpoint;if(!pe)return;let ge=`${Dt}${pe}`,ke={"Content-Type":"application/json"};ke=Tr(ke),fetch(ge,{headers:ke,method:"GET"}).then(function(be){be.ok&&be.json().then(Ue=>{F(Ue),N(!1)})})};return J.useEffect(Z,[y,(z=(D=t.instance)==null?void 0:D.query)==null?void 0:z.endpoint]),S(T2,{header:"Query",footer:"",visibility:e.datasetVisible,setVisibilityToggle:e.toggleDatasetVisible,showEye:!0,children:g?S("label",{children:"Loading Datasource Metadata..."}):te("div",{role:"form",children:[te("div",{className:"mb-4",children:[S("select",{onChange:X,id:"dataset-selector",value:t.instance.query.endpoint,children:Object.keys(y).map(he=>{let pe=y[he];return S("option",{value:he,children:pe.display_name})})}),"where"]}),(se=(H=t.instance)==null?void 0:H.query)==null?void 0:se.filters.map((he,pe)=>S(JB,{prevCriteria:t.instance.query.filters.slice(0,pe),endpoint:t.instance.query.endpoint,criterion:he,setCriterion:$(pe),deleteCriterion:V(pe),filterableFields:R,queryEndpoints:y},`${pe}`)),S(st,{id:"add-query-criterion",name:"plus",className:"btn icon bordered -mt-0.5",onClick:o})]},Pw(JSON.stringify(t.instance.query.filters)))})},QB=e=>{var t,n;return te(Wn,{children:[(t=e.criteria)==null?void 0:t.map((o,s)=>{var f;return te("span",{children:[te("select",{defaultValue:o,onChange:g=>{e.setCriterion(s,g.target.value)},children:[S("option",{value:"",children:"--"},"option-null"),(f=LA[e.endpoint])==null?void 0:f.map((g,w)=>S("option",{value:g.value,children:g.label},`option-${w}`))]},`criterion-${s}-${o}`),S("label",{className:"block",children:"Then Group On:"})]},`span-criterion-${s}-${o}`)}),te("select",{defaultValue:void 0,onChange:o=>{var s;e.setCriterion(e.criteria&&((s=e.criteria)==null?void 0:s.length)||0,o.target.value),o.target.value=""},children:[S("option",{value:"",children:"--"},"option-null"),(n=LA[e.endpoint])==null?void 0:n.map((o,s)=>S("option",{value:o.value,children:o.label},`option-${s}`))]},"criterion-new")]})};function e$(){var o,s,f,g;const{controller:e,instance:t}=J.useContext(LC),n=(w,y)=>{var M,N;y=y===""?null:y;let E=(N=(M=e==null?void 0:e.instance)==null?void 0:M.query)==null?void 0:N.node_group_criteria;E||(E=[]),E[w]=y,E=E.filter(R=>R!==""&&R!==null&&R!==void 0),e.setProperty("query.node_group_criteria",E)};return S("div",{className:"mt-6",children:S(T2,{header:"Advanced Options",isOpen:!1,footer:"",showEye:!1,visibility:!0,children:S("div",{className:"flex flex-wrap",children:S("div",{className:"w-6/12 -mt-2",children:te("fieldset",{children:[S("legend",{children:"Node Grouping"}),S("div",{className:"flex flex-wrap",children:te("div",{className:"w-7/12",children:[S("label",{className:"-mt-1 block",children:"Form Node Groups On"}),S(QB,{criteria:(s=(o=e.instance)==null?void 0:o.query)==null?void 0:s.node_group_criteria,endpoint:(g=(f=e.instance)==null?void 0:f.query)==null?void 0:g.endpoint,setCriterion:n})]})})]})})})})})}function t$(e){let t=JSON.parse(JSON.stringify(tU.configuration)),n=JSON.parse(JSON.stringify(p2));return n.visible=e.datasetVisible,t.layers.push(n),J.useEffect(()=>{e.mapRef.current&&(e.mapRef.current.setTopology([e.topology]),e.mapRef.current.setOptions(t))},[e.mapRef,e.mapRef.current,e.topology]),S("esnet-map-canvas",{height:"398",ref:e.mapRef})}function n$(e){let t=JSON.parse(JSON.stringify(ap.configuration)),n=JSON.parse(JSON.stringify(p2));return n.visible=e.datasetVisible,t.layers.push(n),J.useEffect(()=>{e.mapRef.current&&(e.mapRef.current.setTopology([e.topology]),e.mapRef.current.setOptions(t))},[e.mapRef,e.mapRef.current,e.topology]),S("esnet-map-canvas",{height:"398",ref:e.mapRef})}const LC=J.createContext(null),r$=e=>{var At,hn;const t=J.useRef(null),n=vt=>{var xt;N(vt.target.value),(xt=Ue==null?void 0:Ue.current)==null||xt.homeMap()},{datasetId:o}=y0(),s=new URLSearchParams(window.location.search);s.toString()&&`${s.toString()}`;const f=`${Dt}/dataset/id/${o}/`;let g=J.useContext(Op),w=J.useContext(dc),{controller:y,instance:E}=J.useContext(fs);const[M,N]=J.useState("logical"),[R,F]=J.useState(null),[$]=J.useState(new fo(f,R,F)),[V,X]=J.useState(!1);let[Z,D]=J.useState(nU),[z,H]=J.useState(!0),[se,he]=J.useState(iU);J.useState(!1);let[pe,ge]=J.useState(!0),[ke,be]=J.useState(!1),Ue=J.useRef();J.useEffect(()=>{(async()=>{await $.fetch()})()},[]);const it=()=>{var vt,xt,rt,ct;if((vt=w==null?void 0:w.datasets)!=null&&vt.includes(o)){const Ve=(xt=w==null?void 0:w.datasets)==null?void 0:xt.indexOf(o);(rt=w==null?void 0:w.datasets)==null||rt.splice(Ve,1),y.setProperty("favorites",w),y.update()}else(ct=w==null?void 0:w.datasets)==null||ct.push(o),y.setProperty("favorites",w),y.update()},Xe=vt=>{let xt={"Content-Type":"application/json"};xt=Tr(xt);let rt={name:vt.name,query:vt.query};return rt.query.filters=vt.query.filters.filter(Ve=>!!Ve),{headers:xt,method:"PATCH",body:JSON.stringify(rt)}},Te=async()=>{var rt,ct;if(!R||!((ct=(rt=R==null?void 0:R.query)==null?void 0:rt.filters)!=null&&ct.length))return;let vt=`${Dt}/output/query/geographic/`,xt=Xe(R);fetch(vt,xt).then(Ve=>{Ve.ok&&Ve.json().then(Ct=>{D(Ct)})})},Fe=async()=>{var rt,ct;if(!R||!((ct=(rt=R==null?void 0:R.query)==null?void 0:rt.filters)!=null&&ct.length))return;let vt=`${Dt}/output/query/logical/`,xt=Xe(R);fetch(vt,xt).then(Ve=>{Ve.ok&&Ve.json().then(Ct=>{D(Ct)})})},ot=async()=>{var rt,ct;if(!R||!((ct=(rt=R==null?void 0:R.query)==null?void 0:rt.filters)!=null&&ct.length))return;let vt=`${Dt}/output/query/raw/`,xt=Xe(R);H(!0),fetch(vt,xt).then(Ve=>{Ve.ok&&Ve.json().then(Ct=>{H(!1),Array.isArray(Ct)?he(Ct):he([{no:null,data:null}])})})};if(J.useEffect(()=>{M=="geographic"&&Te(),M=="logical"&&Fe(),M=="table-view"&&ot()},[R,M]),!R)return null;const Je=()=>{let vt=null,xt=["h-full","w-full","border","[min-height:25rem]","[max-height:25rem]"];return M==="table-view"&&(vt=S(YB,{data:se,loading:z,datasetVisible:pe}),xt.push("overflow-auto")),M==="logical"&&(vt=S(t$,{topology:Z,mapRef:Ue,datasetVisible:pe}),xt.push("overflow-none")),M=="geographic"&&(vt=S(n$,{topology:Z,mapRef:Ue,datasetVisible:pe}),xt.push("overflow-none")),S("div",{className:xt.join(" "),children:vt})},Le=vt=>{$.setProperty("name",vt),X(!1)},Ye=vt=>{vt.preventDefault(),Le(t.current.value.trim())},Ze=()=>{X(!0)},ut=()=>{X(!1)},Qe=vt=>{Ue.current.toggleLayer(0,vt),ge(vt)},bn=()=>{var rt;[].forEach(ct=>{$.setProperty(ct,null)}),$.update().then(()=>{be(!0),setTimeout(()=>{be(!1)},Zw*1e3)});let xt=(rt=g==null?void 0:g.datasets)==null?void 0:rt.filter(ct=>ct!==o);xt==null||xt.push(o),(xt==null?void 0:xt.length)>3&&(xt==null||xt.shift()),g&&(g.datasets=xt),y.setProperty("lastEdited",g),y.update()};return S(LC.Provider,{value:{controller:$,instance:R},children:te("main",{className:"main-content",children:[te("div",{className:"main-content-header m-2 compound",children:[te("div",{className:"flex flex-row",children:[(At=w==null?void 0:w.datasets)!=null&&At.includes(o)?S("div",{className:"icon sm p-1 mr-2",children:S(st,{name:"lucide-star",fill:"#00a0d6",className:"stroke-esnetblue-400 -mt-[0.125rem] -ml-[0.125rem]",onClick:it})}):S("div",{className:"icon sm p-1 mr-2",children:S(st,{name:"lucide-star",className:"stroke-esnetblue-400 -mt-[0.125rem] -ml-[0.125rem]",onClick:it})}),S("div",{className:"icon sm p-1 mr-2",children:S(st,{name:"database",height:20,width:20,className:"database lucide-database stroke-esnetblue-400 -mt-[0.125rem]"})}),V?S("form",{onSubmit:Ye,children:S("input",{ref:t,className:"text-esnetblack-900",name:"dataset-name",defaultValue:R.name})}):S("span",{id:"dataset-display-name",children:R.name}),V?te(Wn,{children:[S(st,{name:"check-square",className:"check-square lucide-check-square stroke-esnetblue-400 icon btn sm p-1 ml-2 -ml-[0.125rem]",onClick:Ye}),S(st,{name:"x-square",onClick:ut,className:"x-square lucide-x-square stroke-esnetblue-400 icon btn sm p-1 ml-2 -ml-[0.125rem]"})]}):S(st,{name:"pencil",height:20,width:20,onClick:Ze,className:"pencil lucide-pencil stroke-esnetblue-400 icon btn sm p-1 ml-2 -ml-[0.125rem]"})]}),te("div",{className:"flex flex-row",children:[S("form",{action:"",children:S("input",{type:"submit",className:"btn text-base -my-1 mr-2",value:"Discard Changes"})}),ke?te("span",{className:"tooltip-box animate-fade absolute opacity-0 z-20 pt-[0.125rem] text-sm -top-3 right-16",children:["Saved New Version: ",(hn=$.instance)==null?void 0:hn.version]}):null,S("input",{type:"button",className:"btn text-base primary -my-1 -mr-2",value:"Save Changes",onClick:bn})]})]}),te("div",{id:"upper-main-pane",className:"flex flex-row w-full mx-auto justify-between",children:[S("div",{className:"w-8/12 p-2",children:Je()}),S(GB,{visualizationMode:M,handleOnModeChange:n,dataset:$.instance})]}),te("div",{id:"lower-main-pane",className:"px-2",children:[S(XB,{toggleDatasetVisible:Qe,datasetVisible:pe}),S(e$,{})]})]})})};var Ww={},i$={get exports(){return Ww},set exports(e){Ww=e}},Sv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v5;function o$(){if(v5)return Sv;v5=1;var e=so,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function g(w,y,E){var M,N={},R=null,F=null;E!==void 0&&(R=""+E),y.key!==void 0&&(R=""+y.key),y.ref!==void 0&&(F=y.ref);for(M in y)o.call(y,M)&&!f.hasOwnProperty(M)&&(N[M]=y[M]);if(w&&w.defaultProps)for(M in y=w.defaultProps,y)N[M]===void 0&&(N[M]=y[M]);return{$$typeof:t,type:w,key:R,ref:F,props:N,_owner:s.current}}return Sv.Fragment=n,Sv.jsx=g,Sv.jsxs=g,Sv}var Oy={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _5;function a$(){return _5||(_5=1,{}.NODE_ENV!=="production"&&function(){var e=so,t=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),w=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),$=Symbol.iterator,V="@@iterator";function X(oe){if(oe===null||typeof oe!="object")return null;var Ie=$&&oe[$]||oe[V];return typeof Ie=="function"?Ie:null}var Z=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function D(oe){{for(var Ie=arguments.length,Ge=new Array(Ie>1?Ie-1:0),kt=1;kt<Ie;kt++)Ge[kt-1]=arguments[kt];z("error",oe,Ge)}}function z(oe,Ie,Ge){{var kt=Z.ReactDebugCurrentFrame,Gt=kt.getStackAddendum();Gt!==""&&(Ie+="%s",Ge=Ge.concat([Gt]));var sn=Ge.map(function(Zt){return String(Zt)});sn.unshift("Warning: "+Ie),Function.prototype.apply.call(console[oe],console,sn)}}var H=!1,se=!1,he=!1,pe=!1,ge=!1,ke;ke=Symbol.for("react.module.reference");function be(oe){return!!(typeof oe=="string"||typeof oe=="function"||oe===o||oe===f||ge||oe===s||oe===E||oe===M||pe||oe===F||H||se||he||typeof oe=="object"&&oe!==null&&(oe.$$typeof===R||oe.$$typeof===N||oe.$$typeof===g||oe.$$typeof===w||oe.$$typeof===y||oe.$$typeof===ke||oe.getModuleId!==void 0))}function Ue(oe,Ie,Ge){var kt=oe.displayName;if(kt)return kt;var Gt=Ie.displayName||Ie.name||"";return Gt!==""?Ge+"("+Gt+")":Ge}function it(oe){return oe.displayName||"Context"}function Xe(oe){if(oe==null)return null;if(typeof oe.tag=="number"&&D("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof oe=="function")return oe.displayName||oe.name||null;if(typeof oe=="string")return oe;switch(oe){case o:return"Fragment";case n:return"Portal";case f:return"Profiler";case s:return"StrictMode";case E:return"Suspense";case M:return"SuspenseList"}if(typeof oe=="object")switch(oe.$$typeof){case w:var Ie=oe;return it(Ie)+".Consumer";case g:var Ge=oe;return it(Ge._context)+".Provider";case y:return Ue(oe,oe.render,"ForwardRef");case N:var kt=oe.displayName||null;return kt!==null?kt:Xe(oe.type)||"Memo";case R:{var Gt=oe,sn=Gt._payload,Zt=Gt._init;try{return Xe(Zt(sn))}catch{return null}}}return null}var Te=Object.assign,Fe=0,ot,Je,Le,Ye,Ze,ut,Qe;function bn(){}bn.__reactDisabledLog=!0;function At(){{if(Fe===0){ot=console.log,Je=console.info,Le=console.warn,Ye=console.error,Ze=console.group,ut=console.groupCollapsed,Qe=console.groupEnd;var oe={configurable:!0,enumerable:!0,value:bn,writable:!0};Object.defineProperties(console,{info:oe,log:oe,warn:oe,error:oe,group:oe,groupCollapsed:oe,groupEnd:oe})}Fe++}}function hn(){{if(Fe--,Fe===0){var oe={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Te({},oe,{value:ot}),info:Te({},oe,{value:Je}),warn:Te({},oe,{value:Le}),error:Te({},oe,{value:Ye}),group:Te({},oe,{value:Ze}),groupCollapsed:Te({},oe,{value:ut}),groupEnd:Te({},oe,{value:Qe})})}Fe<0&&D("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var vt=Z.ReactCurrentDispatcher,xt;function rt(oe,Ie,Ge){{if(xt===void 0)try{throw Error()}catch(Gt){var kt=Gt.stack.trim().match(/\n( *(at )?)/);xt=kt&&kt[1]||""}return`
`+xt+oe}}var ct=!1,Ve;{var Ct=typeof WeakMap=="function"?WeakMap:Map;Ve=new Ct}function Jt(oe,Ie){if(!oe||ct)return"";{var Ge=Ve.get(oe);if(Ge!==void 0)return Ge}var kt;ct=!0;var Gt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var sn;sn=vt.current,vt.current=null,At();try{if(Ie){var Zt=function(){throw Error()};if(Object.defineProperty(Zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Zt,[])}catch(Dn){kt=Dn}Reflect.construct(oe,[],Zt)}else{try{Zt.call()}catch(Dn){kt=Dn}oe.call(Zt.prototype)}}else{try{throw Error()}catch(Dn){kt=Dn}oe()}}catch(Dn){if(Dn&&kt&&typeof Dn.stack=="string"){for(var Me=Dn.stack.split(`
`),ce=kt.stack.split(`
`),Pe=Me.length-1,$e=ce.length-1;Pe>=1&&$e>=0&&Me[Pe]!==ce[$e];)$e--;for(;Pe>=1&&$e>=0;Pe--,$e--)if(Me[Pe]!==ce[$e]){if(Pe!==1||$e!==1)do if(Pe--,$e--,$e<0||Me[Pe]!==ce[$e]){var $t=`
`+Me[Pe].replace(" at new "," at ");return oe.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",oe.displayName)),typeof oe=="function"&&Ve.set(oe,$t),$t}while(Pe>=1&&$e>=0);break}}}finally{ct=!1,vt.current=sn,hn(),Error.prepareStackTrace=Gt}var xn=oe?oe.displayName||oe.name:"",Jn=xn?rt(xn):"";return typeof oe=="function"&&Ve.set(oe,Jn),Jn}function Be(oe,Ie,Ge){return Jt(oe,!1)}function at(oe){var Ie=oe.prototype;return!!(Ie&&Ie.isReactComponent)}function ft(oe,Ie,Ge){if(oe==null)return"";if(typeof oe=="function")return Jt(oe,at(oe));if(typeof oe=="string")return rt(oe);switch(oe){case E:return rt("Suspense");case M:return rt("SuspenseList")}if(typeof oe=="object")switch(oe.$$typeof){case y:return Be(oe.render);case N:return ft(oe.type,Ie,Ge);case R:{var kt=oe,Gt=kt._payload,sn=kt._init;try{return ft(sn(Gt),Ie,Ge)}catch{}}}return""}var An=Object.prototype.hasOwnProperty,_n={},ur=Z.ReactDebugCurrentFrame;function gr(oe){if(oe){var Ie=oe._owner,Ge=ft(oe.type,oe._source,Ie?Ie.type:null);ur.setExtraStackFrame(Ge)}else ur.setExtraStackFrame(null)}function Mn(oe,Ie,Ge,kt,Gt){{var sn=Function.call.bind(An);for(var Zt in oe)if(sn(oe,Zt)){var Me=void 0;try{if(typeof oe[Zt]!="function"){var ce=Error((kt||"React class")+": "+Ge+" type `"+Zt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof oe[Zt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ce.name="Invariant Violation",ce}Me=oe[Zt](Ie,Zt,kt,Ge,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Pe){Me=Pe}Me&&!(Me instanceof Error)&&(gr(Gt),D("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",kt||"React class",Ge,Zt,typeof Me),gr(null)),Me instanceof Error&&!(Me.message in _n)&&(_n[Me.message]=!0,gr(Gt),D("Failed %s type: %s",Ge,Me.message),gr(null))}}}var Bn=Array.isArray;function Vn(oe){return Bn(oe)}function Qn(oe){{var Ie=typeof Symbol=="function"&&Symbol.toStringTag,Ge=Ie&&oe[Symbol.toStringTag]||oe.constructor.name||"Object";return Ge}}function Ke(oe){try{return Nn(oe),!1}catch{return!0}}function Nn(oe){return""+oe}function Zn(oe){if(Ke(oe))return D("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Qn(oe)),Nn(oe)}var er=Z.ReactCurrentOwner,Yr={key:!0,ref:!0,__self:!0,__source:!0},Kr,Uo,ci;ci={};function fi(oe){if(An.call(oe,"ref")){var Ie=Object.getOwnPropertyDescriptor(oe,"ref").get;if(Ie&&Ie.isReactWarning)return!1}return oe.ref!==void 0}function Fr(oe){if(An.call(oe,"key")){var Ie=Object.getOwnPropertyDescriptor(oe,"key").get;if(Ie&&Ie.isReactWarning)return!1}return oe.key!==void 0}function Jr(oe,Ie){if(typeof oe.ref=="string"&&er.current&&Ie&&er.current.stateNode!==Ie){var Ge=Xe(er.current.type);ci[Ge]||(D('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',Xe(er.current.type),oe.ref),ci[Ge]=!0)}}function Fo(oe,Ie){{var Ge=function(){Kr||(Kr=!0,D("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ie))};Ge.isReactWarning=!0,Object.defineProperty(oe,"key",{get:Ge,configurable:!0})}}function go(oe,Ie){{var Ge=function(){Uo||(Uo=!0,D("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ie))};Ge.isReactWarning=!0,Object.defineProperty(oe,"ref",{get:Ge,configurable:!0})}}var La=function(oe,Ie,Ge,kt,Gt,sn,Zt){var Me={$$typeof:t,type:oe,key:Ie,ref:Ge,props:Zt,_owner:sn};return Me._store={},Object.defineProperty(Me._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Me,"_self",{configurable:!1,enumerable:!1,writable:!1,value:kt}),Object.defineProperty(Me,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Gt}),Object.freeze&&(Object.freeze(Me.props),Object.freeze(Me)),Me};function vo(oe,Ie,Ge,kt,Gt){{var sn,Zt={},Me=null,ce=null;Ge!==void 0&&(Zn(Ge),Me=""+Ge),Fr(Ie)&&(Zn(Ie.key),Me=""+Ie.key),fi(Ie)&&(ce=Ie.ref,Jr(Ie,Gt));for(sn in Ie)An.call(Ie,sn)&&!Yr.hasOwnProperty(sn)&&(Zt[sn]=Ie[sn]);if(oe&&oe.defaultProps){var Pe=oe.defaultProps;for(sn in Pe)Zt[sn]===void 0&&(Zt[sn]=Pe[sn])}if(Me||ce){var $e=typeof oe=="function"?oe.displayName||oe.name||"Unknown":oe;Me&&Fo(Zt,$e),ce&&go(Zt,$e)}return La(oe,Me,ce,Gt,kt,er.current,Zt)}}var Pa=Z.ReactCurrentOwner,we=Z.ReactDebugCurrentFrame;function xe(oe){if(oe){var Ie=oe._owner,Ge=ft(oe.type,oe._source,Ie?Ie.type:null);we.setExtraStackFrame(Ge)}else we.setExtraStackFrame(null)}var Ne;Ne=!1;function et(oe){return typeof oe=="object"&&oe!==null&&oe.$$typeof===t}function yt(){{if(Pa.current){var oe=Xe(Pa.current.type);if(oe)return`

Check the render method of \``+oe+"`."}return""}}function St(oe){{if(oe!==void 0){var Ie=oe.fileName.replace(/^.*[\\\/]/,""),Ge=oe.lineNumber;return`

Check your code at `+Ie+":"+Ge+"."}return""}}var zt={};function bt(oe){{var Ie=yt();if(!Ie){var Ge=typeof oe=="string"?oe:oe.displayName||oe.name;Ge&&(Ie=`

Check the top-level render call using <`+Ge+">.")}return Ie}}function gt(oe,Ie){{if(!oe._store||oe._store.validated||oe.key!=null)return;oe._store.validated=!0;var Ge=bt(Ie);if(zt[Ge])return;zt[Ge]=!0;var kt="";oe&&oe._owner&&oe._owner!==Pa.current&&(kt=" It was passed a child from "+Xe(oe._owner.type)+"."),xe(oe),D('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Ge,kt),xe(null)}}function Xt(oe,Ie){{if(typeof oe!="object")return;if(Vn(oe))for(var Ge=0;Ge<oe.length;Ge++){var kt=oe[Ge];et(kt)&&gt(kt,Ie)}else if(et(oe))oe._store&&(oe._store.validated=!0);else if(oe){var Gt=X(oe);if(typeof Gt=="function"&&Gt!==oe.entries)for(var sn=Gt.call(oe),Zt;!(Zt=sn.next()).done;)et(Zt.value)&&gt(Zt.value,Ie)}}}function Ln(oe){{var Ie=oe.type;if(Ie==null||typeof Ie=="string")return;var Ge;if(typeof Ie=="function")Ge=Ie.propTypes;else if(typeof Ie=="object"&&(Ie.$$typeof===y||Ie.$$typeof===N))Ge=Ie.propTypes;else return;if(Ge){var kt=Xe(Ie);Mn(Ge,oe.props,"prop",kt,oe)}else if(Ie.PropTypes!==void 0&&!Ne){Ne=!0;var Gt=Xe(Ie);D("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Gt||"Unknown")}typeof Ie.getDefaultProps=="function"&&!Ie.getDefaultProps.isReactClassApproved&&D("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Vt(oe){{for(var Ie=Object.keys(oe.props),Ge=0;Ge<Ie.length;Ge++){var kt=Ie[Ge];if(kt!=="children"&&kt!=="key"){xe(oe),D("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",kt),xe(null);break}}oe.ref!==null&&(xe(oe),D("Invalid attribute `ref` supplied to `React.Fragment`."),xe(null))}}function jt(oe,Ie,Ge,kt,Gt,sn){{var Zt=be(oe);if(!Zt){var Me="";(oe===void 0||typeof oe=="object"&&oe!==null&&Object.keys(oe).length===0)&&(Me+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var ce=St(Gt);ce?Me+=ce:Me+=yt();var Pe;oe===null?Pe="null":Vn(oe)?Pe="array":oe!==void 0&&oe.$$typeof===t?(Pe="<"+(Xe(oe.type)||"Unknown")+" />",Me=" Did you accidentally export a JSX literal instead of a component?"):Pe=typeof oe,D("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Pe,Me)}var $e=vo(oe,Ie,Ge,Gt,sn);if($e==null)return $e;if(Zt){var $t=Ie.children;if($t!==void 0)if(kt)if(Vn($t)){for(var xn=0;xn<$t.length;xn++)Xt($t[xn],oe);Object.freeze&&Object.freeze($t)}else D("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Xt($t,oe)}return oe===o?Vt($e):Ln($e),$e}}function Pn(oe,Ie,Ge){return jt(oe,Ie,Ge,!0)}function Xr(oe,Ie,Ge){return jt(oe,Ie,Ge,!1)}var yi=Xr,_o=Pn;Oy.Fragment=o,Oy.jsx=yi,Oy.jsxs=_o}()),Oy}(function(e){({}).NODE_ENV==="production"?e.exports=o$():e.exports=a$()})(i$);const Tt=Ww.jsx,lo=Ww.jsxs;function DL(...e){return e.filter(Boolean).join(" ")}function s$(){return Tt("div",{className:"flex-shrink-0",children:Tt("a",{href:"https://es.net",children:lo("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 36 36",xmlSpace:"preserve",className:"esnet-logo mt-1",children:[Tt("style",{type:"text/css",children:`.st0{fill:#6D6F71;}
    .st1{fill:#6DB6CA; stroke:n}
    .st2{fill:#48C5DC;}`}),Tt("circle",{className:"st0",cx:"18",cy:"18",r:"17.09"}),lo("g",{children:[Tt("path",{className:"st1",d:`M5.21,20.11c0.92-1.17,2.18-2.22,3.52-3.4c-2.54-2.5-4.53-5.4-5.52-7.26c-1.1,1.9-1.84,4.03-2.14,6.3
              C2.05,17.06,3.55,18.68,5.21,20.11z`}),Tt("path",{className:"st1",d:`M30.71,26.33c1.14-0.3,2.12-0.66,2.68-0.9c0.26-0.53,0.49-1.08,0.69-1.64c-0.59,0.15-1.9,0.4-3.37,0.55
              C30.71,25.05,30.77,25.72,30.71,26.33z`}),Tt("path",{className:"st1",d:`M15.13,21.29c-0.86-0.45-2.1-1.22-2.86-1.71c-1.2,1.09-2.2,2.26-3.06,3.37c1.29,0.73,3.13,1.65,4.7,2.23
              c6.04,2.26,11.42,2.15,14.99,1.55c-0.06-0.73-0.12-1.46-0.28-2.26C25.07,24.5,20.06,23.86,15.13,21.29z`}),Tt("path",{className:"st1",d:`M23.29,14.35c3.03,3.42,4.5,7.34,5.1,10.46c0.95-0.01,1.76-0.16,2.53-0.24c-0.02-3.13-1.1-7.64-3.71-11.69
              c-1.39,0.12-2.9,0.47-4.44,0.89C22.84,13.85,23.21,14.26,23.29,14.35z`}),Tt("path",{className:"st1",d:`M28.61,26.45c0.15,1.95,0.05,3.91-0.12,5.03c0.56-0.43,1.08-0.9,1.58-1.4c0.3-0.95,0.63-2.48,0.78-4.02
              C30.2,26.24,29.42,26.31,28.61,26.45z`}),Tt("path",{className:"st1",d:`M25.18,10.25c-0.26-0.29-0.98-1.07-1.26-1.36c-3.95-4.02-7.69-6.16-10.84-7.26c-2.72,0.82-5.15,2.29-7.11,4.24
              c2.83,0.29,8.55,1.58,13.47,4.99C21.41,10.34,23.36,10.3,25.18,10.25z`}),Tt("path",{className:"st2",d:`M28.64,26.78c0.81-0.14,1.55-0.3,2.19-0.47c0.06-0.62,0.09-1.28,0.09-1.97c-0.77,0.08-1.64,0.13-2.59,0.14
              C28.48,25.28,28.58,26.05,28.64,26.78z`}),Tt("path",{className:"st1",d:`M24.3,9.75c1.08,1.19,2.05,2.41,2.81,3.58c2.88-0.25,5.72-0.01,7.41,0.31c-0.25-0.93-0.57-1.83-0.96-2.7
              C31.37,10.31,27.83,9.67,24.3,9.75z`}),Tt("path",{className:"st1",d:`M5.22,19.68c-1.33,1.69-2.47,3.54-3.07,4.72c0.84,2.08,2.08,3.96,3.62,5.54c0.65-1.7,2.12-4.53,4.14-7.1
              C8.13,21.82,6.53,20.8,5.22,19.68z`}),Tt("path",{className:"st1",d:`M15.96,17.34c2.4-1.6,5.1-2.7,7.39-3.33c-1.28-1.4-2.51-2.59-3.91-3.56c-1.2,0.31-2.84,0.84-4.06,1.39
              c-2.82,1.27-5.44,3.14-7.31,4.81c1.23,1.21,2.71,2.37,4.38,3.47C13.41,19.24,14.75,18.14,15.96,17.34z`}),Tt("path",{className:"st2",d:`M12.71,19.87c-1.67-1.1-3.11-2.29-4.34-3.5c-1.33,1.19-2.44,2.41-3.36,3.57c1.31,1.13,2.84,2.24,4.61,3.24
              C10.49,22.08,11.51,20.96,12.71,19.87z`}),Tt("path",{className:"st2",d:`M23.06,14.09c1.54-0.42,3.03-0.67,4.42-0.79c-0.75-1.17-1.66-2.35-2.74-3.54c-1.82,0.04-3.75,0.28-5.73,0.79
              C20.41,11.52,21.78,12.69,23.06,14.09z`})]})]})})})}function l$({className:e}){return Tt("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:Tt("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}function u$({className:e}){return Tt("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:Tt("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function zL({className:e}){return Tt("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:Tt("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})})}function UL({navigation:e}){return Tt("div",{className:"ml-10 flex items-baseline space-x-4",children:e==null?void 0:e.map(t=>Tt("a",{href:t.href,className:DL(t.current?"bg-teal-900 text-white":"text-color-link hover:font-bold hover:text-color-link-hover","px-3 py-1 rounded-md text-lg font-medium"),"aria-current":t.current?"page":void 0,children:t.name},t.name))})}function c$({open:e}){return Tt("div",{className:"-mr-2 flex md:hidden",children:lo("button",{type:"button",className:"inline-flex items-center justify-center rounded-md bg-color-primary p-2 text-white hover:bg-primary hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-teal-800",children:[Tt("span",{className:"sr-only",children:"Open main menu"}),e?Tt(u$,{className:"hidden h-6 w-6"}):Tt(l$,{className:"block h-6 w-6"})]})})}function f$({user:e,userNavigation:t}){var n;const[o,s]=J.useState(!1);return lo("div",{className:"relative ml-3",children:[Tt("div",{children:lo("button",{type:"button",onClick:()=>s(!o),className:"profile-button",children:[Tt("span",{className:"sr-only",children:"Open user menu"}),Tt("img",{className:"h-7 w-7 rounded-full",src:(n=e.profile)==null?void 0:n.image,alt:""})]})}),o?Tt("div",{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:t.map(f=>Tt("a",{href:f.href,className:DL(f.active?"bg-esnetblue-100":"","block px-4 py-2 text-sm text-color-primary"),onClick:()=>s(!o),children:f.name},f.name))}):null]})}function d$({user:e,userNavigation:t,navigation:n}){var o;return lo("div",{className:"md:hidden",children:[Tt("div",{className:"space-y-1 px-2 pt-2 pb-3 sm:px-3",children:Tt(UL,{navigation:n})}),lo("div",{className:"border-t border-teal-700 pt-4 pb-3",children:[lo("div",{className:"flex items-center px-5",children:[Tt("div",{className:"flex-shrink-0",children:Tt("img",{className:"h-10 w-10 rounded-full",src:(o=e.profile)==null?void 0:o.image,alt:""})}),lo("div",{className:"ml-3",children:[Tt("div",{className:"text-base font-medium leading-none text-white",children:e.username}),Tt("div",{className:"text-sm font-medium leading-none text-esnetblue-600",children:e.email})]}),lo("button",{type:"button",className:"ml-auto flex-shrink-0 rounded-full bg-color-primary p-1 text-color-link hover:stroke-color-link-hover focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-teal-800",children:[Tt("span",{className:"sr-only",children:"View notifications"}),Tt(zL,{className:"h-5 w-5"})]})]}),Tt("div",{className:"mt-3 space-y-1 px-2",children:t.map(s=>Tt("a",{href:s.href,className:"block rounded-md px-3 py-2 text-base font-medium text-esnetblue-600 hover:bg-color-primary hover:text-white",children:s.name},s.name))})]})]})}function h$({user:e,userNavigation:t,navigation:n}){return Tt("nav",{children:lo("div",{className:"container",children:[lo("div",{className:"centered",children:[Tt(s$,{}),Tt("div",{className:"hidden md:block",children:Tt(UL,{navigation:n})})]}),Tt("div",{className:"hidden md:block",children:lo("div",{className:"centered ml-4 md:ml-6",children:[lo("button",{type:"button",className:"bell-icon",children:[Tt("span",{className:"sr-only",children:"View notifications"}),Tt(zL,{className:"h-5 w-5"})]}),Tt(f$,{user:e,userNavigation:t})]})}),Tt(c$,{open:!1})]})})}function p$(){return Tt("nav",{children:Tt("div",{className:"container",children:Tt("div",{className:"loading",children:"Loading..."})})})}var Nv={},Ev=LR;if({}.NODE_ENV==="production")Nv.createRoot=Ev.createRoot,Nv.hydrateRoot=Ev.hydrateRoot;else{var Ry=Ev.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Nv.createRoot=function(e,t){Ry.usingClientEntryPoint=!0;try{return Ev.createRoot(e,t)}finally{Ry.usingClientEntryPoint=!1}},Nv.hydrateRoot=function(e,t,n){Ry.usingClientEntryPoint=!0;try{return Ev.hydrateRoot(e,t,n)}finally{Ry.usingClientEntryPoint=!1}}}const jS=(e,t)=>fetch(e,t).then(n=>n.ok?n.json():null);function Vw(e){let t=e.logoutPath?e.logoutPath:"/logout";const n=[{name:"Your Profile",href:"#",active:!1},{name:"Settings",href:"#",active:!1},{name:"Sign out",href:t,active:!1}];var[o,s]=J.useState([{name:"Terranova",href:"#",current:!1}]),[f,g]=J.useState([]),[w,y]=J.useState({username:"Placeholder",email:"placeholder@example.com",profile:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEGWlDQ1BrQ0dDb2xvclNwYWNlR2VuZXJpY1JHQgAAOI2NVV1oHFUUPrtzZyMkzlNsNIV0qD8NJQ2TVjShtLp/3d02bpZJNtoi6GT27s6Yyc44M7v9oU9FUHwx6psUxL+3gCAo9Q/bPrQvlQol2tQgKD60+INQ6Ium65k7M5lpurHeZe58853vnnvuuWfvBei5qliWkRQBFpquLRcy4nOHj4g9K5CEh6AXBqFXUR0rXalMAjZPC3e1W99Dwntf2dXd/p+tt0YdFSBxH2Kz5qgLiI8B8KdVy3YBevqRHz/qWh72Yui3MUDEL3q44WPXw3M+fo1pZuQs4tOIBVVTaoiXEI/MxfhGDPsxsNZfoE1q66ro5aJim3XdoLFw72H+n23BaIXzbcOnz5mfPoTvYVz7KzUl5+FRxEuqkp9G/Ajia219thzg25abkRE/BpDc3pqvphHvRFys2weqvp+krbWKIX7nhDbzLOItiM8358pTwdirqpPFnMF2xLc1WvLyOwTAibpbmvHHcvttU57y5+XqNZrLe3lE/Pq8eUj2fXKfOe3pfOjzhJYtB/yll5SDFcSDiH+hRkH25+L+sdxKEAMZahrlSX8ukqMOWy/jXW2m6M9LDBc31B9LFuv6gVKg/0Szi3KAr1kGq1GMjU/aLbnq6/lRxc4XfJ98hTargX++DbMJBSiYMIe9Ck1YAxFkKEAG3xbYaKmDDgYyFK0UGYpfoWYXG+fAPPI6tJnNwb7ClP7IyF+D+bjOtCpkhz6CFrIa/I6sFtNl8auFXGMTP34sNwI/JhkgEtmDz14ySfaRcTIBInmKPE32kxyyE2Tv+thKbEVePDfW/byMM1Kmm0XdObS7oGD/MypMXFPXrCwOtoYjyyn7BV29/MZfsVzpLDdRtuIZnbpXzvlf+ev8MvYr/Gqk4H/kV/G3csdazLuyTMPsbFhzd1UabQbjFvDRmcWJxR3zcfHkVw9GfpbJmeev9F08WW8uDkaslwX6avlWGU6NRKz0g/SHtCy9J30o/ca9zX3Kfc19zn3BXQKRO8ud477hLnAfc1/G9mrzGlrfexZ5GLdn6ZZrrEohI2wVHhZywjbhUWEy8icMCGNCUdiBlq3r+xafL549HQ5jH+an+1y+LlYBifuxAvRN/lVVVOlwlCkdVm9NOL5BE4wkQ2SMlDZU97hX86EilU/lUmkQUztTE6mx1EEPh7OmdqBtAvv8HdWpbrJS6tJj3n0CWdM6busNzRV3S9KTYhqvNiqWmuroiKgYhshMjmhTh9ptWhsF7970j/SbMrsPE1suR5z7DMC+P/Hs+y7ijrQAlhyAgccjbhjPygfeBTjzhNqy28EdkUh8C+DU9+z2v/oyeH791OncxHOs5y2AtTc7nb/f73TWPkD/qwBnjX8BoJ98VQNcC+8AAAB4ZVhJZk1NACoAAAAIAAUBEgADAAAAAQABAAABGgAFAAAAAQAAAEoBGwAFAAAAAQAAAFIBKAADAAAAAQACAACHaQAEAAAAAQAAAFoAAAAAAAAASAAAAAEAAABIAAAAAQACoAIABAAAAAEAAABAoAMABAAAAAEAAABAAAAAAPqjpwEAAAAJcEhZcwAACxMAAAsTAQCanBgAAAI4aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj42NDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj42NDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrUocOHAAAFcklEQVR4Ae1aXWgcVRT+Ntnt2t8Y22xCwYKNtVKl2pcq2ApKH/RBRaQgIr6I+CT2RRRUivGh4JP4gwjik9b6i7SgIhQRREvbVCJVg1jTP1ItbWJtGtPdTdfvm9kJu+vGndk9d9TdObDZ2Zk7957vu+ece869Se06Viqhg6Wrg7F70BMCEgvocAYSF+hwA0BiAYkFdDgD6Tjxn5gCDh0Ejv4MTE0C+QKQyQK9VwCrrwE2bAQGMnFqBKTiSIW/OAR8/jEwc7wMjrR3VQC9RCJKeSrD+0sGgbu2AhtJSBzilIBTs8ArzwMXOOPpXoLmbEtKl/zvyr+pcjievQDMngeWrwe2PQksdVypOCPgwC/AziGCXgx0LyJokoE6wCtJ8K5JRKobKP7hP3nsBeCqnr+1MrtR5t2sP6+j4THgrWc56/RtzXqJJh4KvN4mSWqfXkriFgIvPc6YwdjhSswJOJsieJr9gv6yymFmvQ66UpE3qV03Z/9luoJ+uhBzAuTzmnXPp5sEPweU7ytYli6ShNfm7ppemBKw/ydgcpSztoSWzKhuIbIEudKxb4AjXDqtxZSATz8iePquAl4Q1U0UliVcBux516S3qk7MCJDv/87lrouBK3TAq1Jl/h+yAq0kJ7+fv02zT8wIOPwtZ17JjFmP1ZCUJBXPAT+MV99v9ZeZumNHCD6GxFpptKWYETB51j0BIvgMx7EUMwKKyvRiEOtxzAhYxChdL8c35YSrgcaxFDMCcsr8GK1diggeGLAdwYyAwbXuLUArzOC1/1EC1g+WkyAXVkDg2jPI9AFXMsu0FDML0Aq4agNr+Wn71UAzP8sc4MbNltD9vswIUHdbH/KTIWs15fspFlh332PdMzNXyy5XLgCuvwMonKHCquKoeCviAWc/hdPA5vu5XeZgd8iUAIF9mIpmV/o7Ol0kpBUSVFYXWQH23QDce1srVM7/rjkBGuq5HQyILIqK3NsTiGZEFiTwIvPpJ5rpIdw7TgjI0lR3vAgspvL536gIRwlVJ6gdrUbt878CuXXsZygckGZbOdsUDRR67zNg34d0BS5j2ivQzNarGOUqaqOKT+22PADceUvQi7tv5wRI9WnuFezeA4x8DVxkQAt2i0REECO04bGQFnPTrYz2t7sDXNtzLARUDnqa7qHSeYKuUeBeX5axoi/HDO9qoMdBlK8cu951DBV89bA5WkOOYKFPpfwL4DU8jbCzpeMJiMUFxvPA+HHg1Ljv+xNc36cZ7WdYNygOzAmnI8vNz2XLgX6WvatW01PWAsowXYl5EDxHHz/8HfDjCI+0xgiSUV8Hnt5JD1EoH/A+PP/z8oMaG1Q7bat737xW2wzPBfrXcIXYBGy6zpYKEwK0zO39Ejj4FXD+KJe5GV9xbZHrZEcgaiVY/mrvB78rcwUtm+pTn3QPsOZm4L4HgRUGgbMlAnQWsOtNntjso3J/MoHhSbBAB8p7IFssiOYIKZMoywhOjtdtAR5hwtSKNE3Azt3AAf7Tg8B2L/O/LQH/E6jAogoTHJsbJI9up1UwbjQjNR4YrovtPADd/4Hvm+nL+Y7SWM6M9YnQfNoE8UGxQfLqNqbbo/511L+RCXjqGfr5Cf/4O1Ak6qBW7TW+rEFH8e8MAaMsoKJKJAJef5u5/EnOfC8nu3L5ijqqZXtZHz+ZFcAbLMOjSmgCtLyN7vUHEvgg0EUd0El7EqB9B+0bvv9JtBFCEzAyXPbzaP3H1lq5g8roYVacUSQ0AVMO/08nisLztqUVgFaqXekoEpqAUuiWUYa3bxvVNf8nsMIT1SjDrO2p7QioBdjod0JAI4ba/XliAe0+w43wJRbQiKF2f55YQLvPcCN8iQU0Yqjdn/8FT/52MHoXBDwAAAAASUVORK5CYII="}});J.useState();const[E,M]=J.useState(!0);return J.useEffect(()=>{fetch("https://terranova-dev.es.net/corridor/api/v1/csrftoken/",{credentials:"include",signal:AbortSignal.timeout(5e3)}).then(N=>{jS("https://terranova-dev.es.net/corridor/api/v1/messages/",{credentials:"include",signal:AbortSignal.timeout(5e3)}).then(R=>{R&&g(R)}),jS("https://terranova-dev.es.net/corridor/api/v1/navigation/",{credentials:"include",signal:AbortSignal.timeout(5e3)}).then(R=>{R&&s(R)}),jS("https://terranova-dev.es.net/corridor/api/v1/profile/",{credentials:"include",signal:AbortSignal.timeout(5e3)}).then(R=>{R&&y(R)})}).catch(()=>M(!1)).finally(()=>M(!1))},[]),E?Tt("div",{id:"corridor",className:"top-bar",children:Tt(p$,{})}):lo("div",{id:"corridor",className:"top-bar",children:[Tt(h$,{user:w,userNavigation:n,navigation:o}),Tt(d$,{user:w,userNavigation:n,navigation:o})]})}Vw.createRoot=Nv.createRoot;Vw.createElement=J.createElement;function m$(){const e=KN();return aC(e)?te("div",{className:"error-page bg-esnetblue-50",children:[S(Vw,{}),S("br",{}),te("center",{children:[S("h1",{children:"Oops!"}),S("p",{children:"Sorry, an unexpected error has occurred."}),S("p",{children:te("i",{children:[e.status," ",e.statusText]})})]})]}):(console.error(e),te("div",{className:"error-page bg-esnetblue-50",children:[S(Vw,{}),S("br",{}),te("center",{children:[S("h1",{children:"Oops!"}),S("p",{children:"Sorry, an unknown error has occurred."})]})]}))}function g$(){const[e,t]=J.useState([]),[n,o]=J.useState(null),[s,f]=J.useState(!0),[g,w]=J.useState(!1);async function y(){let Te=`${Dt}/user/?limit=9999`,Fe={"Content-Type":"application/json"};Fe=Tr(Fe),fetch(Te,{headers:Fe,method:"GET"}).then(function(ot){ot.ok&&ot.json().then(Je=>{f(!1),t(Je)})})}J.useEffect(()=>{y()},[]);const E={READ_ONLY:[Pf],READ_WRITE:[Pf,Lv],PUBLISHER:[Pf,Lv,nw],ADMIN:[Pf,Lv,nw,w5]};function M(Te,Fe){function ot(Je){Te._setPassword=!0,e[Fe]=Te,t([...e])}return ot}function N(Te,Fe){function ot(Je){Te._setPassword=!1,e[Fe]=Te,t([...e])}return ot}function R(){let Te=document.getElementById("table-form"),Fe=Te==null?void 0:Te.checkValidity();return Fe||Te==null||Te.reportValidity(),!!Fe}function F(Te,Fe){function ot(Je){if(!R())return;let Le=`${Dt}/user/${Te.username}/set_password`,Ye={"Content-Type":"application/json"};Ye=Tr(Ye);let Ze={password:Te._newPassword};fetch(Le,{headers:Ye,method:"PUT",body:JSON.stringify(Ze)}).then(function(ut){ut.ok&&ut.json().then(Qe=>{Qe._setPassword=!1,Qe._passwordReset=!0,e[Fe]=Qe,t([...e]),setTimeout(()=>{Qe._passwordReset=!1},1e3)})})}return ot}function $(Te,Fe){function ot(Je){Te._edit=!0,e[Fe]=Te,t([...e])}return ot}function V(Te,Fe){function ot(Je){if(!R())return;let Le=`${Dt}/user/`,Ye={"Content-Type":"application/json"};Ye=Tr(Ye);let Ze={username:Te.username,password:Te._newPassword,name:Te.name,scope:Te.scope};fetch(Le,{headers:Ye,method:"POST",body:JSON.stringify(Ze)}).then(function(ut){ut.ok&&ut.json().then(Qe=>{Qe._saved=!0,e[Fe]=Qe,t([...e]),setTimeout(()=>{Qe._saved=!1},1e3)})})}return ot}function X(Te,Fe){function ot(Je){if(!R())return;let Le=`${Dt}/user/${Te.username}/`,Ye={"Content-Type":"application/json"};Ye=Tr(Ye),fetch(Le,{headers:Ye,method:"PUT",body:JSON.stringify(Te)}).then(function(ut){ut.ok&&ut.json().then(Qe=>{Qe._edit=!1,Qe._saved=!0,e[Fe]=Qe,t([...e]),setTimeout(()=>{Qe._saved=!1},1e3)})})}return ot}function Z(Te,Fe){function ot(Je){Te._edit=!1,e[Fe]=Te,t([...e])}return ot}function D(Te,Fe){function ot(Je){o({user:Te,index:Fe})}return ot}function z(){o(null)}function H(){var ot;if(!(n!=null&&n.user))return;let Te=`${Dt}/user/${(ot=n==null?void 0:n.user)==null?void 0:ot.username}/`,Fe={"Content-Type":"application/json"};Fe=Tr(Fe),fetch(Te,{headers:Fe,method:"DELETE"}).then(function(Je){Je.ok&&Je.json().then(Le=>{e.splice(n==null?void 0:n.index,1),t([...e]),o(null)})})}function se(){let Te={_new:!0,scope:E.READ_ONLY};e.push(Te),t([...e])}function he(Te,Fe){function ot(Je){e.splice(Fe,1),t([...e])}return ot}function pe(Te,Fe){function ot(Je){let Le=Je.target;Le.options[Le.selectedIndex].value,Te.scope=JSON.parse(Je.target.value),e[Fe]=Te,t(e)}return ot}function ge(Te){function Fe(ot){ot.target.setCustomValidity(Te)}return Fe}function ke(Te,Fe){function ot(Je){Te._newPassword=Je.target.value,Je.target.value&&ge("")(Je)}return ot}function be(Te,Fe){function ot(Je){Te.username=Je.target.value,Je.target.value&&ge("")(Je)}return ot}function Ue(Te,Fe){function ot(Je){Te.name=Je.target.value,Je.target.value&&ge("")(Je)}return ot}function it(){return s?S("tr",{children:S("td",{colSpan:5,children:te("div",{className:"compound justify-start",children:[S(st,{name:"hourglass",className:"align-middle lg ml-12 mr-2"}),S("h5",{className:"py-0 my-0",children:"Loading..."})]})})}):e.map((Te,Fe)=>te("tr",{className:"border-b-[1px] border-color-text",children:[S("td",{className:"w-48",children:Te._edit||Te._new?S(Wn,{children:S("input",{type:"text",defaultValue:Te.name,className:"w-full",required:!0,onInput:Ue(Te),onInvalid:ge("Please enter the user's full name")})}):Te.name}),S("td",{className:"text-center w-32",children:Te._edit||Te._new?S(Wn,{children:S("input",{type:"text",defaultValue:Te.email,className:"w-full",required:!0,onChange:be(Te),onInvalid:ge("Please enter the user's email address (used as username)")})}):Te.email}),S("td",{className:"text-center w-48",children:te("div",{className:"relative",children:[Te._passwordReset?S("div",{className:"tooltip-box copied-tooltip-box animate-fade opacity-0 mt-[-1.7rem] absolute",children:"Password Reset."}):null,Te._new?S("input",{type:"password",className:"w-full",required:!0,onChange:ke(Te),onInvalid:ge("Please enter a password")}):Te._setPassword?S(Wn,{children:te("div",{className:"compound",children:[S("input",{type:"password",className:"w-7/12",required:!0,onInput:ke(Te),onInvalid:ge("Please enter a password")}),S(st,{name:"check",className:"icon btn bordered",onClick:F(Te,Fe)}),S(st,{name:"x",className:"icon btn bordered",onClick:N(Te,Fe)})]})}):te(Wn,{children:["",S("button",{onClick:M(Te,Fe),className:"ml-4",children:"Reset"})]})]})},JSON.stringify(Object.values(Te))),S("td",{className:"text-center",children:te("select",{defaultValue:JSON.stringify(Te.scope),onChange:pe(Te,Fe),children:[S("option",{value:JSON.stringify(E.READ_ONLY),children:"Read-Only"}),S("option",{value:JSON.stringify(E.READ_WRITE),children:"Read/Write"}),S("option",{value:JSON.stringify(E.PUBLISHER),children:"Publisher"}),S("option",{value:JSON.stringify(E.ADMIN),children:"Admin"})]})}),S("td",{className:"text-right",children:te("div",{className:"compound",children:[te("div",{className:"relative",children:[Te._saved?S("div",{className:"tooltip-box copied-tooltip-box animate-fade opacity-0 mt-[-1.7rem] absolute",children:"Saved!"}):null,Te._new?S(st,{name:"save",className:"icon btn bordered",onClick:V(Te,Fe)}):S(st,{name:"save",className:"icon btn bordered",onClick:X(Te,Fe)})]}),Te._new?S(st,{name:"x",className:"icon btn bordered",onClick:he(Te,Fe)}):Te._edit?S(st,{name:"x",className:"icon btn bordered",onClick:Z(Te,Fe)}):S(st,{name:"pencil",className:"icon btn bordered",onClick:$(Te,Fe)}),Te._new?null:S(st,{name:"trash",className:"icon btn bordered",onClick:D(Te,Fe)})]})})]},JSON.stringify(Te)))}return te("div",{className:"w-full",children:[te(Yf,{visible:!!n,dismiss:z,header:"Confirm Deletion",footer:S(Wn,{children:te("div",{className:"flex justify-end w-full",children:[te("div",{className:"compound hover:bg-mauve-200 cursor-pointer rounded-lg p-1 border pr-2",onClick:z,children:[S(st,{name:"x"}),"Cancel"]}),te("div",{className:"compound hover:bg-mauve-200 cursor-pointer rounded-lg p-1 border pr-2 ml-4",onClick:H,children:[S(st,{name:"check"}),"Confirm Deletion"]})]})}),className:"w-3/12",children:[S("h4",{children:"Are You Sure?"}),te("div",{className:"mb-12",children:["Please confirm deletion for user:",S("br",{}),te("div",{className:"ml-4 mt-4",children:[n!=null&&n.user?n.user.name:null,"",te("span",{className:"monospace",children:["'",n!=null&&n.user?n.user.username:null,"'"]})]})]})]}),S("div",{className:"w-full lg:w-10/12 xl:w-10/12 mx-auto pt-6",children:te("fieldset",{className:"w-full",children:[te("div",{className:"m-2 w-full",children:[te("div",{className:"compound",children:[te("h4",{className:"compound justify-start pt-2 pb-0",onClick:()=>{w(!g)},children:[S(st,{name:"user-cog",className:"icon stroke-color-text align-middle inline lg"}),"User Settings"]}),g?S(st,{name:"chevron-down",className:"icon align-middle inline lg",onClick:()=>{w(!1)}}):S(st,{name:"chevron-left",className:"icon align-middle inline lg",onClick:()=>{w(!0)}})]}),S("span",{className:"tn-text",children:"Settings for user accounts for HTTP Basic Auth."})]}),g?S("div",{className:"flex flex-row",children:te("div",{className:"m-2 w-full",children:[S("form",{id:"table-form",children:S("table",{className:"table-auto w-full user-settings",children:te("tbody",{children:[te("tr",{className:"bg-tn-layer-2 rounded-lg border-b-[1px] border-color-text",children:[S("th",{className:"pb-0",children:te("span",{className:"compound inline-flex items-center",children:[S(st,{name:"circle-user",className:"icon sm stroke-color-text"}),"Name"]})}),S("th",{className:"pb-0",children:te("span",{className:"compound inline-flex items-center",children:[S(st,{name:"mail",className:"icon sm stroke-color-text"}),"Username"]})}),S("th",{className:"pb-0",children:te("span",{className:"compound inline-flex items-center",children:[S(st,{name:"key-round",className:"icon sm stroke-color-text"}),"Password"]})}),S("th",{className:"pb-0",children:te("span",{className:"compound inline-flex items-center",children:[S(st,{name:"user-cog",className:"icon sm stroke-color-text"}),"Role"]})}),S("th",{className:"pb-0",children:te("span",{className:"compound inline-flex items-center",children:[S(st,{name:"file-edit",className:"icon sm stroke-color-text"}),"Actions"]})})]}),it()]})})}),S("div",{className:"flex justify-start",children:te("button",{className:"btn compound mt-4 mr-3 primary",onClick:se,children:[S(st,{name:"plus",className:"sm mr-1 ml-[-0.5rem] p-1"})," ","Add User"]})})]})}):null]})})]})}function v$(){const[e,t]=J.useState([]),[n,o]=J.useState(!1),[s,f]=J.useState(!1),[g,w]=J.useState(!0),[y,E]=J.useState(!1),M=!!Yk&&Yk==="dynamic";async function N(){let he=`${Dt}/sheets/credentials/?limit=9999`,pe={"Content-Type":"application/json"};pe=Tr(pe),fetch(he,{headers:pe,method:"GET"}).then(function(ge){ge.ok&&ge.json().then(ke=>{w(!1),t(ke)})})}J.useEffect(()=>{N()},[]);function R(){o(!1)}function F(){o(!1)}function $(){o(!0)}function V(he){he.preventDefault()}function X(){f(!0)}function Z(){f(!1)}function D(he){return te("fieldset",{className:"main-page-panel w-12/12",children:[te("div",{className:"text-sm text-white bg-esnetblack-50 rounded-lg mt-4 px-4 py-2 mb-2",children:["Access Token",te("h4",{className:"compound justify-start py-0 text-white",children:[S(st,{name:"badge-plus",className:"icon md my-auto stroke-white ml-[-0.5rem]"}),he.project_id]})]}),S("div",{className:"tn-text text-right",children:S("label",{className:"mt-[-0.5rem] mb-[-0.5rem]",children:"Sheets Data is cached hourly"})}),te("div",{children:[S("label",{children:"Project ID"}),S("input",{type:"text",className:"w-full",value:he.project_id,disabled:!0})]}),te("div",{children:[S("label",{children:"Client Email"}),S("input",{type:"text",className:"w-full",value:he.client_email,disabled:!0})]}),te("div",{children:[S("label",{children:"Token URI"}),S("input",{type:"text",className:"w-full",value:he.auth_uri,disabled:!0})]}),te("div",{children:[S("label",{children:"Private Key"}),S("input",{type:"text",className:"w-full",value:" (configured)",disabled:!0})]}),M?te("div",{className:"compound justify-end mt-6 mb-0",children:[S("button",{className:"btn primary",onClick:$,children:"Reconfigure JWT"}),S("button",{className:"btn warning ml-4",onClick:X,children:"Delete"})]}):null]},he.project_id)}function z(){return e.map(he=>D(he))}return te("div",{className:"w-full",children:[te(Yf,{visible:n,dismiss:R,header:"Add JWT",footer:S(Wn,{children:te("div",{className:"flex justify-end w-full",children:[te("div",{className:"compound hover:bg-mauve-200 cursor-pointer rounded-lg p-1 border pr-2",onClick:R,children:[S(st,{name:"x"}),"Cancel"]}),te("div",{className:"compound hover:bg-mauve-200 cursor-pointer rounded-lg p-1 border pr-2 ml-4",onClick:F,children:[S(st,{name:"check"}),"Add JWT"]})]})}),className:"w-3/12",children:[S("h4",{children:"JWT"}),S("div",{className:"mb-12",children:S("textarea",{name:"JWT"})})]}),te(Yf,{visible:s,dismiss:Z,header:"Delete Sheets Datasource",footer:S(Wn,{children:te("div",{className:"flex justify-end w-full",children:[te("div",{className:"compound hover:bg-mauve-200 cursor-pointer rounded-lg p-1 border pr-2",onClick:Z,children:[S(st,{name:"x"}),"Cancel"]}),te("div",{className:"compound hover:bg-mauve-200 cursor-pointer rounded-lg p-1 border pr-2 ml-4",onClick:X,children:[S(st,{name:"check"}),"Delete Datasource Forever"]})]})}),className:"w-3/12",children:[S("h4",{children:"Delete Datasource"}),S("div",{className:"mb-12",children:"Datasource 'Mocked Network Traffic' will be permanently deleted."})]}),S("div",{className:"w-full lg:w-10/12 xl:w-10/12 mx-auto pt-6",children:te("fieldset",{className:"w-full",children:[te("div",{className:"m-2 w-full",children:[te("div",{className:"compound",children:[te("h4",{className:"compound justify-start pt-2 pb-0",onClick:()=>{E(!y)},children:[S(st,{name:"file-spreadsheet",className:"icon stroke-color-text align-middle inline lg"}),"Google Sheets Access Tokens"]}),y?S(st,{name:"chevron-down",className:"icon align-middle inline lg",onClick:()=>{E(!1)}}):S(st,{name:"chevron-left",className:"icon align-middle inline lg",onClick:()=>{E(!0)}})]}),te("span",{className:"tn-text",children:["Manage Access Tokens for Google Sheets."," ",te("label",{children:["A datasource will be configured for each Sheet that conforms to the"," ",S("a",{href:"https://docs.google.com/spreadsheets/d/191BuMoWa2CooMXJQzyNtBRlNLHamBmh-8PCoIGDELxA/edit",target:"_new",children:"Terranova Topology Format"}),". Sheets will be cached hourly."]})]})]}),y?S("div",{className:"flex flex-row",children:S("div",{className:"m-2 w-full",children:S("form",{id:"sheets-datasources-form",onSubmit:V,children:te("div",{className:"grid grid-cols-2",children:[z(),M?te("fieldset",{className:"mt-4 mr-3 primary main-page-panel bg-esnetwhite-50",onClick:$,children:[te("h5",{className:"compound justify-start w-full pb-1",children:[S(st,{name:"plus",className:"sm mr-1 ml-[-0.5rem] p-1"}),"Add Google Sheets Datasource"]}),S("div",{className:"tn-text",children:"Using JWT Token"})]}):null]})})})}):null]})})]})}function _$(){return te("main",{className:"main-content",children:[S("div",{className:"main-content-header m-2 compound",children:te("div",{className:"flex flex-row",children:[S("div",{className:"icon sm mr-2",children:S(st,{name:"lucide-settings",className:"stroke-white -mt-[0.125rem] -ml-[0.125rem]"})}),"Settings"]})}),te("div",{className:" bg-transparent border-none",children:[uo=="basic"?S(g$,{}):null,S(v$,{})]})]})}function y$(){const e=F9([{path:"/",element:S(_U,{}),errorElement:S(m$,{}),children:[{path:"/",element:S(Cl,{children:S(yU,{})})},{path:"map/new/",element:S(Cl,{children:S(BB,{})})},{path:"map/:mapId/",element:S(Cl,{children:S(RB,{})})},{path:"template/new",element:S(Cl,{children:S(g5,{})})},{path:"template/:templateId",element:S(Cl,{children:S(g5,{})})},{path:"dataset/new/",element:S(Cl,{children:S(qB,{})})},{path:"/dataset/:datasetId",element:S(Cl,{children:S(r$,{})})},{path:"/library/:datatype",element:S(Cl,{children:S(WB,{})})},{path:"/settings",element:S(Cl,{children:S(_$,{})})},{path:"logout",element:S(op,{doLogout:!0,message:"Logging out..."})},{path:"login",element:S(op,{next:"/"})}]}]);return S(Wn,{children:S("div",{className:"App",children:S(YD,{...Y9,children:S(QD,{children:S(q9,{router:e})})})})})}WS.createRoot(document.getElementById("root")).render(S(J.StrictMode,{children:S(y$,{})}))});export default w$();
//# sourceMappingURL=index-b7b25709.js.map
